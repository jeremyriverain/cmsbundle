(function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=3)})([function(e,t){var n=Math.ceil,o=Math.max,i=String.fromCharCode,a,r;/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */(function(t,n){'use strict';'object'==typeof e&&'object'==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error('jQuery requires a window with a document');return n(e)}:n(t)})('undefined'==typeof window?this:window,function(l,s){'use strict';function d(e,t,n){t=t||ue;var o=t.createElement('script'),a;if(o.text=e,n)for(a in Ae)n[a]&&(o[a]=n[a]);t.head.appendChild(o).parentNode.removeChild(o)}function c(e){return null==e?e+'':'object'==typeof e||'function'==typeof e?ye[ve.call(e)]||'object':typeof e}function p(e){var t=!!e&&'length'in e&&e.length,n=c(e);return Ce(e)||Te(e)?!1:'array'===n||0===t||'number'==typeof t&&0<t&&t-1 in e}function u(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function m(e,t,n){return Ce(t)?Pe.grep(e,function(e,o){return!!t.call(e,o,e)!==n}):t.nodeType?Pe.grep(e,function(e){return e===t!==n}):'string'==typeof t?Pe.filter(t,e,n):Pe.grep(e,function(e){return-1<be.call(t,e)!==n})}function g(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function h(e){var t={};return Pe.each(e.match(qe)||[],function(e,n){t[n]=!0}),t}function f(e){return e}function b(e){throw e}function y(e,t,n,o){var i;try{e&&Ce(i=e.promise)?i.call(e).done(t).fail(n):e&&Ce(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(o))}catch(e){n.apply(void 0,[e])}}function v(){ue.removeEventListener('DOMContentLoaded',v),l.removeEventListener('load',v),Pe.ready()}function w(e,t){return t.toUpperCase()}function _(e){return e.replace(We,'ms-').replace($e,w)}function x(){this.expando=Pe.expando+x.uid++}function k(e){return'true'===e||'false'!==e&&('null'===e?null:e===+e+''?+e:Qe.test(e)?JSON.parse(e):e)}function C(e,t,n){var o;if(void 0===n&&1===e.nodeType)if(o='data-'+t.replace(Ke,'-$&').toLowerCase(),n=e.getAttribute(o),'string'==typeof n){try{n=k(n)}catch(t){}Ye.set(e,t,n)}else n=void 0;return n}function T(e,t,n,o){var i=20,a=o?function(){return o.cur()}:function(){return Pe.css(e,t,'')},r=a(),s=n&&n[3]||(Pe.cssNumber[t]?'':'px'),l=(Pe.cssNumber[t]||'px'!==s&&+r)&&Je.exec(Pe.css(e,t)),d,c;if(l&&l[3]!==s){for(r/=2,s=s||l[3],l=+r||1;i--;)Pe.style(e,t,l+s),0>=(1-c)*(1-(c=a()/r||0.5))&&(i=0),l/=c;l*=2,Pe.style(e,t,l+s),n=n||[]}return n&&(l=+l||+r||0,d=n[1]?l+(n[1]+1)*n[2]:+n[2],o&&(o.unit=s,o.start=l,o.end=d)),d}function A(e){var t=e.ownerDocument,n=e.nodeName,o=nt[n],i;return o?o:(i=t.body.appendChild(t.createElement(n)),o=Pe.css(i,'display'),i.parentNode.removeChild(i),'none'===o&&(o='block'),nt[n]=o,o)}function S(e,t){for(var n=[],o=0,i=e.length,a,r;o<i;o++)(r=e[o],!!r.style)&&(a=r.style.display,t?('none'===a&&(n[o]=Ue.get(r,'display')||null,!n[o]&&(r.style.display='')),''===r.style.display&&et(r)&&(n[o]=A(r))):'none'!==a&&(n[o]='none',Ue.set(r,'display',a)));for(o=0;o<i;o++)null!=n[o]&&(e[o].style.display=n[o]);return e}function P(e,t){var n;return n='undefined'==typeof e.getElementsByTagName?'undefined'==typeof e.querySelectorAll?[]:e.querySelectorAll(t||'*'):e.getElementsByTagName(t||'*'),void 0===t||t&&u(e,t)?Pe.merge([e],n):n}function E(e,t){for(var n=0,o=e.length;n<o;n++)Ue.set(e[n],'globalEval',!t||Ue.get(t[n],'globalEval'))}function O(e,t,n,o,a){for(var r=t.createDocumentFragment(),s=[],d=0,i=e.length,l,p,u,m,g,h;d<i;d++)if(l=e[d],l||0===l)if('object'===c(l))Pe.merge(s,l.nodeType?[l]:l);else if(!st.test(l))s.push(t.createTextNode(l));else{for(p=p||r.appendChild(t.createElement('div')),u=(it.exec(l)||['',''])[1].toLowerCase(),m=rt[u]||rt._default,p.innerHTML=m[1]+Pe.htmlPrefilter(l)+m[2],h=m[0];h--;)p=p.lastChild;Pe.merge(s,p.childNodes),p=r.firstChild,p.textContent=''}for(r.textContent='',d=0;l=s[d++];){if(o&&-1<Pe.inArray(l,o)){a&&a.push(l);continue}if(g=Pe.contains(l.ownerDocument,l),p=P(r.appendChild(l),'script'),g&&E(p),n)for(h=0;l=p[h++];)at.test(l.type||'')&&n.push(l)}return r}function V(){return!0}function N(){return!1}function R(){try{return ue.activeElement}catch(e){}}function I(e,t,n,o,i,a){var r,s;if('object'==typeof t){for(s in'string'!=typeof n&&(o=o||n,n=void 0),t)I(e,s,n,o,t[s],a);return e}if(null==o&&null==i?(i=n,o=n=void 0):null==i&&('string'==typeof n?(i=o,o=void 0):(i=o,o=n,n=void 0)),!1===i)i=N;else if(!i)return e;return 1===a&&(r=i,i=function(e){return Pe().off(e),r.apply(this,arguments)},i.guid=r.guid||(r.guid=Pe.guid++)),e.each(function(){Pe.event.add(this,t,i,o,n)})}function D(e,t){return u(e,'table')&&u(11===t.nodeType?t.firstChild:t,'tr')?Pe(e).children('tbody')[0]||e:e}function F(e){return e.type=(null!==e.getAttribute('type'))+'/'+e.type,e}function M(e){return'true/'===(e.type||'').slice(0,5)?e.type=e.type.slice(5):e.removeAttribute('type'),e}function L(e,t){var n,o,i,a,r,s,l,d;if(1===t.nodeType){if(Ue.hasData(e)&&(a=Ue.access(e),r=Ue.set(t,a),d=a.events,d))for(i in delete r.handle,r.events={},d)for(n=0,o=d[i].length;n<o;n++)Pe.event.add(t,i,d[i][n]);Ye.hasData(e)&&(s=Ye.access(e),l=Pe.extend({},s),Ye.set(t,l))}}function B(e,t){var n=t.nodeName.toLowerCase();'input'===n&&ot.test(e.type)?t.checked=e.checked:('input'===n||'textarea'===n)&&(t.defaultValue=e.defaultValue)}function q(e,t,n,o){t=he.apply([],t);var a=0,i=e.length,r=t[0],s=Ce(r),l,c,p,u,m,g;if(s||1<i&&'string'==typeof r&&!ke.checkClone&&gt.test(r))return e.each(function(i){var a=e.eq(i);s&&(t[0]=r.call(this,i,a.html())),q(a,t,n,o)});if(i&&(l=O(t,e[0].ownerDocument,!1,e,o),c=l.firstChild,1===l.childNodes.length&&(l=c),c||o)){for(p=Pe.map(P(l,'script'),F),u=p.length;a<i;a++)m=l,a!=i-1&&(m=Pe.clone(m,!0,!0),u&&Pe.merge(p,P(m,'script'))),n.call(e[a],m,a);if(u)for(g=p[p.length-1].ownerDocument,Pe.map(p,M),a=0;a<u;a++)m=p[a],at.test(m.type||'')&&!Ue.access(m,'globalEval')&&Pe.contains(g,m)&&(m.src&&'module'!==(m.type||'').toLowerCase()?Pe._evalUrl&&Pe._evalUrl(m.src):d(m.textContent.replace(ht,''),g,m))}return e}function j(e,t,n){for(var o=t?Pe.filter(t,e):e,a=0,i;null!=(i=o[a]);a++)n||1!==i.nodeType||Pe.cleanData(P(i)),i.parentNode&&(n&&Pe.contains(i.ownerDocument,i)&&E(P(i,'script')),i.parentNode.removeChild(i));return e}function H(e,t,n){var o=e.style,i,a,r,s;return n=n||bt(e),n&&(s=n.getPropertyValue(t)||n[t],''===s&&!Pe.contains(e.ownerDocument,e)&&(s=Pe.style(e,t)),!ke.pixelBoxStyles()&&ft.test(s)&&yt.test(t)&&(i=o.width,a=o.minWidth,r=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=n.width,o.width=i,o.minWidth=a,o.maxWidth=r)),void 0===s?s:s+''}function z(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function W(e){if(e in Ct)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=kt.length;n--;)if(e=kt[n]+t,e in Ct)return e}function $(e){var t=Pe.cssProps[e];return t||(t=Pe.cssProps[e]=W(e)||e),t}function X(e,t,n){var i=Je.exec(t);return i?o(0,i[2]-(n||0))+(i[3]||'px'):t}function U(e,t,a,r,s,l){var d='width'===t?1:0,i=0,c=0;if(a===(r?'border':'content'))return 0;for(;4>d;d+=2)'margin'===a&&(c+=Pe.css(e,a+Ze[d],!0,s)),r?('content'===a&&(c-=Pe.css(e,'padding'+Ze[d],!0,s)),'margin'!==a&&(c-=Pe.css(e,'border'+Ze[d]+'Width',!0,s))):(c+=Pe.css(e,'padding'+Ze[d],!0,s),'padding'===a?i+=Pe.css(e,'border'+Ze[d]+'Width',!0,s):c+=Pe.css(e,'border'+Ze[d]+'Width',!0,s));return!r&&0<=l&&(c+=o(0,n(e['offset'+t[0].toUpperCase()+t.slice(1)]-l-c-i-0.5))),c}function Y(e,t,n){var o=bt(e),i=H(e,t,o),a='border-box'===Pe.css(e,'boxSizing',!1,o),r=a;if(ft.test(i)){if(!n)return i;i='auto'}return r=r&&(ke.boxSizingReliable()||i===e.style[t]),'auto'!==i&&(parseFloat(i)||'inline'!==Pe.css(e,'display',!1,o))||(i=e['offset'+t[0].toUpperCase()+t.slice(1)],r=!0),i=parseFloat(i)||0,i+U(e,t,n||(a?'border':'content'),r,o,i)+'px'}function Q(e,t,n,o,i){return new Q.prototype.init(e,t,n,o,i)}function K(){Pt&&(!1===ue.hidden&&l.requestAnimationFrame?l.requestAnimationFrame(K):l.setTimeout(K,Pe.fx.interval),Pe.fx.tick())}function G(){return l.setTimeout(function(){St=void 0}),St=Date.now()}function J(e,t){var n=0,o={height:e},i;for(t=t?1:0;4>n;n+=2-t)i=Ze[n],o['margin'+i]=o['padding'+i]=e;return t&&(o.opacity=o.width=e),o}function Z(e,t,n){for(var o=(te.tweeners[t]||[]).concat(te.tweeners['*']),i=0,a=o.length,r;i<a;i++)if(r=o[i].call(n,t,e))return r}function ee(e,t){var n,o,i,a,r;for(n in e)if(o=_(n),i=t[o],a=e[n],Array.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==o&&(e[o]=a,delete e[n]),r=Pe.cssHooks[o],r&&'expand'in r)for(n in a=r.expand(a),delete e[o],a)n in e||(e[n]=a[n],t[n]=i);else t[o]=i}function te(e,t,n){var i=0,a=te.prefilters.length,r=Pe.Deferred().always(function(){delete s.elem}),s=function(){if(p)return!1;for(var t=St||G(),n=o(0,l.startTime+l.duration-t),i=n/l.duration||0,a=1-i,s=0,d=l.tweens.length;s<d;s++)l.tweens[s].run(a);return(r.notifyWith(e,[l,a,n]),1>a&&d)?n:(d||r.notifyWith(e,[l,1,0]),r.resolveWith(e,[l]),!1)},l=r.promise({elem:e,props:Pe.extend({},t),opts:Pe.extend(!0,{specialEasing:{},easing:Pe.easing._default},n),originalProperties:t,originalOptions:n,startTime:St||G(),duration:n.duration,tweens:[],createTween:function(t,n){var o=Pe.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(o),o},stop:function(t){var n=0,o=t?l.tweens.length:0;if(p)return this;for(p=!0;n<o;n++)l.tweens[n].run(1);return t?(r.notifyWith(e,[l,1,0]),r.resolveWith(e,[l,t])):r.rejectWith(e,[l,t]),this}}),d=l.props,c,p;for(ee(d,l.opts.specialEasing);i<a;i++)if(c=te.prefilters[i].call(l,e,d,l.opts),c)return Ce(c.stop)&&(Pe._queueHooks(l.elem,l.opts.queue).stop=c.stop.bind(c)),c;return Pe.map(d,Z,l),Ce(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),Pe.fx.timer(Pe.extend(s,{elem:e,anim:l,queue:l.opts.queue})),l}function ne(e){var t=e.match(qe)||[];return t.join(' ')}function oe(e){return e.getAttribute&&e.getAttribute('class')||''}function ie(e){return Array.isArray(e)?e:'string'==typeof e?e.match(qe)||[]:[]}function ae(e,t,n,o){if(Array.isArray(t))Pe.each(t,function(t,i){n||Bt.test(e)?o(e,i):ae(e+'['+('object'==typeof i&&null!=i?t:'')+']',i,n,o)});else if(!n&&'object'===c(t))for(var i in t)ae(e+'['+i+']',t[i],n,o);else o(e,t)}function re(e){return function(t,n){'string'!=typeof t&&(n=t,t='*');var o=0,i=t.toLowerCase().match(qe)||[],a;if(Ce(n))for(;a=i[o++];)'+'===a[0]?(a=a.slice(1)||'*',(e[a]=e[a]||[]).unshift(n)):(e[a]=e[a]||[]).push(n)}}function se(e,t,n,o){function i(s){var l;return a[s]=!0,Pe.each(e[s]||[],function(e,s){var d=s(t,n,o);return'string'!=typeof d||r||a[d]?r?!(l=d):void 0:(t.dataTypes.unshift(d),i(d),!1)}),l}var a={},r=e===Gt;return i(t.dataTypes[0])||!a['*']&&i('*')}function le(e,t){var n=Pe.ajaxSettings.flatOptions||{},o,i;for(o in t)void 0!==t[o]&&((n[o]?e:i||(i={}))[o]=t[o]);return i&&Pe.extend(!0,e,i),e}function de(e,t,n){for(var o=e.contents,i=e.dataTypes,a,r,s,l;'*'===i[0];)i.shift(),void 0==a&&(a=e.mimeType||t.getResponseHeader('Content-Type'));if(a)for(r in o)if(o[r]&&o[r].test(a)){i.unshift(r);break}if(i[0]in n)s=i[0];else{for(r in n){if(!i[0]||e.converters[r+' '+i[0]]){s=r;break}l||(l=r)}s=s||l}return s?(s!==i[0]&&i.unshift(s),n[s]):void 0}function ce(e,t,n,o){var i={},a=e.dataTypes.slice(),r,s,l,d,c;if(a[1])for(l in e.converters)i[l.toLowerCase()]=e.converters[l];for(s=a.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!c&&o&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=s,s=a.shift(),s)if('*'===s)s=c;else if('*'!==c&&c!==s){if(l=i[c+' '+s]||i['* '+s],!l)for(r in i)if(d=r.split(' '),d[1]===s&&(l=i[c+' '+d[0]]||i['* '+d[0]],l)){!0===l?l=i[r]:!0!==i[r]&&(s=d[0],a.unshift(d[1]));break}if(!0!==l)if(l&&e.throws)t=l(t);else try{t=l(t)}catch(t){return{state:'parsererror',error:l?t:'No conversion from '+c+' to '+s}}}return{state:'success',data:t}}var pe=[],ue=l.document,me=Object.getPrototypeOf,ge=pe.slice,he=pe.concat,fe=pe.push,be=pe.indexOf,ye={},ve=ye.toString,we=ye.hasOwnProperty,_e=we.toString,xe=_e.call(Object),ke={},Ce=function(e){return'function'==typeof e&&'number'!=typeof e.nodeType},Te=function(e){return null!=e&&e===e.window},Ae={type:!0,src:!0,noModule:!0},Se='3.3.1',Pe=function(e,t){return new Pe.fn.init(e,t)},Ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;Pe.fn=Pe.prototype={jquery:Se,constructor:Pe,length:0,toArray:function(){return ge.call(this)},get:function(e){return null==e?ge.call(this):0>e?this[e+this.length]:this[e]},pushStack:function(e){var t=Pe.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return Pe.each(this,e)},map:function(e){return this.pushStack(Pe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(ge.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:fe,sort:pe.sort,splice:pe.splice},Pe.extend=Pe.fn.extend=function(){var e=arguments[0]||{},t=1,n=arguments.length,o=!1,i,a,r,s,l,d;for('boolean'==typeof e&&(o=e,e=arguments[t]||{},t++),'object'==typeof e||Ce(e)||(e={}),t===n&&(e=this,t--);t<n;t++)if(null!=(i=arguments[t]))for(a in i)(r=e[a],s=i[a],e!==s)&&(o&&s&&(Pe.isPlainObject(s)||(l=Array.isArray(s)))?(l?(l=!1,d=r&&Array.isArray(r)?r:[]):d=r&&Pe.isPlainObject(r)?r:{},e[a]=Pe.extend(o,d,s)):void 0!==s&&(e[a]=s));return e},Pe.extend({expando:'jQuery'+(Se+Math.random()).replace(/\D/g,''),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return e&&'[object Object]'===ve.call(e)&&((t=me(e),!!!t)||(n=we.call(t,'constructor')&&t.constructor,'function'==typeof n&&_e.call(n)===xe))},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e){d(e)},each:function(e,t){var n=0,o;if(p(e))for(o=e.length;n<o&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?'':(e+'').replace(Ee,'')},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?Pe.merge(n,'string'==typeof e?[e]:e):fe.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:be.call(t,e,n)},merge:function(e,t){for(var n=+t.length,o=0,a=e.length;o<n;o++)e[a++]=t[o];return e.length=a,e},grep:function(e,t,n){for(var o=[],a=0,i=e.length,r;a<i;a++)r=!t(e[a],a),r!==!n&&o.push(e[a]);return o},map:function(e,t,n){var o=0,i=[],a,r;if(p(e))for(a=e.length;o<a;o++)r=t(e[o],o,n),null!=r&&i.push(r);else for(o in e)r=t(e[o],o,n),null!=r&&i.push(r);return he.apply([],i)},guid:1,support:ke}),'function'==typeof Symbol&&(Pe.fn[Symbol.iterator]=pe[Symbol.iterator]),Pe.each(['Boolean','Number','String','Function','Array','Date','RegExp','Object','Error','Symbol'],function(e,t){ye['[object '+t+']']=t.toLowerCase()});var Oe=/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */function(e){function t(e,t,n,o){var a=t&&t.ownerDocument,r=t?t.nodeType:9,s,l,i,d,c,p,m;if(n=n||[],'string'!=typeof e||!e||1!==r&&9!==r&&11!==r)return n;if(!o&&((t?t.ownerDocument||t:k)!==fe&&he(t),t=t||fe,ye)){if(11!==r&&(c=G.exec(e)))if(!(s=c[1])){if(c[2])return I.apply(n,t.getElementsByTagName(e)),n;if((s=c[3])&&re.getElementsByClassName&&t.getElementsByClassName)return I.apply(n,t.getElementsByClassName(s)),n}else if(9===r){if(!(i=t.getElementById(s)))return n;if(i.id===s)return n.push(i),n}else if(a&&(i=a.getElementById(s))&&xe(t,i)&&i.id===s)return n.push(i),n;if(re.qsa&&!P[e+' ']&&(!ve||!ve.test(e))){if(1!==r)a=t,m=e;else if('object'!==t.nodeName.toLowerCase()){for((d=t.getAttribute('id'))?d=d.replace(te,ne):t.setAttribute('id',d=x),p=de(e),l=p.length;l--;)p[l]='#'+d+' '+g(p[l]);m=p.join(','),a=J.test(e)&&u(t.parentNode)||t}if(m)try{return I.apply(n,a.querySelectorAll(m)),n}catch(e){}finally{d===x&&t.removeAttribute('id')}}}return pe(e.replace(H,'$1'),t,n,o)}function n(){function e(n,o){return t.push(n+' ')>se.cacheLength&&delete e[t.shift()],e[n+' ']=o}var t=[];return e}function o(e){return e[x]=!0,e}function a(e){var t=fe.createElement('fieldset');try{return!!e(t)}catch(t){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var n=e.split('|'),o=n.length;o--;)se.attrHandle[n[o]]=t}function s(e,t){var n=t&&e,o=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(o)return o;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function l(e){return function(t){var n=t.nodeName.toLowerCase();return'input'===n&&t.type===e}}function d(e){return function(t){var n=t.nodeName.toLowerCase();return('input'===n||'button'===n)&&t.type===e}}function c(e){return function(t){return'form'in t?t.parentNode&&!1===t.disabled?'label'in t?'label'in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:!!('label'in t)&&t.disabled===e}}function p(e){return o(function(t){return t=+t,o(function(n,o){for(var a=e([],n.length,t),r=a.length,i;r--;)n[i=a[r]]&&(n[i]=!(o[i]=n[i]))})})}function u(e){return e&&'undefined'!=typeof e.getElementsByTagName&&e}function m(){}function g(e){for(var t=0,n=e.length,o='';t<n;t++)o+=e[t].value;return o}function h(e,t,n){var o=t.dir,i=t.next,a=i||o,r=n&&'parentNode'===a,s=T++;return t.first?function(t,n,i){for(;t=t[o];)if(1===t.nodeType||r)return e(t,n,i);return!1}:function(t,n,l){var d=[C,s],c,p,u;if(l){for(;t=t[o];)if((1===t.nodeType||r)&&e(t,n,l))return!0;}else for(;t=t[o];)if(1===t.nodeType||r)if(u=t[x]||(t[x]={}),p=u[t.uniqueID]||(u[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[o]||t;else{if((c=p[a])&&c[0]===C&&c[1]===s)return d[2]=c[2];if(p[a]=d,d[2]=e(t,n,l))return!0}return!1}}function f(e){return 1<e.length?function(t,n,o){for(var a=e.length;a--;)if(!e[a](t,n,o))return!1;return!0}:e[0]}function b(e,n,o){for(var a=0,i=n.length;a<i;a++)t(e,n[a],o);return o}function y(e,t,n,o,a){for(var r=[],s=0,i=e.length,l;s<i;s++)(l=e[s])&&(!n||n(l,o,a))&&(r.push(l),null!=t&&t.push(s));return r}function v(e,t,n,a,r,i){return a&&!a[x]&&(a=v(a)),r&&!r[x]&&(r=v(r,i)),o(function(o,s,l,d){var c=[],p=[],u=s.length,m=o||b(t||'*',l.nodeType?[l]:l,[]),g=e&&(o||!t)?y(m,c,e,l,d):m,h=n?r||(o?e:u||a)?[]:s:g,f,v,i;if(n&&n(g,h,l,d),a)for(f=y(h,p),a(f,[],l,d),v=f.length;v--;)(i=f[v])&&(h[p[v]]=!(g[p[v]]=i));if(!o)h=y(h===s?h.splice(u,h.length):h),r?r(null,s,h,d):I.apply(s,h);else if(r||e){if(r){for(f=[],v=h.length;v--;)(i=h[v])&&f.push(g[v]=i);r(null,h=[],f,d)}for(v=h.length;v--;)(i=h[v])&&-1<(f=r?F(o,i):c[v])&&(o[f]=!(s[f]=i))}})}function w(e){for(var t=e.length,n=se.relative[e[0].type],o=n||se.relative[' '],a=n?1:0,i=h(function(e){return e===l},o,!0),r=h(function(e){return-1<F(l,e)},o,!0),s=[function(e,t,o){var a=!n&&(o||t!==ue)||((l=t).nodeType?i(e,t,o):r(e,t,o));return l=null,a}],l,d,c;a<t;a++)if(d=se.relative[e[a].type])s=[h(f(s),d)];else{if(d=se.filter[e[a].type].apply(null,e[a].matches),d[x]){for(c=++a;c<t&&!se.relative[e[c].type];c++);return v(1<a&&f(s),1<a&&g(e.slice(0,a-1).concat({value:' '===e[a-2].type?'*':''})).replace(H,'$1'),d,a<c&&w(e.slice(a,c)),c<t&&w(e=e.slice(c)),c<t&&g(e))}s.push(d)}return f(s)}function _(e,n){var a=0<n.length,r=0<e.length,i=function(o,s,l,d,c){var p=0,u='0',i=o&&[],m=[],g=ue,h=o||r&&se.find.TAG('*',c),f=C+=null==g?1:Math.random()||0.1,b=h.length,v,w,_;for(c&&(ue=s===fe||s||c);u!==b&&null!=(v=h[u]);u++){if(r&&v){for(w=0,s||v.ownerDocument===fe||(he(v),l=!ye);_=e[w++];)if(_(v,s||fe,l)){d.push(v);break}c&&(C=f)}a&&((v=!_&&v)&&p--,o&&i.push(v))}if(p+=u,a&&u!==p){for(w=0;_=n[w++];)_(i,m,s,l);if(o){if(0<p)for(;u--;)i[u]||m[u]||(m[u]=N.call(d));m=y(m)}I.apply(d,m),c&&!o&&0<m.length&&1<p+n.length&&t.uniqueSort(d)}return c&&(C=f,ue=g),i};return a?o(i):i}var x='sizzle'+1*new Date,k=e.document,C=0,T=0,A=n(),S=n(),P=n(),E=function(e,t){return e===t&&(ge=!0),0},O={}.hasOwnProperty,V=[],N=V.pop,R=V.push,I=V.push,D=V.slice,F=function(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},M='checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped',L='[\\x20\\t\\r\\n\\f]',B='(?:\\\\.|[\\w-]|[^\0-\\xa0])+',q=/[\x20\t\r\n\f]+/g,H=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,j=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,z=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,W=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,$=/:((?:\\.|[\w-]|[^ -\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^ -\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^ -\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,X=/^(?:\\.|[\w-]|[^ -\xa0])+$/,U={ID:/^#((?:\\.|[\w-]|[^ -\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^ -\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^ -\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^ -\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^ -\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^ -\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^ -\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^ -\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},Y=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Z=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,ee=function(e,t,n){var o='0x'+t-65536;return o!=o||n?t:0>o?i(o+65536):i(55296|o>>10,56320|1023&o)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?'\0'===e?'\uFFFD':e.slice(0,-1)+'\\'+e.charCodeAt(e.length-1).toString(16)+' ':'\\'+e},oe=function(){he()},ie=h(function(e){return!0===e.disabled&&('form'in e||'label'in e)},{dir:'parentNode',next:'legend'}),ae,re,se,le,i,de,ce,pe,ue,me,ge,he,fe,be,ye,ve,we,_e,xe;try{I.apply(V=D.call(k.childNodes),k.childNodes),V[k.childNodes.length].nodeType}catch(t){I={apply:V.length?function(e,t){R.apply(e,D.call(t))}:function(e,t){for(var n=e.length,o=0;e[n++]=t[o++];);e.length=n-1}}}for(ae in re=t.support={},i=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&'HTML'!==t.nodeName},he=t.setDocument=function(e){var t=e?e.ownerDocument||e:k,n,o;return t!==fe&&9===t.nodeType&&t.documentElement?(fe=t,be=fe.documentElement,ye=!i(fe),k!==fe&&(o=fe.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener('unload',oe,!1):o.attachEvent&&o.attachEvent('onunload',oe)),re.attributes=a(function(e){return e.className='i',!e.getAttribute('className')}),re.getElementsByTagName=a(function(e){return e.appendChild(fe.createComment('')),!e.getElementsByTagName('*').length}),re.getElementsByClassName=K.test(fe.getElementsByClassName),re.getById=a(function(e){return be.appendChild(e).id=x,!fe.getElementsByName||!fe.getElementsByName(x).length}),re.getById?(se.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute('id')===t}},se.find.ID=function(e,t){if('undefined'!=typeof t.getElementById&&ye){var n=t.getElementById(e);return n?[n]:[]}}):(se.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n='undefined'!=typeof e.getAttributeNode&&e.getAttributeNode('id');return n&&n.value===t}},se.find.ID=function(e,t){if('undefined'!=typeof t.getElementById&&ye){var n=t.getElementById(e),o,a,i;if(n){if(o=n.getAttributeNode('id'),o&&o.value===e)return[n];for(i=t.getElementsByName(e),a=0;n=i[a++];)if(o=n.getAttributeNode('id'),o&&o.value===e)return[n]}return[]}}),se.find.TAG=re.getElementsByTagName?function(e,t){return'undefined'==typeof t.getElementsByTagName?re.qsa?t.querySelectorAll(e):void 0:t.getElementsByTagName(e)}:function(e,t){var n=[],o=0,i=t.getElementsByTagName(e),a;if('*'===e){for(;a=i[o++];)1===a.nodeType&&n.push(a);return n}return i},se.find.CLASS=re.getElementsByClassName&&function(e,t){if('undefined'!=typeof t.getElementsByClassName&&ye)return t.getElementsByClassName(e)},we=[],ve=[],(re.qsa=K.test(fe.querySelectorAll))&&(a(function(e){be.appendChild(e).innerHTML='<a id=\''+x+'\'></a><select id=\''+x+'-\r\\\' msallowcapture=\'\'><option selected=\'\'></option></select>',e.querySelectorAll('[msallowcapture^=\'\']').length&&ve.push('[*^$]='+L+'*(?:\'\'|"")'),e.querySelectorAll('[selected]').length||ve.push('\\['+L+'*(?:value|'+M+')'),e.querySelectorAll('[id~='+x+'-]').length||ve.push('~='),e.querySelectorAll(':checked').length||ve.push(':checked'),e.querySelectorAll('a#'+x+'+*').length||ve.push('.#.+[+~]')}),a(function(e){e.innerHTML='<a href=\'\' disabled=\'disabled\'></a><select disabled=\'disabled\'><option/></select>';var t=fe.createElement('input');t.setAttribute('type','hidden'),e.appendChild(t).setAttribute('name','D'),e.querySelectorAll('[name=d]').length&&ve.push('name'+L+'*[*^$|!~]?='),2!==e.querySelectorAll(':enabled').length&&ve.push(':enabled',':disabled'),be.appendChild(e).disabled=!0,2!==e.querySelectorAll(':disabled').length&&ve.push(':enabled',':disabled'),e.querySelectorAll('*,:x'),ve.push(',.*:')})),(re.matchesSelector=K.test(_e=be.matches||be.webkitMatchesSelector||be.mozMatchesSelector||be.oMatchesSelector||be.msMatchesSelector))&&a(function(e){re.disconnectedMatch=_e.call(e,'*'),_e.call(e,'[s!=\'\']:x'),we.push('!=',':('+B+')(?:\\(((\'((?:\\\\.|[^\\\\\'])*)\'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|'+('\\['+L+'*('+B+')(?:'+L+'*([*^$|!~]?=)'+L+'*(?:\'((?:\\\\.|[^\\\\\'])*)\'|"((?:\\\\.|[^\\\\"])*)"|('+B+'))|)'+L+'*\\]')+')*)|.*)\\)|)')}),ve=ve.length&&new RegExp(ve.join('|')),we=we.length&&new RegExp(we.join('|')),n=K.test(be.compareDocumentPosition),xe=n||K.test(be.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,o=t&&t.parentNode;return e===o||!!(o&&1===o.nodeType&&(n.contains?n.contains(o):e.compareDocumentPosition&&16&e.compareDocumentPosition(o)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},E=n?function(e,t){if(e===t)return ge=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!re.sortDetached&&t.compareDocumentPosition(e)===n?e===fe||e.ownerDocument===k&&xe(k,e)?-1:t===fe||t.ownerDocument===k&&xe(k,t)?1:me?F(me,e)-F(me,t):0:4&n?-1:1)}:function(e,t){if(e===t)return ge=!0,0;var n=0,o=e.parentNode,i=t.parentNode,a=[e],r=[t],l;if(!o||!i)return e===fe?-1:t===fe?1:o?-1:i?1:me?F(me,e)-F(me,t):0;if(o===i)return s(e,t);for(l=e;l=l.parentNode;)a.unshift(l);for(l=t;l=l.parentNode;)r.unshift(l);for(;a[n]===r[n];)n++;return n?s(a[n],r[n]):a[n]===k?-1:r[n]===k?1:0},fe):fe},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==fe&&he(e),n=n.replace(W,'=\'$1\']'),re.matchesSelector&&ye&&!P[n+' ']&&(!we||!we.test(n))&&(!ve||!ve.test(n)))try{var o=_e.call(e,n);if(o||re.disconnectedMatch||e.document&&11!==e.document.nodeType)return o}catch(t){}return 0<t(n,fe,null,[e]).length},t.contains=function(e,t){return(e.ownerDocument||e)!==fe&&he(e),xe(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==fe&&he(e);var n=se.attrHandle[t.toLowerCase()],o=n&&O.call(se.attrHandle,t.toLowerCase())?n(e,t,!ye):void 0;return void 0===o?re.attributes||!ye?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null:o},t.escape=function(e){return(e+'').replace(te,ne)},t.error=function(e){throw new Error('Syntax error, unrecognized expression: '+e)},t.uniqueSort=function(e){var t=[],n=0,o=0,i;if(ge=!re.detectDuplicates,me=!re.sortStable&&e.slice(0),e.sort(E),ge){for(;i=e[o++];)i===e[o]&&(n=t.push(o));for(;n--;)e.splice(t[n],1)}return me=null,e},le=t.getText=function(e){var t='',n=0,o=e.nodeType,i;if(!o)for(;i=e[n++];)t+=le(i);else if(1===o||9===o||11===o){if('string'==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)t+=le(e)}else if(3===o||4===o)return e.nodeValue;return t},se=t.selectors={cacheLength:50,createPseudo:o,match:U,attrHandle:{},find:{},relative:{">":{dir:'parentNode',first:!0}," ":{dir:'parentNode'},"+":{dir:'previousSibling',first:!0},"~":{dir:'previousSibling'}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||'').replace(Z,ee),'~='===e[2]&&(e[3]=' '+e[3]+' '),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),'nth'===e[1].slice(0,3)?(!e[3]&&t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*('even'===e[3]||'odd'===e[3])),e[5]=+(e[7]+e[8]||'odd'===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t=!e[6]&&e[2],n;return U.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||'':t&&$.test(t)&&(n=de(t,!0))&&(n=t.indexOf(')',t.length-n)-t.length)&&(e[0]=e[0].slice(0,n),e[2]=t.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return'*'===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=A[e+' '];return t||(t=new RegExp('(^|'+L+')'+e+'('+L+'|$)'))&&A(e,function(e){return t.test('string'==typeof e.className&&e.className||'undefined'!=typeof e.getAttribute&&e.getAttribute('class')||'')})},ATTR:function(e,n,o){return function(i){var a=t.attr(i,e);return null==a?'!='===n:!n||(a+='','='===n?a===o:'!='===n?a!==o:'^='===n?o&&0===a.indexOf(o):'*='===n?o&&-1<a.indexOf(o):'$='===n?o&&a.slice(-o.length)===o:'~='===n?-1<(' '+a.replace(q,' ')+' ').indexOf(o):'|='===n&&(a===o||a.slice(0,o.length+1)===o+'-'))}},CHILD:function(e,t,n,o,i){var a='nth'!==e.slice(0,3),r='last'!==e.slice(-4),s='of-type'===t;return 1===o&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var d=a==r?'previousSibling':'nextSibling',c=t.parentNode,p=s&&t.nodeName.toLowerCase(),u=!l&&!s,m=!1,g,h,f,b,y,v;if(c){if(a){for(;d;){for(b=t;b=b[d];)if(s?b.nodeName.toLowerCase()===p:1===b.nodeType)return!1;v=d='only'===e&&!v&&'nextSibling'}return!0}if(v=[r?c.firstChild:c.lastChild],r&&u){for(b=c,f=b[x]||(b[x]={}),h=f[b.uniqueID]||(f[b.uniqueID]={}),g=h[e]||[],y=g[0]===C&&g[1],m=y&&g[2],b=y&&c.childNodes[y];b=++y&&b&&b[d]||(m=y=0)||v.pop();)if(1===b.nodeType&&++m&&b===t){h[e]=[C,y,m];break}}else if(u&&(b=t,f=b[x]||(b[x]={}),h=f[b.uniqueID]||(f[b.uniqueID]={}),g=h[e]||[],y=g[0]===C&&g[1],m=y),!1===m)for(;(b=++y&&b&&b[d]||(m=y=0)||v.pop())&&!((s?b.nodeName.toLowerCase()===p:1===b.nodeType)&&++m&&(u&&(f=b[x]||(b[x]={}),h=f[b.uniqueID]||(f[b.uniqueID]={}),h[e]=[C,m]),b===t)););return m-=i,m===o||0==m%o&&0<=m/o}}},PSEUDO:function(e,n){var a=se.pseudos[e]||se.setFilters[e.toLowerCase()]||t.error('unsupported pseudo: '+e),i;return a[x]?a(n):1<a.length?(i=[e,e,'',n],se.setFilters.hasOwnProperty(e.toLowerCase())?o(function(e,t){for(var o=a(e,n),r=o.length,i;r--;)i=F(e,o[r]),e[i]=!(t[i]=o[r])}):function(e){return a(e,0,i)}):a}},pseudos:{not:o(function(e){var t=[],n=[],a=ce(e.replace(H,'$1'));return a[x]?o(function(e,t,n,o){for(var r=a(e,null,o,[]),s=e.length,i;s--;)(i=r[s])&&(e[s]=!(t[s]=i))}):function(e,o,i){return t[0]=e,a(t,null,i,n),t[0]=null,!n.pop()}}),has:o(function(e){return function(n){return 0<t(e,n).length}}),contains:o(function(e){return e=e.replace(Z,ee),function(t){return-1<(t.textContent||t.innerText||le(t)).indexOf(e)}}),lang:o(function(e){return X.test(e||'')||t.error('unsupported lang: '+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do if(n=ye?t.lang:t.getAttribute('xml:lang')||t.getAttribute('lang'))return n=n.toLowerCase(),n===e||0===n.indexOf(e+'-');while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===be},focus:function(e){return e===fe.activeElement&&(!fe.hasFocus||fe.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:c(!1),disabled:c(!0),checked:function(e){var t=e.nodeName.toLowerCase();return'input'===t&&!!e.checked||'option'===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(6>e.nodeType)return!1;return!0},parent:function(e){return!se.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return'input'===t&&'button'===e.type||'button'===t},text:function(e){var t;return'input'===e.nodeName.toLowerCase()&&'text'===e.type&&(null==(t=e.getAttribute('type'))||'text'===t.toLowerCase())},first:p(function(){return[0]}),last:p(function(e,t){return[t-1]}),eq:p(function(e,t,n){return[0>n?n+t:n]}),even:p(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:p(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:p(function(e,t,n){for(var o=0>n?n+t:n;0<=--o;)e.push(o);return e}),gt:p(function(e,t,n){for(var o=0>n?n+t:n;++o<t;)e.push(o);return e})}},se.pseudos.nth=se.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})se.pseudos[ae]=l(ae);for(ae in{submit:!0,reset:!0})se.pseudos[ae]=d(ae);return m.prototype=se.filters=se.pseudos,se.setFilters=new m,de=t.tokenize=function(e,n){var o=S[e+' '],i,a,r,s,l,d,c;if(o)return n?0:o.slice(0);for(l=e,d=[],c=se.preFilter;l;){for(s in(!i||(a=j.exec(l)))&&(a&&(l=l.slice(a[0].length)||l),d.push(r=[])),i=!1,(a=z.exec(l))&&(i=a.shift(),r.push({value:i,type:a[0].replace(H,' ')}),l=l.slice(i.length)),se.filter)(a=U[s].exec(l))&&(!c[s]||(a=c[s](a)))&&(i=a.shift(),r.push({value:i,type:s,matches:a}),l=l.slice(i.length));if(!i)break}return n?l.length:l?t.error(e):S(e,d).slice(0)},ce=t.compile=function(e,t){var n=[],o=[],a=P[e+' '],r;if(!a){for(t||(t=de(e)),r=t.length;r--;)a=w(t[r]),a[x]?n.push(a):o.push(a);a=P(e,_(o,n)),a.selector=e}return a},pe=t.select=function(e,t,n,o){var a='function'==typeof e&&e,r=!o&&de(e=a.selector||e),s,i,l,d,c;if(n=n||[],1===r.length){if(i=r[0]=r[0].slice(0),2<i.length&&'ID'===(l=i[0]).type&&9===t.nodeType&&ye&&se.relative[i[1].type]){if(t=(se.find.ID(l.matches[0].replace(Z,ee),t)||[])[0],!t)return n;a&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(s=U.needsContext.test(e)?0:i.length;s--&&(l=i[s],!se.relative[d=l.type]);)if((c=se.find[d])&&(o=c(l.matches[0].replace(Z,ee),J.test(i[0].type)&&u(t.parentNode)||t))){if(i.splice(s,1),e=o.length&&g(i),!e)return I.apply(n,o),n;break}}return(a||ce(e,r))(o,t,!ye,n,!t||J.test(e)&&u(t.parentNode)||t),n},re.sortStable=x.split('').sort(E).join('')===x,re.detectDuplicates=!!ge,he(),re.sortDetached=a(function(e){return 1&e.compareDocumentPosition(fe.createElement('fieldset'))}),a(function(e){return e.innerHTML='<a href=\'#\'></a>','#'===e.firstChild.getAttribute('href')})||r('type|href|height|width',function(e,t,n){if(!n)return e.getAttribute(t,'type'===t.toLowerCase()?1:2)}),re.attributes&&a(function(e){return e.innerHTML='<input/>',e.firstChild.setAttribute('value',''),''===e.firstChild.getAttribute('value')})||r('value',function(e,t,n){if(!n&&'input'===e.nodeName.toLowerCase())return e.defaultValue}),a(function(e){return null==e.getAttribute('disabled')})||r(M,function(e,t,n){var o;if(!n)return!0===e[t]?t.toLowerCase():(o=e.getAttributeNode(t))&&o.specified?o.value:null}),t}(l);Pe.find=Oe,Pe.expr=Oe.selectors,Pe.expr[':']=Pe.expr.pseudos,Pe.uniqueSort=Pe.unique=Oe.uniqueSort,Pe.text=Oe.getText,Pe.isXMLDoc=Oe.isXML,Pe.contains=Oe.contains,Pe.escapeSelector=Oe.escape;var Ve=function(e,t,n){for(var o=[];(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(void 0!==n&&Pe(e).is(n))break;o.push(e)}return o},Ne=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Re=Pe.expr.match.needsContext,Ie=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;Pe.filter=function(e,t,n){var o=t[0];return n&&(e=':not('+e+')'),1===t.length&&1===o.nodeType?Pe.find.matchesSelector(o,e)?[o]:[]:Pe.find.matches(e,Pe.grep(t,function(e){return 1===e.nodeType}))},Pe.fn.extend({find:function(e){var t=this.length,n=this,o,i;if('string'!=typeof e)return this.pushStack(Pe(e).filter(function(){for(o=0;o<t;o++)if(Pe.contains(n[o],this))return!0}));for(i=this.pushStack([]),o=0;o<t;o++)Pe.find(e,n[o],i);return 1<t?Pe.uniqueSort(i):i},filter:function(e){return this.pushStack(m(this,e||[],!1))},not:function(e){return this.pushStack(m(this,e||[],!0))},is:function(e){return!!m(this,'string'==typeof e&&Re.test(e)?Pe(e):e||[],!1).length}});var De=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Fe=Pe.fn.init=function(e,t,n){var o,i;if(!e)return this;if(n=n||Me,'string'==typeof e){if(o='<'===e[0]&&'>'===e[e.length-1]&&3<=e.length?[null,e,null]:De.exec(e),o&&(o[1]||!t)){if(o[1]){if(t=t instanceof Pe?t[0]:t,Pe.merge(this,Pe.parseHTML(o[1],t&&t.nodeType?t.ownerDocument||t:ue,!0)),Ie.test(o[1])&&Pe.isPlainObject(t))for(o in t)Ce(this[o])?this[o](t[o]):this.attr(o,t[o]);return this}return i=ue.getElementById(o[2]),i&&(this[0]=i,this.length=1),this}return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e)}return e.nodeType?(this[0]=e,this.length=1,this):Ce(e)?void 0===n.ready?e(Pe):n.ready(e):Pe.makeArray(e,this)},Me;Fe.prototype=Pe.fn,Me=Pe(ue);var Le=/^(?:parents|prev(?:Until|All))/,Be={children:!0,contents:!0,next:!0,prev:!0};Pe.fn.extend({has:function(e){var t=Pe(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(Pe.contains(this,t[e]))return!0})},closest:function(e,t){var n=0,o=this.length,i=[],a='string'!=typeof e&&Pe(e),r;if(!Re.test(e))for(;n<o;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(11>r.nodeType&&(a?-1<a.index(r):1===r.nodeType&&Pe.find.matchesSelector(r,e))){i.push(r);break}return this.pushStack(1<i.length?Pe.uniqueSort(i):i)},index:function(e){return e?'string'==typeof e?be.call(Pe(e),this[0]):be.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Pe.uniqueSort(Pe.merge(this.get(),Pe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Pe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Ve(e,'parentNode')},parentsUntil:function(e,t,n){return Ve(e,'parentNode',n)},next:function(e){return g(e,'nextSibling')},prev:function(e){return g(e,'previousSibling')},nextAll:function(e){return Ve(e,'nextSibling')},prevAll:function(e){return Ve(e,'previousSibling')},nextUntil:function(e,t,n){return Ve(e,'nextSibling',n)},prevUntil:function(e,t,n){return Ve(e,'previousSibling',n)},siblings:function(e){return Ne((e.parentNode||{}).firstChild,e)},children:function(e){return Ne(e.firstChild)},contents:function(e){return u(e,'iframe')?e.contentDocument:(u(e,'template')&&(e=e.content||e),Pe.merge([],e.childNodes))}},function(e,t){Pe.fn[e]=function(n,o){var i=Pe.map(this,t,n);return'Until'!==e.slice(-5)&&(o=n),o&&'string'==typeof o&&(i=Pe.filter(o,i)),1<this.length&&(!Be[e]&&Pe.uniqueSort(i),Le.test(e)&&i.reverse()),this.pushStack(i)}});var qe=/[^\x20\t\r\n\f]+/g;Pe.Callbacks=function(e){e='string'==typeof e?h(e):Pe.extend({},e);var t=[],n=[],o=-1,i=function(){for(d=d||e.once,l=r=!0;n.length;o=-1)for(s=n.shift();++o<t.length;)!1===t[o].apply(s[0],s[1])&&e.stopOnFalse&&(o=t.length,s=!1);e.memory||(s=!1),r=!1,d&&(s?t=[]:t='')},a={add:function(){return t&&(s&&!r&&(o=t.length-1,n.push(s)),function n(o){Pe.each(o,function(o,i){Ce(i)?(!e.unique||!a.has(i))&&t.push(i):i&&i.length&&'string'!==c(i)&&n(i)})}(arguments),s&&!r&&i()),this},remove:function(){return Pe.each(arguments,function(e,n){for(var i;-1<(i=Pe.inArray(n,t,i));)t.splice(i,1),i<=o&&o--}),this},has:function(e){return e?-1<Pe.inArray(e,t):0<t.length},empty:function(){return t&&(t=[]),this},disable:function(){return d=n=[],t=s='',this},disabled:function(){return!t},lock:function(){return d=n=[],s||r||(t=s=''),this},locked:function(){return!!d},fireWith:function(e,t){return d||(t=t||[],t=[e,t.slice?t.slice():t],n.push(t),!r&&i()),this},fire:function(){return a.fireWith(this,arguments),this},fired:function(){return!!l}},r,s,l,d;return a},Pe.extend({Deferred:function(e){var t=[['notify','progress',Pe.Callbacks('memory'),Pe.Callbacks('memory'),2],['resolve','done',Pe.Callbacks('once memory'),Pe.Callbacks('once memory'),0,'resolved'],['reject','fail',Pe.Callbacks('once memory'),Pe.Callbacks('once memory'),1,'rejected']],n='pending',o={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return Pe.Deferred(function(n){Pe.each(t,function(t,o){var i=Ce(e[o[4]])&&e[o[4]];a[o[1]](function(){var e=i&&i.apply(this,arguments);e&&Ce(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+'With'](this,i?[e]:arguments)})}),e=null}).promise()},then:function(e,n,o){function i(t,n,o,e){return function(){var r=this,s=arguments,d=function(){var l,d;if(!(t<a)){if(l=o.apply(r,s),l===n.promise())throw new TypeError('Thenable self-resolution');d=l&&('object'==typeof l||'function'==typeof l)&&l.then,Ce(d)?e?d.call(l,i(a,n,f,e),i(a,n,b,e)):(a++,d.call(l,i(a,n,f,e),i(a,n,b,e),i(a,n,f,n.notifyWith))):(o!==f&&(r=void 0,s=[l]),(e||n.resolveWith)(r,s))}},c=e?d:function(){try{d()}catch(i){Pe.Deferred.exceptionHook&&Pe.Deferred.exceptionHook(i,c.stackTrace),t+1>=a&&(o!==b&&(r=void 0,s=[i]),n.rejectWith(r,s))}};t?c():(Pe.Deferred.getStackHook&&(c.stackTrace=Pe.Deferred.getStackHook()),l.setTimeout(c))}}var a=0;return Pe.Deferred(function(a){t[0][3].add(i(0,a,Ce(o)?o:f,a.notifyWith)),t[1][3].add(i(0,a,Ce(e)?e:f)),t[2][3].add(i(0,a,Ce(n)?n:b))}).promise()},promise:function(e){return null==e?o:Pe.extend(e,o)}},a={};return Pe.each(t,function(e,i){var r=i[2],s=i[5];o[i[1]]=r.add,s&&r.add(function(){n=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),r.add(i[3].fire),a[i[0]]=function(){return a[i[0]+'With'](this===a?void 0:this,arguments),this},a[i[0]+'With']=r.fireWith}),o.promise(a),e&&e.call(a,a),a},when:function(e){var t=arguments.length,n=t,o=Array(n),a=ge.call(arguments),r=Pe.Deferred(),i=function(e){return function(n){o[e]=this,a[e]=1<arguments.length?ge.call(arguments):n,--t||r.resolveWith(o,a)}};if(1>=t&&(y(e,r.done(i(n)).resolve,r.reject,!t),'pending'===r.state()||Ce(a[n]&&a[n].then)))return r.then();for(;n--;)y(a[n],i(n),r.reject);return r.promise()}});var je=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Pe.Deferred.exceptionHook=function(e,t){l.console&&l.console.warn&&e&&je.test(e.name)&&l.console.warn('jQuery.Deferred exception: '+e.message,e.stack,t)},Pe.readyException=function(e){l.setTimeout(function(){throw e})};var He=Pe.Deferred();Pe.fn.ready=function(e){return He.then(e).catch(function(e){Pe.readyException(e)}),this},Pe.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?! --Pe.readyWait:!Pe.isReady)&&(Pe.isReady=!0,!0!==e&&0<--Pe.readyWait||He.resolveWith(ue,[Pe]))}}),Pe.ready.then=He.then,'complete'!==ue.readyState&&('loading'===ue.readyState||ue.documentElement.doScroll)?(ue.addEventListener('DOMContentLoaded',v),l.addEventListener('load',v)):l.setTimeout(Pe.ready);var ze=function(e,t,n,o,a,r,s){var l=0,i=e.length,d=null==n;if('object'===c(n))for(l in a=!0,n)ze(e,t,l,n[l],!0,r,s);else if(void 0!==o&&(a=!0,Ce(o)||(s=!0),d&&(s?(t.call(e,o),t=null):(d=t,t=function(e,t,n){return d.call(Pe(e),n)})),t))for(;l<i;l++)t(e[l],n,s?o:o.call(e[l],l,t(e[l],n)));return a?e:d?t.call(e):i?t(e[0],n):r},We=/^-ms-/,$e=/-([a-z])/g,Xe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};x.uid=1,x.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Xe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var o=this.cache(e),i;if('string'==typeof t)o[_(t)]=n;else for(i in t)o[_(i)]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][_(t)]},access:function(e,t,n){return void 0===t||t&&'string'==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0===n?t:n)},remove:function(e,t){var n=e[this.expando],o;if(void 0!==n){if(void 0!==t)for(Array.isArray(t)?t=t.map(_):(t=_(t),t=(t in n)?[t]:t.match(qe)||[]),o=t.length;o--;)delete n[t[o]];(void 0===t||Pe.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!Pe.isEmptyObject(t)}};var Ue=new x,Ye=new x,Qe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ke=/[A-Z]/g;Pe.extend({hasData:function(e){return Ye.hasData(e)||Ue.hasData(e)},data:function(e,t,n){return Ye.access(e,t,n)},removeData:function(e,t){Ye.remove(e,t)},_data:function(e,t,n){return Ue.access(e,t,n)},_removeData:function(e,t){Ue.remove(e,t)}}),Pe.fn.extend({data:function(e,t){var n=this[0],o=n&&n.attributes,a,i,r;if(void 0===e){if(this.length&&(r=Ye.get(n),1===n.nodeType&&!Ue.get(n,'hasDataAttrs'))){for(a=o.length;a--;)o[a]&&(i=o[a].name,0===i.indexOf('data-')&&(i=_(i.slice(5)),C(n,i,r[i])));Ue.set(n,'hasDataAttrs',!0)}return r}return'object'==typeof e?this.each(function(){Ye.set(this,e)}):ze(this,function(t){var o;return n&&void 0===t?(o=Ye.get(n,e),void 0!==o)?o:(o=C(n,e),void 0===o?void 0:o):void this.each(function(){Ye.set(this,e,t)})},null,t,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Ye.remove(this,e)})}}),Pe.extend({queue:function(e,t,n){var o;if(e)return t=(t||'fx')+'queue',o=Ue.get(e,t),n&&(!o||Array.isArray(n)?o=Ue.access(e,t,Pe.makeArray(n)):o.push(n)),o||[]},dequeue:function(e,t){t=t||'fx';var n=Pe.queue(e,t),o=n.length,i=n.shift(),a=Pe._queueHooks(e,t);'inprogress'===i&&(i=n.shift(),o--),i&&('fx'===t&&n.unshift('inprogress'),delete a.stop,i.call(e,function(){Pe.dequeue(e,t)},a)),!o&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+'queueHooks';return Ue.get(e,n)||Ue.access(e,n,{empty:Pe.Callbacks('once memory').add(function(){Ue.remove(e,[t+'queue',n])})})}}),Pe.fn.extend({queue:function(e,t){var n=2;return'string'!=typeof e&&(t=e,e='fx',n--),arguments.length<n?Pe.queue(this[0],e):void 0===t?this:this.each(function(){var n=Pe.queue(this,e,t);Pe._queueHooks(this,e),'fx'===e&&'inprogress'!==n[0]&&Pe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Pe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||'fx',[])},promise:function(e,t){var n=1,o=Pe.Deferred(),a=this,r=this.length,i=function(){--n||o.resolveWith(a,[a])},s;for('string'!=typeof e&&(t=e,e=void 0),e=e||'fx';r--;)s=Ue.get(a[r],e+'queueHooks'),s&&s.empty&&(n++,s.empty.add(i));return i(),o.promise(t)}});var Ge=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Je=new RegExp('^(?:([+-])=|)('+Ge+')([a-z%]*)$','i'),Ze=['Top','Right','Bottom','Left'],et=function(e,t){return e=t||e,'none'===e.style.display||''===e.style.display&&Pe.contains(e.ownerDocument,e)&&'none'===Pe.css(e,'display')},tt=function(e,t,n,o){var i={},a,r;for(r in t)i[r]=e.style[r],e.style[r]=t[r];for(r in a=n.apply(e,o||[]),t)e.style[r]=i[r];return a},nt={};Pe.fn.extend({show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(e){return'boolean'==typeof e?e?this.show():this.hide():this.each(function(){et(this)?Pe(this).show():Pe(this).hide()})}});var ot=/^(?:checkbox|radio)$/i,it=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,at=/^$|^module$|\/(?:java|ecma)script/i,rt={option:[1,'<select multiple=\'multiple\'>','</select>'],thead:[1,'<table>','</table>'],col:[2,'<table><colgroup>','</colgroup></table>'],tr:[2,'<table><tbody>','</tbody></table>'],td:[3,'<table><tbody><tr>','</tr></tbody></table>'],_default:[0,'','']};rt.optgroup=rt.option,rt.tbody=rt.tfoot=rt.colgroup=rt.caption=rt.thead,rt.th=rt.td;var st=/<|&#?\w+;/;(function(){var e=ue.createDocumentFragment(),t=e.appendChild(ue.createElement('div')),n=ue.createElement('input');n.setAttribute('type','radio'),n.setAttribute('checked','checked'),n.setAttribute('name','t'),t.appendChild(n),ke.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML='<textarea>x</textarea>',ke.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue})();var lt=ue.documentElement,dt=/^key/,ct=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,pt=/^([^.]*)(?:\.(.+)|)/;Pe.event={global:{},add:function(n,e,o,i,a){var r=Ue.get(n),s,l,d,c,p,t,u,m,g,h,f;if(r)for(o.handler&&(s=o,o=s.handler,a=s.selector),a&&Pe.find.matchesSelector(lt,a),o.guid||(o.guid=Pe.guid++),(c=r.events)||(c=r.events={}),(l=r.handle)||(l=r.handle=function(t){return'undefined'!=typeof Pe&&Pe.event.triggered!==t.type?Pe.event.dispatch.apply(n,arguments):void 0}),e=(e||'').match(qe)||[''],p=e.length;p--;)(d=pt.exec(e[p])||[],g=f=d[1],h=(d[2]||'').split('.').sort(),!!g)&&(u=Pe.event.special[g]||{},g=(a?u.delegateType:u.bindType)||g,u=Pe.event.special[g]||{},t=Pe.extend({type:g,origType:f,data:i,handler:o,guid:o.guid,selector:a,needsContext:a&&Pe.expr.match.needsContext.test(a),namespace:h.join('.')},s),(m=c[g])||(m=c[g]=[],m.delegateCount=0,(!u.setup||!1===u.setup.call(n,i,h,l))&&n.addEventListener&&n.addEventListener(g,l)),u.add&&(u.add.call(n,t),!t.handler.guid&&(t.handler.guid=o.guid)),a?m.splice(m.delegateCount++,0,t):m.push(t),Pe.event.global[g]=!0)},remove:function(e,n,o,i,a){var r=Ue.hasData(e)&&Ue.get(e),s,l,d,c,p,t,u,m,g,h,f;if(r&&(c=r.events)){for(n=(n||'').match(qe)||[''],p=n.length;p--;){if(d=pt.exec(n[p])||[],g=f=d[1],h=(d[2]||'').split('.').sort(),!g){for(g in c)Pe.event.remove(e,g+n[p],o,i,!0);continue}for(u=Pe.event.special[g]||{},g=(i?u.delegateType:u.bindType)||g,m=c[g]||[],d=d[2]&&new RegExp('(^|\\.)'+h.join('\\.(?:.*\\.|)')+'(\\.|$)'),l=s=m.length;s--;)t=m[s],(a||f===t.origType)&&(!o||o.guid===t.guid)&&(!d||d.test(t.namespace))&&(!i||i===t.selector||'**'===i&&t.selector)&&(m.splice(s,1),t.selector&&m.delegateCount--,u.remove&&u.remove.call(e,t));l&&!m.length&&((!u.teardown||!1===u.teardown.call(e,h,r.handle))&&Pe.removeEvent(e,g,r.handle),delete c[g])}Pe.isEmptyObject(c)&&Ue.remove(e,'handle events')}},dispatch:function(e){var t=Pe.event.fix(e),n=Array(arguments.length),o=(Ue.get(this,'events')||{})[t.type]||[],a=Pe.event.special[t.type]||{},r,i,s,l,d,c;for(n[0]=t,r=1;r<arguments.length;r++)n[r]=arguments[r];if(t.delegateTarget=this,!(a.preDispatch&&!1===a.preDispatch.call(this,t))){for(c=Pe.event.handlers.call(this,t,o),r=0;(l=c[r++])&&!t.isPropagationStopped();)for(t.currentTarget=l.elem,i=0;(d=l.handlers[i++])&&!t.isImmediatePropagationStopped();)(!t.rnamespace||t.rnamespace.test(d.namespace))&&(t.handleObj=d,t.data=d.data,s=((Pe.event.special[d.origType]||{}).handle||d.handler).apply(l.elem,n),void 0!==s&&!1===(t.result=s)&&(t.preventDefault(),t.stopPropagation()));return a.postDispatch&&a.postDispatch.call(this,t),t.result}},handlers:function(e,t){var n=[],o=t.delegateCount,a=e.target,r,i,s,l,d;if(o&&a.nodeType&&!('click'===e.type&&1<=e.button))for(;a!==this;a=a.parentNode||this)if(1===a.nodeType&&('click'!==e.type||!0!==a.disabled)){for(l=[],d={},r=0;r<o;r++)i=t[r],s=i.selector+' ',void 0===d[s]&&(d[s]=i.needsContext?-1<Pe(s,this).index(a):Pe.find(s,this,null,[a]).length),d[s]&&l.push(i);l.length&&n.push({elem:a,handlers:l})}return a=this,o<t.length&&n.push({elem:a,handlers:t.slice(o)}),n},addProp:function(e,t){Object.defineProperty(Pe.Event.prototype,e,{enumerable:!0,configurable:!0,get:Ce(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[Pe.expando]?e:new Pe.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==R()&&this.focus)return this.focus(),!1},delegateType:'focusin'},blur:{trigger:function(){if(this===R()&&this.blur)return this.blur(),!1},delegateType:'focusout'},click:{trigger:function(){if('checkbox'===this.type&&this.click&&u(this,'input'))return this.click(),!1},_default:function(e){return u(e.target,'a')}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},Pe.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},Pe.Event=function(e,t){return this instanceof Pe.Event?void(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?V:N,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&Pe.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[Pe.expando]=!0):new Pe.Event(e,t)},Pe.Event.prototype={constructor:Pe.Event,isDefaultPrevented:N,isPropagationStopped:N,isImmediatePropagationStopped:N,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=V,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=V,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=V,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},Pe.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&dt.test(e.type)?null==e.charCode?e.keyCode:e.charCode:!e.which&&void 0!==t&&ct.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},Pe.event.addProp),Pe.each({mouseenter:'mouseover',mouseleave:'mouseout',pointerenter:'pointerover',pointerleave:'pointerout'},function(e,t){Pe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n=this,o=e.relatedTarget,i=e.handleObj,a;return o&&(o===n||Pe.contains(n,o))||(e.type=i.origType,a=i.handler.apply(this,arguments),e.type=t),a}}}),Pe.fn.extend({on:function(e,t,n,o){return I(this,e,t,n,o)},one:function(e,t,n,o){return I(this,e,t,n,o,1)},off:function(e,t,n){var o,i;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,Pe(e.delegateTarget).off(o.namespace?o.origType+'.'+o.namespace:o.origType,o.selector,o.handler),this;if('object'==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(!1===t||'function'==typeof t)&&(n=t,t=void 0),!1===n&&(n=N),this.each(function(){Pe.event.remove(this,e,n,t)})}});var ut=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,mt=/<script|<style|<link/i,gt=/checked\s*(?:[^=]|=\s*.checked.)/i,ht=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;Pe.extend({htmlPrefilter:function(e){return e.replace(ut,'<$1></$2>')},clone:function(e,t,n){var o=e.cloneNode(!0),a=Pe.contains(e.ownerDocument,e),r,i,s,l;if(!ke.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!Pe.isXMLDoc(e))for(l=P(o),s=P(e),(r=0,i=s.length);r<i;r++)B(s[r],l[r]);if(t)if(n)for(s=s||P(e),l=l||P(o),(r=0,i=s.length);r<i;r++)L(s[r],l[r]);else L(e,o);return l=P(o,'script'),0<l.length&&E(l,!a&&P(e,'script')),o},cleanData:function(e){for(var t=Pe.event.special,n=0,o,i,a;void 0!==(i=e[n]);n++)if(Xe(i)){if(o=i[Ue.expando]){if(o.events)for(a in o.events)t[a]?Pe.event.remove(i,a):Pe.removeEvent(i,a,o.handle);i[Ue.expando]=void 0}i[Ye.expando]&&(i[Ye.expando]=void 0)}}}),Pe.fn.extend({detach:function(e){return j(this,e,!0)},remove:function(e){return j(this,e)},text:function(e){return ze(this,function(e){return void 0===e?Pe.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return q(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=D(this,e);t.appendChild(e)}})},prepend:function(){return q(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=D(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return q(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return q(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e=0,t;null!=(t=this[e]);e++)1===t.nodeType&&(Pe.cleanData(P(t,!1)),t.textContent='');return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Pe.clone(this,e,t)})},html:function(e){return ze(this,function(e){var t=this[0]||{},n=0,o=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if('string'==typeof e&&!mt.test(e)&&!rt[(it.exec(e)||['',''])[1].toLowerCase()]){e=Pe.htmlPrefilter(e);try{for(;n<o;n++)t=this[n]||{},1===t.nodeType&&(Pe.cleanData(P(t,!1)),t.innerHTML=e);t=0}catch(t){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return q(this,arguments,function(t){var n=this.parentNode;0>Pe.inArray(this,e)&&(Pe.cleanData(P(this)),n&&n.replaceChild(t,this))},e)}}),Pe.each({appendTo:'append',prependTo:'prepend',insertBefore:'before',insertAfter:'after',replaceAll:'replaceWith'},function(e,t){Pe.fn[e]=function(e){for(var n=[],o=Pe(e),a=o.length-1,r=0,i;r<=a;r++)i=r==a?this:this.clone(!0),Pe(o[r])[t](i),fe.apply(n,i.get());return this.pushStack(n)}});var ft=new RegExp('^('+Ge+')(?!px)[a-z%]+$','i'),bt=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=l),t.getComputedStyle(e)},yt=new RegExp(Ze.join('|'),'i');(function(){function e(){if(o){n.style.cssText='position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0',o.style.cssText='position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%',lt.appendChild(n).appendChild(o);var e=l.getComputedStyle(o);i='1%'!==e.top,d=12===t(e.marginLeft),o.style.right='60%',s=36===t(e.right),a=36===t(e.width),o.style.position='absolute',r=36===o.offsetWidth||'absolute',lt.removeChild(n),o=null}}function t(e){return Math.round(parseFloat(e))}var n=ue.createElement('div'),o=ue.createElement('div'),i,a,r,s,d;o.style&&(o.style.backgroundClip='content-box',o.cloneNode(!0).style.backgroundClip='',ke.clearCloneStyle='content-box'===o.style.backgroundClip,Pe.extend(ke,{boxSizingReliable:function(){return e(),a},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),d},scrollboxSize:function(){return e(),r}}))})();var vt=/^(none|table(?!-c[ea]).+)/,wt=/^--/,_t={position:'absolute',visibility:'hidden',display:'block'},xt={letterSpacing:'0',fontWeight:'400'},kt=['Webkit','Moz','ms'],Ct=ue.createElement('div').style;Pe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=H(e,'opacity');return''===n?'1':n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i=_(t),a=wt.test(t),r=e.style,s,l,d;if(a||(t=$(i)),d=Pe.cssHooks[t]||Pe.cssHooks[i],void 0!==n){if(l=typeof n,'string'===l&&(s=Je.exec(n))&&s[1]&&(n=T(e,t,s),l='number'),null==n||n!==n)return;'number'===l&&(n+=s&&s[3]||(Pe.cssNumber[i]?'':'px')),ke.clearCloneStyle||''!==n||0!==t.indexOf('background')||(r[t]='inherit'),d&&'set'in d&&void 0===(n=d.set(e,n,o))||(a?r.setProperty(t,n):r[t]=n)}else return d&&'get'in d&&void 0!==(s=d.get(e,!1,o))?s:r[t]}},css:function(e,t,n,o){var i=_(t),a=wt.test(t),r,s,l;return a||(t=$(i)),l=Pe.cssHooks[t]||Pe.cssHooks[i],l&&'get'in l&&(r=l.get(e,!0,n)),void 0===r&&(r=H(e,t,o)),'normal'===r&&t in xt&&(r=xt[t]),''===n||n?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),Pe.each(['height','width'],function(e,t){Pe.cssHooks[t]={get:function(e,n,o){if(n)return!vt.test(Pe.css(e,'display'))||e.getClientRects().length&&e.getBoundingClientRect().width?Y(e,t,o):tt(e,_t,function(){return Y(e,t,o)})},set:function(e,o,i){var a=bt(e),r='border-box'===Pe.css(e,'boxSizing',!1,a),s=i&&U(e,t,i,r,a),l;return r&&ke.scrollboxSize()===a.position&&(s-=n(e['offset'+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-U(e,t,'border',!1,a)-0.5)),s&&(l=Je.exec(o))&&'px'!==(l[3]||'px')&&(e.style[t]=o,o=Pe.css(e,t)),X(e,o,s)}}}),Pe.cssHooks.marginLeft=z(ke.reliableMarginLeft,function(e,t){if(t)return(parseFloat(H(e,'marginLeft'))||e.getBoundingClientRect().left-tt(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+'px'}),Pe.each({margin:'',padding:'',border:'Width'},function(e,t){Pe.cssHooks[e+t]={expand:function(n){for(var o=0,i={},a='string'==typeof n?n.split(' '):[n];4>o;o++)i[e+Ze[o]+t]=a[o]||a[o-2]||a[0];return i}},'margin'!==e&&(Pe.cssHooks[e+t].set=X)}),Pe.fn.extend({css:function(e,t){return ze(this,function(e,t,n){var o={},a=0,i,r;if(Array.isArray(t)){for(i=bt(e),r=t.length;a<r;a++)o[t[a]]=Pe.css(e,t[a],!1,i);return o}return void 0===n?Pe.css(e,t):Pe.style(e,t,n)},e,t,1<arguments.length)}}),Pe.Tween=Q,Q.prototype={constructor:Q,init:function(e,t,n,o,i,a){this.elem=e,this.prop=n,this.easing=i||Pe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=o,this.unit=a||(Pe.cssNumber[n]?'':'px')},cur:function(){var e=Q.propHooks[this.prop];return e&&e.get?e.get(this):Q.propHooks._default.get(this)},run:function(e){var t=Q.propHooks[this.prop],n;return this.pos=this.options.duration?n=Pe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):n=e,this.now=(this.end-this.start)*n+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),t&&t.set?t.set(this):Q.propHooks._default.set(this),this}},Q.prototype.init.prototype=Q.prototype,Q.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=Pe.css(e.elem,e.prop,''),t&&'auto'!==t?t:0)},set:function(e){Pe.fx.step[e.prop]?Pe.fx.step[e.prop](e):1===e.elem.nodeType&&(null!=e.elem.style[Pe.cssProps[e.prop]]||Pe.cssHooks[e.prop])?Pe.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Q.propHooks.scrollTop=Q.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Pe.easing={linear:function(e){return e},swing:function(e){return 0.5-Math.cos(e*Math.PI)/2},_default:'swing'},Pe.fx=Q.prototype.init,Pe.fx.step={};var Tt=/^(?:toggle|show|hide)$/,At=/queueHooks$/,St,Pt;Pe.Animation=Pe.extend(te,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return T(n.elem,e,Je.exec(t),n),n}]},tweener:function(e,t){Ce(e)?(t=e,e=['*']):e=e.match(qe);for(var n=0,o=e.length,i;n<o;n++)i=e[n],te.tweeners[i]=te.tweeners[i]||[],te.tweeners[i].unshift(t)},prefilters:[function(e,t,n){var o=this,i={},a=e.style,r=e.nodeType&&et(e),s=Ue.get(e,'fxshow'),l,d,c,p,u,m,g,h;for(l in n.queue||(p=Pe._queueHooks(e,'fx'),null==p.unqueued&&(p.unqueued=0,u=p.empty.fire,p.empty.fire=function(){p.unqueued||u()}),p.unqueued++,o.always(function(){o.always(function(){p.unqueued--,Pe.queue(e,'fx').length||p.empty.fire()})})),t)if(d=t[l],Tt.test(d)){if(delete t[l],c=c||'toggle'===d,d===(r?'hide':'show'))if('show'===d&&s&&void 0!==s[l])r=!0;else continue;i[l]=s&&s[l]||Pe.style(e,l)}if(m=!Pe.isEmptyObject(t),m||!Pe.isEmptyObject(i))for(l in('width'in t||'height'in t)&&1===e.nodeType&&(n.overflow=[a.overflow,a.overflowX,a.overflowY],g=s&&s.display,null==g&&(g=Ue.get(e,'display')),h=Pe.css(e,'display'),'none'===h&&(g?h=g:(S([e],!0),g=e.style.display||g,h=Pe.css(e,'display'),S([e]))),('inline'===h||'inline-block'===h&&null!=g)&&'none'===Pe.css(e,'float')&&(!m&&(o.done(function(){a.display=g}),null==g&&(h=a.display,g='none'===h?'':h)),a.display='inline-block')),n.overflow&&(a.overflow='hidden',o.always(function(){a.overflow=n.overflow[0],a.overflowX=n.overflow[1],a.overflowY=n.overflow[2]})),m=!1,i)m||(s?'hidden'in s&&(r=s.hidden):s=Ue.access(e,'fxshow',{display:g}),c&&(s.hidden=!r),r&&S([e],!0),o.done(function(){for(l in r||S([e]),Ue.remove(e,'fxshow'),i)Pe.style(e,l,i[l])})),m=Z(r?s[l]:0,l,o),l in s||(s[l]=m.start,r&&(m.end=m.start,m.start=0))}],prefilter:function(e,t){t?te.prefilters.unshift(e):te.prefilters.push(e)}}),Pe.speed=function(e,t,n){var o=e&&'object'==typeof e?Pe.extend({},e):{complete:n||!n&&t||Ce(e)&&e,duration:e,easing:n&&t||t&&!Ce(t)&&t};return Pe.fx.off?o.duration=0:'number'!=typeof o.duration&&(o.duration in Pe.fx.speeds?o.duration=Pe.fx.speeds[o.duration]:o.duration=Pe.fx.speeds._default),(null==o.queue||!0===o.queue)&&(o.queue='fx'),o.old=o.complete,o.complete=function(){Ce(o.old)&&o.old.call(this),o.queue&&Pe.dequeue(this,o.queue)},o},Pe.fn.extend({fadeTo:function(e,t,n,o){return this.filter(et).css('opacity',0).show().end().animate({opacity:t},e,n,o)},animate:function(e,t,n,o){var i=Pe.isEmptyObject(e),a=Pe.speed(t,n,o),r=function(){var t=te(this,Pe.extend({},e),a);(i||Ue.get(this,'finish'))&&t.stop(!0)};return r.finish=r,i||!1===a.queue?this.each(r):this.queue(a.queue,r)},stop:function(e,t,n){var o=function(e){var t=e.stop;delete e.stop,t(n)};return'string'!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||'fx',[]),this.each(function(){var t=!0,i=null!=e&&e+'queueHooks',a=Pe.timers,r=Ue.get(this);if(i)r[i]&&r[i].stop&&o(r[i]);else for(i in r)r[i]&&r[i].stop&&At.test(i)&&o(r[i]);for(i=a.length;i--;)a[i].elem===this&&(null==e||a[i].queue===e)&&(a[i].anim.stop(n),t=!1,a.splice(i,1));(t||!n)&&Pe.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||'fx'),this.each(function(){var t=Ue.get(this),n=t[e+'queue'],o=t[e+'queueHooks'],i=Pe.timers,a=n?n.length:0,r;for(t.finish=!0,Pe.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),r=i.length;r--;)i[r].elem===this&&i[r].queue===e&&(i[r].anim.stop(!0),i.splice(r,1));for(r=0;r<a;r++)n[r]&&n[r].finish&&n[r].finish.call(this);delete t.finish})}}),Pe.each(['toggle','show','hide'],function(e,t){var n=Pe.fn[t];Pe.fn[t]=function(e,o,i){return null==e||'boolean'==typeof e?n.apply(this,arguments):this.animate(J(t,!0),e,o,i)}}),Pe.each({slideDown:J('show'),slideUp:J('hide'),slideToggle:J('toggle'),fadeIn:{opacity:'show'},fadeOut:{opacity:'hide'},fadeToggle:{opacity:'toggle'}},function(e,t){Pe.fn[e]=function(e,n,o){return this.animate(t,e,n,o)}}),Pe.timers=[],Pe.fx.tick=function(){var e=0,t=Pe.timers,n;for(St=Date.now();e<t.length;e++)n=t[e],n()||t[e]!==n||t.splice(e--,1);t.length||Pe.fx.stop(),St=void 0},Pe.fx.timer=function(e){Pe.timers.push(e),Pe.fx.start()},Pe.fx.interval=13,Pe.fx.start=function(){Pt||(Pt=!0,K())},Pe.fx.stop=function(){Pt=null},Pe.fx.speeds={slow:600,fast:200,_default:400},Pe.fn.delay=function(e,t){return e=Pe.fx?Pe.fx.speeds[e]||e:e,t=t||'fx',this.queue(t,function(t,n){var o=l.setTimeout(t,e);n.stop=function(){l.clearTimeout(o)}})},function(){var e=ue.createElement('input'),t=ue.createElement('select'),n=t.appendChild(ue.createElement('option'));e.type='checkbox',ke.checkOn=''!==e.value,ke.optSelected=n.selected,e=ue.createElement('input'),e.value='t',e.type='radio',ke.radioValue='t'===e.value}();var Et=Pe.expr.attrHandle,Ot;Pe.fn.extend({attr:function(e,t){return ze(this,Pe.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){Pe.removeAttr(this,e)})}}),Pe.extend({attr:function(e,t,n){var o=e.nodeType,i,a;if(3!==o&&8!==o&&2!==o)return'undefined'==typeof e.getAttribute?Pe.prop(e,t,n):(1===o&&Pe.isXMLDoc(e)||(a=Pe.attrHooks[t.toLowerCase()]||(Pe.expr.match.bool.test(t)?Ot:void 0)),void 0!==n)?null===n?void Pe.removeAttr(e,t):a&&'set'in a&&void 0!==(i=a.set(e,n,t))?i:(e.setAttribute(t,n+''),n):a&&'get'in a&&null!==(i=a.get(e,t))?i:(i=Pe.find.attr(e,t),null==i?void 0:i)},attrHooks:{type:{set:function(e,t){if(!ke.radioValue&&'radio'===t&&u(e,'input')){var n=e.value;return e.setAttribute('type',t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n=0,o=t&&t.match(qe),i;if(o&&1===e.nodeType)for(;i=o[n++];)e.removeAttribute(i)}}),Ot={set:function(e,t,n){return!1===t?Pe.removeAttr(e,n):e.setAttribute(n,n),n}},Pe.each(Pe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Et[t]||Pe.find.attr;Et[t]=function(e,t,o){var i=t.toLowerCase(),a,r;return o||(r=Et[i],Et[i]=a,a=null==n(e,t,o)?null:i,Et[i]=r),a}});var Vt=/^(?:input|select|textarea|button)$/i,Nt=/^(?:a|area)$/i;Pe.fn.extend({prop:function(e,t){return ze(this,Pe.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[Pe.propFix[e]||e]})}}),Pe.extend({prop:function(e,t,n){var o=e.nodeType,i,a;if(3!==o&&8!==o&&2!==o)return 1===o&&Pe.isXMLDoc(e)||(t=Pe.propFix[t]||t,a=Pe.propHooks[t]),void 0===n?a&&'get'in a&&null!==(i=a.get(e,t))?i:e[t]:a&&'set'in a&&void 0!==(i=a.set(e,n,t))?i:e[t]=n},propHooks:{tabIndex:{get:function(e){var t=Pe.find.attr(e,'tabindex');return t?parseInt(t,10):Vt.test(e.nodeName)||Nt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:'htmlFor',class:'className'}}),ke.optSelected||(Pe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),Pe.each(['tabIndex','readOnly','maxLength','cellSpacing','cellPadding','rowSpan','colSpan','useMap','frameBorder','contentEditable'],function(){Pe.propFix[this.toLowerCase()]=this}),Pe.fn.extend({addClass:function(e){var t=0,n,o,i,a,r,s,l;if(Ce(e))return this.each(function(t){Pe(this).addClass(e.call(this,t,oe(this)))});if(n=ie(e),n.length)for(;o=this[t++];)if(a=oe(o),i=1===o.nodeType&&' '+ne(a)+' ',i){for(s=0;r=n[s++];)0>i.indexOf(' '+r+' ')&&(i+=r+' ');l=ne(i),a!==l&&o.setAttribute('class',l)}return this},removeClass:function(e){var t=0,n,o,i,a,r,s,l;if(Ce(e))return this.each(function(t){Pe(this).removeClass(e.call(this,t,oe(this)))});if(!arguments.length)return this.attr('class','');if(n=ie(e),n.length)for(;o=this[t++];)if(a=oe(o),i=1===o.nodeType&&' '+ne(a)+' ',i){for(s=0;r=n[s++];)for(;-1<i.indexOf(' '+r+' ');)i=i.replace(' '+r+' ',' ');l=ne(i),a!==l&&o.setAttribute('class',l)}return this},toggleClass:function(e,t){var n=typeof e,o='string'==n||Array.isArray(e);return'boolean'==typeof t&&o?t?this.addClass(e):this.removeClass(e):Ce(e)?this.each(function(n){Pe(this).toggleClass(e.call(this,n,oe(this),t),t)}):this.each(function(){var t,a,i,r;if(o)for(a=0,i=Pe(this),r=ie(e);t=r[a++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(void 0===e||'boolean'==n)&&(t=oe(this),t&&Ue.set(this,'__className__',t),this.setAttribute&&this.setAttribute('class',t||!1===e?'':Ue.get(this,'__className__')||''))})},hasClass:function(e){var t=0,n,o;for(n=' '+e+' ';o=this[t++];)if(1===o.nodeType&&-1<(' '+ne(oe(o))+' ').indexOf(n))return!0;return!1}});var Rt=/\r/g;Pe.fn.extend({val:function(e){var t=this[0],n,o,a;return arguments.length?(a=Ce(e),this.each(function(t){var o;1!==this.nodeType||(o=a?e.call(this,t,Pe(this).val()):e,null==o?o='':'number'==typeof o?o+='':Array.isArray(o)&&(o=Pe.map(o,function(e){return null==e?'':e+''})),n=Pe.valHooks[this.type]||Pe.valHooks[this.nodeName.toLowerCase()],(!n||!('set'in n)||void 0===n.set(this,o,'value'))&&(this.value=o))})):t?(n=Pe.valHooks[t.type]||Pe.valHooks[t.nodeName.toLowerCase()],n&&'get'in n&&void 0!==(o=n.get(t,'value')))?o:(o=t.value,'string'==typeof o?o.replace(Rt,''):null==o?'':o):void 0}}),Pe.extend({valHooks:{option:{get:function(e){var t=Pe.find.attr(e,'value');return null==t?ne(Pe.text(e)):t}},select:{get:function(e){var t=e.options,n=e.selectedIndex,o='select-one'===e.type,a=o?null:[],r=o?n+1:t.length,s,l,d;for(d=0>n?r:o?n:0;d<r;d++)if(l=t[d],(l.selected||d===n)&&!l.disabled&&(!l.parentNode.disabled||!u(l.parentNode,'optgroup'))){if(s=Pe(l).val(),o)return s;a.push(s)}return a},set:function(e,t){for(var n=e.options,o=Pe.makeArray(t),a=n.length,i,r;a--;)r=n[a],(r.selected=-1<Pe.inArray(Pe.valHooks.option.get(r),o))&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),Pe.each(['radio','checkbox'],function(){Pe.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<Pe.inArray(Pe(e).val(),t)}},ke.checkOn||(Pe.valHooks[this].get=function(e){return null===e.getAttribute('value')?'on':e.value})}),ke.focusin='onfocusin'in l;var It=/^(?:focusinfocus|focusoutblur)$/,Dt=function(t){t.stopPropagation()};Pe.extend(Pe.event,{trigger:function(e,t,n,o){var a=[n||ue],r=we.call(e,'type')?e.type:e,s=we.call(e,'namespace')?e.namespace.split('.'):[],d,i,c,p,u,m,g,h;if((i=h=c=n=n||ue,3!==n.nodeType&&8!==n.nodeType)&&!It.test(r+Pe.event.triggered)&&(-1<r.indexOf('.')&&(s=r.split('.'),r=s.shift(),s.sort()),u=0>r.indexOf(':')&&'on'+r,e=e[Pe.expando]?e:new Pe.Event(r,'object'==typeof e&&e),e.isTrigger=o?2:3,e.namespace=s.join('.'),e.rnamespace=e.namespace?new RegExp('(^|\\.)'+s.join('\\.(?:.*\\.|)')+'(\\.|$)'):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:Pe.makeArray(t,[e]),g=Pe.event.special[r]||{},o||!g.trigger||!1!==g.trigger.apply(n,t))){if(!o&&!g.noBubble&&!Te(n)){for(p=g.delegateType||r,It.test(p+r)||(i=i.parentNode);i;i=i.parentNode)a.push(i),c=i;c===(n.ownerDocument||ue)&&a.push(c.defaultView||c.parentWindow||l)}for(d=0;(i=a[d++])&&!e.isPropagationStopped();)h=i,e.type=1<d?p:g.bindType||r,m=(Ue.get(i,'events')||{})[e.type]&&Ue.get(i,'handle'),m&&m.apply(i,t),m=u&&i[u],m&&m.apply&&Xe(i)&&(e.result=m.apply(i,t),!1===e.result&&e.preventDefault());return e.type=r,o||e.isDefaultPrevented()||g._default&&!1!==g._default.apply(a.pop(),t)||!Xe(n)||!u||!Ce(n[r])||Te(n)||(c=n[u],c&&(n[u]=null),Pe.event.triggered=r,e.isPropagationStopped()&&h.addEventListener(r,Dt),n[r](),e.isPropagationStopped()&&h.removeEventListener(r,Dt),Pe.event.triggered=void 0,c&&(n[u]=c)),e.result}},simulate:function(t,n,o){var i=Pe.extend(new Pe.Event,o,{type:t,isSimulated:!0});Pe.event.trigger(i,null,n)}}),Pe.fn.extend({trigger:function(e,t){return this.each(function(){Pe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return Pe.event.trigger(e,t,n,!0)}}),ke.focusin||Pe.each({focus:'focusin',blur:'focusout'},function(e,t){var n=function(e){Pe.event.simulate(t,e.target,Pe.event.fix(e))};Pe.event.special[t]={setup:function(){var o=this.ownerDocument||this,i=Ue.access(o,t);i||o.addEventListener(e,n,!0),Ue.access(o,t,(i||0)+1)},teardown:function(){var o=this.ownerDocument||this,i=Ue.access(o,t)-1;i?Ue.access(o,t,i):(o.removeEventListener(e,n,!0),Ue.remove(o,t))}}});var Ft=l.location,Mt=Date.now(),Lt=/\?/;Pe.parseXML=function(e){var t;if(!e||'string'!=typeof e)return null;try{t=new l.DOMParser().parseFromString(e,'text/xml')}catch(n){t=void 0}return(!t||t.getElementsByTagName('parsererror').length)&&Pe.error('Invalid XML: '+e),t};var Bt=/\[\]$/,qt=/\r?\n/g,jt=/^(?:submit|button|image|reset|file)$/i,Ht=/^(?:input|select|textarea|keygen)/i;Pe.param=function(e,t){var n=[],o=function(e,t){var o=Ce(t)?t():t;n[n.length]=encodeURIComponent(e)+'='+encodeURIComponent(null==o?'':o)},i;if(Array.isArray(e)||e.jquery&&!Pe.isPlainObject(e))Pe.each(e,function(){o(this.name,this.value)});else for(i in e)ae(i,e[i],t,o);return n.join('&')},Pe.fn.extend({serialize:function(){return Pe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Pe.prop(this,'elements');return e?Pe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Pe(this).is(':disabled')&&Ht.test(this.nodeName)&&!jt.test(e)&&(this.checked||!ot.test(e))}).map(function(e,t){var n=Pe(this).val();return null==n?null:Array.isArray(n)?Pe.map(n,function(e){return{name:t.name,value:e.replace(qt,'\r\n')}}):{name:t.name,value:n.replace(qt,'\r\n')}}).get()}});var zt=/%20/g,Wt=/#.*$/,$t=/([?&])_=[^&]*/,Xt=/^(.*?):[ \t]*([^\r\n]*)$/mg,Ut=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Yt=/^(?:GET|HEAD)$/,Qt=/^\/\//,Kt={},Gt={},Jt='*/'.concat('*'),Zt=ue.createElement('a');Zt.href=Ft.href,Pe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ft.href,type:'GET',isLocal:Ut.test(Ft.protocol),global:!0,processData:!0,async:!0,contentType:'application/x-www-form-urlencoded; charset=UTF-8',accepts:{"*":Jt,text:'text/plain',html:'text/html',xml:'application/xml, text/xml',json:'application/json, text/javascript'},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:'responseXML',text:'responseText',json:'responseJSON'},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":Pe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?le(le(e,Pe.ajaxSettings),t):le(Pe.ajaxSettings,e)},ajaxPrefilter:re(Kt),ajaxTransport:re(Gt),ajax:function(e,t){function n(e,t,n,i){var p=t,u,m,y,w,k;_||(_=!0,v&&l.clearTimeout(v),h=void 0,b=i||'',g.readyState=0<e?4:0,u=200<=e&&300>e||304===e,n&&(w=de(o,g,n)),w=ce(o,w,g,u),u?(o.ifModified&&(k=g.getResponseHeader('Last-Modified'),k&&(Pe.lastModified[f]=k),k=g.getResponseHeader('etag'),k&&(Pe.etag[f]=k)),204===e||'HEAD'===o.type?p='nocontent':304===e?p='notmodified':(p=w.state,m=w.data,y=w.error,u=!y)):(y=p,(e||!p)&&(p='error',0>e&&(e=0))),g.status=e,g.statusText=(t||p)+'',u?s.resolveWith(a,[m,p,g]):s.rejectWith(a,[g,p,y]),g.statusCode(c),c=void 0,x&&r.trigger(u?'ajaxSuccess':'ajaxError',[g,o,u?m:y]),d.fireWith(a,[g,p]),x&&(r.trigger('ajaxComplete',[g,o]),! --Pe.active&&Pe.event.trigger('ajaxStop')))}'object'==typeof e&&(t=e,e=void 0),t=t||{};var o=Pe.ajaxSetup({},t),a=o.context||o,r=o.context&&(a.nodeType||a.jquery)?Pe(a):Pe.event,s=Pe.Deferred(),d=Pe.Callbacks('once memory'),c=o.statusCode||{},p={},u={},m='canceled',g={readyState:0,getResponseHeader:function(e){var t;if(_){if(!y)for(y={};t=Xt.exec(b);)y[t[1].toLowerCase()]=t[2];t=y[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return _?b:null},setRequestHeader:function(e,t){return null==_&&(e=u[e.toLowerCase()]=u[e.toLowerCase()]||e,p[e]=t),this},overrideMimeType:function(e){return null==_&&(o.mimeType=e),this},statusCode:function(e){if(e)if(_)g.always(e[g.status]);else for(var t in e)c[t]=[c[t],e[t]];return this},abort:function(e){var t=e||m;return h&&h.abort(t),n(0,t),this}},h,f,b,y,v,w,_,x,k,i;if(s.promise(g),o.url=((e||o.url||Ft.href)+'').replace(Qt,Ft.protocol+'//'),o.type=t.method||t.type||o.method||o.type,o.dataTypes=(o.dataType||'*').toLowerCase().match(qe)||[''],null==o.crossDomain){w=ue.createElement('a');try{w.href=o.url,w.href=w.href,o.crossDomain=Zt.protocol+'//'+Zt.host!=w.protocol+'//'+w.host}catch(t){o.crossDomain=!0}}if(o.data&&o.processData&&'string'!=typeof o.data&&(o.data=Pe.param(o.data,o.traditional)),se(Kt,o,t,g),_)return g;for(k in x=Pe.event&&o.global,x&&0==Pe.active++&&Pe.event.trigger('ajaxStart'),o.type=o.type.toUpperCase(),o.hasContent=!Yt.test(o.type),f=o.url.replace(Wt,''),o.hasContent?o.data&&o.processData&&0===(o.contentType||'').indexOf('application/x-www-form-urlencoded')&&(o.data=o.data.replace(zt,'+')):(i=o.url.slice(f.length),o.data&&(o.processData||'string'==typeof o.data)&&(f+=(Lt.test(f)?'&':'?')+o.data,delete o.data),!1===o.cache&&(f=f.replace($t,'$1'),i=(Lt.test(f)?'&':'?')+'_='+Mt++ +i),o.url=f+i),o.ifModified&&(Pe.lastModified[f]&&g.setRequestHeader('If-Modified-Since',Pe.lastModified[f]),Pe.etag[f]&&g.setRequestHeader('If-None-Match',Pe.etag[f])),(o.data&&o.hasContent&&!1!==o.contentType||t.contentType)&&g.setRequestHeader('Content-Type',o.contentType),g.setRequestHeader('Accept',o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+('*'===o.dataTypes[0]?'':', '+Jt+'; q=0.01'):o.accepts['*']),o.headers)g.setRequestHeader(k,o.headers[k]);if(o.beforeSend&&(!1===o.beforeSend.call(a,g,o)||_))return g.abort();if(m='abort',d.add(o.complete),g.done(o.success),g.fail(o.error),h=se(Gt,o,t,g),!h)n(-1,'No Transport');else{if(g.readyState=1,x&&r.trigger('ajaxSend',[g,o]),_)return g;o.async&&0<o.timeout&&(v=l.setTimeout(function(){g.abort('timeout')},o.timeout));try{_=!1,h.send(p,n)}catch(t){if(_)throw t;n(-1,t)}}return g},getJSON:function(e,t,n){return Pe.get(e,t,n,'json')},getScript:function(e,t){return Pe.get(e,void 0,t,'script')}}),Pe.each(['get','post'],function(e,t){Pe[t]=function(e,n,o,i){return Ce(n)&&(i=i||o,o=n,n=void 0),Pe.ajax(Pe.extend({url:e,type:t,dataType:i,data:n,success:o},Pe.isPlainObject(e)&&e))}}),Pe._evalUrl=function(e){return Pe.ajax({url:e,type:'GET',dataType:'script',cache:!0,async:!1,global:!1,throws:!0})},Pe.fn.extend({wrapAll:function(e){var t;return this[0]&&(Ce(e)&&(e=e.call(this[0])),t=Pe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return Ce(e)?this.each(function(t){Pe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Pe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Ce(e);return this.each(function(n){Pe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not('body').each(function(){Pe(this).replaceWith(this.childNodes)}),this}}),Pe.expr.pseudos.hidden=function(e){return!Pe.expr.pseudos.visible(e)},Pe.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},Pe.ajaxSettings.xhr=function(){try{return new l.XMLHttpRequest}catch(t){}};var en={0:200,1223:204},tn=Pe.ajaxSettings.xhr();ke.cors=!!tn&&'withCredentials'in tn,ke.ajax=tn=!!tn,Pe.ajaxTransport(function(e){var t,n;if(ke.cors||tn&&!e.crossDomain)return{send:function(o,a){var r=e.xhr(),s;if(r.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)r[s]=e.xhrFields[s];for(s in e.mimeType&&r.overrideMimeType&&r.overrideMimeType(e.mimeType),e.crossDomain||o['X-Requested-With']||(o['X-Requested-With']='XMLHttpRequest'),o)r.setRequestHeader(s,o[s]);t=function(e){return function(){t&&(t=n=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,'abort'===e?r.abort():'error'===e?'number'==typeof r.status?a(r.status,r.statusText):a(0,'error'):a(en[r.status]||r.status,r.statusText,'text'!==(r.responseType||'text')||'string'!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=t(),n=r.onerror=r.ontimeout=t('error'),void 0===r.onabort?r.onreadystatechange=function(){4===r.readyState&&l.setTimeout(function(){t&&n()})}:r.onabort=n,t=t('abort');try{r.send(e.hasContent&&e.data||null)}catch(n){if(t)throw n}},abort:function(){t&&t()}}}),Pe.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),Pe.ajaxSetup({accepts:{script:'text/javascript, application/javascript, application/ecmascript, application/x-ecmascript'},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return Pe.globalEval(e),e}}}),Pe.ajaxPrefilter('script',function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type='GET')}),Pe.ajaxTransport('script',function(e){if(e.crossDomain){var t,n;return{send:function(o,i){t=Pe('<script>').prop({charset:e.scriptCharset,src:e.url}).on('load error',n=function(e){t.remove(),n=null,e&&i('error'===e.type?404:200,e.type)}),ue.head.appendChild(t[0])},abort:function(){n&&n()}}}});var nn=[],on=/(=)\?(?=&|$)|\?\?/;Pe.ajaxSetup({jsonp:'callback',jsonpCallback:function(){var e=nn.pop()||Pe.expando+'_'+Mt++;return this[e]=!0,e}}),Pe.ajaxPrefilter('json jsonp',function(e,t,n){var o=!1!==e.jsonp&&(on.test(e.url)?'url':'string'==typeof e.data&&0===(e.contentType||'').indexOf('application/x-www-form-urlencoded')&&on.test(e.data)&&'data'),i,a,r;if(o||'jsonp'===e.dataTypes[0])return i=e.jsonpCallback=Ce(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(on,'$1'+i):!1!==e.jsonp&&(e.url+=(Lt.test(e.url)?'&':'?')+e.jsonp+'='+i),e.converters['script json']=function(){return r||Pe.error(i+' was not called'),r[0]},e.dataTypes[0]='json',a=l[i],l[i]=function(){r=arguments},n.always(function(){void 0===a?Pe(l).removeProp(i):l[i]=a,e[i]&&(e.jsonpCallback=t.jsonpCallback,nn.push(i)),r&&Ce(a)&&a(r[0]),r=a=void 0}),'script'}),ke.createHTMLDocument=function(){var e=ue.implementation.createHTMLDocument('').body;return e.innerHTML='<form></form><form></form>',2===e.childNodes.length}(),Pe.parseHTML=function(e,t,n){if('string'!=typeof e)return[];'boolean'==typeof t&&(n=t,t=!1);var o,i,a;return(t||(ke.createHTMLDocument?(t=ue.implementation.createHTMLDocument(''),o=t.createElement('base'),o.href=ue.location.href,t.head.appendChild(o)):t=ue),i=Ie.exec(e),a=!n&&[],i)?[t.createElement(i[1])]:(i=O([e],t,a),a&&a.length&&Pe(a).remove(),Pe.merge([],i.childNodes))},Pe.fn.load=function(e,t,n){var o=this,i=e.indexOf(' '),a,r,s;return-1<i&&(a=ne(e.slice(i)),e=e.slice(0,i)),Ce(t)?(n=t,t=void 0):t&&'object'==typeof t&&(r='POST'),0<o.length&&Pe.ajax({url:e,type:r||'GET',dataType:'html',data:t}).done(function(e){s=arguments,o.html(a?Pe('<div>').append(Pe.parseHTML(e)).find(a):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,s||[e.responseText,t,e])})}),this},Pe.each(['ajaxStart','ajaxStop','ajaxComplete','ajaxError','ajaxSuccess','ajaxSend'],function(e,t){Pe.fn[t]=function(e){return this.on(t,e)}}),Pe.expr.pseudos.animated=function(e){return Pe.grep(Pe.timers,function(t){return e===t.elem}).length},Pe.offset={setOffset:function(e,t,n){var o=Pe.css(e,'position'),i=Pe(e),a={},r,s,l,d,c,p,u;'static'===o&&(e.style.position='relative'),c=i.offset(),l=Pe.css(e,'top'),p=Pe.css(e,'left'),u=('absolute'===o||'fixed'===o)&&-1<(l+p).indexOf('auto'),u?(r=i.position(),d=r.top,s=r.left):(d=parseFloat(l)||0,s=parseFloat(p)||0),Ce(t)&&(t=t.call(e,n,Pe.extend({},c))),null!=t.top&&(a.top=t.top-c.top+d),null!=t.left&&(a.left=t.left-c.left+s),'using'in t?t.using.call(e,a):i.css(a)}},Pe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Pe.offset.setOffset(this,e,t)});var t=this[0],n,o;if(t)return t.getClientRects().length?(n=t.getBoundingClientRect(),o=t.ownerDocument.defaultView,{top:n.top+o.pageYOffset,left:n.left+o.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e=this[0],t={top:0,left:0},n,o,i;if('fixed'===Pe.css(e,'position'))o=e.getBoundingClientRect();else{for(o=this.offset(),i=e.ownerDocument,n=e.offsetParent||i.documentElement;n&&(n===i.body||n===i.documentElement)&&'static'===Pe.css(n,'position');)n=n.parentNode;n&&n!==e&&1===n.nodeType&&(t=Pe(n).offset(),t.top+=Pe.css(n,'borderTopWidth',!0),t.left+=Pe.css(n,'borderLeftWidth',!0))}return{top:o.top-t.top-Pe.css(e,'marginTop',!0),left:o.left-t.left-Pe.css(e,'marginLeft',!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&'static'===Pe.css(e,'position');)e=e.offsetParent;return e||lt})}}),Pe.each({scrollLeft:'pageXOffset',scrollTop:'pageYOffset'},function(e,t){var n='pageYOffset'===t;Pe.fn[e]=function(o){return ze(this,function(e,o,i){var a;return Te(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===i?a?a[t]:e[o]:void(a?a.scrollTo(n?a.pageXOffset:i,n?i:a.pageYOffset):e[o]=i)},e,o,arguments.length)}}),Pe.each(['top','left'],function(e,t){Pe.cssHooks[t]=z(ke.pixelPosition,function(e,n){if(n)return n=H(e,t),ft.test(n)?Pe(e).position()[t]+'px':n})}),Pe.each({Height:'height',Width:'width'},function(e,t){Pe.each({padding:'inner'+e,content:t,"":'outer'+e},function(n,i){Pe.fn[i]=function(a,r){var s=arguments.length&&(n||'boolean'!=typeof a),l=n||(!0===a||!0===r?'margin':'border');return ze(this,function(t,n,a){var r;return Te(t)?0===i.indexOf('outer')?t['inner'+e]:t.document.documentElement['client'+e]:9===t.nodeType?(r=t.documentElement,o(t.body['scroll'+e],r['scroll'+e],t.body['offset'+e],r['offset'+e],r['client'+e])):void 0===a?Pe.css(t,n,l):Pe.style(t,n,a,l)},t,s?a:void 0,s)}})}),Pe.each(['blur','focus','focusin','focusout','resize','scroll','click','dblclick','mousedown','mouseup','mousemove','mouseover','mouseout','mouseenter','mouseleave','change','select','submit','keydown','keypress','keyup','contextmenu'],function(e,t){Pe.fn[t]=function(e,n){return 0<arguments.length?this.on(t,null,e,n):this.trigger(t)}}),Pe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Pe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,o){return this.on(t,e,n,o)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,'**'):this.off(t,e||'**',n)}}),Pe.proxy=function(e,t){var n,o,i;if('string'==typeof t&&(n=e[t],t=e,e=n),!!Ce(e))return o=ge.call(arguments,2),i=function(){return e.apply(t||this,o.concat(ge.call(arguments)))},i.guid=e.guid=e.guid||Pe.guid++,i},Pe.holdReady=function(e){e?Pe.readyWait++:Pe.ready(!0)},Pe.isArray=Array.isArray,Pe.parseJSON=JSON.parse,Pe.nodeName=u,Pe.isFunction=Ce,Pe.isWindow=Te,Pe.camelCase=_,Pe.type=c,Pe.now=Date.now,Pe.isNumeric=function(e){var t=Pe.type(e);return('number'===t||'string'===t)&&!isNaN(e-parseFloat(e))},a=[],r=function(){return Pe}.apply(t,a),!(void 0!==r&&(e.exports=r));var an=l.jQuery,rn=l.$;return Pe.noConflict=function(e){return l.$===Pe&&(l.$=rn),e&&l.jQuery===Pe&&(l.jQuery=an),Pe},s||(l.jQuery=l.$=Pe),Pe})},function(e,t){'use strict';function n(){return'    \n\t<div class="preloader-wrapper small active">\n\t\t<div class="spinner-layer spinner-blue">\n\t\t\t<div class="circle-clipper left">\n\t\t\t\t<div class="circle"></div>\n\t\t\t</div><div class="gap-patch">\n\t\t\t\t<div class="circle"></div>\n\t\t\t</div><div class="circle-clipper right">\n\t\t\t\t<div class="circle"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="spinner-layer spinner-red">\n\t\t\t<div class="circle-clipper left">\n\t\t\t\t<div class="circle"></div>\n\t\t\t</div><div class="gap-patch">\n\t\t\t\t<div class="circle"></div>\n\t\t\t</div><div class="circle-clipper right">\n\t\t\t\t<div class="circle"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="spinner-layer spinner-yellow">\n\t\t\t<div class="circle-clipper left">\n\t\t\t\t<div class="circle"></div>\n\t\t\t</div><div class="gap-patch">\n\t\t\t\t<div class="circle"></div>\n\t\t\t</div><div class="circle-clipper right">\n\t\t\t\t<div class="circle"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="spinner-layer spinner-green">\n\t\t\t<div class="circle-clipper left">\n\t\t\t\t<div class="circle"></div>\n\t\t\t</div><div class="gap-patch">\n\t\t\t\t<div class="circle"></div>\n\t\t\t</div><div class="circle-clipper right">\n\t\t\t\t<div class="circle"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n    '}Object.defineProperty(t,'__esModule',{value:!0}),t.default=n;t.getLoader=n},function(e,t,n){'use strict';(function(e){Object.defineProperty(t,'__esModule',{value:!0}),t.updateInstances=void 0;var o=n(35),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=document.querySelectorAll('.textarea-ckeditor.html'),r=[];a.forEach(function(e){i.default.create(e,{}).then(function(e){console.log('Editor was initialized',e)}).catch(function(e){console.error(e.stack)})}),t.updateInstances=function(){r.forEach(function(t){var n=e('#'+t.element.attributes.id.nodeValue);if(!n.length)throw'L\'\xE9lement se rapportant \xE0 l\'instance de ckeditor n\'a pas \xE9t\xE9 trouv\xE9e et ne peut donc pas \xEAtre rafra\xEEchi.';n.val(t.getData())})}}).call(t,n(0))},function(e,t,n){n(4),e.exports=n(39)},function(e,t,n){'use strict';(function(e){var t=n(5);n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(14),n(16),n(18),n(19),n(20),n(21),n(22),n(23),n(24),n(25),n(26),n(27),n(28),n(29),n(30),n(31),n(32),n(33),n(34),n(36),n(37),n(38),n(2),function(){if(e('#admin .button-collapse').on('click',function(t){t.preventDefault()}),993>e(window).width()&&e('#admin .button-collapse').sideNav({draggable:!1}),e('select').material_select(),e('form div.errors').length){var n=e('form div.errors').closest('div.input-field').find('input');n.addClass('invalid'),n.prop('aria-invalid','true')}if(e('.collection-container').length){var o=e('.collection-container');e.each(o,function(n,o){t.initCollection.apply(e(o),[{max:+e(o).data('max'),afterAdd:function(){e('select').material_select()}}])})}}()}).call(t,n(0))},function(e,t,n){'use strict';(function(n){Object.defineProperty(t,'__esModule',{value:!0});var o=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null;'function'==typeof e&&e()},i=function(){n(g).hasClass('sortable-container')&&(n(g).find('.sortable-action').remove(),n.each(m.filter('.sortable-item'),function(e,t){var o='';0!==e&&(o+='<a href="#" class="sortable-action up"><i class="material-icons">arrow_upward</i></a>'),e!==f-1&&(o+='<a href="#" class="sortable-action down"><i class="material-icons">arrow_downward</i></a>'),n(t).append('<div class="">'+o+'</div>')}))},a=function(t){var o=n(t).prev(u);t.insertBefore(o),m=n(u),i(),e()},r=function(t){var o=n(t).next(u);t.insertAfter(o),m=n(u),i(),e()},e=function(){if(!0===!!n(g).data('collection-sf')){var e=/\[([0-9]+)\]/;n.each(m,function(t,o){n.each(n(o).find('select, input'),function(o,i){var a=n(i).attr('name');if(void 0!==a){var r=a.replace(e,'['+t+']');n(i).attr('name',r)}})})}else{var t=[];if(n.each(m,function(e,o){+n(o).attr('data-collection-position');n(o).attr('data-collection-position',e),t.push({id:n(o).data('collection-id'),position:e})}),y=n(g).data('collection-namespace'),null===y||void 0===y)throw'Le namespace de l\'entit\xE9 n\'a pas \xE9t\xE9 renseign\xE9';n.ajax({url:'/admin/ajax/position',method:'POST',data:{namespace:y,items:t},success:function(e){console.log(e)}})}},s=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null;if(null!==b)if(f>=b)null===e?n(g).find('.collection-action.add').remove():n(e).remove();else if(!n(g).find('div.collection-action.add').length){var t=n(g).data('add-label')||'ajouter',o='<div class="mt-1 collection-action add" id="'+new Date().getTime().toString(16)+'">\n<a class="success-color-bg waves-effect waves-light btn light-green accent-2 off-black-text"><i class="material-icons left off-black-text">playlist_add</i>'+t+'</a>\n</div>';n(g).append(o)}},l=function(e){h=n(e).closest('.collection-container').data('prototype');var t=h.replace(/__name__/g,''+f),o=-1!==t.search('item-collection');o||(t='<div class=\'item-collection\'>'+t+'</div>'),n(t).insertBefore(e)},d=function(e){e.remove()},c=function(e){!1===!!n(e).data('collection-deletable')&&void 0!==n(e).data('collection-deletable')||n.each(e.find('.item-collection'),function(e,t){n(t).find('.collection-action').remove(),p(t)})},p=function(e){var t,o;t=n('<p class=\'\'></p>'),o='<a href=\'\' class=\'collection-action remove\'><i class=\'red-text material-icons\'>delete</i></a>',n(t).append(o),n(e).prepend(t)},u,m,g,h,f,b,y;t.initCollection=function(t){u='.item-collection',g=n(this),m=n(g).find(u),h=n(this).attr('data-prototype'),f=m.length,b=null,Number.isInteger(t.max)&&0<t.max&&(b=t.max),s(),c(g),i(),n(g).on('click','a.collection-action.remove',function(t){t.preventDefault(),g=n(this).closest('.collection-container'),d(n(this).closest(u)),m=n(t.currentTarget).closest(u).find(u),f=m.length,s(),i()}),n(g).on('click','div.collection-action.add',function(a){g=n(this).closest('.collection-container'),a.preventDefault(),l(n(this)),m=n(u),f=m.length,s(n(this)),i(),c(g),o(t.afterAdd)}),n(this).on('click','.sortable-action.up',function(t){t.preventDefault(),a(n(this).closest(u))}),n(this).on('click','.sortable-action.down',function(t){t.preventDefault(),r(n(this).closest(u))})}}).call(t,n(0))},function(e,t,n){var o=Math.min,i=Math.abs,a=Math.max,r=Math.round,s,l,d;(function(o){'use strict';l=[n(0)],s=o,d='function'==typeof s?s.apply(t,l):s,!(d!==void 0&&(e.exports=d))})(function(t){'use strict';function e(e,n,o,a){for(var r=[],s=0,i;s<e.length;s++)if(i=e[s],i){var l=tinycolor(i),d=0.5>l.toHsl().l?'sp-thumb-el sp-thumb-dark':'sp-thumb-el sp-thumb-light';d+=tinycolor.equals(n,i)?' sp-thumb-active':'';var c=l.toString(a.preferredFormat||'rgb'),p=v?'background-color:'+l.toRgbString():'filter:'+l.toFilter();r.push('<span title="'+c+'" data-color="'+l.toRgbString()+'" class="'+d+'"><span class="sp-thumb-inner" style="'+p+';" /></span>')}else{r.push(t('<div />').append(t('<span data-color="" style="background-color:transparent;" class="'+'sp-clear-display'+'"></span>').attr('title',a.noColorSelectedText)).html())}return'<div class=\'sp-cf '+o+'\'>'+r.join('')+'</div>'}function n(){for(var e=0;e<b.length;e++)b[e]&&b[e].hide()}function s(e,n){var o=t.extend({},f,e);return o.callbacks={move:u(o.move,n),change:u(o.change,n),show:u(o.show,n),hide:u(o.hide,n),beforeShow:u(o.beforeShow,n)},o}function l(l,c){function u(){if(W.showPaletteOnly&&(W.showPalette=!0),Me.text(W.showPaletteOnly?W.togglePaletteMoreText:W.togglePaletteLessText),W.palette){pe=W.palette.slice(0),ue=t.isArray(pe[0])?pe:[pe],me={};for(var e=0;e<ue.length;e++)for(var n=0,o;n<ue[e].length;n++)o=tinycolor(ue[e][n]).toRgbString(),me[o]=!0}xe.toggleClass('sp-flat',$),xe.toggleClass('sp-input-disabled',!W.showInput),xe.toggleClass('sp-alpha-enabled',W.showAlpha),xe.toggleClass('sp-clear-enabled',Qe),xe.toggleClass('sp-buttons-disabled',!W.showButtons),xe.toggleClass('sp-palette-buttons-disabled',!W.togglePaletteOnly),xe.toggleClass('sp-palette-disabled',!W.showPalette),xe.toggleClass('sp-palette-only',W.showPaletteOnly),xe.toggleClass('sp-initial-disabled',!W.showInitial),xe.addClass(W.className).addClass(W.containerClassName),H()}function f(){if(U&&window.localStorage){try{var e=window.localStorage[U].split(',#');1<e.length&&(delete window.localStorage[U],t.each(e,function(e,t){x(t)}))}catch(t){}try{ge=window.localStorage[U].split(';')}catch(t){}}}function x(e){if(X){var n=tinycolor(e).toRgbString();if(!me[n]&&-1===t.inArray(n,ge))for(ge.push(n);ge.length>he;)ge.shift();if(U&&window.localStorage)try{window.localStorage[U]=ge.join(';')}catch(t){}}}function k(){var e=[];if(W.showPalette)for(var t=0,n;t<ge.length;t++)n=tinycolor(ge[t]).toRgbString(),me[n]||e.push(ge[t]);return e.reverse().slice(0,W.maxSelectionSize)}function C(){var n=F(),o=t.map(ue,function(t,o){return e(t,n,'sp-palette-row sp-palette-row-'+o,W)});f(),ge&&o.push(e(k(),n,'sp-palette-row sp-palette-row-selection',W)),Ne.html(o.join(''))}function T(){if(W.showInitial){var t=$e,n=F();Re.html(e([t,n],n,'sp-palette-row-initial',W))}}function A(){(0>=ee||0>=Z||0>=ne)&&H(),J=!0,xe.addClass(fe),be=null,we.trigger('dragstart.spectrum',[F()])}function S(){J=!1,xe.removeClass(fe),we.trigger('dragstop.spectrum',[F()])}function P(){var e=Ve.val();if((null===e||''===e)&&Qe)D(null),j(!0);else{var t=tinycolor(e);t.isValid()?(D(t),j(!0)):Ve.addClass('sp-validation-error')}}function E(){G?R():O()}function O(){var e=t.Event('beforeShow.spectrum');return G?void H():void(we.trigger(e,[F()]),!1===Q.beforeShow(F())||e.isDefaultPrevented()||(n(),G=!0,t(ye).bind('keydown.spectrum',V),t(ye).bind('click.spectrum',N),t(window).bind('resize.spectrum',K),je.addClass('sp-active'),xe.removeClass('sp-hidden'),H(),B(),$e=F(),T(),Q.show($e),we.trigger('show.spectrum',[$e])))}function V(t){27===t.keyCode&&R()}function N(t){2==t.button||J||(Ue?j(!0):I(),R())}function R(){!G||$||(G=!1,t(ye).unbind('keydown.spectrum',V),t(ye).unbind('click.spectrum',N),t(window).unbind('resize.spectrum',K),je.removeClass('sp-active'),xe.addClass('sp-hidden'),Q.hide(F()),we.trigger('hide.spectrum',[F()]))}function I(){D($e,!0)}function D(e,t){if(tinycolor.equals(e,F()))return void B();var n,o;!e&&Qe?Ye=!0:(Ye=!1,n=tinycolor(e),o=n.toHsv(),se=o.h%360/360,le=o.s,de=o.v,ce=o.a),B(),n&&n.isValid()&&!t&&(Xe=W.preferredFormat||n.getFormat())}function F(e){return e=e||{},Qe&&Ye?null:tinycolor.fromRatio({h:se,s:le,v:de,a:r(100*ce)/100},{format:e.format||Xe})}function M(){return!Ve.hasClass('sp-validation-error')}function L(){B(),Q.move(F()),we.trigger('move.spectrum',[F()])}function B(){Ve.removeClass('sp-validation-error'),q();var e=tinycolor.fromRatio({h:se,s:1,v:1});Ce.css('background-color',e.toHexString());var t=Xe;1>ce&&(0!==ce||'name'!==t)&&('hex'===t||'hex3'===t||'hex6'===t||'name'===t)&&(t='rgb');var n=F({format:t}),o='';if(ze.removeClass('sp-clear-display'),ze.css('background-color','transparent'),!n&&Qe)ze.addClass('sp-clear-display');else{var i=n.toHexString(),a=n.toRgbString();if(v||1===n.alpha?ze.css('background-color',a):(ze.css('background-color','transparent'),ze.css('filter',n.toFilter())),W.showAlpha){var r=n.toRgb();r.a=0;var s=tinycolor(r).toRgbString(),l='linear-gradient(left, '+s+', '+i+')';y?Pe.css('filter',tinycolor(s).toFilter({gradientType:1},i)):(Pe.css('background','-webkit-'+l),Pe.css('background','-moz-'+l),Pe.css('background','-ms-'+l),Pe.css('background','linear-gradient(to right, '+s+', '+i+')'))}o=n.toString(t)}W.showInput&&Ve.val(o),W.showPalette&&C(),T()}function q(){var e=le,t=de;if(Qe&&Ye)Oe.hide(),Se.hide(),Te.hide();else{Oe.show(),Se.show(),Te.show();var n=e*Z,i=ee-t*ee;n=a(-te,o(Z-te,n-te)),i=a(-te,o(ee-te,i-te)),Te.css({top:i+'px',left:n+'px'});var r=ce*ie;Oe.css({left:r-ae/2+'px'});var s=se*ne;Se.css({top:s-re+'px'})}}function j(e){var t=F(),n='',o=!tinycolor.equals(t,$e);t&&(n=t.toString(Xe),x(t)),Le&&we.val(n),e&&o&&(Q.change(t),we.trigger('change',[t]))}function H(){G&&(Z=Ce.width(),ee=Ce.height(),te=Te.height(),oe=Ae.width(),ne=Ae.height(),re=Se.height(),ie=Ee.width(),ae=Oe.width(),!$&&(xe.css('position','absolute'),W.offset?xe.offset(W.offset):xe.offset(d(xe,He))),q(),W.showPalette&&C(),we.trigger('reflow.spectrum'))}function z(){R(),_e=!0,we.attr('disabled',!0),He.addClass('sp-disabled')}var W=s(c,l),$=W.flat,X=W.showSelectionPalette,U=W.localStorageKey,Y=W.theme,Q=W.callbacks,K=g(H,10),G=!1,J=!1,Z=0,ee=0,te=0,ne=0,oe=0,ie=0,ae=0,re=0,se=0,le=0,de=0,ce=1,pe=[],ue=[],me={},ge=W.selectionPalette.slice(0),he=W.maxSelectionSize,fe='sp-dragging',be=null,ye=l.ownerDocument,ve=ye.body,we=t(l),_e=!1,xe=t(_,ye).addClass(Y),ke=xe.find('.sp-picker-container'),Ce=xe.find('.sp-color'),Te=xe.find('.sp-dragger'),Ae=xe.find('.sp-hue'),Se=xe.find('.sp-slider'),Pe=xe.find('.sp-alpha-inner'),Ee=xe.find('.sp-alpha'),Oe=xe.find('.sp-alpha-handle'),Ve=xe.find('.sp-input'),Ne=xe.find('.sp-palette'),Re=xe.find('.sp-initial'),Ie=xe.find('.sp-cancel'),De=xe.find('.sp-clear'),Fe=xe.find('.sp-choose'),Me=xe.find('.sp-palette-toggle'),Le=we.is('input'),Be=Le&&'color'===we.attr('type')&&h(),qe=Le&&!$,je=qe?t(w).addClass(Y).addClass(W.className).addClass(W.replacerClassName):t([]),He=qe?je:we,ze=je.find('.sp-preview-inner'),We=W.color||Le&&we.val(),$e=!1,Xe=W.preferredFormat,Ue=!W.showButtons||W.clickoutFiresChange,Ye=!We,Qe=W.allowEmpty&&!Be;(function(){function e(n){return n.data&&n.data.ignore?(D(t(n.target).closest('.sp-thumb-el').data('color')),L()):(D(t(n.target).closest('.sp-thumb-el').data('color')),L(),j(!0),W.hideAfterPaletteSelect&&R()),!1}if(y&&xe.find('*:not(input)').attr('unselectable','on'),u(),qe&&we.after(je).hide(),Qe||De.hide(),$)we.after(xe).hide();else{var n='parent'===W.appendTo?we.parent():t(W.appendTo);1!==n.length&&(n=t('body')),n.append(xe)}f(),He.bind('click.spectrum touchstart.spectrum',function(n){_e||E(),n.stopPropagation(),t(n.target).is('input')||n.preventDefault()}),(we.is(':disabled')||!0===W.disabled)&&z(),xe.click(p),Ve.change(P),Ve.bind('paste',function(){setTimeout(P,1)}),Ve.keydown(function(t){13==t.keyCode&&P()}),Ie.text(W.cancelText),Ie.bind('click.spectrum',function(t){t.stopPropagation(),t.preventDefault(),I(),R()}),De.attr('title',W.clearText),De.bind('click.spectrum',function(t){t.stopPropagation(),t.preventDefault(),Ye=!0,L(),$&&j(!0)}),Fe.text(W.chooseText),Fe.bind('click.spectrum',function(t){t.stopPropagation(),t.preventDefault(),y&&Ve.is(':focus')&&Ve.trigger('change'),M()&&(j(!0),R())}),Me.text(W.showPaletteOnly?W.togglePaletteMoreText:W.togglePaletteLessText),Me.bind('click.spectrum',function(t){t.stopPropagation(),t.preventDefault(),W.showPaletteOnly=!W.showPaletteOnly,W.showPaletteOnly||$||xe.css('left','-='+(ke.outerWidth(!0)+5)),u()}),m(Ee,function(t,n,o){ce=t/ie,Ye=!1,o.shiftKey&&(ce=r(10*ce)/10),L()},A,S),m(Ae,function(e,t){se=parseFloat(t/ne),Ye=!1,W.showAlpha||(ce=1),L()},A,S),m(Ce,function(t,n,o){if(!o.shiftKey)be=null;else if(!be){var e=le*Z,a=ee-de*ee,r=i(t-e)>i(n-a);be=r?'x':'y'}var s=!be||'x'===be,l=!be||'y'===be;s&&(le=parseFloat(t/Z)),l&&(de=parseFloat((ee-n)/ee)),Ye=!1,W.showAlpha||(ce=1),L()},A,S),We?(D(We),B(),Xe=W.preferredFormat||tinycolor(We).format,x(We)):B(),$&&O();var o=y?'mousedown.spectrum':'click.spectrum touchstart.spectrum';Ne.delegate('.sp-thumb-el',o,e),Re.delegate('.sp-thumb-el:nth-child(1)',o,{ignore:!0},e)})();var Ke={show:O,hide:R,toggle:E,reflow:H,option:function(e,n){return void 0===e?t.extend({},W):void 0===n?W[e]:void(W[e]=n,'preferredFormat'===e&&(Xe=W.preferredFormat),u())},enable:function(){_e=!1,we.attr('disabled',!1),He.removeClass('sp-disabled')},disable:z,offset:function(e){W.offset=e,H()},set:function(e){D(e),j()},get:F,destroy:function(){we.show(),He.unbind('click.spectrum touchstart.spectrum'),xe.remove(),je.remove(),b[Ke.id]=null},container:xe};return Ke.id=b.push(Ke)-1,Ke}function d(e,n){var a=0,r=e.outerWidth(),s=e.outerHeight(),l=n.outerHeight(),d=e[0].ownerDocument,c=d.documentElement,p=c.clientWidth+t(d).scrollLeft(),u=c.clientHeight+t(d).scrollTop(),m=n.offset();return m.top+=l,m.left-=o(m.left,m.left+r>p&&p>r?i(m.left+r-p):0),m.top-=o(m.top,m.top+s>u&&u>s?i(s+l-a):a),m}function c(){}function p(t){t.stopPropagation()}function u(e,t){var n=Array.prototype.slice,o=n.call(arguments,2);return function(){return e.apply(t,o.concat(n.call(arguments)))}}function m(n,i,r,e){function s(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function l(t){if(p){if(y&&9>c.documentMode&&!t.button)return d();var e=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0],r=e&&e.pageX||t.pageX,l=e&&e.pageY||t.pageY,f=a(0,o(r-u.left,g)),b=a(0,o(l-u.top,m));h&&s(t),i.apply(n,[f,b,t])}}function d(){p&&(t(c).unbind(f),t(c.body).removeClass('sp-dragging'),setTimeout(function(){e.apply(n,arguments)},0)),p=!1}i=i||function(){},r=r||function(){},e=e||function(){};var c=document,p=!1,u={},m=0,g=0,h='ontouchstart'in window,f={};f.selectstart=s,f.dragstart=s,f['touchmove mousemove']=l,f['touchend mouseup']=d,t(n).bind('touchstart mousedown',function(o){var e=o.which?3==o.which:2==o.button;e||p||!1===r.apply(n,arguments)||(p=!0,m=t(n).height(),g=t(n).width(),u=t(n).offset(),t(c).bind(f),t(c.body).addClass('sp-dragging'),l(o),s(o))})}function g(e,t,n){var o;return function(){var i=this,a=arguments;n&&clearTimeout(o),(n||!o)&&(o=setTimeout(function(){o=null,e.apply(i,a)},t))}}function h(){return t.fn.spectrum.inputTypeColorSupport()}var f={beforeShow:c,move:c,change:c,show:c,hide:c,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:'body',maxSelectionSize:7,cancelText:'cancel',chooseText:'choose',togglePaletteMoreText:'more',togglePaletteLessText:'less',clearText:'Clear Color Selection',noColorSelectedText:'No Color Selected',preferredFormat:!1,className:'',containerClassName:'',replacerClassName:'',showAlpha:!1,theme:'sp-light',palette:[['#ffffff','#000000','#ff0000','#ff8000','#ffff00','#008000','#0000ff','#4b0082','#9400d3']],selectionPalette:[],disabled:!1,offset:null},b=[],y=!!/msie/i.exec(window.navigator.userAgent),v=function(){function e(e,t){return!!~(''+e).indexOf(t)}var t=document.createElement('div'),n=t.style;return n.cssText='background-color:rgba(0,0,0,.5)',e(n.backgroundColor,'rgba')||e(n.backgroundColor,'hsla')}(),w='<div class=\'sp-replacer\'><div class=\'sp-preview\'><div class=\'sp-preview-inner\'></div></div><div class=\'sp-dd\'>&#9660;</div></div>',_=function(){var e='';if(y)for(var t=1;6>=t;t++)e+='<div class=\'sp-'+t+'\'></div>';return['<div class=\'sp-container sp-hidden\'>','<div class=\'sp-palette-container\'>','<div class=\'sp-palette sp-thumb sp-cf\'></div>','<div class=\'sp-palette-button-container sp-cf\'>','<button type=\'button\' class=\'sp-palette-toggle\'></button>','</div>','</div>','<div class=\'sp-picker-container\'>','<div class=\'sp-top sp-cf\'>','<div class=\'sp-fill\'></div>','<div class=\'sp-top-inner\'>','<div class=\'sp-color\'>','<div class=\'sp-sat\'>','<div class=\'sp-val\'>','<div class=\'sp-dragger\'></div>','</div>','</div>','</div>','<div class=\'sp-clear sp-clear-display\'>','</div>','<div class=\'sp-hue\'>','<div class=\'sp-slider\'></div>',e,'</div>','</div>','<div class=\'sp-alpha\'><div class=\'sp-alpha-inner\'><div class=\'sp-alpha-handle\'></div></div></div>','</div>','<div class=\'sp-input-container sp-cf\'>','<input class=\'sp-input\' type=\'text\' spellcheck=\'false\'  />','</div>','<div class=\'sp-initial sp-thumb sp-cf\'></div>','<div class=\'sp-button-container sp-cf\'>','<a class=\'sp-cancel\' href=\'#\'></a>','<button type=\'button\' class=\'sp-choose\'></button>','</div>','</div>','</div>'].join('')}(),x='spectrum.id';t.fn.spectrum=function(e){if('string'==typeof e){var n=this,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=b[t(this).data(x)];if(i){var a=i[e];if(!a)throw new Error('Spectrum: no such method: \''+e+'\'');'get'==e?n=i.get():'container'==e?n=i.container:'option'==e?n=i.option.apply(i,o):'destroy'==e?(i.destroy(),t(this).removeData(x)):a.apply(i,o)}}),n}return this.spectrum('destroy').each(function(){var n=t.extend({},e,t(this).data()),o=l(this,n);t(this).data(x,o.id)})},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=m,t.fn.spectrum.defaults=f,t.fn.spectrum.inputTypeColorSupport=function e(){if('undefined'==typeof e._cachedResult){var n=t('<input type=\'color\'/>')[0];e._cachedResult='color'===n.type&&''!==n.value}return e._cachedResult},t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t('input[type=color]');e.length&&!h()&&e.spectrum({preferredFormat:'hex6'})},function(){function e(e){var n={r:0,g:0,b:0},o=1,i=!1,r=!1;return'string'==typeof e&&(e=D(e)),'object'==typeof e&&(e.hasOwnProperty('r')&&e.hasOwnProperty('g')&&e.hasOwnProperty('b')?(n=t(e.r,e.g,e.b),i=!0,r='%'===(e.r+'').substr(-1)?'prgb':'rgb'):e.hasOwnProperty('h')&&e.hasOwnProperty('s')&&e.hasOwnProperty('v')?(e.s=N(e.s),e.v=N(e.v),n=d(e.h,e.s,e.v),i=!0,r='hsv'):e.hasOwnProperty('h')&&e.hasOwnProperty('s')&&e.hasOwnProperty('l')&&(e.s=N(e.s),e.l=N(e.l),n=s(e.h,e.s,e.l),i=!0,r='hsl'),e.hasOwnProperty('a')&&(o=e.a)),o=T(o),{ok:i,format:e.format||r,r:j(255,H(n.r,0)),g:j(255,H(n.g,0)),b:j(255,H(n.b,0)),a:o}}function t(e,t,n){return{r:255*A(e,255),g:255*A(t,255),b:255*A(n,255)}}function n(e,t,n){e=A(e,255),t=A(t,255),n=A(n,255);var o=H(e,t,n),i=j(e,t,n),a=(o+i)/2,r,c;if(o==i)r=c=0;else{var p=o-i;c=0.5<a?p/(2-o-i):p/(o+i);o===e?r=(t-n)/p+(t<n?6:0):o===t?r=(n-e)/p+2:o===n?r=(e-t)/p+4:void 0;r/=6}return{h:r,s:c,l:a}}function s(e,t,n){function o(e,n,o){return 0>o&&(o+=1),1<o&&(o-=1),o<1/6?e+6*(n-e)*o:o<1/2?n:o<2/3?e+6*((n-e)*(2/3-o)):e}var i,a,r;if(e=A(e,360),t=A(t,100),n=A(n,100),0===t)i=a=r=n;else{var s=0.5>n?n*(1+t):n+t-n*t,l=2*n-s;i=o(l,s,e+1/3),a=o(l,s,e),r=o(l,s,e-1/3)}return{r:255*i,g:255*a,b:255*r}}function l(e,t,n){e=A(e,255),t=A(t,255),n=A(n,255);var o=H(e,t,n),i=j(e,t,n),a=o-i,r,l;return l=0===o?0:a/o,o==i?r=0:(o===e?r=(t-n)/a+(t<n?6:0):o===t?r=(n-e)/a+2:o===n?r=(e-t)/a+4:void 0,r/=6),{h:r,s:l,v:o}}function d(e,n,o){e=6*A(e,360),n=A(n,100),o=A(o,100);var a=B.floor(e),i=e-a,s=o*(1-n),l=o*(1-i*n),d=o*(1-(1-i)*n),t=a%6,c=[o,l,s,s,d,o][t],r=[d,o,o,l,s,s][t],p=[s,s,d,o,o,l][t];return{r:255*c,g:255*r,b:255*p}}function c(e,t,n,o){var i=[V(q(e).toString(16)),V(q(t).toString(16)),V(q(n).toString(16))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join('')}function p(e,t,n,o){var i=[V(R(o)),V(q(e).toString(16)),V(q(t).toString(16)),V(q(n).toString(16))];return i.join('')}function u(e,t){t=0===t?0:t||10;var n=W(e).toHsl();return n.s-=t/100,n.s=S(n.s),W(n)}function m(e,t){t=0===t?0:t||10;var n=W(e).toHsl();return n.s+=t/100,n.s=S(n.s),W(n)}function g(e){return W(e).desaturate(100)}function h(e,t){t=0===t?0:t||10;var n=W(e).toHsl();return n.l+=t/100,n.l=S(n.l),W(n)}function f(e,t){t=0===t?0:t||10;var n=W(e).toRgb();return n.r=H(0,j(255,n.r-q(255*-(t/100)))),n.g=H(0,j(255,n.g-q(255*-(t/100)))),n.b=H(0,j(255,n.b-q(255*-(t/100)))),W(n)}function b(e,t){t=0===t?0:t||10;var n=W(e).toHsl();return n.l-=t/100,n.l=S(n.l),W(n)}function y(e,t){var n=W(e).toHsl(),o=(q(n.h)+t)%360;return n.h=0>o?360+o:o,W(n)}function v(e){var t=W(e).toHsl();return t.h=(t.h+180)%360,W(t)}function w(e){var t=W(e).toHsl(),n=t.h;return[W(e),W({h:(n+120)%360,s:t.s,l:t.l}),W({h:(n+240)%360,s:t.s,l:t.l})]}function _(e){var t=W(e).toHsl(),n=t.h;return[W(e),W({h:(n+90)%360,s:t.s,l:t.l}),W({h:(n+180)%360,s:t.s,l:t.l}),W({h:(n+270)%360,s:t.s,l:t.l})]}function x(e){var t=W(e).toHsl(),n=t.h;return[W(e),W({h:(n+72)%360,s:t.s,l:t.l}),W({h:(n+216)%360,s:t.s,l:t.l})]}function k(e,t,n){t=t||6,n=n||30;var o=W(e).toHsl(),i=360/n,a=[W(e)];for(o.h=(o.h-(i*t>>1)+720)%360;--t;)o.h=(o.h+i)%360,a.push(W(o));return a}function C(e,t){t=t||6;for(var n=W(e).toHsv(),o=n.h,i=n.s,a=n.v,r=[],l=1/t;t--;)r.push(W({h:o,s:i,v:a})),a=(a+l)%1;return r}function T(e){return e=parseFloat(e),(isNaN(e)||0>e||1<e)&&(e=1),e}function A(e,t){E(e)&&(e='100%');var n=O(e);return e=j(t,H(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),1e-6>B.abs(e-t)?1:e%t/parseFloat(t)}function S(e){return j(1,H(0,e))}function P(e){return parseInt(e,16)}function E(e){return'string'==typeof e&&-1!=e.indexOf('.')&&1===parseFloat(e)}function O(e){return'string'==typeof e&&-1!=e.indexOf('%')}function V(e){return 1==e.length?'0'+e:''+e}function N(e){return 1>=e&&(e=100*e+'%'),e}function R(e){return r(255*parseFloat(e)).toString(16)}function I(e){return P(e)/255}function D(e){e=e.replace(F,'').replace(M,'').toLowerCase();var t=!1;if($[e])e=$[e],t=!0;else if('transparent'==e)return{r:0,g:0,b:0,a:0,format:'name'};var n;return(n=U.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=U.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=U.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=U.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=U.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=U.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=U.hex8.exec(e))?{a:I(n[1]),r:P(n[2]),g:P(n[3]),b:P(n[4]),format:t?'name':'hex8'}:(n=U.hex6.exec(e))?{r:P(n[1]),g:P(n[2]),b:P(n[3]),format:t?'name':'hex'}:!!(n=U.hex3.exec(e))&&{r:P(n[1]+''+n[1]),g:P(n[2]+''+n[2]),b:P(n[3]+''+n[3]),format:t?'name':'hex'}}var F=/^[\s,#]+/,M=/\s+$/,L=0,B=Math,q=B.round,j=B.min,H=B.max,z=B.random,W=function(t,n){if(t=t?t:'',n=n||{},t instanceof W)return t;if(!(this instanceof W))return new W(t,n);var o=e(t);this._originalInput=t,this._r=o.r,this._g=o.g,this._b=o.b,this._a=o.a,this._roundA=q(100*this._a)/100,this._format=n.format||o.format,this._gradientType=n.gradientType,1>this._r&&(this._r=q(this._r)),1>this._g&&(this._g=q(this._g)),1>this._b&&(this._b=q(this._b)),this._ok=o.ok,this._tc_id=L++};W.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},setAlpha:function(e){return this._a=T(e),this._roundA=q(100*this._a)/100,this},toHsv:function(){var e=l(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=l(this._r,this._g,this._b),t=q(360*e.h),n=q(100*e.s),o=q(100*e.v);return 1==this._a?'hsv('+t+', '+n+'%, '+o+'%)':'hsva('+t+', '+n+'%, '+o+'%, '+this._roundA+')'},toHsl:function(){var e=n(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=n(this._r,this._g,this._b),t=q(360*e.h),o=q(100*e.s),i=q(100*e.l);return 1==this._a?'hsl('+t+', '+o+'%, '+i+'%)':'hsla('+t+', '+o+'%, '+i+'%, '+this._roundA+')'},toHex:function(e){return c(this._r,this._g,this._b,e)},toHexString:function(e){return'#'+this.toHex(e)},toHex8:function(){return p(this._r,this._g,this._b,this._a)},toHex8String:function(){return'#'+this.toHex8()},toRgb:function(){return{r:q(this._r),g:q(this._g),b:q(this._b),a:this._a}},toRgbString:function(){return 1==this._a?'rgb('+q(this._r)+', '+q(this._g)+', '+q(this._b)+')':'rgba('+q(this._r)+', '+q(this._g)+', '+q(this._b)+', '+this._roundA+')'},toPercentageRgb:function(){return{r:q(100*A(this._r,255))+'%',g:q(100*A(this._g,255))+'%',b:q(100*A(this._b,255))+'%',a:this._a}},toPercentageRgbString:function(){return 1==this._a?'rgb('+q(100*A(this._r,255))+'%, '+q(100*A(this._g,255))+'%, '+q(100*A(this._b,255))+'%)':'rgba('+q(100*A(this._r,255))+'%, '+q(100*A(this._g,255))+'%, '+q(100*A(this._b,255))+'%, '+this._roundA+')'},toName:function(){return 0===this._a?'transparent':!(1>this._a)&&(X[c(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t='#'+p(this._r,this._g,this._b,this._a),n=t,o=this._gradientType?'GradientType = 1, ':'';if(e){var i=W(e);n=i.toHex8String()}return'progid:DXImageTransform.Microsoft.gradient('+o+'startColorstr='+t+',endColorstr='+n+')'},toString:function(e){var t=!!e;e=e||this._format;var n=!1,o=1>this._a&&0<=this._a,i=!t&&o&&('hex'===e||'hex6'===e||'hex3'===e||'name'===e);return i?'name'===e&&0===this._a?this.toName():this.toRgbString():('rgb'===e&&(n=this.toRgbString()),'prgb'===e&&(n=this.toPercentageRgbString()),('hex'===e||'hex6'===e)&&(n=this.toHexString()),'hex3'===e&&(n=this.toHexString(!0)),'hex8'===e&&(n=this.toHex8String()),'name'===e&&(n=this.toName()),'hsl'===e&&(n=this.toHslString()),'hsv'===e&&(n=this.toHsvString()),n||this.toHexString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(h,arguments)},brighten:function(){return this._applyModification(f,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(u,arguments)},saturate:function(){return this._applyModification(m,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(k,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(C,arguments)},splitcomplement:function(){return this._applyCombination(x,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(_,arguments)}},W.fromRatio=function(e,t){if('object'==typeof e){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]='a'==o?e[o]:N(e[o]));e=n}return W(e,t)},W.equals=function(e,t){return e&&t&&W(e).toRgbString()==W(t).toRgbString()},W.random=function(){return W.fromRatio({r:z(),g:z(),b:z()})},W.mix=function(e,t,n){n=0===n?0:n||50;var o=W(e).toRgb(),i=W(t).toRgb(),r=n/100,s=2*r-1,l=i.a-o.a,a;a=-1==s*l?s:(s+l)/(1+s*l),a=(a+1)/2;var d=1-a,c={r:i.r*a+o.r*d,g:i.g*a+o.g*d,b:i.b*a+o.b*d,a:i.a*r+o.a*(1-r)};return W(c)},W.readability=function(e,t){var n=W(e),r=W(t),s=n.toRgb(),l=r.toRgb(),d=n.getBrightness(),c=r.getBrightness(),p=a(s.r,l.r)-o(s.r,l.r)+a(s.g,l.g)-o(s.g,l.g)+a(s.b,l.b)-o(s.b,l.b);return{brightness:i(d-c),color:p}},W.isReadable=function(e,t){var n=W.readability(e,t);return 125<n.brightness&&500<n.color},W.mostReadable=function(e,t){for(var n=null,o=0,a=!1,r=0;r<t.length;r++){var i=W.readability(e,t[r]),s=125<i.brightness&&500<i.color,l=3*(i.brightness/125)+i.color/500;(s&&!a||s&&a&&l>o||!s&&!a&&l>o)&&(a=s,o=l,n=W(t[r]))}return n};var $=W.names={aliceblue:'f0f8ff',antiquewhite:'faebd7',aqua:'0ff',aquamarine:'7fffd4',azure:'f0ffff',beige:'f5f5dc',bisque:'ffe4c4',black:'000',blanchedalmond:'ffebcd',blue:'00f',blueviolet:'8a2be2',brown:'a52a2a',burlywood:'deb887',burntsienna:'ea7e5d',cadetblue:'5f9ea0',chartreuse:'7fff00',chocolate:'d2691e',coral:'ff7f50',cornflowerblue:'6495ed',cornsilk:'fff8dc',crimson:'dc143c',cyan:'0ff',darkblue:'00008b',darkcyan:'008b8b',darkgoldenrod:'b8860b',darkgray:'a9a9a9',darkgreen:'006400',darkgrey:'a9a9a9',darkkhaki:'bdb76b',darkmagenta:'8b008b',darkolivegreen:'556b2f',darkorange:'ff8c00',darkorchid:'9932cc',darkred:'8b0000',darksalmon:'e9967a',darkseagreen:'8fbc8f',darkslateblue:'483d8b',darkslategray:'2f4f4f',darkslategrey:'2f4f4f',darkturquoise:'00ced1',darkviolet:'9400d3',deeppink:'ff1493',deepskyblue:'00bfff',dimgray:'696969',dimgrey:'696969',dodgerblue:'1e90ff',firebrick:'b22222',floralwhite:'fffaf0',forestgreen:'228b22',fuchsia:'f0f',gainsboro:'dcdcdc',ghostwhite:'f8f8ff',gold:'ffd700',goldenrod:'daa520',gray:'808080',green:'008000',greenyellow:'adff2f',grey:'808080',honeydew:'f0fff0',hotpink:'ff69b4',indianred:'cd5c5c',indigo:'4b0082',ivory:'fffff0',khaki:'f0e68c',lavender:'e6e6fa',lavenderblush:'fff0f5',lawngreen:'7cfc00',lemonchiffon:'fffacd',lightblue:'add8e6',lightcoral:'f08080',lightcyan:'e0ffff',lightgoldenrodyellow:'fafad2',lightgray:'d3d3d3',lightgreen:'90ee90',lightgrey:'d3d3d3',lightpink:'ffb6c1',lightsalmon:'ffa07a',lightseagreen:'20b2aa',lightskyblue:'87cefa',lightslategray:'789',lightslategrey:'789',lightsteelblue:'b0c4de',lightyellow:'ffffe0',lime:'0f0',limegreen:'32cd32',linen:'faf0e6',magenta:'f0f',maroon:'800000',mediumaquamarine:'66cdaa',mediumblue:'0000cd',mediumorchid:'ba55d3',mediumpurple:'9370db',mediumseagreen:'3cb371',mediumslateblue:'7b68ee',mediumspringgreen:'00fa9a',mediumturquoise:'48d1cc',mediumvioletred:'c71585',midnightblue:'191970',mintcream:'f5fffa',mistyrose:'ffe4e1',moccasin:'ffe4b5',navajowhite:'ffdead',navy:'000080',oldlace:'fdf5e6',olive:'808000',olivedrab:'6b8e23',orange:'ffa500',orangered:'ff4500',orchid:'da70d6',palegoldenrod:'eee8aa',palegreen:'98fb98',paleturquoise:'afeeee',palevioletred:'db7093',papayawhip:'ffefd5',peachpuff:'ffdab9',peru:'cd853f',pink:'ffc0cb',plum:'dda0dd',powderblue:'b0e0e6',purple:'800080',rebeccapurple:'663399',red:'f00',rosybrown:'bc8f8f',royalblue:'4169e1',saddlebrown:'8b4513',salmon:'fa8072',sandybrown:'f4a460',seagreen:'2e8b57',seashell:'fff5ee',sienna:'a0522d',silver:'c0c0c0',skyblue:'87ceeb',slateblue:'6a5acd',slategray:'708090',slategrey:'708090',snow:'fffafa',springgreen:'00ff7f',steelblue:'4682b4',tan:'d2b48c',teal:'008080',thistle:'d8bfd8',tomato:'ff6347',turquoise:'40e0d0',violet:'ee82ee',wheat:'f5deb3',white:'fff',whitesmoke:'f5f5f5',yellow:'ff0',yellowgreen:'9acd32'},X=W.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}($),U=function(){var e='(?:'+'[-\\+]?\\d*\\.\\d+%?'+')|(?:'+'[-\\+]?\\d+%?'+')';return{rgb:/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,rgba:/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsl:/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsla:/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsv:/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsva:/hsva[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();window.tinycolor=W}(),t(function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()})})},function(e,t,n){'use strict';(function(e){e(document).ready(function(){e('input.color-picker').each(function(t,n){e(n).spectrum({allowEmpty:!0,preferredFormat:'hex',containerClassName:'mb-1',showInput:!0,cancelText:'annuler',chooseText:'ok',showInitial:!0})}),e('input.color-picker').closest('.input-field').find('label').addClass('color-active')})}).call(t,n(0))},function(e,t,n){(function(e,t){'undefined'==typeof e&&(e=t=n(0))}).call(t,n(0),n(0))},function(e,t,n){var o,i;(function(a){o=[n(0)],i=function(e){return a(e)}.apply(t,o),!(i!==void 0&&(e.exports=i))})(function(e){function t(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}e.easing.jswing=e.easing.swing;var n=Math.pow,o=Math.sqrt,i=Math.sin,a=Math.cos,r=Math.PI,s=1.70158,l=1.525*s,d=s+1,c=2*r/3,p=2*r/4.5;e.extend(e.easing,{def:'easeOutQuad',swing:function(t){return e.easing[e.easing.def](t)},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return 0.5>e?2*e*e:1-n(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-n(1-e,3)},easeInOutCubic:function(e){return 0.5>e?4*e*e*e:1-n(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-n(1-e,4)},easeInOutQuart:function(e){return 0.5>e?8*e*e*e*e:1-n(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-n(1-e,5)},easeInOutQuint:function(e){return 0.5>e?16*e*e*e*e*e:1-n(-2*e+2,5)/2},easeInSine:function(e){return 1-a(e*r/2)},easeOutSine:function(e){return i(e*r/2)},easeInOutSine:function(e){return-(a(r*e)-1)/2},easeInExpo:function(e){return 0===e?0:n(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-n(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:0.5>e?n(2,20*e-10)/2:(2-n(2,-20*e+10))/2},easeInCirc:function(e){return 1-o(1-n(e,2))},easeOutCirc:function(e){return o(1-n(e-1,2))},easeInOutCirc:function(e){return 0.5>e?(1-o(1-n(2*e,2)))/2:(o(1-n(-2*e+2,2))+1)/2},easeInElastic:function(e){return 0===e?0:1===e?1:-n(2,10*e-10)*i((10*e-10.75)*c)},easeOutElastic:function(e){return 0===e?0:1===e?1:n(2,-10*e)*i((10*e-0.75)*c)+1},easeInOutElastic:function(e){return 0===e?0:1===e?1:0.5>e?-(n(2,20*e-10)*i((20*e-11.125)*p))/2:n(2,-20*e+10)*i((20*e-11.125)*p)/2+1},easeInBack:function(e){return d*e*e*e-s*e*e},easeOutBack:function(e){return 1+d*n(e-1,3)+s*n(e-1,2)},easeInOutBack:function(e){return 0.5>e?n(2*e,2)*(2*(l+1)*e-l)/2:(n(2*e-2,2)*((l+1)*(2*e-2)+l)+2)/2},easeInBounce:function(e){return 1-t(1-e)},easeOutBounce:t,easeInOutBounce:function(e){return 0.5>e?(1-t(1-2*e))/2:(1+t(2*e-1))/2}})})},function(e,t,n){(function(e){e.extend(e.easing,{easeInOutMaterial:function(e,n,t,o,i){return 1>(n/=i/2)?o/2*n*n+t:o/4*((n-=2)*n*n+2)+t}})}).call(t,n(0))},function(t,n,o){var _=Math.min,d=Math.abs,i=Math.cos,a=Math.PI,O=Math.max;(function(k,c){var r,s;/*! VelocityJS.org (1.2.3). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License *//*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. *//*! Note that this has been modified by Materialize to confirm that Velocity is not already being imported. */k.Velocity?console.log('Velocity is already loaded. You may be needlessly importing Velocity again; note that Materialize includes Velocity.'):(!function(d){function p(n){var e=n.length,o=m.type(n);return'function'===o||m.isWindow(n)?!1:1===n.nodeType&&e||'array'===o||0===e||'number'==typeof e&&0<e&&e-1 in n}if(!c){var m=function(n,e){return new m.fn.init(n,e)};m.isWindow=function(t){return null!=t&&t==t.window},m.type=function(n){return null==n?n+'':'object'==typeof n||'function'==typeof n?t[o.call(n)]||'object':typeof n},m.isArray=Array.isArray||function(t){return'array'===m.type(t)},m.isPlainObject=function(o){if(!o||'object'!==m.type(o)||o.nodeType||m.isWindow(o))return!1;try{if(o.constructor&&!n.call(o,'constructor')&&!n.call(o.constructor.prototype,'isPrototypeOf'))return!1}catch(e){return!1}for(var i in o);return void 0==i||n.call(o,i)},m.each=function(t,e,r){var a=0,o=t.length,i=p(t),s;if(r){if(i)for(;o>a&&(s=e.apply(t[a],r),!1!==s);a++);else for(a in t)if(s=e.apply(t[a],r),!1===s)break;}else if(i)for(;o>a&&(s=e.call(t[a],a,t[a]),!1!==s);a++);else for(a in t)if(s=e.call(t[a],a,t[a]),!1===s)break;return t},m.data=function(a,e,t){if(void 0===t){var n=a[m.expando],o=n&&u[n];if(void 0===e)return o;if(o&&e in o)return o[e]}else if(void 0!==e){var n=a[m.expando]||(a[m.expando]=++m.uuid);return u[n]=u[n]||{},u[n][e]=t,t}},m.removeData=function(i,e){var t=i[m.expando],n=t&&u[t];n&&m.each(e,function(o,e){delete n[e]})},m.extend=function(){var r=arguments[0]||{},d=1,l=arguments.length,p=!1,c,e,t,a,n,o;for('boolean'==typeof r&&(p=r,r=arguments[d]||{},d++),'object'!=typeof r&&'function'!==m.type(r)&&(r={}),d===l&&(r=this,d--);l>d;d++)if(null!=(n=arguments[d]))for(a in n)c=r[a],t=n[a],r!==t&&(p&&t&&(m.isPlainObject(t)||(e=m.isArray(t)))?(e?(e=!1,o=c&&m.isArray(c)?c:[]):o=c&&m.isPlainObject(c)?c:{},r[a]=m.extend(p,o,t)):void 0!==t&&(r[a]=t));return r},m.queue=function(t,e,a){function n(t,n){var o=n||[];return null!=t&&(p(Object(t))?!function(o,e){for(var t=+e.length,i=0,a=o.length;t>i;)o[a++]=e[i++];if(t!=t)for(;void 0!==e[i];)o[a++]=e[i++];return o.length=a,o}(o,'string'==typeof t?[t]:t):[].push.call(o,t)),o}if(t){e=(e||'fx')+'queue';var o=m.data(t,e);return a?(!o||m.isArray(a)?o=m.data(t,e,n(a)):o.push(a),o):o||[]}},m.dequeue=function(n,i){m.each(n.nodeType?[n]:n,function(t,e){i=i||'fx';var a=m.queue(e,i),n=a.shift();'inprogress'===n&&(n=a.shift()),n&&('fx'===i&&a.unshift('inprogress'),n.call(e,function(){m.dequeue(e,i)}))})},m.fn=m.prototype={init:function(t){if(t.nodeType)return this[0]=t,this;throw new Error('Not a DOM node.')},offset:function(){var e=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:e.top+(d.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:e.left+(d.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function o(){for(var t=this.offsetParent||document;t&&'html'===!t.nodeType.toLowerCase&&'static'===t.style.position;)t=t.offsetParent;return t||document}var e=this[0],o=o.apply(e),t=this.offset(),i=/^(?:body|html)$/i.test(o.nodeName)?{top:0,left:0}:m(o).offset();return t.top-=parseFloat(e.style.marginTop)||0,t.left-=parseFloat(e.style.marginLeft)||0,o.style&&(i.top+=parseFloat(o.style.borderTopWidth)||0,i.left+=parseFloat(o.style.borderLeftWidth)||0),{top:t.top-i.top,left:t.left-i.left}}};var u={};m.expando='velocity'+new Date().getTime(),m.uuid=0;for(var t={},n=t.hasOwnProperty,o=t.toString,e=['Boolean','Number','String','Function','Array','Date','RegExp','Object','Error'],i=0;i<e.length;i++)t['[object '+e[i]+']']=e[i].toLowerCase();m.fn.init.prototype=m.fn,d.Velocity={Utilities:m}}}(window),function(i){'object'==typeof t&&'object'==typeof t.exports?t.exports=i():(r=i,s='function'==typeof r?r.call(n,o,n,t):r,!(s!==void 0&&(t.exports=s)))}(function(){return function(C,A,T,X){function e(o){for(var e=-1,t=o?o.length:0,i=[],a;++e<t;)a=o[e],a&&i.push(a);return i}function I(t){return c.isWrapped(t)?t=[].slice.call(t):c.isNode(t)&&(t=[t]),t}function U(n){var e=J.data(n,'velocity');return null===e?X:e}function n(n){return function(e){return Math.round(e*n)*(1/n)}}function o(k,S,E,N){function R(n,e){return 1-3*e+3*n}function o(n,e){return 3*e-6*n}function i(t){return 3*t}function I(n,e,t){return((R(e,t)*n+o(e,t))*n+i(e))*n}function D(n,e,t){return 3*R(e,t)*n*n+2*o(e,t)*n+i(e)}function u(e,t){for(var a=0,n;g>a;++a){if(n=D(t,k,E),0===n)return t;var o=I(t,k,E)-e;t-=o/n}return t}function t(){for(var e=0;y>e;++e)x[e]=I(e*b,k,E)}function c(e,t,a){var n=0,r,o;do o=t+(a-t)/2,r=I(o,k,E)-e,0<r?a=o:t=o;while(d(r)>f&&++n<h);return o}function s(e){for(var t=0,o=1;o!=y-1&&x[o]<=e;++o)t+=b;--o;var n=(e-x[o])/(x[o+1]-x[o]),i=t+n*b,a=D(i,k,E);return a>=m?u(e,i):0==a?i:c(e,t,t+b)}function p(){w=!0,(k!=S||E!=N)&&t()}var g=4,m=.001,f=1e-7,h=10,y=11,b=1/(y-1);if(4!==arguments.length)return!1;for(var v=0;4>v;++v)if('number'!=typeof arguments[v]||isNaN(arguments[v])||!isFinite(arguments[v]))return!1;k=_(k,1),E=_(E,1),k=O(k,0),E=O(E,0);var x='Float32Array'in A?new Float32Array(y):Array(y),w=!1,P=function(e){return w||p(),k===S&&E===N?e:0===e?0:1===e?1:I(s(e),S,N)};P.getControlPoints=function(){return[{x:k,y:S},{x:E,y:N}]};var C='generateBezier('+[k,S,E,N]+')';return P.toString=function(){return C},P}function E(i,e){var t=i;return c.isString(i)?Z.Easings[i]||(t=!1):t=c.isArray(i)&&1===i.length?n.apply(null,i):c.isArray(i)&&2===i.length?u.apply(null,i.concat([e])):c.isArray(i)&&4===i.length&&o.apply(null,i),!1===t&&(t=Z.Easings[Z.defaults.easing]?Z.defaults.easing:p),t}function K(n){if(n){var i=new Date().getTime(),t=Z.State.calls.length;1e4<t&&(Z.State.calls=e(Z.State.calls));for(var a=0;t>a;a++)if(Z.State.calls[a]){var o=Z.State.calls[a],s=o[0],l=o[2],p=o[3],u=!!p,f=null;p||(p=Z.State.calls[a][3]=i-16);for(var b=_((i-p)/l.duration,1),h=0,y=s.length;y>h;h++){var v=s[h],w=v.element;if(U(w)){var x=!1;if(l.display!==X&&null!==l.display&&'none'!==l.display){if('flex'===l.display){J.each(['-webkit-box','-moz-box','-ms-flexbox','-webkit-flex'],function(n,e){m.setPropertyValue(w,'display',e)})}m.setPropertyValue(w,'display',l.display)}for(var C in l.visibility!==X&&'hidden'!==l.visibility&&m.setPropertyValue(w,'visibility',l.visibility),v)if('element'!==C){var k=v[C],T=c.isString(k.easing)?Z.Easings[k.easing]:k.easing,P;if(1===b)P=k.endValue;else{var A=k.endValue-k.startValue;if(P=k.startValue+A*T(b,l,A),!u&&P===k.currentValue)continue}if(k.currentValue=P,'tween'===C)f=P;else{if(m.Hooks.registered[C]){var E=m.Hooks.getRoot(C),V=U(w).rootPropertyValueCache[E];V&&(k.rootPropertyValue=V)}var N=m.setPropertyValue(w,C,k.currentValue+(0===parseFloat(P)?'':k.unitType),k.rootPropertyValue,k.scrollData);m.Hooks.registered[C]&&(U(w).rootPropertyValueCache[E]=m.Normalizations.registered[E]?m.Normalizations.registered[E]('extract',null,N[1]):N[1]),'transform'===N[0]&&(x=!0)}}l.mobileHA&&U(w).transformCache.translate3d===X&&(U(w).transformCache.translate3d='(0px, 0px, 0px)',x=!0),x&&m.flushTransformCache(w)}}l.display!==X&&'none'!==l.display&&(Z.State.calls[a][2].display=!1),l.visibility!==X&&'hidden'!==l.visibility&&(Z.State.calls[a][2].visibility=!1),l.progress&&l.progress.call(o[1],o[1],b,O(0,p+l.duration-i),p,f),1===b&&r(a)}}Z.State.isTicking&&S(K)}function r(i,e){if(!Z.State.calls[i])return!1;for(var a=Z.State.calls[i][0],r=Z.State.calls[i][1],n=Z.State.calls[i][2],o=Z.State.calls[i][4],s=!1,l=0,u=a.length,c;u>l;l++){if(c=a[l].element,e||n.loop||('none'===n.display&&m.setPropertyValue(c,'display',n.display),'hidden'===n.visibility&&m.setPropertyValue(c,'visibility',n.visibility)),!0!==n.loop&&(J.queue(c)[1]===X||!/\.velocityQueueEntryFlag/i.test(J.queue(c)[1]))&&U(c)){U(c).isAnimating=!1,U(c).rootPropertyValueCache={};var g=!1;J.each(m.Lists.transforms3D,function(o,e){var t=/^scale/.test(e)?1:0,i=U(c).transformCache[e];U(c).transformCache[e]!==X&&new RegExp('^\\('+t+'[^.]').test(i)&&(g=!0,delete U(c).transformCache[e])}),n.mobileHA&&(g=!0,delete U(c).transformCache.translate3d),g&&m.flushTransformCache(c),m.Values.removeClass(c,'velocity-animating')}if(!e&&n.complete&&!n.loop&&l===u-1)try{n.complete.call(r,r)}catch(e){setTimeout(function(){throw e},1)}o&&!0!==n.loop&&o(r),U(c)&&!0===n.loop&&!e&&(J.each(U(c).tweensContainer,function(n,e){/^rotate/.test(n)&&360===parseFloat(e.endValue)&&(e.endValue=0,e.startValue=360),/^backgroundPosition/.test(n)&&100===parseFloat(e.endValue)&&'%'===e.unitType&&(e.endValue=0,e.startValue=100)}),Z(c,'reverse',{loop:!0,delay:n.delay})),!1!==n.queue&&J.dequeue(c,n.queue)}Z.State.calls[i]=!1;for(var d=0,h=Z.State.calls.length;h>d;d++)if(!1!==Z.State.calls[d]){s=!0;break}!1==s&&(Z.State.isTicking=!1,delete Z.State.calls,Z.State.calls=[])}var V=function(){if(T.documentMode)return T.documentMode;for(var n=7,e;4<n;n--)if(e=T.createElement('div'),e.innerHTML='<!--[if IE '+n+']><span></span><![endif]-->',e.getElementsByTagName('span').length)return e=null,n;return X}(),t=function(){var n=0;return A.webkitRequestAnimationFrame||A.mozRequestAnimationFrame||function(e){var t=new Date().getTime(),o;return o=O(0,16-(t-n)),n=t+o,setTimeout(function(){e(t+o)},o)}}(),c={isString:function(t){return'string'==typeof t},isArray:Array.isArray||function(t){return'[object Array]'===Object.prototype.toString.call(t)},isFunction:function(t){return'[object Function]'===Object.prototype.toString.call(t)},isNode:function(t){return t&&t.nodeType},isNodeList:function(t){return'object'==typeof t&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(t))&&t.length!==X&&(0===t.length||'object'==typeof t[0]&&0<t[0].nodeType)},isWrapped:function(t){return t&&(t.jquery||A.Zepto&&A.Zepto.zepto.isZ(t))},isSVG:function(t){return A.SVGElement&&t instanceof A.SVGElement},isEmptyObject:function(n){for(var e in n)return!1;return!0}},s=!1,J;if(C.fn&&C.fn.jquery?(J=C,s=!0):J=A.Velocity.Utilities,8>=V&&!s)throw new Error('Velocity: IE8 and below require jQuery to be loaded before Velocity.');if(7>=V)return void(k.fn.velocity=k.fn.animate);var l=400,p='swing',Z={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:A.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:T.createElement('div'),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:J,Redirects:{},Easings:{},Promise:A.Promise,defaults:{queue:'',duration:l,easing:p,begin:X,complete:X,progress:X,display:X,visibility:X,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(t){J.data(t,'velocity',{isSVG:c.isSVG(t),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};A.pageYOffset===X?(Z.State.scrollAnchor=T.documentElement||T.body.parentNode||T.body,Z.State.scrollPropertyLeft='scrollLeft',Z.State.scrollPropertyTop='scrollTop'):(Z.State.scrollAnchor=A,Z.State.scrollPropertyLeft='pageXOffset',Z.State.scrollPropertyTop='pageYOffset');var u=function(){function c(t){return-t.tension*t.x-t.friction*t.v}function e(e,o,i){var a={x:e.x+i.dx*o,v:e.v+i.dv*o,tension:e.tension,friction:e.friction};return{dx:a.v,dv:c(a)}}function m(t,d){var a={dx:t.v,dv:c(t)},n=e(t,.5*d,a),o=e(t,.5*d,n),i=e(t,d,o),s=1/6*(a.dx+2*(n.dx+o.dx)+i.dx),l=1/6*(a.dv+2*(n.dv+o.dv)+i.dv);return t.x+=s*d,t.v+=l*d,t}return function r(a,e,t){var n={x:-1,v:0,tension:null,friction:null},l=[0],u=0,c=1e-4,p=.016,g,o,i;for(a=parseFloat(a)||500,e=parseFloat(e)||20,t=t||null,n.tension=a,n.friction=e,g=null!==t,g?(u=r(a,e),o=u/t*p):o=p;i=m(i||n,o),l.push(1+i.x),u+=16,d(i.x)>c&&d(i.v)>c;);return g?function(t){return l[0|t*(l.length-1)]}:u}}();Z.Easings={linear:function(t){return t},swing:function(t){return .5-i(t*a)/2},spring:function(t){return 1-i(4.5*t*a)*Math.exp(6*-t)}},J.each([['ease',[0.25,0.1,0.25,1]],['ease-in',[0.42,0,1,1]],['ease-out',[0,0,0.58,1]],['ease-in-out',[0.42,0,0.58,1]],['easeInSine',[0.47,0,0.745,0.715]],['easeOutSine',[0.39,0.575,0.565,1]],['easeInOutSine',[0.445,0.05,0.55,0.95]],['easeInQuad',[0.55,0.085,0.68,0.53]],['easeOutQuad',[0.25,0.46,0.45,0.94]],['easeInOutQuad',[0.455,0.03,0.515,0.955]],['easeInCubic',[0.55,0.055,0.675,0.19]],['easeOutCubic',[0.215,0.61,0.355,1]],['easeInOutCubic',[0.645,0.045,0.355,1]],['easeInQuart',[0.895,0.03,0.685,0.22]],['easeOutQuart',[0.165,0.84,0.44,1]],['easeInOutQuart',[0.77,0,0.175,1]],['easeInQuint',[0.755,0.05,0.855,0.06]],['easeOutQuint',[0.23,1,0.32,1]],['easeInOutQuint',[0.86,0,0.07,1]],['easeInExpo',[0.95,0.05,0.795,0.035]],['easeOutExpo',[0.19,1,0.22,1]],['easeInOutExpo',[1,0,0,1]],['easeInCirc',[0.6,0.04,0.98,0.335]],['easeOutCirc',[0.075,0.82,0.165,1]],['easeInOutCirc',[0.785,0.135,0.15,0.86]]],function(n,e){Z.Easings[e[0]]=o.apply(null,e[1])});var m=Z.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:['fill','stroke','stopColor','color','backgroundColor','borderColor','borderTopColor','borderRightColor','borderBottomColor','borderLeftColor','outlineColor'],transformsBase:['translateX','translateY','scale','scaleX','scaleY','skewX','skewY','rotateZ'],transforms3D:['transformPerspective','translateZ','scaleZ','rotateX','rotateY']},Hooks:{templates:{textShadow:['Color X Y Blur','black 0px 0px 0px'],boxShadow:['Color X Y Blur Spread','black 0px 0px 0px 0px'],clip:['Top Right Bottom Left','0px 0px 0px 0px'],backgroundPosition:['X Y','0% 0%'],transformOrigin:['X Y Z','50% 50% 0px'],perspectiveOrigin:['X Y','50% 50%']},registered:{},register:function(){for(var l=0,e;l<m.Lists.colors.length;l++)e='color'===m.Lists.colors[l]?'0 0 0 1':'255 255 255 1',m.Hooks.templates[m.Lists.colors[l]]=['Red Green Blue Alpha',e];var t,r,a;if(V)for(t in m.Hooks.templates){r=m.Hooks.templates[t],a=r[0].split(' ');var n=r[1].match(m.RegEx.valueSplit);'Color'===a[0]&&(a.push(a.shift()),n.push(n.shift()),m.Hooks.templates[t]=[a.join(' '),n.join(' ')])}for(t in m.Hooks.templates)for(var l in r=m.Hooks.templates[t],a=r[0].split(' '),a){var o=t+a[l],i=l;m.Hooks.registered[o]=[t,i]}},getRoot:function(n){var e=m.Hooks.registered[n];return e?e[0]:n},cleanRootPropertyValue:function(n,e){return m.RegEx.valueUnwrap.test(e)&&(e=e.match(m.RegEx.valueUnwrap)[1]),m.Values.isCSSNullValue(e)&&(e=m.Hooks.templates[n][1]),e},extractValue:function(o,e){var t=m.Hooks.registered[o];if(t){var i=t[0],a=t[1];return e=m.Hooks.cleanRootPropertyValue(i,e),e.toString().match(m.RegEx.valueSplit)[a]}return e},injectValue:function(l,e,t){var r=m.Hooks.registered[l];if(r){var a=r[0],i=r[1],s,n;return t=m.Hooks.cleanRootPropertyValue(a,t),s=t.toString().match(m.RegEx.valueSplit),s[i]=e,n=s.join(' ')}return t}},Normalizations:{registered:{clip:function(n,e,t){switch(n){case'name':return'clip';case'extract':var o;return m.RegEx.wrappedValueAlreadyExtracted.test(t)?o=t:(o=t.toString().match(m.RegEx.valueUnwrap),o=o?o[1].replace(/,(\s+)?/g,' '):t),o;case'inject':return'rect('+t+')';}},blur:function(o,e,t){switch(o){case'name':return Z.State.isFirefox?'filter':'-webkit-filter';case'extract':var i=parseFloat(t);if(!i&&0!==i){var r=t.toString().match(/blur\(([0-9]+[A-z]+)\)/i);i=r?r[1]:0}return i;case'inject':return parseFloat(t)?'blur('+t+')':'none';}},opacity:function(n,e,t){if(8>=V)switch(n){case'name':return'filter';case'extract':var o=t.toString().match(/alpha\(opacity=(.*)\)/i);return t=o?o[1]/100:1;case'inject':return e.style.zoom=1,1<=parseFloat(t)?'':'alpha(opacity='+parseInt(100*parseFloat(t),10)+')';}else switch(n){case'name':return'opacity';case'extract':return t;case'inject':return t;}}},register:function(){9>=V||Z.State.isGingerbread||(m.Lists.transformsBase=m.Lists.transformsBase.concat(m.Lists.transforms3D));for(var n=0;n<m.Lists.transformsBase.length;n++)!function(){var i=m.Lists.transformsBase[n];m.Normalizations.registered[i]=function(t,e,a){switch(t){case'name':return'transform';case'extract':return U(e)===X||U(e).transformCache[i]===X?/^scale/i.test(i)?1:0:U(e).transformCache[i].replace(/[()]/g,'');case'inject':var n=!1;switch(i.substr(0,i.length-1)){case'translate':n=!/(%|px|em|rem|vw|vh|\d)$/i.test(a);break;case'scal':case'scale':Z.State.isAndroid&&U(e).transformCache[i]===X&&1>a&&(a=1),n=!/(\d)$/i.test(a);break;case'skew':n=!/(deg|\d)$/i.test(a);break;case'rotate':n=!/(deg|\d)$/i.test(a);}return n||(U(e).transformCache[i]='('+a+')'),U(e).transformCache[i];}}}();for(var n=0;n<m.Lists.colors.length;n++)!function(){var a=m.Lists.colors[n];m.Normalizations.registered[a]=function(t,e,r){switch(t){case'name':return a;case'extract':var n;if(m.RegEx.wrappedValueAlreadyExtracted.test(r))n=r;else{var o={black:'rgb(0, 0, 0)',blue:'rgb(0, 0, 255)',gray:'rgb(128, 128, 128)',green:'rgb(0, 128, 0)',red:'rgb(255, 0, 0)',white:'rgb(255, 255, 255)'},s;/^[A-z]+$/i.test(r)?s=o[r]===X?o.black:o[r]:m.RegEx.isHex.test(r)?s='rgb('+m.Values.hexToRgb(r).join(' ')+')':/^rgba?\(/i.test(r)||(s=o.black),n=(s||r).toString().match(m.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g,' ')}return 8>=V||3!==n.split(' ').length||(n+=' 1'),n;case'inject':return 8>=V?4===r.split(' ').length&&(r=r.split(/\s+/).slice(0,3).join(' ')):3===r.split(' ').length&&(r+=' 1'),(8>=V?'rgb':'rgba')+'('+r.replace(/\s+/g,',').replace(/\.(\d)+(?=,)/g,'')+')';}}}()}},Names:{camelCase:function(t){return t.replace(/-(\w)/g,function(n,e){return e.toUpperCase()})},SVGAttribute:function(n){var e='width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2';return(V||Z.State.isAndroid&&!Z.State.isChrome)&&(e+='|transform'),new RegExp('^('+e+')$','i').test(n)},prefixCheck:function(o){if(Z.State.prefixMatches[o])return[Z.State.prefixMatches[o],!0];for(var e=['','Webkit','Moz','ms','O'],t=0,i=e.length;i>t;t++){var a;if(a=0===t?o:e[t]+o.replace(/^\w/,function(t){return t.toUpperCase()}),c.isString(Z.State.prefixElement.style[a]))return Z.State.prefixMatches[o]=a,[a,!0]}return[o,!1]}},Values:{hexToRgb:function(n){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,i;return n=n.replace(e,function(n,e,t,o){return e+e+t+t+o+o}),i=o.exec(n),i?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:[0,0,0]},isCSSNullValue:function(t){return 0==t||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(t)},getUnitType:function(t){return /^(rotate|skew)/i.test(t)?'deg':/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(t)?'':'px'},getDisplayType:function(n){var e=n&&n.tagName.toString().toLowerCase();return /^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(e)?'inline':/^(li)$/i.test(e)?'list-item':/^(tr)$/i.test(e)?'table-row':/^(table)$/i.test(e)?'table':/^(tbody)$/i.test(e)?'table-row-group':'block'},addClass:function(n,e){n.classList?n.classList.add(e):n.className+=(n.className.length?' ':'')+e},removeClass:function(n,e){n.classList?n.classList.remove(e):n.className=n.className.toString().replace(new RegExp('(^|\\s)'+e.split(' ').join('|')+'(\\s|$)','gi'),' ')}},getPropertyValue:function(t,e,i,a){function n(t,e){function i(){s&&m.setPropertyValue(t,'display','none')}var r=0;if(8>=V)r=J.css(t,e);else{var s=!1;if(/^(width|height)$/.test(e)&&0===m.getPropertyValue(t,'display')&&(s=!0,m.setPropertyValue(t,'display',m.Values.getDisplayType(t))),!a){if('height'===e&&'border-box'!==m.getPropertyValue(t,'boxSizing').toString().toLowerCase()){var l=t.offsetHeight-(parseFloat(m.getPropertyValue(t,'borderTopWidth'))||0)-(parseFloat(m.getPropertyValue(t,'borderBottomWidth'))||0)-(parseFloat(m.getPropertyValue(t,'paddingTop'))||0)-(parseFloat(m.getPropertyValue(t,'paddingBottom'))||0);return i(),l}if('width'===e&&'border-box'!==m.getPropertyValue(t,'boxSizing').toString().toLowerCase()){var d=t.offsetWidth-(parseFloat(m.getPropertyValue(t,'borderLeftWidth'))||0)-(parseFloat(m.getPropertyValue(t,'borderRightWidth'))||0)-(parseFloat(m.getPropertyValue(t,'paddingLeft'))||0)-(parseFloat(m.getPropertyValue(t,'paddingRight'))||0);return i(),d}}var c;c=U(t)===X?A.getComputedStyle(t,null):U(t).computedStyle?U(t).computedStyle:U(t).computedStyle=A.getComputedStyle(t,null),'borderColor'===e&&(e='borderTopColor'),r=9===V&&'filter'===e?c.getPropertyValue(e):c[e],(''===r||null===r)&&(r=t.style[e]),i()}if('auto'===r&&/^(top|right|bottom|left)$/i.test(e)){var p=n(t,'position');('fixed'===p||'absolute'===p&&/top|left/i.test(e))&&(r=J(t).position()[e]+'px')}return r}var r;if(m.Hooks.registered[e]){var s=e,l=m.Hooks.getRoot(s);i===X&&(i=m.getPropertyValue(t,m.Names.prefixCheck(l)[0])),m.Normalizations.registered[l]&&(i=m.Normalizations.registered[l]('extract',t,i)),r=m.Hooks.extractValue(s,i)}else if(m.Normalizations.registered[e]){var d,c;d=m.Normalizations.registered[e]('name',t),'transform'!==d&&(c=n(t,m.Names.prefixCheck(d)[0]),m.Values.isCSSNullValue(c)&&m.Hooks.templates[e]&&(c=m.Hooks.templates[e][1])),r=m.Normalizations.registered[e]('extract',t,c)}if(!/^[\d-]/.test(r))if(!(U(t)&&U(t).isSVG&&m.Names.SVGAttribute(e)))r=n(t,m.Names.prefixCheck(e)[0]);else if(/^(height|width)$/i.test(e))try{r=t.getBBox()[e]}catch(e){r=0}else r=t.getAttribute(e);return m.Values.isCSSNullValue(r)&&(r=0),2<=Z.debug&&console.log('Get '+e+': '+r),r},setPropertyValue:function(t,e,i,a,n){var o=e;if('scroll'===e)n.container?n.container['scroll'+n.direction]=i:'Left'===n.direction?A.scrollTo(i,n.alternateValue):A.scrollTo(n.alternateValue,i);else if(m.Normalizations.registered[e]&&'transform'===m.Normalizations.registered[e]('name',t))m.Normalizations.registered[e]('inject',t,i),o='transform',i=U(t).transformCache[e];else{if(m.Hooks.registered[e]){var r=e,s=m.Hooks.getRoot(e);a=a||m.getPropertyValue(t,s),i=m.Hooks.injectValue(r,i,a),e=s}if(m.Normalizations.registered[e]&&(i=m.Normalizations.registered[e]('inject',t,i),e=m.Normalizations.registered[e]('name',t)),o=m.Names.prefixCheck(e)[0],8>=V)try{t.style[o]=i}catch(e){Z.debug&&console.log('Browser does not support ['+i+'] for ['+o+']')}else U(t)&&U(t).isSVG&&m.Names.SVGAttribute(e)?t.setAttribute(e,i):t.style[o]=i;2<=Z.debug&&console.log('Set '+e+' ('+o+'): '+i)}return[o,i]},flushTransformCache:function(i){function e(e){return parseFloat(m.getPropertyValue(i,e))}var s='';if((V||Z.State.isAndroid&&!Z.State.isChrome)&&U(i).isSVG){var t={translate:[e('translateX'),e('translateY')],skewX:[e('skewX')],skewY:[e('skewY')],scale:1===e('scale')?[e('scaleX'),e('scaleY')]:[e('scale'),e('scale')],rotate:[e('rotateZ'),0,0]};J.each(U(i).transformCache,function(n){/^translate/i.test(n)?n='translate':/^scale/i.test(n)?n='scale':/^rotate/i.test(n)&&(n='rotate'),t[n]&&(s+=n+'('+t[n].join(' ')+') ',delete t[n])})}else{var a,n;J.each(U(i).transformCache,function(e){return a=U(i).transformCache[e],'transformPerspective'===e?(n=a,!0):(9===V&&'rotateZ'==e&&(e='rotate'),void(s+=e+a+' '))}),n&&(s='perspective'+n+' '+s)}m.setPropertyValue(i,'transform',s)}};m.Hooks.register(),m.Normalizations.register(),Z.hook=function(o,i,t){var a=X;return o=I(o),J.each(o,function(n,e){if(U(e)===X&&Z.init(e),t===X)a===X&&(a=Z.CSS.getPropertyValue(e,i));else{var o=Z.CSS.setPropertyValue(e,i,t);'transform'===o[0]&&Z.CSS.flushTransformCache(e),a=o}}),a};var b=function(){function t(){return n?v.promise||null:i}function o(){function i(){function _(o,e){var t=X,r=X,n=X;return c.isArray(o)?(t=o[0],!c.isArray(o[1])&&/^[\d-]/.test(o[1])||c.isFunction(o[1])||m.RegEx.isHex.test(o[1])?n=o[1]:(c.isString(o[1])&&!m.RegEx.isHex.test(o[1])||c.isArray(o[1]))&&(r=e?o[1]:E(o[1],a.duration),o[2]!==X&&(n=o[2]))):t=o,e||(r=r||a.easing),c.isFunction(t)&&(t=t.call(b,y,f)),c.isFunction(n)&&(n=n.call(b,y,f)),[t||0,r,n]}function n(n,e){var t,o;return o=(e||'0').toString().toLowerCase().replace(/[%A-z]+$/,function(n){return t=n,''}),t||(t=m.Values.getUnitType(n)),[o,t]}function i(){var t={myParent:b.parentNode||T.body,position:m.getPropertyValue(b,'position'),fontSize:m.getPropertyValue(b,'fontSize')},e=t.position===S.lastPosition&&t.myParent===S.lastParent,o=t.fontSize===S.lastFontSize;S.lastParent=t.myParent,S.lastPosition=t.position,S.lastFontSize=t.fontSize;var n=100,i={};if(o&&e)i.emToPx=S.lastEmToPx,i.percentToPxWidth=S.lastPercentToPxWidth,i.percentToPxHeight=S.lastPercentToPxHeight;else{var a=U(b).isSVG?T.createElementNS('http://www.w3.org/2000/svg','rect'):T.createElement('div');Z.init(a),t.myParent.appendChild(a),J.each(['overflow','overflowX','overflowY'],function(n,e){Z.CSS.setPropertyValue(a,e,'hidden')}),Z.CSS.setPropertyValue(a,'position',t.position),Z.CSS.setPropertyValue(a,'fontSize',t.fontSize),Z.CSS.setPropertyValue(a,'boxSizing','content-box'),J.each(['minWidth','maxWidth','width','minHeight','maxHeight','height'],function(o,e){Z.CSS.setPropertyValue(a,e,n+'%')}),Z.CSS.setPropertyValue(a,'paddingLeft',n+'em'),i.percentToPxWidth=S.lastPercentToPxWidth=(parseFloat(m.getPropertyValue(a,'width',null,!0))||1)/n,i.percentToPxHeight=S.lastPercentToPxHeight=(parseFloat(m.getPropertyValue(a,'height',null,!0))||1)/n,i.emToPx=S.lastEmToPx=(parseFloat(m.getPropertyValue(a,'paddingLeft'))||1)/n,t.myParent.removeChild(a)}return null===S.remToPx&&(S.remToPx=parseFloat(m.getPropertyValue(T.body,'fontSize'))||16),null===S.vwToPx&&(S.vwToPx=parseFloat(A.innerWidth)/100,S.vhToPx=parseFloat(A.innerHeight)/100),i.remToPx=S.remToPx,i.vwToPx=S.vwToPx,i.vhToPx=S.vhToPx,1<=Z.debug&&console.log('Unit ratios: '+JSON.stringify(i),b),i}if(a.begin&&0===y)try{a.begin.call(u,u)}catch(e){setTimeout(function(){throw e},1)}if('scroll'===w){var r=/^x$/i.test(a.axis)?'Left':'Top',s=parseFloat(a.offset)||0,l,p,h;a.container?c.isWrapped(a.container)||c.isNode(a.container)?(a.container=a.container[0]||a.container,l=a.container['scroll'+r],h=l+J(b).position()[r.toLowerCase()]+s):a.container=null:(l=Z.State.scrollAnchor[Z.State['scrollProperty'+r]],p=Z.State.scrollAnchor[Z.State['scrollProperty'+('Left'==r?'Top':'Left')]],h=J(b).offset()[r.toLowerCase()]+s),e={scroll:{rootPropertyValue:!1,startValue:l,currentValue:l,endValue:h,unitType:'',easing:a.easing,scrollData:{container:a.container,direction:r,alternateValue:p}},element:b},Z.debug&&console.log('tweensContainer (scroll): ',e.scroll,b)}else if('reverse'===w){if(!U(b).tweensContainer)return void J.dequeue(b,a.queue);'none'===U(b).opts.display&&(U(b).opts.display='auto'),'hidden'===U(b).opts.visibility&&(U(b).opts.visibility='visible'),U(b).opts.loop=!1,U(b).opts.begin=null,U(b).opts.complete=null,d.easing||delete a.easing,d.duration||delete a.duration,a=J.extend({},U(b).opts,a);var x=J.extend(!0,{},U(b).tweensContainer);for(var k in x)if('element'!==k){var R=x[k].startValue;x[k].startValue=x[k].currentValue=x[k].endValue,x[k].endValue=R,c.isEmptyObject(d)||(x[k].easing=a.easing),Z.debug&&console.log('reverse tweensContainer ('+k+'): '+JSON.stringify(x[k]),b)}e=x}else if('start'===w){var x;for(var N in U(b).tweensContainer&&!0===U(b).isAnimating&&(x=U(b).tweensContainer),J.each(g,function(a,e){if(RegExp('^'+m.Lists.colors.join('$|^')+'$').test(a)){var t=_(e,!0),r=t[0],n=t[1],o=t[2];if(m.RegEx.isHex.test(r)){for(var i=['Red','Green','Blue'],s=m.Values.hexToRgb(r),l=o?m.Values.hexToRgb(o):X,d=0,c;d<i.length;d++)c=[s[d]],n&&c.push(n),l!==X&&c.push(l[d]),g[a+i[d]]=c;delete g[a]}}}),g){var L=_(g[N]),O=L[0],j=L[1],H=L[2];N=m.Names.camelCase(N);var z=m.Hooks.getRoot(N),I=!1;if(U(b).isSVG||'tween'===z||!1!==m.Names.prefixCheck(z)[1]||m.Normalizations.registered[z]!==X){(a.display!==X&&null!==a.display&&'none'!==a.display||a.visibility!==X&&'hidden'!==a.visibility)&&/opacity|filter/.test(N)&&!H&&0!==O&&(H=0),a._cacheValues&&x&&x[N]?(H===X&&(H=x[N].endValue+x[N].unitType),I=U(b).rootPropertyValueCache[z]):m.Hooks.registered[N]?H===X?(I=m.getPropertyValue(b,z),H=m.getPropertyValue(b,N,I)):I=m.Hooks.templates[z][1]:H===X&&(H=m.getPropertyValue(b,N));var ee=!1,D,W,te;if(D=n(N,H),H=D[0],te=D[1],D=n(N,O),O=D[0].replace(/^([+-\/*])=/,function(n,e){return ee=e,''}),W=D[1],H=parseFloat(H)||0,O=parseFloat(O)||0,'%'===W&&(/^(fontSize|lineHeight)$/.test(N)?(O/=100,W='em'):/^scale/.test(N)?(O/=100,W=''):/(Red|Green|Blue)$/i.test(N)&&(O=255*(O/100),W='')),/[\/*]/.test(ee))W=te;else if(te!==W&&0!==H)if(0===O)W=te;else{t=t||i();var Y=/margin|padding|left|right|width|text|word|letter/i.test(N)||/X$/.test(N)||'x'===N?'x':'y';switch(te){case'%':H*='x'==Y?t.percentToPxWidth:t.percentToPxHeight;break;case'px':break;default:H*=t[te+'ToPx'];}switch(W){case'%':H*=1/('x'==Y?t.percentToPxWidth:t.percentToPxHeight);break;case'px':break;default:H*=1/t[W+'ToPx'];}}'+'===ee?O=H+O:'-'===ee?O=H-O:'*'===ee?O=H*O:'/'===ee?O=H/O:void 0,e[N]={rootPropertyValue:I,startValue:H,currentValue:H,endValue:O,unitType:W,easing:j},Z.debug&&console.log('tweensContainer ('+N+'): '+JSON.stringify(e[N]),b)}else Z.debug&&console.log('Skipping ['+z+'] due to a lack of browser support.')}e.element=b}e.element&&(m.Values.addClass(b,'velocity-animating'),V.push(e),''===a.queue&&(U(b).tweensContainer=e,U(b).opts=a),U(b).isAnimating=!0,y===f-1?(Z.State.calls.push([V,u,a,null,v.resolver]),!1===Z.State.isTicking&&(Z.State.isTicking=!0,K())):y++)}var b=this,a=J.extend({},Z.defaults,d),e={},t;switch(U(b)===X&&Z.init(b),parseFloat(a.delay)&&!1!==a.queue&&J.queue(b,a.queue,function(t){Z.velocityQueueEntryFlag=!0,U(b).delayTimer={setTimeout:setTimeout(t,parseFloat(a.delay)),next:t}}),a.duration.toString().toLowerCase()){case'fast':a.duration=200;break;case'normal':a.duration=l;break;case'slow':a.duration=600;break;default:a.duration=parseFloat(a.duration)||1;}!1!==Z.mock&&(!0===Z.mock?a.duration=a.delay=1:(a.duration*=parseFloat(Z.mock)||1,a.delay*=parseFloat(Z.mock)||1)),a.easing=E(a.easing,a.duration),a.begin&&!c.isFunction(a.begin)&&(a.begin=null),a.progress&&!c.isFunction(a.progress)&&(a.progress=null),a.complete&&!c.isFunction(a.complete)&&(a.complete=null),a.display!==X&&null!==a.display&&(a.display=a.display.toString().toLowerCase(),'auto'===a.display&&(a.display=Z.CSS.Values.getDisplayType(b))),a.visibility!==X&&null!==a.visibility&&(a.visibility=a.visibility.toString().toLowerCase()),a.mobileHA=a.mobileHA&&Z.State.isMobile&&!Z.State.isGingerbread,!1===a.queue?a.delay?setTimeout(i,a.delay):i():J.queue(b,a.queue,function(e,t){return!0===t?(v.promise&&v.resolver(u),!0):(Z.velocityQueueEntryFlag=!0,void i(e))}),''!==a.queue&&'fx'!==a.queue||'inprogress'===J.queue(b)[0]||J.dequeue(b)}var e=arguments[0]&&(arguments[0].p||J.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||c.isString(arguments[0].properties)),n,i,a,u,g,d;if(c.isWrapped(this)?(n=!1,a=0,u=this,i=this):(n=!0,a=1,u=e?arguments[0].elements||arguments[0].e:arguments[0]),u=I(u)){e?(g=arguments[0].properties||arguments[0].p,d=arguments[0].options||arguments[0].o):(g=arguments[a],d=arguments[a+1]);var f=u.length,y=0;if(!/^(stop|finish)$/i.test(g)&&!J.isPlainObject(d)){var s=a+1;d={};for(var p=s;p<arguments.length;p++)!c.isArray(arguments[p])&&(/^(fast|normal|slow)$/i.test(arguments[p])||/^\d/.test(arguments[p]))?d.duration=arguments[p]:c.isString(arguments[p])||c.isArray(arguments[p])?d.easing=arguments[p]:c.isFunction(arguments[p])&&(d.complete=arguments[p])}var v={promise:null,resolver:null,rejecter:null};n&&Z.Promise&&(v.promise=new Z.Promise(function(n,e){v.resolver=n,v.rejecter=e}));var w;switch(g){case'scroll':w='scroll';break;case'reverse':w='reverse';break;case'finish':case'stop':J.each(u,function(n,e){U(e)&&U(e).delayTimer&&(clearTimeout(U(e).delayTimer.setTimeout),U(e).delayTimer.next&&U(e).delayTimer.next(),delete U(e).delayTimer)});var h=[];return J.each(Z.State.calls,function(i,e){e&&J.each(e[1],function(t,s){var n=d===X?'':d;return!0===n||e[2].queue===n||d===X&&!1===e[2].queue?void J.each(u,function(t,o){o===s&&((!0===d||c.isString(d))&&(J.each(J.queue(o,c.isString(d)?d:''),function(n,e){c.isFunction(e)&&e(null,!0)}),J.queue(o,c.isString(d)?d:'',[])),'stop'===g?(U(o)&&U(o).tweensContainer&&!1!==n&&J.each(U(o).tweensContainer,function(n,e){e.endValue=e.currentValue}),h.push(i)):'finish'==g&&(e[2].duration=1))}):!0})}),'stop'===g&&(J.each(h,function(n,e){r(e,!0)}),v.promise&&v.resolver(u)),t();default:if(!J.isPlainObject(g)||c.isEmptyObject(g)){if(c.isString(g)&&Z.Redirects[g]){var _=J.extend({},d),x=_.duration,k=_.delay||0;return!0===_.backwards&&(u=J.extend(!0,[],u).reverse()),J.each(u,function(n,e){parseFloat(_.stagger)?_.delay=k+parseFloat(_.stagger)*n:c.isFunction(_.stagger)&&(_.delay=k+_.stagger.call(e,n,f)),_.drag&&(_.duration=parseFloat(x)||(/^(callout|transition)/.test(g)?1e3:l),_.duration=O(_.duration*(_.backwards?1-n/f:(n+1)/f),.75*_.duration,200)),Z.Redirects[g].call(e,e,_||{},n,f,u,v.promise?v:X)}),t()}var C='Velocity: First argument ('+g+') was not a property map, a known action, or a registered redirect. Aborting.';return v.promise?v.rejecter(new Error(C)):console.log(C),t()}w='start';}var S={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},V=[];J.each(u,function(n,e){c.isNode(e)&&o.call(e)});var _=J.extend({},Z.defaults,d),P;if(_.loop=parseInt(_.loop),P=2*_.loop-1,_.loop)for(var N=0,R;P>N;N++)R={delay:_.delay,progress:_.progress},N===P-1&&(R.display=_.display,R.visibility=_.visibility,R.complete=_.complete),b(u,'reverse',R);return t()}};Z=J.extend(b,Z),Z.animate=b;var S=A.requestAnimationFrame||t;return Z.State.isMobile||T.hidden===X||T.addEventListener('visibilitychange',function(){T.hidden?(S=function(t){return setTimeout(function(){t(!0)},16)},K()):S=A.requestAnimationFrame||t}),C.Velocity=Z,C!==A&&(C.fn.velocity=b,C.fn.velocity.defaults=Z.defaults),J.each(['Down','Up'],function(n,m){Z.Redirects['slide'+m]=function(g,e,t,n,o,i){var a=J.extend({},e),s=a.begin,r=a.complete,l={height:'',marginTop:'',marginBottom:'',paddingTop:'',paddingBottom:''},c={};a.display===X&&(a.display='Down'===m?'inline'===Z.CSS.Values.getDisplayType(g)?'inline-block':'block':'none'),a.begin=function(){for(var e in s&&s.call(o,o),l){c[e]=g.style[e];var t=Z.CSS.getPropertyValue(g,e);l[e]='Down'===m?[t,0]:[0,t]}c.overflow=g.style.overflow,g.style.overflow='hidden'},a.complete=function(){for(var e in c)g.style[e]=c[e];r&&r.call(o,o),i&&i.resolver(o)},Z(g,l,a)}}),J.each(['In','Out'],function(n,a){Z.Redirects['fade'+a]=function(t,e,r,n,o,i){var s=J.extend({},e),l={opacity:'In'===a?1:0},d=s.complete;s.complete=r===n-1?function(){d&&d.call(o,o),i&&i.resolver(o)}:s.begin=null,s.display===X&&(s.display='In'===a?'auto':'none'),Z(this,l,s)}}),Z}(c||window.Zepto||window,window,document)}))}).call(n,o(0),o(0))},function(M,K,ee){var te=Math.abs,ne;!function(oe,ie,a,ae){'use strict';function re(e,t,n){return setTimeout(se(e,n),t)}function d(e,t,n){return!!Array.isArray(e)&&(l(e,n[t],n),!0)}function l(t,n,o){if(t)if(t.forEach)t.forEach(n,o);else if(t.length!==ae)for(i=0;i<t.length;)n.call(o,t[i],i,t),i++;else for(var i in t)t.hasOwnProperty(i)&&n.call(o,t[i],i,t)}function k(t,n,o){for(var i=Object.keys(n),e=0;e<i.length;)(!o||o&&t[i[e]]===ae)&&(t[i[e]]=n[i[e]]),e++;return t}function c(e,t){return k(e,t,!0)}function b(t,n,o){var i=n.prototype,a;a=t.prototype=Object.create(i),a.constructor=t,a._super=i,o&&k(a,o)}function se(e,t){return function(){return e.apply(t,arguments)}}function le(e,t){return typeof e==f?e.apply(t?t[0]||ae:ae,t):e}function r(e,t){return e===ae?t:e}function s(e,t,n){l(w(t),function(t){e.addEventListener(t,n,!1)})}function de(e,t,n){l(w(t),function(t){e.removeEventListener(t,n,!1)})}function ce(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function v(e,t){return-1<e.indexOf(t)}function w(e){return e.trim().split(/\s+/g)}function x(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var o=0;o<e.length;){if(n&&e[o][n]==t||!n&&e[o]===t)return o;o++}return-1}function y(e){return Array.prototype.slice.call(e,0)}function z(t,n,o){for(var i=[],a=[],e=0,r;e<t.length;)r=n?t[e][n]:t[e],0>x(a,r)&&i.push(t[e]),a[e]=r,e++;return o&&(i=n?i.sort(function(e,t){return e[n]>t[n]}):i.sort()),i}function A(e,t){for(var n=t[0].toUpperCase()+t.slice(1),o=0,i,a;o<Qe.length;){if(i=Qe[o],a=i?i+n:t,a in e)return a;o++}return ae}function pe(){return i++}function D(e){var t=e.ownerDocument;return t.defaultView||t.parentWindow}function E(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){le(e.options.enable,[e])&&n.handler(t)},this.init()}function ue(e){var t=e.options.inputClass,n;return n=t?t:F?Ae:j?Ee:C?Ve:Te,new n(e,me)}function me(t,n,o){var i=o.pointers.length,a=o.changedPointers.length,e=n&N&&0==i-a;o.isFirst=!!e,o.isFinal=!!(n&(Ze|et)&&0==i-a),e&&(t.session={}),o.eventType=n,ge(t,o),t.emit('hammer.input',o),t.recognize(o),t.session.prevInput=o}function ge(t,n){var o=t.session,a=n.pointers,r=a.length;o.firstInput||(o.firstInput=be(n)),1<r&&!o.firstMultiple?o.firstMultiple=be(n):1===r&&(o.firstMultiple=!1);var e=o.firstInput,s=o.firstMultiple,l=s?s.center:e.center,d=n.center=ye(a);n.timeStamp=Ge(),n.deltaTime=n.timeStamp-e.timeStamp,n.angle=xe(l,d),n.distance=_e(l,d),he(o,n),n.offsetDirection=we(n.deltaX,n.deltaY),n.scale=s?Ce(s.pointers,a):1,n.rotation=s?ke(s.pointers,a):0,fe(o,n);var i=t.element;ce(n.srcEvent.target,i)&&(i=n.srcEvent.target),n.target=i}function he(t,n){var o=n.center,i=t.offsetDelta||{},a=t.prevDelta||{},e=t.prevInput||{};(n.eventType===N||e.eventType===Ze)&&(a=t.prevDelta={x:e.deltaX||0,y:e.deltaY||0},i=t.offsetDelta={x:o.x,y:o.y}),n.deltaX=a.x+(o.x-i.x),n.deltaY=a.y+(o.y-i.y)}function fe(t,n){var o=t.lastInterval||n,i=n.timeStamp-o.timeStamp,e,a,r,s;if(n.eventType!=et&&(i>G||o.velocity===ae)){var d=o.deltaX-n.deltaX,c=o.deltaY-n.deltaY,l=ve(i,d,c);a=l.x,r=l.y,e=Ke(l.x)>Ke(l.y)?l.x:l.y,s=we(d,c),t.lastInterval=n}else e=o.velocity,a=o.velocityX,r=o.velocityY,s=o.direction;n.velocity=e,n.velocityX=a,n.velocityY=r,n.direction=s}function be(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:g(e.pointers[n].clientX),clientY:g(e.pointers[n].clientY)},n++;return{timeStamp:Ge(),pointers:t,center:ye(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ye(t){var n=t.length;if(1===n)return{x:g(t[0].clientX),y:g(t[0].clientY)};for(var o=0,i=0,a=0;n>a;)o+=t[a].clientX,i+=t[a].clientY,a++;return{x:g(o/n),y:g(i/n)}}function ve(e,t,n){return{x:t/e||0,y:n/e||0}}function we(e,t){return e===t?tt:Ke(e)>=Ke(t)?0<e?nt:ot:0<t?it:at}function _e(t,n,o){o||(o=dt);var i=n[o[0]]-t[o[0]],a=n[o[1]]-t[o[1]];return Math.sqrt(i*i+a*a)}function xe(t,n,o){o||(o=dt);var i=n[o[0]]-t[o[0]],a=n[o[1]]-t[o[1]];return 180*Math.atan2(a,i)/Math.PI}function ke(e,t){return xe(t[1],t[0],$)-xe(e[1],e[0],$)}function Ce(e,t){return _e(t[0],t[1],$)/_e(e[0],e[1],$)}function Te(){this.evEl=ct,this.evWin=pt,this.allow=!0,this.pressed=!1,E.apply(this,arguments)}function Ae(){this.evEl=gt,this.evWin=ht,E.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function Se(){this.evTarget=bt,this.evWin=yt,this.started=!1,E.apply(this,arguments)}function Pe(e,t){var n=y(e.touches),o=y(e.changedTouches);return t&(Ze|et)&&(n=z(n.concat(o),'identifier',!0)),[n,o]}function Ee(){this.evTarget=wt,this.targetIds={},E.apply(this,arguments)}function Oe(t,n){var o=y(t.touches),a=this.targetIds;if(n&(N|Je)&&1===o.length)return a[o[0].identifier]=!0,[o,o];var r=y(t.changedTouches),s=[],l=this.target,i,e;if(e=o.filter(function(e){return ce(e.target,l)}),n===N)for(i=0;i<e.length;)a[e[i].identifier]=!0,i++;for(i=0;i<r.length;)a[r[i].identifier]&&s.push(r[i]),n&(Ze|et)&&delete a[r[i].identifier],i++;return s.length?[z(e.concat(s),'identifier',!0),s]:void 0}function Ve(){E.apply(this,arguments);var e=se(this.handler,this);this.touch=new Ee(this.manager,e),this.mouse=new Te(this.manager,e)}function Ne(e,t){this.manager=e,this.set(t)}function Re(e){if(v(e,At))return At;var t=v(e,St),n=v(e,Pt);return t&&n?St+' '+Pt:t||n?t?St:Pt:v(e,Tt)?Tt:Ct}function Ie(e){this.id=pe(),this.manager=null,this.options=c(e||{},this.defaults),this.options.enable=r(this.options.enable,!0),this.state=Et,this.simultaneous={},this.requireFail=[]}function De(e){return e&It?'cancel':e&Nt?'end':e&Vt?'move':e&Ot?'start':''}function Fe(e){return e==at?'down':e==it?'up':e==nt?'left':e==ot?'right':''}function Me(e,t){var n=t.manager;return n?n.get(e):e}function Le(){Ie.apply(this,arguments)}function Be(){Le.apply(this,arguments),this.pX=null,this.pY=null}function qe(){Le.apply(this,arguments)}function je(){Ie.apply(this,arguments),this._timer=null,this._input=null}function He(){Le.apply(this,arguments)}function ze(){Le.apply(this,arguments)}function We(){Ie.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function $e(e,t){return t=t||{},t.recognizers=r(t.recognizers,$e.defaults.preset),new Xe(e,t)}function Xe(e,t){t=t||{},this.options=c(t,$e.defaults),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.element=e,this.input=ue(this),this.touchAction=new Ne(this,this.options.touchAction),Ue(this,!0),l(t.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function Ue(e,t){var n=e.element;l(e.options.cssProps,function(e,o){n.style[A(n.style,o)]=t?e:''})}function Ye(e,t){var n=ie.createEvent('Event');n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}var Qe=['','webkit','moz','MS','ms','o'],e=ie.createElement('div'),f='function',g=Math.round,Ke=te,Ge=Date.now,i=1,h=/mobile|tablet|ip(ad|hone|od)|android/i,C='ontouchstart'in oe,F=A(oe,'PointerEvent')!==ae,j=C&&h.test(navigator.userAgent),I='touch',H='mouse',G=25,N=1,Je=2,Ze=4,et=8,tt=1,nt=2,ot=4,it=8,at=16,rt=nt|ot,st=it|at,lt=rt|st,dt=['x','y'],$=['clientX','clientY'];E.prototype={handler:function(){},init:function(){this.evEl&&s(this.element,this.evEl,this.domHandler),this.evTarget&&s(this.target,this.evTarget,this.domHandler),this.evWin&&s(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&de(this.element,this.evEl,this.domHandler),this.evTarget&&de(this.target,this.evTarget,this.domHandler),this.evWin&&de(D(this.element),this.evWin,this.domHandler)}};var _={mousedown:N,mousemove:Je,mouseup:Ze},ct='mousedown',pt='mousemove mouseup';b(Te,E,{handler:function(e){var t=_[e.type];t&N&&0===e.button&&(this.pressed=!0),t&Je&&1!==e.which&&(t=Ze),this.pressed&&this.allow&&(t&Ze&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:H,srcEvent:e}))}});var ut={pointerdown:N,pointermove:Je,pointerup:Ze,pointercancel:et,pointerout:et},mt={2:I,3:'pen',4:H,5:'kinect'},gt='pointerdown',ht='pointermove pointerup pointercancel';oe.MSPointerEvent&&(gt='MSPointerDown',ht='MSPointerMove MSPointerUp MSPointerCancel'),b(Ae,E,{handler:function(t){var n=this.store,o=!1,i=t.type.toLowerCase().replace('ms',''),r=ut[i],e=mt[t.pointerType]||t.pointerType,s=x(n,t.pointerId,'pointerId');r&N&&(0===t.button||e==I)?0>s&&(n.push(t),s=n.length-1):r&(Ze|et)&&(o=!0),0>s||(n[s]=t,this.callback(this.manager,r,{pointers:n,changedPointers:[t],pointerType:e,srcEvent:t}),o&&n.splice(s,1))}});var ft={touchstart:N,touchmove:Je,touchend:Ze,touchcancel:et},bt='touchstart',yt='touchstart touchmove touchend touchcancel';b(Se,E,{handler:function(e){var t=ft[e.type];if(t===N&&(this.started=!0),this.started){var n=Pe.call(this,e,t);t&(Ze|et)&&0==n[0].length-n[1].length&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:I,srcEvent:e})}}});var vt={touchstart:N,touchmove:Je,touchend:Ze,touchcancel:et},wt='touchstart touchmove touchend touchcancel';b(Ee,E,{handler:function(e){var t=vt[e.type],n=Oe.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:I,srcEvent:e})}}),b(Ve,E,{handler:function(t,n,o){var i=o.pointerType==I,a=o.pointerType==H;if(i)this.mouse.allow=!1;else if(a&&!this.mouse.allow)return;n&(Ze|et)&&(this.mouse.allow=!0),this.callback(t,n,o)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var _t=A(e.style,'touchAction'),xt=_t!==ae,kt='compute',Ct='auto',Tt='manipulation',At='none',St='pan-x',Pt='pan-y';Ne.prototype={set:function(e){e==kt&&(e=this.compute()),xt&&(this.manager.element.style[_t]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return l(this.manager.recognizers,function(t){le(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Re(e.join(' '))},preventDefaults:function(t){if(!xt){var n=t.srcEvent,o=t.offsetDirection;if(this.manager.session.prevented)return n.preventDefault(),void 0;var i=this.actions,a=v(i,At),e=v(i,Pt),r=v(i,St);return a||e&&o&rt||r&&o&st?this.preventSrc(n):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Et=1,Ot=2,Vt=4,Nt=8,Rt=Nt,It=16,Dt=32;Ie.prototype={defaults:{},set:function(e){return k(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(d(e,'recognizeWith',this))return this;var t=this.simultaneous;return e=Me(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return d(e,'dropRecognizeWith',this)?this:(e=Me(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(d(e,'requireFailure',this))return this;var t=this.requireFail;return e=Me(e,this),-1===x(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(d(e,'dropRequireFailure',this))return this;e=Me(e,this);var t=x(this.requireFail,e);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(n.options.event+(t?De(o):''),e)}var n=this,o=this.state;Nt>o&&t(!0),t(),o>=Nt&&t(!0)},tryEmit:function(e){return this.canEmit()?this.emit(e):(this.state=Dt,void 0)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(Dt|Et)))return!1;e++}return!0},recognize:function(e){var t=k({},e);return le(this.options.enable,[this,t])?(this.state&(Rt|It|Dt)&&(this.state=Et),this.state=this.process(t),this.state&(Ot|Vt|Nt|It)&&this.tryEmit(t),void 0):(this.reset(),this.state=Dt,void 0)},process:function(){},getTouchAction:function(){},reset:function(){}},b(Le,Ie,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(t){var n=this.state,o=t.eventType,i=n&(Ot|Vt),a=this.attrTest(t);return i&&(o&et||!a)?n|It:i||a?o&Ze?n|Nt:n&Ot?n|Vt:Ot:Dt}}),b(Be,Le,{defaults:{event:'pan',threshold:10,pointers:1,direction:lt},getTouchAction:function(){var e=this.options.direction,t=[];return e&rt&&t.push(Pt),e&st&&t.push(St),t},directionTest:function(t){var n=this.options,o=!0,i=t.distance,a=t.direction,e=t.deltaX,r=t.deltaY;return a&n.direction||(n.direction&rt?(a=0===e?tt:0>e?nt:ot,o=e!=this.pX,i=te(t.deltaX)):(a=0===r?tt:0>r?it:at,o=r!=this.pY,i=te(t.deltaY))),t.direction=a,o&&i>n.threshold&&a&n.direction},attrTest:function(e){return Le.prototype.attrTest.call(this,e)&&(this.state&Ot||!(this.state&Ot)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Fe(e.direction);t&&this.manager.emit(this.options.event+t,e),this._super.emit.call(this,e)}}),b(qe,Le,{defaults:{event:'pinch',threshold:0,pointers:2},getTouchAction:function(){return[At]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(te(e.scale-1)>this.options.threshold||this.state&Ot)},emit:function(e){if(this._super.emit.call(this,e),1!==e.scale){var t=1>e.scale?'in':'out';this.manager.emit(this.options.event+t,e)}}}),b(je,Ie,{defaults:{event:'press',pointers:1,time:500,threshold:5},getTouchAction:function(){return[Ct]},process:function(t){var n=this.options,o=t.pointers.length===n.pointers,i=t.distance<n.threshold,a=t.deltaTime>n.time;if(this._input=t,!i||!o||t.eventType&(Ze|et)&&!a)this.reset();else if(t.eventType&N)this.reset(),this._timer=re(function(){this.state=Rt,this.tryEmit()},n.time,this);else if(t.eventType&Ze)return Rt;return Dt},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===Rt&&(e&&e.eventType&Ze?this.manager.emit(this.options.event+'up',e):(this._input.timeStamp=Ge(),this.manager.emit(this.options.event,this._input)))}}),b(He,Le,{defaults:{event:'rotate',threshold:0,pointers:2},getTouchAction:function(){return[At]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(te(e.rotation)>this.options.threshold||this.state&Ot)}}),b(ze,Le,{defaults:{event:'swipe',threshold:10,velocity:.65,direction:rt|st,pointers:1},getTouchAction:function(){return Be.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction,n;return t&(rt|st)?n=e.velocity:t&rt?n=e.velocityX:t&st&&(n=e.velocityY),this._super.attrTest.call(this,e)&&t&e.direction&&e.distance>this.options.threshold&&Ke(n)>this.options.velocity&&e.eventType&Ze},emit:function(e){var t=Fe(e.direction);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),b(We,Ie,{defaults:{event:'tap',pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[Tt]},process:function(t){var n=this.options,o=t.pointers.length===n.pointers,i=t.distance<n.threshold,a=t.deltaTime<n.time;if(this.reset(),t.eventType&N&&0===this.count)return this.failTimeout();if(i&&a&&o){if(t.eventType!=Ze)return this.failTimeout();var e=!this.pTime||t.timeStamp-this.pTime<n.interval,r=!this.pCenter||_e(this.pCenter,t.center)<n.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,r&&e?this.count+=1:this.count=1,this._input=t;var s=this.count%n.taps;if(0==s)return this.hasRequireFailures()?(this._timer=re(function(){this.state=Rt,this.tryEmit()},n.interval,this),Ot):Rt}return Dt},failTimeout:function(){return this._timer=re(function(){this.state=Dt},this.options.interval,this),Dt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Rt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),$e.VERSION='2.0.4',$e.defaults={domEvents:!1,touchAction:kt,enable:!0,inputTarget:null,inputClass:null,preset:[[He,{enable:!1}],[qe,{enable:!1},['rotate']],[ze,{direction:rt}],[Be,{direction:rt},['swipe']],[We],[We,{event:'doubletap',taps:2},['tap']],[je]],cssProps:{userSelect:'default',touchSelect:'none',touchCallout:'none',contentZooming:'none',userDrag:'none',tapHighlightColor:'rgba(0,0,0,0)'}};var Ft=2;Xe.prototype={set:function(e){return k(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?Ft:1},recognize:function(t){var n=this.session;if(!n.stopped){this.touchAction.preventDefaults(t);var o=this.recognizers,i=n.curRecognizer,a;(!i||i&&i.state&Rt)&&(i=n.curRecognizer=null);for(var r=0;r<o.length;)a=o[r],n.stopped===Ft||i&&a!=i&&!a.canRecognizeWith(i)?a.reset():a.recognize(t),!i&&a.state&(Ot|Vt|Nt)&&(i=n.curRecognizer=a),r++}},get:function(e){if(e instanceof Ie)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(d(e,'add',this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(d(e,'remove',this))return this;var t=this.recognizers;return e=this.get(e),t.splice(x(t,e),1),this.touchAction.update(),this},on:function(e,t){var n=this.handlers;return l(w(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this},off:function(e,t){var n=this.handlers;return l(w(e),function(e){t?n[e].splice(x(n[e],t),1):delete n[e]}),this},emit:function(e,t){this.options.domEvents&&Ye(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var o=0;o<n.length;)n[o](t),o++}},destroy:function(){this.element&&Ue(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},k($e,{INPUT_START:N,INPUT_MOVE:Je,INPUT_END:Ze,INPUT_CANCEL:et,STATE_POSSIBLE:Et,STATE_BEGAN:Ot,STATE_CHANGED:Vt,STATE_ENDED:Nt,STATE_RECOGNIZED:Rt,STATE_CANCELLED:It,STATE_FAILED:Dt,DIRECTION_NONE:tt,DIRECTION_LEFT:nt,DIRECTION_RIGHT:ot,DIRECTION_UP:it,DIRECTION_DOWN:at,DIRECTION_HORIZONTAL:rt,DIRECTION_VERTICAL:st,DIRECTION_ALL:lt,Manager:Xe,Input:E,TouchAction:Ne,TouchInput:Ee,MouseInput:Te,PointerEventInput:Ae,TouchMouseInput:Ve,SingleTouchInput:Se,Recognizer:Ie,AttrRecognizer:Le,Tap:We,Pan:Be,Swipe:ze,Pinch:qe,Rotate:He,Press:je,on:s,off:de,each:l,merge:c,extend:k,inherit:b,bindFn:se,prefixed:A}),ee(13)?(ne=function(){return $e}.call(K,ee,K,M),!(ne!==void 0&&(M.exports=ne))):'undefined'!=typeof M&&M.exports?M.exports=$e:oe[a]=$e}(window,document,'Hammer')},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){var o,i,a;(function(r){i=[n(0),n(15)],o=r,a='function'==typeof o?o.apply(t,i):o,!(a!==void 0&&(e.exports=a))})(function(e,t){function n(n,o){var i=e(n);i.data('hammer')||i.data('hammer',new t(i[0],o))}e.fn.hammer=function(e){return this.each(function(){n(this,e)})},t.Manager.prototype.emit=function(t){return function(n,o){t.call(this,n,o),e(this.element).trigger({type:n,gesture:o})}}(t.Manager.prototype.emit)})},function(e,t,n){var o=Math.abs,i;/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(a,r,s){'use strict';function l(e,t,n){return setTimeout(m(e,n),t)}function d(e,t,n){return!!Array.isArray(e)&&(c(e,n[t],n),!0)}function c(e,t,n){if(e)if(e.forEach)e.forEach(t,n);else if(void 0!==e.length)for(o=0;o<e.length;)t.call(n,e[o],o,e),o++;else for(var o in e)e.hasOwnProperty(o)&&t.call(n,e[o],o,e)}function p(t,n,o){return function(){var i=new Error('get-stack-trace'),e=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,'').replace(/^\s+at\s+/gm,'').replace(/^Object.<anonymous>\s*\(/gm,'{anonymous}()@'):'Unknown Stack Trace',r=a.console&&(a.console.warn||a.console.log);return r&&r.call(a.console,'DEPRECATED METHOD: '+n+'\n'+o+' AT \n',e),t.apply(this,arguments)}}function u(e,t,n){var o=t.prototype,i;i=e.prototype=Object.create(o),i.constructor=e,i._super=o,n&&we(i,n)}function m(e,t){return function(){return e.apply(t,arguments)}}function g(e,t){return typeof e==fe?e.apply(t?t[0]||void 0:void 0,t):e}function h(e,t){return e===void 0?t:e}function f(e,t,n){c(w(t),function(t){e.addEventListener(t,n,!1)})}function b(e,t,n){c(w(t),function(t){e.removeEventListener(t,n,!1)})}function y(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function v(e,t){return-1<e.indexOf(t)}function w(e){return e.trim().split(/\s+/g)}function _(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var o=0;o<e.length;){if(n&&e[o][n]==t||!n&&e[o]===t)return o;o++}return-1}function x(e){return Array.prototype.slice.call(e,0)}function k(e,t,n){for(var o=[],a=[],r=0,i;r<e.length;)i=t?e[r][t]:e[r],0>_(a,i)&&o.push(e[r]),a[r]=i,r++;return n&&(t?o=o.sort(function(e,n){return e[t]>n[t]}):o=o.sort()),o}function C(e,t){for(var n=t[0].toUpperCase()+t.slice(1),o=0,i,a;o<ge.length;){if(i=ge[o],a=i?i+n:t,a in e)return a;o++}return void 0}function T(){return ke++}function A(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||a}function S(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){g(e.options.enable,[e])&&n.handler(t)},this.init()}function P(e){var t=e.options.inputClass,n;return n=t?t:Ae?H:Se?$:Te?U:j,new n(e,E)}function E(e,t,n){var o=n.pointers.length,i=n.changedPointers.length,a=t&Ve&&0==o-i;n.isFirst=!!a,n.isFinal=!!(t&(Re|Ie)&&0==o-i),a&&(e.session={}),n.eventType=t,O(e,n),e.emit('hammer.input',n),e.recognize(n),e.session.prevInput=n}function O(e,t){var n=e.session,o=t.pointers,i=o.length;n.firstInput||(n.firstInput=R(t)),1<i&&!n.firstMultiple?n.firstMultiple=R(t):1===i&&(n.firstMultiple=!1);var a=n.firstInput,r=n.firstMultiple,s=r?r.center:a.center,l=t.center=I(o);t.timeStamp=ve(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=L(s,l),t.distance=M(s,l),V(n,t),t.offsetDirection=F(t.deltaX,t.deltaY);var d=D(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=d.x,t.overallVelocityY=d.y,t.overallVelocity=ye(d.x)>ye(d.y)?d.x:d.y,t.scale=r?q(r.pointers,o):1,t.rotation=r?B(r.pointers,o):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,N(n,t);var c=e.element;y(t.srcEvent.target,c)&&(c=t.srcEvent.target),t.target=c}function V(e,t){var n=t.center,o=e.offsetDelta||{},i=e.prevDelta||{},a=e.prevInput||{};(t.eventType===Ve||a.eventType===Re)&&(i=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},o=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-o.x),t.deltaY=i.y+(n.y-o.y)}function N(e,t){var n=e.lastInterval||t,o=t.timeStamp-n.timeStamp,i,a,r,s;if(t.eventType!=Ie&&(o>Oe||n.velocity===void 0)){var l=t.deltaX-n.deltaX,d=t.deltaY-n.deltaY,c=D(o,l,d);a=c.x,r=c.y,i=ye(c.x)>ye(c.y)?c.x:c.y,s=F(l,d),e.lastInterval=t}else i=n.velocity,a=n.velocityX,r=n.velocityY,s=n.direction;t.velocity=i,t.velocityX=a,t.velocityY=r,t.direction=s}function R(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:be(e.pointers[n].clientX),clientY:be(e.pointers[n].clientY)},n++;return{timeStamp:ve(),pointers:t,center:I(t),deltaX:e.deltaX,deltaY:e.deltaY}}function I(e){var t=e.length;if(1===t)return{x:be(e[0].clientX),y:be(e[0].clientY)};for(var n=0,o=0,a=0;a<t;)n+=e[a].clientX,o+=e[a].clientY,a++;return{x:be(n/t),y:be(o/t)}}function D(e,t,n){return{x:t/e||0,y:n/e||0}}function F(e,t){return e===t?De:ye(e)>=ye(t)?0>e?Fe:Me:0>t?Le:Be}function M(e,t,n){n||(n=ze);var o=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(o*o+i*i)}function L(e,t,n){n||(n=ze);var o=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,o)/Math.PI}function B(e,t){return L(t[1],t[0],We)+L(e[1],e[0],We)}function q(e,t){return M(t[0],t[1],We)/M(e[0],e[1],We)}function j(){this.evEl=Xe,this.evWin=Ue,this.pressed=!1,S.apply(this,arguments)}function H(){this.evEl=Ke,this.evWin=Ge,S.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function z(){this.evTarget=Ze,this.evWin=et,this.started=!1,S.apply(this,arguments)}function W(e,t){var n=x(e.touches),o=x(e.changedTouches);return t&(Re|Ie)&&(n=k(n.concat(o),'identifier',!0)),[n,o]}function $(){this.evTarget=nt,this.targetIds={},S.apply(this,arguments)}function X(e,t){var n=x(e.touches),o=this.targetIds;if(t&(Ve|Ne)&&1===n.length)return o[n[0].identifier]=!0,[n,n];var a=x(e.changedTouches),r=[],s=this.target,l,i;if(i=n.filter(function(e){return y(e.target,s)}),t===Ve)for(l=0;l<i.length;)o[i[l].identifier]=!0,l++;for(l=0;l<a.length;)o[a[l].identifier]&&r.push(a[l]),t&(Re|Ie)&&delete o[a[l].identifier],l++;return r.length?[k(i.concat(r),'identifier',!0),r]:void 0}function U(){S.apply(this,arguments);var e=m(this.handler,this);this.touch=new $(this.manager,e),this.mouse=new j(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Y(e,t){e&Ve?(this.primaryTouch=t.changedPointers[0].identifier,Q.call(this,t)):e&(Re|Ie)&&Q.call(this,t)}function Q(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var o=this.lastTouches,i=function(){var e=o.indexOf(n);-1<e&&o.splice(e,1)};setTimeout(i,ot)}}function K(e){for(var n=e.srcEvent.clientX,a=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],t=o(n-i.x),s=o(a-i.y);if(t<=it&&s<=it)return!0}return!1}function G(e,t){this.manager=e,this.set(t)}function J(e){if(v(e,ct))return ct;var t=v(e,pt),n=v(e,ut);return t&&n?ct:t||n?t?pt:ut:v(e,dt)?dt:lt}function Z(e){this.options=we({},this.defaults,e||{}),this.id=T(),this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=gt,this.simultaneous={},this.requireFail=[]}function ee(e){if(e&vt)return'cancel';return e&bt?'end':e&ft?'move':e&ht?'start':''}function te(e){if(e==Be)return'down';return e==Le?'up':e==Fe?'left':e==Me?'right':''}function ne(e,t){var n=t.manager;return n?n.get(e):e}function oe(){Z.apply(this,arguments)}function ie(){oe.apply(this,arguments),this.pX=null,this.pY=null}function ae(){oe.apply(this,arguments)}function re(){Z.apply(this,arguments),this._timer=null,this._input=null}function se(){oe.apply(this,arguments)}function le(){oe.apply(this,arguments)}function de(){Z.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ce(e,t){return t=t||{},t.recognizers=h(t.recognizers,ce.defaults.preset),new pe(e,t)}function pe(e,t){this.options=we({},ce.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=P(this),this.touchAction=new G(this,this.options.touchAction),ue(this,!0),c(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function ue(e,t){var n=e.element;if(n.style){var o;c(e.options.cssProps,function(i,a){o=C(n.style,a),t?(e.oldCssProps[o]=n.style[o],n.style[o]=i):n.style[o]=e.oldCssProps[o]||''}),t||(e.oldCssProps={})}}function me(e,t){var n=r.createEvent('Event');n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}var ge=['','webkit','Moz','MS','ms','o'],he=r.createElement('div'),fe='function',be=Math.round,ye=o,ve=Date.now,we;we='function'==typeof Object.assign?Object.assign:function(e){if(void 0===e||null===e)throw new TypeError('Cannot convert undefined or null to object');for(var t=Object(e),n=1,o;n<arguments.length;n++)if(o=arguments[n],void 0!==o&&null!==o)for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i]);return t};var _e=p(function(e,t,n){for(var o=Object.keys(t),a=0;a<o.length;)(!n||n&&void 0===e[o[a]])&&(e[o[a]]=t[o[a]]),a++;return e},'extend','Use `assign`.'),xe=p(function(e,t){return _e(e,t,!0)},'merge','Use `assign`.'),ke=1,Ce=/mobile|tablet|ip(ad|hone|od)|android/i,Te='ontouchstart'in a,Ae=C(a,'PointerEvent')!==void 0,Se=Te&&Ce.test(navigator.userAgent),Pe='touch',Ee='mouse',Oe=25,Ve=1,Ne=2,Re=4,Ie=8,De=1,Fe=2,Me=4,Le=8,Be=16,qe=Fe|Me,je=Le|Be,He=qe|je,ze=['x','y'],We=['clientX','clientY'];S.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(A(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(A(this.element),this.evWin,this.domHandler)}};var $e={mousedown:Ve,mousemove:Ne,mouseup:Re},Xe='mousedown',Ue='mousemove mouseup';u(j,S,{handler:function(e){var t=$e[e.type];t&Ve&&0===e.button&&(this.pressed=!0),t&Ne&&1!==e.which&&(t=Re);this.pressed&&(t&Re&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Ee,srcEvent:e}))}});var Ye={pointerdown:Ve,pointermove:Ne,pointerup:Re,pointercancel:Ie,pointerout:Ie},Qe={2:Pe,3:'pen',4:Ee,5:'kinect'},Ke='pointerdown',Ge='pointermove pointerup pointercancel';a.MSPointerEvent&&!a.PointerEvent&&(Ke='MSPointerDown',Ge='MSPointerMove MSPointerUp MSPointerCancel'),u(H,S,{handler:function(e){var t=this.store,n=!1,o=e.type.toLowerCase().replace('ms',''),i=Ye[o],a=Qe[e.pointerType]||e.pointerType,r=_(t,e.pointerId,'pointerId');i&Ve&&(0===e.button||a==Pe)?0>r&&(t.push(e),r=t.length-1):i&(Re|Ie)&&(n=!0);0>r||(t[r]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),n&&t.splice(r,1))}});var Je={touchstart:Ve,touchmove:Ne,touchend:Re,touchcancel:Ie},Ze='touchstart',et='touchstart touchmove touchend touchcancel';u(z,S,{handler:function(e){var t=Je[e.type];if(t===Ve&&(this.started=!0),!!this.started){var n=W.call(this,e,t);t&(Re|Ie)&&0==n[0].length-n[1].length&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Pe,srcEvent:e})}}});var tt={touchstart:Ve,touchmove:Ne,touchend:Re,touchcancel:Ie},nt='touchstart touchmove touchend touchcancel';u($,S,{handler:function(e){var t=tt[e.type],n=X.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Pe,srcEvent:e})}});var ot=2500,it=25;u(U,S,{handler:function(e,t,n){var o=n.pointerType==Pe,i=n.pointerType==Ee;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(o)Y.call(this,t,n);else if(i&&K.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var at=C(he.style,'touchAction'),rt=at!==void 0,st='compute',lt='auto',dt='manipulation',ct='none',pt='pan-x',ut='pan-y',mt=function(){if(!rt)return!1;var e={},t=a.CSS&&a.CSS.supports;return['auto','manipulation','pan-y','pan-x','pan-x pan-y','none'].forEach(function(n){e[n]=!t||a.CSS.supports('touch-action',n)}),e}();G.prototype={set:function(e){e==st&&(e=this.compute()),rt&&this.manager.element.style&&mt[e]&&(this.manager.element.style[at]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return c(this.manager.recognizers,function(t){g(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),J(e.join(' '))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var o=this.actions,i=v(o,ct)&&!mt[ct],a=v(o,ut)&&!mt[ut],r=v(o,pt)&&!mt[pt];if(i){var s=1===e.pointers.length,l=2>e.distance,d=250>e.deltaTime;if(s&&l&&d)return}return r&&a?void 0:i||a&&n&qe||r&&n&je?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var gt=1,ht=2,ft=4,bt=8,yt=bt,vt=16,wt=32;Z.prototype={defaults:{},set:function(e){return we(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(d(e,'recognizeWith',this))return this;var t=this.simultaneous;return e=ne(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return d(e,'dropRecognizeWith',this)?this:(e=ne(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(d(e,'requireFailure',this))return this;var t=this.requireFail;return e=ne(e,this),-1===_(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(d(e,'dropRequireFailure',this))return this;e=ne(e,this);var t=_(this.requireFail,e);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,o=this.state;o<bt&&t(n.options.event+ee(o)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),o>=bt&&t(n.options.event+ee(o))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=wt)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(wt|gt)))return!1;e++}return!0},recognize:function(e){var t=we({},e);return g(this.options.enable,[this,t])?void(this.state&(yt|vt|wt)&&(this.state=gt),this.state=this.process(t),this.state&(ht|ft|bt|vt)&&this.tryEmit(t)):(this.reset(),void(this.state=wt))},process:function(){},getTouchAction:function(){},reset:function(){}},u(oe,Z,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,o=t&(ht|ft),i=this.attrTest(e);if(o&&(n&Ie||!i))return t|vt;return o||i?n&Re?t|bt:t&ht?t|ft:ht:wt}}),u(ie,oe,{defaults:{event:'pan',threshold:10,pointers:1,direction:He},getTouchAction:function(){var e=this.options.direction,t=[];return e&qe&&t.push(ut),e&je&&t.push(pt),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,a=e.direction,r=e.deltaX,s=e.deltaY;return a&t.direction||(t.direction&qe?(a=0===r?De:0>r?Fe:Me,n=r!=this.pX,i=o(e.deltaX)):(a=0===s?De:0>s?Le:Be,n=s!=this.pY,i=o(e.deltaY))),e.direction=a,n&&i>t.threshold&&a&t.direction},attrTest:function(e){return oe.prototype.attrTest.call(this,e)&&(this.state&ht||!(this.state&ht)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=te(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),u(ae,oe,{defaults:{event:'pinch',threshold:0,pointers:2},getTouchAction:function(){return[ct]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(o(e.scale-1)>this.options.threshold||this.state&ht)},emit:function(e){if(1!==e.scale){var t=1>e.scale?'in':'out';e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),u(re,Z,{defaults:{event:'press',pointers:1,time:251,threshold:9},getTouchAction:function(){return[lt]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,o=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!o||!n||e.eventType&(Re|Ie)&&!i)this.reset();else if(e.eventType&Ve)this.reset(),this._timer=l(function(){this.state=yt,this.tryEmit()},t.time,this);else if(e.eventType&Re)return yt;return wt},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state!==yt||(e&&e.eventType&Re?this.manager.emit(this.options.event+'up',e):(this._input.timeStamp=ve(),this.manager.emit(this.options.event,this._input)))}}),u(se,oe,{defaults:{event:'rotate',threshold:0,pointers:2},getTouchAction:function(){return[ct]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(o(e.rotation)>this.options.threshold||this.state&ht)}}),u(le,oe,{defaults:{event:'swipe',threshold:10,velocity:0.3,direction:qe|je,pointers:1},getTouchAction:function(){return ie.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction,n;return t&(qe|je)?n=e.overallVelocity:t&qe?n=e.overallVelocityX:t&je&&(n=e.overallVelocityY),this._super.attrTest.call(this,e)&&t&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&ye(n)>this.options.velocity&&e.eventType&Re},emit:function(e){var t=te(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),u(de,Z,{defaults:{event:'tap',pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[dt]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,o=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&Ve&&0===this.count)return this.failTimeout();if(o&&i&&n){if(e.eventType!=Re)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,r=!this.pCenter||M(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,r&&a?this.count+=1:this.count=1,this._input=e;var s=this.count%t.taps;if(0==s)return this.hasRequireFailures()?(this._timer=l(function(){this.state=yt,this.tryEmit()},t.interval,this),ht):yt}return wt},failTimeout:function(){return this._timer=l(function(){this.state=wt},this.options.interval,this),wt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==yt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ce.VERSION='2.0.7',ce.defaults={domEvents:!1,touchAction:st,enable:!0,inputTarget:null,inputClass:null,preset:[[se,{enable:!1}],[ae,{enable:!1},['rotate']],[le,{direction:qe}],[ie,{direction:qe},['swipe']],[de],[de,{event:'doubletap',taps:2},['tap']],[re]],cssProps:{userSelect:'none',touchSelect:'none',touchCallout:'none',contentZooming:'none',userDrag:'none',tapHighlightColor:'rgba(0,0,0,0)'}};var _t=2;pe.prototype={set:function(e){return we(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?_t:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n=this.recognizers,o=t.curRecognizer,a;(!o||o&&o.state&yt)&&(o=t.curRecognizer=null);for(var r=0;r<n.length;)a=n[r],t.stopped!==_t&&(!o||a==o||a.canRecognizeWith(o))?a.recognize(e):a.reset(),!o&&a.state&(ht|ft|bt)&&(o=t.curRecognizer=a),r++}},get:function(e){if(e instanceof Z)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(d(e,'add',this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(d(e,'remove',this))return this;if(e=this.get(e),e){var t=this.recognizers,n=_(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(void 0!==e&&void 0!==t){var n=this.handlers;return c(w(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(void 0!==e){var n=this.handlers;return c(w(e),function(e){t?n[e]&&n[e].splice(_(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&me(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var o=0;o<n.length;)n[o](t),o++}},destroy:function(){this.element&&ue(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},we(ce,{INPUT_START:Ve,INPUT_MOVE:Ne,INPUT_END:Re,INPUT_CANCEL:Ie,STATE_POSSIBLE:gt,STATE_BEGAN:ht,STATE_CHANGED:ft,STATE_ENDED:bt,STATE_RECOGNIZED:yt,STATE_CANCELLED:vt,STATE_FAILED:wt,DIRECTION_NONE:De,DIRECTION_LEFT:Fe,DIRECTION_RIGHT:Me,DIRECTION_UP:Le,DIRECTION_DOWN:Be,DIRECTION_HORIZONTAL:qe,DIRECTION_VERTICAL:je,DIRECTION_ALL:He,Manager:pe,Input:S,TouchAction:G,TouchInput:$,MouseInput:j,PointerEventInput:H,TouchMouseInput:U,SingleTouchInput:z,Recognizer:Z,AttrRecognizer:oe,Tap:de,Pan:ie,Swipe:le,Pinch:ae,Rotate:se,Press:re,on:f,off:b,each:c,merge:xe,extend:_e,assign:we,inherit:u,bindFn:m,prefixed:C});var xt='undefined'==typeof a?'undefined'==typeof self?{}:self:a;xt.Hammer=ce,(i=function(){return ce}.call(t,n,t,e),!(i!==void 0&&(e.exports=i)))})(window,document,'Hammer')},function(e,t,n){(function(e,n,o){(function(e){e.Package?Materialize={}:e.Materialize={}})(window),'undefined'==typeof t||t.nodeType||('undefined'!=typeof e&&!e.nodeType&&e.exports&&(t=e.exports=Materialize),t.default=Materialize),function(e){for(var t=0,n=['webkit','moz'],o=e.requestAnimationFrame,a=e.cancelAnimationFrame,r=n.length;0<=--r&&!o;)o=e[n[r]+'RequestAnimationFrame'],a=e[n[r]+'CancelRequestAnimationFrame'];o&&a||(o=function(e){var n=+Date.now(),o=Math.max(t+16,n);return setTimeout(function(){e(t=o)},o-n)},a=clearTimeout),e.requestAnimationFrame=o,e.cancelAnimationFrame=a}(window),Materialize.objectSelectorString=function(e){var t=e.prop('tagName')||'',n=e.attr('id')||'',o=e.attr('class')||'';return(t+n+o).replace(/\s/g,'')},Materialize.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+'-'+e()+'-'+e()+'-'+e()+'-'+e()+e()+e()}}(),Materialize.escapeHash=function(e){return e.replace(/(:|\.|\[|\]|,|=)/g,'\\$1')},Materialize.elementOrParentIsFixed=function(e){var t=n(e),o=t.add(t.parents()),i=!1;return o.each(function(){if('fixed'===n(this).css('position'))return i=!0,!1}),i};/**
 * Get time in ms
 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
 * @type {function}
 * @return {number}
 */var i=Date.now||function(){return new Date().getTime()};/**
 * Returns a function, that, when invoked, will only be triggered at most once
 * during a given window of time. Normally, the throttled function will run
 * as much as it can, without ever going more than once per `wait` duration;
 * but if you'd like to disable the execution on the leading edge, pass
 * `{leading: false}`. To disable execution on the trailing edge, ditto.
 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
 * @param {function} func
 * @param {number} wait
 * @param {Object=} options
 * @returns {Function}
 */Materialize.throttle=function(e,t,n){var o=null,a=0,r,s,l;n||(n={});var d=function(){a=!1===n.leading?0:i(),o=null,l=e.apply(r,s),r=s=null};return function(){var c=i();a||!1!==n.leading||(a=c);var p=t-(c-a);return r=this,s=arguments,0>=p?(clearTimeout(o),o=null,a=c,l=e.apply(r,s),r=s=null):!o&&!1!==n.trailing&&(o=setTimeout(d,p)),l}};var a;a=o?o.Velocity:n?n.Velocity:Velocity,Materialize.Vel=a?a:Velocity}).call(t,n(17)(e),n(0),n(0))},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],!e.children&&(e.children=[]),Object.defineProperty(e,'loaded',{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,'id',{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){(function(e){(function(t){t.fn.scrollTo=function(e){return t(this).scrollTop(t(this).scrollTop()-t(this).offset().top+t(e).offset().top),this},t.fn.dropdown=function(e){var n={inDuration:300,outDuration:225,constrainWidth:!0,hover:!1,gutter:0,belowOrigin:!1,alignment:'left',stopPropagation:!1};return'open'===e?(this.each(function(){t(this).trigger('open')}),!1):'close'===e?(this.each(function(){t(this).trigger('close')}),!1):void this.each(function(){function o(){void 0!==r.data('induration')&&(s.inDuration=r.data('induration')),void 0!==r.data('outduration')&&(s.outDuration=r.data('outduration')),void 0!==r.data('constrainwidth')&&(s.constrainWidth=r.data('constrainwidth')),void 0!==r.data('hover')&&(s.hover=r.data('hover')),void 0!==r.data('gutter')&&(s.gutter=r.data('gutter')),void 0!==r.data('beloworigin')&&(s.belowOrigin=r.data('beloworigin')),void 0!==r.data('alignment')&&(s.alignment=r.data('alignment')),void 0!==r.data('stoppropagation')&&(s.stopPropagation=r.data('stoppropagation'))}function i(e){'focus'===e&&(l=!0),o(),d.addClass('active'),r.addClass('active');var n=r[0].getBoundingClientRect().width;!0===s.constrainWidth?d.css('width',n):d.css('white-space','nowrap');var i=window.innerHeight,c=r.innerHeight(),p=r.offset().left,u=r.offset().top-t(window).scrollTop(),m=s.alignment,g=0,h=0,f=0;!0===s.belowOrigin&&(f=c);var b=0,y=0,v=r.parent();if(v.is('body')||(v[0].scrollHeight>v[0].clientHeight&&(b=v[0].scrollTop),v[0].scrollWidth>v[0].clientWidth&&(y=v[0].scrollLeft)),p+d.innerWidth()>t(window).width()?m='right':0>p-d.innerWidth()+r.innerWidth()&&(m='left'),u+d.innerHeight()>i)if(0>u+c-d.innerHeight()){var w=i-u-f;d.css('max-height',w)}else f||(f+=c),f-=d.innerHeight();if('left'===m)g=s.gutter,h=r.position().left+g;else if('right'===m){d.stop(!0,!0).css({opacity:0,left:0});var _=r.position().left+n-d.width();g=-s.gutter,h=_+g}d.css({position:'absolute',top:r.position().top+f+b,left:h+y}),d.slideDown({queue:!1,duration:s.inDuration,easing:'easeOutCubic',complete:function(){t(this).css('height','')}}).animate({opacity:1},{queue:!1,duration:s.inDuration,easing:'easeOutSine'}),setTimeout(function(){t(document).on('click.'+d.attr('id'),function(){a(),t(document).off('click.'+d.attr('id'))})},0)}function a(){l=!1,d.fadeOut(s.outDuration),d.removeClass('active'),r.removeClass('active'),t(document).off('click.'+d.attr('id')),setTimeout(function(){d.css('max-height','')},s.outDuration)}var r=t(this),s=t.extend({},n,e),l=!1,d=t('#'+r.attr('data-activates'));if(o(),r.after(d),s.hover){var c=!1;r.off('click.'+r.attr('id')),r.on('mouseenter',function(){!1==c&&(i(),c=!0)}),r.on('mouseleave',function(n){var e=n.toElement||n.relatedTarget;t(e).closest('.dropdown-content').is(d)||(d.stop(!0,!0),a(),c=!1)}),d.on('mouseleave',function(n){var e=n.toElement||n.relatedTarget;t(e).closest('.dropdown-button').is(r)||(d.stop(!0,!0),a(),c=!1)})}else r.off('click.'+r.attr('id')),r.on('click.'+r.attr('id'),function(n){l||(r[0]!=n.currentTarget||r.hasClass('active')||0!==t(n.target).closest('.dropdown-content').length?r.hasClass('active')&&(a(),t(document).off('click.'+d.attr('id'))):(n.preventDefault(),s.stopPropagation&&n.stopPropagation(),i('click')))});r.on('open',function(t,e){i(e)}),r.on('close',a)})},t(document).ready(function(){t('.dropdown-button').dropdown()})})(e)}).call(t,n(0))},function(e,t,n){var o=Math.max;(function(e){(function(t){var e={init:function(n){var e={onShow:null,swipeable:!1,responsiveThreshold:Infinity};n=t.extend(e,n);var a=Materialize.objectSelectorString(t(this));return this.each(function(e){var i=a+e,r=t(this),s=t(window).width(),l=r.find('li.tab a'),d=r.width(),c=t(),p=o(d,r[0].scrollWidth)/l.length,u=0,m=0,g=!1,h=300,f=function(e){return Math.ceil(d-e.position().left-e[0].getBoundingClientRect().width-r.scrollLeft())},b=function(e){return Math.floor(e.position().left+r.scrollLeft())},y=function(e){0<=u-e?(x.velocity({right:f(v)},{duration:h,queue:!1,easing:'easeOutQuad'}),x.velocity({left:b(v)},{duration:h,queue:!1,easing:'easeOutQuad',delay:90})):(x.velocity({left:b(v)},{duration:h,queue:!1,easing:'easeOutQuad'}),x.velocity({right:f(v)},{duration:h,queue:!1,easing:'easeOutQuad',delay:90}))},v,w,_,x,k;n.swipeable&&s>n.responsiveThreshold&&(n.swipeable=!1),v=t(l.filter('[href="'+location.hash+'"]')),0===v.length&&(v=t(this).find('li.tab a.active').first()),0===v.length&&(v=t(this).find('li.tab a').first()),v.addClass('active'),u=l.index(v),0>u&&(u=0),v[0]!==void 0&&(w=t(v[0].hash),w.addClass('active')),r.find('.indicator').length||r.append('<li class="indicator"></li>'),x=r.find('.indicator'),r.append(x),r.is(':visible')&&setTimeout(function(){x.css({right:f(v)}),x.css({left:b(v)})},0),t(window).off('resize.tabs-'+i).on('resize.tabs-'+i,function(){d=r.width(),p=o(d,r[0].scrollWidth)/l.length,0>u&&(u=0),0!=p&&0!==d&&(x.css({right:f(v)}),x.css({left:b(v)}))}),n.swipeable?(l.each(function(){var e=t(Materialize.escapeHash(this.hash));e.addClass('carousel-item'),c=c.add(e)}),_=c.wrapAll('<div class="tabs-content carousel"></div>'),c.css('display',''),t('.tabs-content.carousel').carousel({fullWidth:!0,noWrap:!0,onCycleTo:function(e){if(!g){var t=u;u=_.index(e),v.removeClass('active'),v=l.eq(u),v.addClass('active'),y(t),'function'==typeof n.onShow&&n.onShow.call(r[0],w)}}})):l.not(v).each(function(){t(Materialize.escapeHash(this.hash)).hide()}),r.off('click.tabs').on('click.tabs','a',function(i){if(t(this).parent().hasClass('disabled'))return void i.preventDefault();if(!t(this).attr('target')){g=!0,d=r.width(),p=o(d,r[0].scrollWidth)/l.length,v.removeClass('active');var e=w;v=t(this),w=t(Materialize.escapeHash(this.hash)),l=r.find('li.tab a');v.position();v.addClass('active'),m=u,u=l.index(t(this)),0>u&&(u=0),n.swipeable?c.length&&c.carousel('set',u,function(){'function'==typeof n.onShow&&n.onShow.call(r[0],w)}):(void 0!==w&&(w.show(),w.addClass('active'),'function'==typeof n.onShow&&n.onShow.call(this,w)),void 0!==e&&!e.is(w)&&(e.hide(),e.removeClass('active'))),k=setTimeout(function(){g=!1},h),y(m),i.preventDefault()}})})},select_tab:function(e){this.find('a[href="#'+e+'"]').trigger('click')}};t.fn.tabs=function(n){if(e[n])return e[n].apply(this,Array.prototype.slice.call(arguments,1));return'object'!=typeof n&&n?void t.error('Method '+n+' does not exist on jQuery.tabs'):e.init.apply(this,arguments)},t(document).ready(function(){t('ul.tabs').tabs()})})(e)}).call(t,n(0))},function(e,t,n){(function(e){(function(e){e.fn.tooltip=function(n){var o=5;return'remove'===n?(this.each(function(){e('#'+e(this).attr('data-tooltip-id')).remove(),e(this).removeAttr('data-tooltip-id'),e(this).off('mouseenter.tooltip mouseleave.tooltip')}),!1):(n=e.extend({delay:350,tooltip:'',position:'bottom',html:!1},n),this.each(function(){var i=Materialize.guid(),a=e(this);a.attr('data-tooltip-id')&&e('#'+a.attr('data-tooltip-id')).remove(),a.attr('data-tooltip-id',i);var r=function(){s=a.attr('data-html')?'true'===a.attr('data-html'):n.html,l=a.attr('data-delay'),l=void 0===l||''===l?n.delay:l,d=a.attr('data-position'),d=void 0===d||''===d?n.position:d,c=a.attr('data-tooltip'),c=void 0===c||''===c?n.tooltip:c},s,l,d,c,p,u;r();p=function(){var t=e('<div class="material-tooltip"></div>');return c=s?e('<span></span>').html(c):e('<span></span>').text(c),t.append(c).appendTo(e('body')).attr('id',i),u=e('<div class="backdrop"></div>'),u.appendTo(t),t}(),a.off('mouseenter.tooltip mouseleave.tooltip');var m=!1,g;a.on({"mouseenter.tooltip":function(){g=setTimeout(function(){var e=Math.SQRT2;r(),m=!0,p.velocity('stop'),u.velocity('stop'),p.css({visibility:'visible',left:'0px',top:'0px'});var n=a.outerWidth(),i=a.outerHeight(),s=p.outerHeight(),l=p.outerWidth(),c='0px',g='0px',h=u[0].offsetWidth,f=u[0].offsetHeight,b=8,y=8,v=0,w,_,x;'top'===d?(w=a.offset().top-s-o,_=a.offset().left+n/2-l/2,x=t(_,w,l,s),c='-10px',u.css({bottom:0,left:0,borderRadius:'14px 14px 0 0',transformOrigin:'50% 100%',marginTop:s,marginLeft:l/2-h/2})):'left'===d?(w=a.offset().top+i/2-s/2,_=a.offset().left-l-o,x=t(_,w,l,s),g='-10px',u.css({top:'-7px',right:0,width:'14px',height:'14px',borderRadius:'14px 0 0 14px',transformOrigin:'95% 50%',marginTop:s/2,marginLeft:l})):'right'===d?(w=a.offset().top+i/2-s/2,_=a.offset().left+n+o,x=t(_,w,l,s),g='+10px',u.css({top:'-7px',left:0,width:'14px',height:'14px',borderRadius:'0 14px 14px 0',transformOrigin:'5% 50%',marginTop:s/2,marginLeft:'0px'})):(w=a.offset().top+a.outerHeight()+o,_=a.offset().left+n/2-l/2,x=t(_,w,l,s),c='+10px',u.css({top:0,left:0,marginLeft:l/2-h/2})),p.css({top:x.y,left:x.x}),b=e*l/parseInt(h),y=e*s/parseInt(f),v=Math.max(b,y),p.velocity({translateY:c,translateX:g},{duration:350,queue:!1}).velocity({opacity:1},{duration:300,delay:50,queue:!1}),u.css({visibility:'visible'}).velocity({opacity:1},{duration:55,delay:0,queue:!1}).velocity({scaleX:v,scaleY:v},{duration:300,delay:0,queue:!1,easing:'easeInOutQuad'})},l)},"mouseleave.tooltip":function(){m=!1,clearTimeout(g),setTimeout(function(){!0!=m&&(p.velocity({opacity:0,translateY:0,translateX:0},{duration:225,queue:!1}),u.velocity({opacity:0,scaleX:1,scaleY:1},{duration:225,queue:!1,complete:function(){u.css({visibility:'hidden'}),p.css({visibility:'hidden'}),m=!1}}))},225)}})}))};var t=function(t,n,o,i){var a=t,r=n;return 0>a?a=4:a+o>window.innerWidth&&(a-=a+o-window.innerWidth),0>r?r=4:r+i>window.innerHeight+e(window).scrollTop&&(r-=r+i-window.innerHeight),{x:a,y:r}};e(document).ready(function(){e('.tooltipped').tooltip()})})(e)}).call(t,n(0))},function(){(function(t){'use strict';function e(e){return null!==e&&e===e.window}function n(t){return e(t)?t:9===t.nodeType&&t.defaultView}function o(e){var t={top:0,left:0},o=e&&e.ownerDocument,i,a;return i=o.documentElement,'undefined'!=typeof e.getBoundingClientRect&&(t=e.getBoundingClientRect()),a=n(o),{top:t.top+a.pageYOffset-i.clientTop,left:t.left+a.pageXOffset-i.clientLeft}}function i(e){var t='';for(var n in e)e.hasOwnProperty(n)&&(t+=n+':'+e[n]+';');return t}function a(t){if(!1===c.allowEvent(t))return null;for(var e=null,n=t.target||t.srcElement;null!==n.parentNode;){if(!(n instanceof SVGElement)&&-1!==n.className.indexOf('waves-effect')){e=n;break}n=n.parentNode}return e}function r(n){var e=a(n);null!==e&&(d.show(n,e),'ontouchstart'in t&&(e.addEventListener('touchend',d.hide,!1),e.addEventListener('touchcancel',d.hide,!1)),e.addEventListener('mouseup',d.hide,!1),e.addEventListener('mouseleave',d.hide,!1),e.addEventListener('dragend',d.hide,!1))}var s=s||{},l=document.querySelectorAll.bind(document),d={duration:750,show:function(t,e){if(2===t.button)return!1;var n=e||this,a=document.createElement('div');a.className='waves-ripple',n.appendChild(a);var r=o(n),s=t.pageY-r.top,l=t.pageX-r.left,c='scale('+10*(n.clientWidth/100)+')';'touches'in t&&(s=t.touches[0].pageY-r.top,l=t.touches[0].pageX-r.left),a.setAttribute('data-hold',Date.now()),a.setAttribute('data-scale',c),a.setAttribute('data-x',l),a.setAttribute('data-y',s);var p={top:s+'px',left:l+'px'};a.className+=' waves-notransition',a.setAttribute('style',i(p)),a.className=a.className.replace('waves-notransition',''),p['-webkit-transform']=c,p['-moz-transform']=c,p['-ms-transform']=c,p['-o-transform']=c,p.transform=c,p.opacity='1',p['-webkit-transition-duration']=d.duration+'ms',p['-moz-transition-duration']=d.duration+'ms',p['-o-transition-duration']=d.duration+'ms',p['transition-duration']=d.duration+'ms',p['-webkit-transition-timing-function']='cubic-bezier(0.250, 0.460, 0.450, 0.940)',p['-moz-transition-timing-function']='cubic-bezier(0.250, 0.460, 0.450, 0.940)',p['-o-transition-timing-function']='cubic-bezier(0.250, 0.460, 0.450, 0.940)',p['transition-timing-function']='cubic-bezier(0.250, 0.460, 0.450, 0.940)',a.setAttribute('style',i(p))},hide:function(t){c.touchup(t);var e=this,n=1.4*e.clientWidth,o=null,a=e.getElementsByClassName('waves-ripple');if(0<a.length)o=a[a.length-1];else return!1;var r=o.getAttribute('data-x'),s=o.getAttribute('data-y'),l=o.getAttribute('data-scale'),p=Date.now()-+o.getAttribute('data-hold'),u=350-p;0>u&&(u=0),setTimeout(function(){var t={top:s+'px',left:r+'px',opacity:'0',"-webkit-transition-duration":d.duration+'ms',"-moz-transition-duration":d.duration+'ms',"-o-transition-duration":d.duration+'ms',"transition-duration":d.duration+'ms',"-webkit-transform":l,"-moz-transform":l,"-ms-transform":l,"-o-transform":l,transform:l};o.setAttribute('style',i(t)),setTimeout(function(){try{e.removeChild(o)}catch(t){return!1}},d.duration)},u)},wrapInput:function(e){for(var t=0,n;t<e.length;t++)if(n=e[t],'input'===n.tagName.toLowerCase()){var o=n.parentNode;if('i'===o.tagName.toLowerCase()&&-1!==o.className.indexOf('waves-effect'))continue;var i=document.createElement('i');i.className=n.className+' waves-input-wrapper';var a=n.getAttribute('style');a||(a=''),i.setAttribute('style',a),n.className='waves-button-input',n.removeAttribute('style'),o.replaceChild(i,n),i.appendChild(n)}}},c={touches:0,allowEvent:function(t){var e=!0;return'touchstart'===t.type?c.touches+=1:'touchend'===t.type||'touchcancel'===t.type?setTimeout(function(){0<c.touches&&(c.touches-=1)},500):'mousedown'===t.type&&0<c.touches&&(e=!1),e},touchup:function(t){c.allowEvent(t)}};s.displayEffect=function(e){e=e||{},'duration'in e&&(d.duration=e.duration),d.wrapInput(l('.waves-effect')),'ontouchstart'in t&&document.body.addEventListener('touchstart',r,!1),document.body.addEventListener('mousedown',r,!1)},s.attach=function(e){'input'===e.tagName.toLowerCase()&&(d.wrapInput([e]),e=e.parentNode),'ontouchstart'in t&&e.addEventListener('touchstart',r,!1),e.addEventListener('mousedown',r,!1)},t.Waves=s,document.addEventListener('DOMContentLoaded',function(){s.displayEffect()},!1)})(window);/*!
 * Waves v0.6.4
 * http://fian.my.id/Waves
 *
 * Copyright 2014 Alfiana E. Sibuea and other contributors
 * Released under the MIT license
 * https://github.com/fians/Waves/blob/master/LICENSE
 */},function(e,t,n){(function(e){(function(t){var e={init:function(n){n=t.extend({menuWidth:300,edge:'left',closeOnClick:!1,draggable:!0,onOpen:null,onClose:null},n),t(this).each(function(){var e=t(this),o=e.attr('data-activates'),i=t('#'+o);300!=n.menuWidth&&i.css('width',n.menuWidth);var a=t('.drag-target[data-sidenav="'+o+'"]');n.draggable?(a.length&&a.remove(),a=t('<div class="drag-target"></div>').attr('data-sidenav',o),t('body').append(a)):a=t(),'left'==n.edge?(i.css('transform','translateX(-100%)'),a.css({left:0})):(i.addClass('right-aligned').css('transform','translateX(100%)'),a.css({right:0})),i.hasClass('fixed')&&992<window.innerWidth&&i.css('transform','translateX(0)'),i.hasClass('fixed')&&t(window).resize(function(){992<window.innerWidth?0!==t('#sidenav-overlay').length&&l?r(!0):i.css('transform','translateX(0%)'):!1===l&&('left'===n.edge?i.css('transform','translateX(-100%)'):i.css('transform','translateX(100%)'))}),!0===n.closeOnClick&&i.on('click.itemclick','a:not(.collapsible-header)',function(){992<window.innerWidth&&i.hasClass('fixed')||r()});var r=function(e){s=!1,l=!1,t('body').css({overflow:'',width:''}),t('#sidenav-overlay').velocity({opacity:0},{duration:200,queue:!1,easing:'easeOutQuad',complete:function(){t(this).remove()}}),'left'===n.edge?(a.css({width:'',right:'',left:'0'}),i.velocity({translateX:'-100%'},{duration:200,queue:!1,easing:'easeOutCubic',complete:function(){!0===e&&(i.removeAttr('style'),i.css('width',n.menuWidth))}})):(a.css({width:'',right:'0',left:''}),i.velocity({translateX:'100%'},{duration:200,queue:!1,easing:'easeOutCubic',complete:function(){!0===e&&(i.removeAttr('style'),i.css('width',n.menuWidth))}})),'function'==typeof n.onClose&&n.onClose.call(this,i)},s=!1,l=!1;n.draggable&&(a.on('click',function(){l&&r()}),a.hammer({prevent_default:!1}).on('pan',function(o){if('touch'==o.gesture.pointerType){var e=o.gesture.direction,a=o.gesture.center.x,s=o.gesture.center.y,d=o.gesture.velocityX;if(0===a&&0===s)return;var c=t('body'),p=t('#sidenav-overlay'),u=c.innerWidth();if(c.css('overflow','hidden'),c.width(u),0===p.length&&(p=t('<div id="sidenav-overlay"></div>'),p.css('opacity',0).click(function(){r()}),'function'==typeof n.onOpen&&n.onOpen.call(this,i),t('body').append(p)),'left'===n.edge&&(a>n.menuWidth?a=n.menuWidth:0>a&&(a=0)),'left'===n.edge)a<n.menuWidth/2?l=!1:a>=n.menuWidth/2&&(l=!0),i.css('transform','translateX('+(a-n.menuWidth)+'px)');else{a<window.innerWidth-n.menuWidth/2?l=!0:a>=window.innerWidth-n.menuWidth/2&&(l=!1);var m=a-n.menuWidth/2;0>m&&(m=0),i.css('transform','translateX('+m+'px)')}var g;'left'===n.edge?(g=a/n.menuWidth,p.velocity({opacity:g},{duration:10,queue:!1,easing:'easeOutQuad'})):(g=Math.abs((a-window.innerWidth)/n.menuWidth),p.velocity({opacity:g},{duration:10,queue:!1,easing:'easeOutQuad'}))}}).on('panend',function(o){if('touch'==o.gesture.pointerType){var e=t('#sidenav-overlay'),r=o.gesture.velocityX,d=o.gesture.center.x,c=d-n.menuWidth,p=d-n.menuWidth/2;0<c&&(c=0),0>p&&(p=0),s=!1,'left'===n.edge?l&&0.3>=r||-0.5>r?(0!=c&&i.velocity({translateX:[0,c]},{duration:300,queue:!1,easing:'easeOutQuad'}),e.velocity({opacity:1},{duration:50,queue:!1,easing:'easeOutQuad'}),a.css({width:'50%',right:0,left:''}),l=!0):(!l||0.3<r)&&(t('body').css({overflow:'',width:''}),i.velocity({translateX:[-1*n.menuWidth-10,c]},{duration:200,queue:!1,easing:'easeOutQuad'}),e.velocity({opacity:0},{duration:200,queue:!1,easing:'easeOutQuad',complete:function(){'function'==typeof n.onClose&&n.onClose.call(this,i),t(this).remove()}}),a.css({width:'10px',right:'',left:0})):l&&-0.3<=r||0.5<r?(0!=p&&i.velocity({translateX:[0,p]},{duration:300,queue:!1,easing:'easeOutQuad'}),e.velocity({opacity:1},{duration:50,queue:!1,easing:'easeOutQuad'}),a.css({width:'50%',right:'',left:0}),l=!0):(!l||-0.3>r)&&(t('body').css({overflow:'',width:''}),i.velocity({translateX:[n.menuWidth+10,p]},{duration:200,queue:!1,easing:'easeOutQuad'}),e.velocity({opacity:0},{duration:200,queue:!1,easing:'easeOutQuad',complete:function(){'function'==typeof n.onClose&&n.onClose.call(this,i),t(this).remove()}}),a.css({width:'10px',right:0,left:''}))}})),e.off('click.sidenav').on('click.sidenav',function(){if(!0==l)l=!1,s=!1,r();else{var e=t('body'),o=t('<div id="sidenav-overlay"></div>'),d=e.innerWidth();e.css('overflow','hidden'),e.width(d),t('body').append(a),'left'===n.edge?(a.css({width:'50%',right:0,left:''}),i.velocity({translateX:[0,-1*n.menuWidth]},{duration:300,queue:!1,easing:'easeOutQuad'})):(a.css({width:'50%',right:'',left:0}),i.velocity({translateX:[0,n.menuWidth]},{duration:300,queue:!1,easing:'easeOutQuad'})),o.css('opacity',0).click(function(){l=!1,s=!1,r(),o.velocity({opacity:0},{duration:300,queue:!1,easing:'easeOutQuad',complete:function(){t(this).remove()}})}),t('body').append(o),o.velocity({opacity:1},{duration:300,queue:!1,easing:'easeOutQuad',complete:function(){l=!0,s=!1}}),'function'==typeof n.onOpen&&n.onOpen.call(this,i)}return!1})})},destroy:function(){var e=t('#sidenav-overlay'),n=t('.drag-target[data-sidenav="'+t(this).attr('data-activates')+'"]');e.trigger('click'),n.remove(),t(this).off('click'),e.remove()},show:function(){this.trigger('click')},hide:function(){t('#sidenav-overlay').trigger('click')}};t.fn.sideNav=function(n){if(e[n])return e[n].apply(this,Array.prototype.slice.call(arguments,1));return'object'!=typeof n&&n?void t.error('Method '+n+' does not exist on jQuery.sideNav'):e.init.apply(this,arguments)}})(e)}).call(t,n(0))},function(e,t,n){(function(e){(function(t){t(document).ready(function(){function e(e){var n=e.css('font-family'),i=e.css('font-size'),a=e.css('line-height'),r=e.css('padding');i&&o.css('font-size',i),n&&o.css('font-family',n),a&&o.css('line-height',a),r&&o.css('padding',r),e.data('original-height')||e.data('original-height',e.height()),'off'===e.attr('wrap')&&o.css('overflow-wrap','normal').css('white-space','pre'),o.text(e.val()+'\n');var s=o.html().replace(/\n/g,'<br>');o.html(s),e.is(':visible')?o.css('width',e.width()):o.css('width',t(window).width()/2),e.data('original-height')<=o.height()?e.css('height',o.height()):e.val().length<e.data('previous-length')&&e.css('height',e.data('original-height')),e.data('previous-length',e.val().length)}Materialize.updateTextFields=function(){t('input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea').each(function(e,n){var o=t(this);0<t(n).val().length||t(n).is(':focus')||n.autofocus||o.attr('placeholder')!==void 0?o.siblings('label').addClass('active'):t(n)[0].validity?o.siblings('label').toggleClass('active',!0===t(n)[0].validity.badInput):o.siblings('label').removeClass('active')})};var n='input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea';t(document).on('change',n,function(){(0!==t(this).val().length||t(this).attr('placeholder')!==void 0)&&t(this).siblings('label').addClass('active'),validate_field(t(this))}),t(document).ready(function(){Materialize.updateTextFields()}),t(document).on('reset',function(o){var e=t(o.target);e.is('form')&&(e.find(n).removeClass('valid').removeClass('invalid'),e.find(n).each(function(){''===t(this).attr('value')&&t(this).siblings('label').removeClass('active')}),e.find('select.initialized').each(function(){var t=e.find('option[selected]').text();e.siblings('input.select-dropdown').val(t)}))}),t(document).on('focus',n,function(){t(this).siblings('label, .prefix').addClass('active')}),t(document).on('blur',n,function(){var e=t(this),n='.prefix';0===e.val().length&&!0!==e[0].validity.badInput&&e.attr('placeholder')===void 0&&(n+=', label'),e.siblings(n).removeClass('active'),validate_field(e)}),window.validate_field=function(e){var t=e.attr('data-length')!==void 0,n=parseInt(e.attr('data-length')),o=e.val().length;0!==e.val().length||!1!==e[0].validity.badInput||e.is(':required')?e.hasClass('validate')&&(e.is(':valid')&&t&&o<=n||e.is(':valid')&&!t?(e.removeClass('invalid'),e.addClass('valid')):(e.removeClass('valid'),e.addClass('invalid'))):e.hasClass('validate')&&(e.removeClass('valid'),e.removeClass('invalid'))};t(document).on('keyup.radio','input[type=radio], input[type=checkbox]',function(n){if(9===n.which){t(this).addClass('tabbed');var e=t(this);return void e.one('blur',function(){t(this).removeClass('tabbed')})}});var o=t('.hiddendiv').first();o.length||(o=t('<div class="hiddendiv common"></div>'),t('body').append(o));var i='.materialize-textarea';t(i).each(function(){var e=t(this);e.data('original-height',e.height()),e.data('previous-length',e.val().length)}),t('body').on('keyup keydown autoresize',i,function(){e(t(this))}),t(document).on('change','.file-field input[type="file"]',function(){for(var e=t(this).closest('.file-field'),n=e.find('input.file-path'),o=t(this)[0].files,a=[],r=0;r<o.length;r++)a.push(o[r].name);n.val(a.join(', ')),n.trigger('change')});var a='input[type=range]',r=!1;t(a).each(function(){var e=t('<span class="thumb"><span class="value"></span></span>');t(this).after(e)});var s=function(e){var t=parseInt(e.parent().css('padding-left'));e.velocity({height:'30px',width:'30px',top:'-30px',marginLeft:-7+t+'px'},{duration:300,easing:'easeOutExpo'})},l=function(e){var t=e.width()-15,n=parseFloat(e.attr('max')),o=parseFloat(e.attr('min')),i=(parseFloat(e.val())-o)/(n-o);return i*t},d='.range-field';t(document).on('change',a,function(){var e=t(this).siblings('.thumb');e.find('.value').html(t(this).val()),e.hasClass('active')||s(e);var n=l(t(this));e.addClass('active').css('left',n)}),t(document).on('mousedown touchstart',a,function(n){var e=t(this).siblings('.thumb');if(0>=e.length&&(e=t('<span class="thumb"><span class="value"></span></span>'),t(this).after(e)),e.find('.value').html(t(this).val()),r=!0,t(this).addClass('active'),e.hasClass('active')||s(e),'input'!==n.type){var o=l(t(this));e.addClass('active').css('left',o)}}),t(document).on('mouseup touchend',d,function(){r=!1,t(this).removeClass('active')}),t(document).on('input mousemove touchmove',d,function(){var e=t(this).children('.thumb'),n=t(this).find(a);if(r){e.hasClass('active')||s(e);var o=l(n);e.addClass('active').css('left',o),e.find('.value').html(e.siblings(a).val())}}),t(document).on('mouseout touchleave',d,function(){if(!r){var e=t(this).children('.thumb'),n=parseInt(t(this).css('padding-left'));e.hasClass('active')&&e.velocity({height:'0',width:'0',top:'10px',marginLeft:7+n+'px'},{duration:100}),e.removeClass('active')}}),t.fn.autocomplete=function(e){var n={data:{},limit:Infinity,onAutocomplete:null,minLength:1};return e=t.extend(n,e),this.each(function(){var n=t(this),o=e.data,i=0,a=-1,r=n.closest('.input-field'),s;if(!t.isEmptyObject(o)){var l=t('<ul class="autocomplete-content dropdown-content"></ul>'),d;r.length?(d=r.children('.autocomplete-content.dropdown-content').first(),!d.length&&r.append(l)):(d=n.next('.autocomplete-content.dropdown-content'),!d.length&&n.after(l)),d.length&&(l=d);var c=function(e,t){var n=t.find('img'),o=t.text().toLowerCase().indexOf(''+e.toLowerCase()+''),i=o+e.length-1,a=t.text().slice(0,o),r=t.text().slice(o,i+1),s=t.text().slice(i+1);t.html('<span>'+a+'<span class=\'highlight\'>'+r+'</span>'+s+'</span>'),n.length&&t.prepend(n)},p=function(){a=-1,l.find('.active').removeClass('active')},u=function(){l.empty(),p(),s=void 0};n.off('blur.autocomplete').on('blur.autocomplete',function(){u()}),n.off('keyup.autocomplete focus.autocomplete').on('keyup.autocomplete focus.autocomplete',function(a){i=0;var r=n.val().toLowerCase();if(13!==a.which&&38!==a.which&&40!==a.which){if(s!==r&&(u(),r.length>=e.minLength))for(var d in o)if(o.hasOwnProperty(d)&&-1!==d.toLowerCase().indexOf(r)){if(i>=e.limit)break;var p=t('<li></li>');o[d]?p.append('<img src="'+o[d]+'" class="right circle"><span>'+d+'</span>'):p.append('<span>'+d+'</span>'),l.append(p),c(r,p),i++}s=r}}),n.off('keydown.autocomplete').on('keydown.autocomplete',function(t){var e=t.which,n=l.children('li').length,o=l.children('.active').first(),i;return 13===e&&0<=a?(i=l.children('li').eq(a),void(i.length&&(i.trigger('mousedown.autocomplete'),t.preventDefault()))):void((38===e||40===e)&&(t.preventDefault(),38===e&&0<a&&a--,40===e&&a<n-1&&a++,o.removeClass('active'),0<=a&&l.children('li').eq(a).addClass('active')))}),l.off('mousedown.autocomplete touchstart.autocomplete').on('mousedown.autocomplete touchstart.autocomplete','li',function(){var o=t(this).text().trim();n.val(o),n.trigger('change'),u(),'function'==typeof e.onAutocomplete&&e.onAutocomplete.call(this,o)})}else n.off('keyup.autocomplete focus.autocomplete')})}}),t.fn.material_select=function(e){function n(e,t,n){var i=e.indexOf(t),a=-1===i;return a?e.push(t):e.splice(i,1),n.siblings('ul.dropdown-content').find('li:not(.optgroup)').eq(t).toggleClass('active'),n.find('option').eq(t).prop('selected',a),o(e,n),a}function o(e,t){for(var n='',o=0,i=e.length,a;o<i;o++)a=t.find('option').eq(e[o]).text(),n+=0===o?a:', '+a;''===n&&(n=t.find('option:disabled').eq(0).text()),t.siblings('input.select-dropdown').val(n)}t(this).each(function(){var o=t(this);if(!o.hasClass('browser-default')){var a=!!o.attr('multiple'),i=o.attr('data-select-id');if(i&&(o.parent().find('span.caret').remove(),o.parent().find('input').remove(),o.unwrap(),t('ul#select-options-'+i).remove()),'destroy'===e)return o.removeAttr('data-select-id').removeClass('initialized'),void t(window).off('click.select');var r=Materialize.guid();o.attr('data-select-id',r);var s=t('<div class="select-wrapper"></div>');s.addClass(o.attr('class')),o.is(':disabled')&&s.addClass('disabled');var l=t('<ul id="select-options-'+r+'" class="dropdown-content select-dropdown '+(a?'multiple-select-dropdown':'')+'"></ul>'),d=o.children('option, optgroup'),c=[],p=!1,u=o.find('option:selected').html()||o.find('option:first').html()||'',m=function(e,n,o){var i=n.is(':disabled')?'disabled ':'',r='optgroup-option'===o?'optgroup-option ':'',s=a?'<input type="checkbox"'+i+'/><label></label>':'',d=n.data('icon'),c=n.attr('class');if(!!d){var p='';return!c||(p=' class="'+c+'"'),l.append(t('<li class="'+i+r+'"><img alt="" src="'+d+'"'+p+'><span>'+s+n.html()+'</span></li>')),!0}l.append(t('<li class="'+i+r+'"><span>'+s+n.html()+'</span></li>'))};d.length&&d.each(function(){if(t(this).is('option'))a?m(o,t(this),'multiple'):m(o,t(this));else if(t(this).is('optgroup')){var e=t(this).children('option');l.append(t('<li class="optgroup"><span>'+t(this).attr('label')+'</span></li>')),e.each(function(){m(o,t(this),'optgroup-option')})}}),l.find('li:not(.optgroup)').each(function(r){t(this).click(function(i){if(!t(this).hasClass('disabled')&&!t(this).hasClass('optgroup')){var s=!0;a?(t('input[type="checkbox"]',this).prop('checked',function(e,t){return!t}),s=n(c,r,o),f.trigger('focus')):(l.find('li').removeClass('active'),t(this).toggleClass('active'),f.val(t(this).text())),b(l,t(this)),o.find('option').eq(r).prop('selected',s),o.trigger('change'),'undefined'!=typeof e&&e()}i.stopPropagation()})}),o.wrap(s);var g=t('<span class="caret">&#9660;</span>'),h=u.replace(/"/g,'&quot;'),f=t('<input type="text" class="select-dropdown" readonly="true" '+(o.is(':disabled')?'disabled':'')+' data-activates="select-options-'+r+'" value="'+h+'"/>');o.before(f),f.before(g),f.after(l),o.is(':disabled')||f.dropdown({hover:!1}),o.attr('tabindex')&&t(f[0]).attr('tabindex',o.attr('tabindex')),o.addClass('initialized'),f.on({focus:function(){if(t('ul.select-dropdown').not(l[0]).is(':visible')&&(t('input.select-dropdown').trigger('close'),t(window).off('click.select')),!l.is(':visible')){t(this).trigger('open',['focus']);var e=t(this).val();a&&0<=e.indexOf(',')&&(e=e.split(',')[0]);var n=l.find('li').filter(function(){return t(this).text().toLowerCase()===e.toLowerCase()})[0];b(l,n,!0),t(window).off('click.select').on('click.select',function(){a&&(p||f.trigger('close')),t(window).off('click.select')})}},click:function(t){t.stopPropagation()}}),f.on('blur',function(){a||(t(this).trigger('close'),t(window).off('click.select')),l.find('li.selected').removeClass('selected')}),l.hover(function(){p=!0},function(){p=!1}),a&&o.find('option:selected:not(:disabled)').each(function(){var e=this.index;n(c,e,o),l.find('li:not(.optgroup)').eq(e).find(':checkbox').prop('checked',!0)});var b=function(e,n,o){if(n){e.find('li.selected').removeClass('selected');var i=t(n);i.addClass('selected'),a&&!o||l.scrollTo(i)}},y=[],v=function(n){if(9==n.which)return void f.trigger('close');if(40==n.which&&!l.is(':visible'))return void f.trigger('open');if(13!=n.which||l.is(':visible')){n.preventDefault();var e=String.fromCharCode(n.which).toLowerCase();if(e&&-1===[9,13,27,38,40].indexOf(n.which)){y.push(e);var o=y.join(''),i=l.find('li').filter(function(){return 0===t(this).text().toLowerCase().indexOf(o)})[0];i&&b(l,i)}if(13==n.which){var r=l.find('li.selected:not(.disabled)')[0];r&&(t(r).trigger('click'),!a&&f.trigger('close'))}40==n.which&&(i=l.find('li.selected').length?l.find('li.selected').next('li:not(.disabled)')[0]:l.find('li:not(.disabled)')[0],b(l,i)),27==n.which&&f.trigger('close'),38==n.which&&(i=l.find('li.selected').prev('li:not(.disabled)')[0],i&&b(l,i)),setTimeout(function(){y=[]},1e3)}};f.on('keydown',v)}})}})(e)}).call(t,n(0))},function(e,t,n){var o=Math.abs;(function(e){(function(e){var t={init:function(t){return t=e.extend({indicators:!0,height:400,transition:500,interval:6e3},t),this.each(function(){function n(e,t){e.hasClass('center-align')?e.velocity({opacity:0,translateY:-100},{duration:t,queue:!1}):e.hasClass('right-align')?e.velocity({opacity:0,translateX:100},{duration:t,queue:!1}):e.hasClass('left-align')&&e.velocity({opacity:0,translateX:-100},{duration:t,queue:!1})}function i(e){e>=s.length?e=0:0>e&&(e=s.length-1),l=r.find('.active').index(),l!=e&&(d=s.eq(l),$caption=d.find('.caption'),d.removeClass('active'),d.velocity({opacity:0},{duration:t.transition,queue:!1,easing:'easeOutQuad',complete:function(){s.not('.active').velocity({opacity:0,translateX:0,translateY:0},{duration:0,queue:!1})}}),n($caption,t.transition),t.indicators&&c.eq(l).removeClass('active'),s.eq(e).velocity({opacity:1},{duration:t.transition,queue:!1,easing:'easeOutQuad'}),s.eq(e).find('.caption').velocity({opacity:1,translateX:0,translateY:0},{duration:t.transition,delay:t.transition,queue:!1,easing:'easeOutQuad'}),s.eq(e).addClass('active'),t.indicators&&c.eq(e).addClass('active'))}var a=e(this),r=a.find('ul.slides').first(),s=r.find('> li'),l=r.find('.active').index(),d,c,p;-1!=l&&(d=s.eq(l)),a.hasClass('fullscreen')||(t.indicators?a.height(t.height+40):a.height(t.height),r.height(t.height)),s.find('.caption').each(function(){n(e(this),0)}),s.find('img').each(function(){var t='data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';e(this).attr('src')!==t&&(e(this).css('background-image','url("'+e(this).attr('src')+'")'),e(this).attr('src',t))}),t.indicators&&(c=e('<ul class="indicators"></ul>'),s.each(function(){var n=e('<li class="indicator-item"></li>');n.click(function(){var n=r.parent(),o=n.find(e(this)).index();i(o),clearInterval(p),p=setInterval(function(){l=r.find('.active').index(),s.length==l+1?l=0:l+=1,i(l)},t.transition+t.interval)}),c.append(n)}),a.append(c),c=a.find('ul.indicators').find('li.indicator-item')),d?d.show():(s.first().addClass('active').velocity({opacity:1},{duration:t.transition,queue:!1,easing:'easeOutQuad'}),l=0,d=s.eq(l),t.indicators&&c.eq(l).addClass('active')),d.find('img').each(function(){d.find('.caption').velocity({opacity:1,translateX:0,translateY:0},{duration:t.transition,queue:!1,easing:'easeOutQuad'})}),p=setInterval(function(){l=r.find('.active').index(),i(l+1)},t.transition+t.interval);var u=!1,m=!1,g=!1;a.hammer({prevent_default:!1}).on('pan',function(t){if('touch'===t.gesture.pointerType){clearInterval(p);var e=t.gesture.direction,n=t.gesture.deltaX,i=t.gesture.velocityX,l=t.gesture.velocityY;$curr_slide=r.find('.active'),o(i)>o(l)&&$curr_slide.velocity({translateX:n},{duration:50,queue:!1,easing:'easeOutQuad'}),4===e&&(n>a.innerWidth()/2||-0.65>i)?g=!0:2===e&&(n<-1*a.innerWidth()/2||0.65<i)&&(m=!0);var d;m&&(d=$curr_slide.next(),0===d.length&&(d=s.first()),d.velocity({opacity:1},{duration:300,queue:!1,easing:'easeOutQuad'})),g&&(d=$curr_slide.prev(),0===d.length&&(d=s.last()),d.velocity({opacity:1},{duration:300,queue:!1,easing:'easeOutQuad'}))}}).on('panend',function(n){'touch'===n.gesture.pointerType&&($curr_slide=r.find('.active'),u=!1,curr_index=r.find('.active').index(),(g||m)&&!(1>=s.length)?m?(i(curr_index+1),$curr_slide.velocity({translateX:-1*a.innerWidth()},{duration:300,queue:!1,easing:'easeOutQuad',complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})):g&&(i(curr_index-1),$curr_slide.velocity({translateX:a.innerWidth()},{duration:300,queue:!1,easing:'easeOutQuad',complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})):$curr_slide.velocity({translateX:0},{duration:300,queue:!1,easing:'easeOutQuad'}),m=!1,g=!1,clearInterval(p),p=setInterval(function(){l=r.find('.active').index(),s.length==l+1?l=0:l+=1,i(l)},t.transition+t.interval))}),a.on('sliderPause',function(){clearInterval(p)}),a.on('sliderStart',function(){clearInterval(p),p=setInterval(function(){l=r.find('.active').index(),s.length==l+1?l=0:l+=1,i(l)},t.transition+t.interval)}),a.on('sliderNext',function(){l=r.find('.active').index(),i(l+1)}),a.on('sliderPrev',function(){l=r.find('.active').index(),i(l-1)})})},pause:function(){e(this).trigger('sliderPause')},start:function(){e(this).trigger('sliderStart')},next:function(){e(this).trigger('sliderNext')},prev:function(){e(this).trigger('sliderPrev')}};e.fn.slider=function(n){if(t[n])return t[n].apply(this,Array.prototype.slice.call(arguments,1));return'object'!=typeof n&&n?void e.error('Method '+n+' does not exist on jQuery.tooltip'):t.init.apply(this,arguments)}})(e)}).call(t,n(0))},function(e,t,n){(function(e){(function(t){var e={data:[],placeholder:'',secondaryPlaceholder:'',autocompleteOptions:{}};t(document).ready(function(){t(document).on('click','.chip .close',function(){var e=t(this).closest('.chips');e.attr('data-initialized')||t(this).closest('.chip').remove()})}),t.fn.material_chip=function(n){var o=this;if(this.$el=t(this),this.$document=t(document),this.SELS={CHIPS:'.chips',CHIP:'.chip',INPUT:'input',DELETE:'.material-icons',SELECTED_CHIP:'.selected'},'data'===n)return this.$el.data('chips');var a=t.extend({},e,n);o.hasAutocomplete=!t.isEmptyObject(a.autocompleteOptions.data),this.init=function(){var e=0;o.$el.each(function(){var n=t(this),i=Materialize.guid();o.chipId=i,a.data&&a.data instanceof Array||(a.data=[]),n.data('chips',a.data),n.attr('data-index',e),n.attr('data-initialized',!0),n.hasClass(o.SELS.CHIPS)||n.addClass('chips'),o.chips(n,i),e++})},this.handleEvents=function(){var n=o.SELS;o.$document.off('click.chips-focus',n.CHIPS).on('click.chips-focus',n.CHIPS,function(o){t(o.target).find(n.INPUT).focus()}),o.$document.off('click.chips-select',n.CHIP).on('click.chips-select',n.CHIP,function(i){var e=t(i.target);if(e.length){var a=e.hasClass('selected'),r=e.closest(n.CHIPS);t(n.CHIP).removeClass('selected'),a||o.selectChip(e.index(),r)}}),o.$document.off('keydown.chips').on('keydown.chips',function(i){if(!t(i.target).is('input, textarea')){var e=o.$document.find(n.CHIP+n.SELECTED_CHIP),a=e.closest(n.CHIPS),r=e.siblings(n.CHIP).length,s;if(e.length)if(8===i.which||46===i.which){i.preventDefault(),s=e.index(),o.deleteChip(s,a);var l=null;s+1<r?l=s:(s===r||s+1===r)&&(l=r-1),0>l&&(l=null),null!==l&&o.selectChip(l,a),r||a.find('input').focus()}else if(37===i.which){if(s=e.index()-1,0>s)return;t(n.CHIP).removeClass('selected'),o.selectChip(s,a)}else if(39===i.which){if(s=e.index()+1,t(n.CHIP).removeClass('selected'),s>r)return void a.find('input').focus();o.selectChip(s,a)}}}),o.$document.off('focusin.chips',n.CHIPS+' '+n.INPUT).on('focusin.chips',n.CHIPS+' '+n.INPUT,function(o){var e=t(o.target).closest(n.CHIPS);e.addClass('focus'),e.siblings('label, .prefix').addClass('active'),t(n.CHIP).removeClass('selected')}),o.$document.off('focusout.chips',n.CHIPS+' '+n.INPUT).on('focusout.chips',n.CHIPS+' '+n.INPUT,function(o){var e=t(o.target).closest(n.CHIPS);e.removeClass('focus'),void 0!==e.data('chips')&&e.data('chips').length||e.siblings('label').removeClass('active'),e.siblings('.prefix').removeClass('active')}),o.$document.off('keydown.chips-add',n.CHIPS+' '+n.INPUT).on('keydown.chips-add',n.CHIPS+' '+n.INPUT,function(i){var e=t(i.target),a=e.closest(n.CHIPS),r=a.children(n.CHIP).length;return 13===i.which?o.hasAutocomplete&&a.find('.autocomplete-content.dropdown-content').length&&a.find('.autocomplete-content.dropdown-content').children().length?void 0:(i.preventDefault(),o.addChip({tag:e.val()},a),void e.val('')):(8===i.keyCode||37===i.keyCode)&&''===e.val()&&r?(i.preventDefault(),o.selectChip(r-1,a),void e.blur()):void 0}),o.$document.off('click.chips-delete',n.CHIPS+' '+n.DELETE).on('click.chips-delete',n.CHIPS+' '+n.DELETE,function(i){var e=t(i.target),a=e.closest(n.CHIPS),r=e.closest(n.CHIP);i.stopPropagation(),o.deleteChip(r.index(),a),a.find('input').focus()})},this.chips=function(e,n){e.empty(),e.data('chips').forEach(function(t){e.append(o.renderChip(t))}),e.append(t('<input id="'+n+'" class="input" placeholder="">')),o.setPlaceholder(e);var i=e.next('label');i.length&&(i.attr('for',n),void 0!==e.data('chips')&&e.data('chips').length&&i.addClass('active'));var r=t('#'+n);o.hasAutocomplete&&(a.autocompleteOptions.onAutocomplete=function(t){o.addChip({tag:t},e),r.val(''),r.focus()},r.autocomplete(a.autocompleteOptions))},this.renderChip=function(e){if(e.tag){var n=t('<div class="chip"></div>');return n.text(e.tag),e.image&&n.prepend(t('<img />').attr('src',e.image)),n.append(t('<i class="material-icons close">close</i>')),n}},this.setPlaceholder=function(e){void 0!==e.data('chips')&&!e.data('chips').length&&a.placeholder?e.find('input').prop('placeholder',a.placeholder):(void 0===e.data('chips')||!!e.data('chips').length)&&a.secondaryPlaceholder&&e.find('input').prop('placeholder',a.secondaryPlaceholder)},this.isValid=function(e,t){for(var n=e.data('chips'),o=!1,a=0;a<n.length;a++)if(n[a].tag===t.tag)return void(o=!0);return''!==t.tag&&!o},this.addChip=function(e,t){if(o.isValid(t,e)){for(var n=o.renderChip(e),a=[],r=t.data('chips'),s=0;s<r.length;s++)a.push(r[s]);a.push(e),t.data('chips',a),n.insertBefore(t.find('input')),t.trigger('chip.add',e),o.setPlaceholder(t)}},this.deleteChip=function(e,t){var n=t.data('chips')[e];t.find('.chip').eq(e).remove();for(var a=[],r=t.data('chips'),s=0;s<r.length;s++)s!==e&&a.push(r[s]);t.data('chips',a),t.trigger('chip.delete',n),o.setPlaceholder(t)},this.selectChip=function(e,t){var n=t.find('.chip').eq(e);n&&!1===n.hasClass('selected')&&(n.addClass('selected'),t.trigger('chip.select',t.data('chips')[e]))},this.getChipsElement=function(e,t){return t.eq(e)},this.init(),this.handleEvents()}})(e)}).call(t,n(0))},function(e,t,n){(function(e){(function(t){t(document).ready(function(){t.fn.reverse=[].reverse,t(document).on('mouseenter.fixedActionBtn','.fixed-action-btn:not(.click-to-toggle):not(.toolbar)',function(){var n=t(this);e(n)}),t(document).on('mouseleave.fixedActionBtn','.fixed-action-btn:not(.click-to-toggle):not(.toolbar)',function(){var e=t(this);n(e)}),t(document).on('click.fabClickToggle','.fixed-action-btn.click-to-toggle > a',function(){var o=t(this),i=o.parent();i.hasClass('active')?n(i):e(i)}),t(document).on('click.fabToolbar','.fixed-action-btn.toolbar > a',function(){var e=t(this),n=e.parent();o(n)})}),t.fn.extend({openFAB:function(){e(t(this))},closeFAB:function(){n(t(this))},openToolbar:function(){o(t(this))},closeToolbar:function(){i(t(this))}});var e=function(e){var n=e;if(!1===n.hasClass('active')){var o=n.hasClass('horizontal'),i,a;!0===o?a=40:i=40,n.addClass('active'),n.find('ul .btn-floating').velocity({scaleY:'.4',scaleX:'.4',translateY:i+'px',translateX:a+'px'},{duration:0});var r=0;n.find('ul .btn-floating').reverse().each(function(){t(this).velocity({opacity:'1',scaleX:'1',scaleY:'1',translateY:'0',translateX:'0'},{duration:80,delay:r}),r+=40})}},n=function(e){var t=e,n=t.hasClass('horizontal'),o,i;!0===n?i=40:o=40,t.removeClass('active');t.find('ul .btn-floating').velocity('stop',!0),t.find('ul .btn-floating').velocity({opacity:'0',scaleX:'.4',scaleY:'.4',translateY:o+'px',translateX:i+'px'},{duration:80})},o=function(n){if('true'!==n.attr('data-open')){var e=window.innerWidth,o=window.innerHeight,a=n[0].getBoundingClientRect(),r=n.find('> a').first(),s=n.find('> ul').first(),l=t('<div class="fab-backdrop"></div>'),d=r.css('background-color'),c,p,u;r.append(l),c=a.left-e/2+a.width/2,p=o-a.bottom,u=e/l.width(),n.attr('data-origin-bottom',a.bottom),n.attr('data-origin-left',a.left),n.attr('data-origin-width',a.width),n.addClass('active'),n.attr('data-open',!0),n.css({"text-align":'center',width:'100%',bottom:0,left:0,transform:'translateX('+c+'px)',transition:'none'}),r.css({transform:'translateY('+-p+'px)',transition:'none'}),l.css({"background-color":d}),setTimeout(function(){n.css({transform:'',transition:'transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s'}),r.css({overflow:'visible',transform:'',transition:'transform .2s'}),setTimeout(function(){n.css({overflow:'hidden',"background-color":d}),l.css({transform:'scale('+u+')',transition:'transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)'}),s.find('> li > a').css({opacity:1}),t(window).on('scroll.fabToolbarClose',function(){i(n),t(window).off('scroll.fabToolbarClose'),t(document).off('click.fabToolbarClose')}),t(document).on('click.fabToolbarClose',function(o){t(o.target).closest(s).length||(i(n),t(window).off('scroll.fabToolbarClose'),t(document).off('click.fabToolbarClose'))})},100)},0)}},i=function(e){if('true'===e.attr('data-open')){var t=window.innerWidth,n=window.innerHeight,o=e.attr('data-origin-width'),i=e.attr('data-origin-bottom'),a=e.attr('data-origin-left'),r=e.find('> .btn-floating').first(),s=e.find('> ul').first(),l=e.find('.fab-backdrop'),d=r.css('background-color'),c,p,u;c=a-t/2+o/2,p=n-i,u=t/l.width(),e.removeClass('active'),e.attr('data-open',!1),e.css({"background-color":'transparent',transition:'none'}),r.css({transition:'none'}),l.css({transform:'scale(0)',"background-color":d}),s.find('> li > a').css({opacity:''}),setTimeout(function(){l.remove(),e.css({"text-align":'',width:'',bottom:'',left:'',overflow:'',"background-color":'',transform:'translate3d('+-c+'px,0,0)'}),r.css({overflow:'',transform:'translate3d(0,'+p+'px,0)'}),setTimeout(function(){e.css({transform:'translate3d(0,0,0)',transition:'transform .2s'}),r.css({transform:'translate3d(0,0,0)',transition:'transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)'})},20)},200)}}})(e)}).call(t,n(0))},function(e,t,n){(function(e){(function(t){Materialize.fadeInImage=function(e){var n;if('string'==typeof e)n=t(e);else if('object'==typeof e)n=e;else return;n.css({opacity:0}),t(n).velocity({opacity:1},{duration:650,queue:!1,easing:'easeOutSine'}),t(n).velocity({opacity:1},{duration:1300,queue:!1,easing:'swing',step:function(e,n){n.start=100;var o=e/100,i=150-(100-e)/1.75;100>i&&(i=100),0<=e&&t(this).css({"-webkit-filter":'grayscale('+o+')brightness('+i+'%)',filter:'grayscale('+o+')brightness('+i+'%)'})}})},Materialize.showStaggeredList=function(e){var n;if('string'==typeof e)n=t(e);else if('object'==typeof e)n=e;else return;var o=0;n.find('li').velocity({translateX:'-100px'},{duration:0}),n.find('li').each(function(){t(this).velocity({opacity:'1',translateX:'0'},{duration:800,delay:o,easing:[60,10]}),o+=120})},t(document).ready(function(){var n=!1,o=!1;t('.dismissable').each(function(){t(this).hammer({prevent_default:!1}).on('pan',function(i){if('touch'===i.gesture.pointerType){var e=t(this),a=i.gesture.direction,r=i.gesture.deltaX,s=i.gesture.velocityX;e.velocity({translateX:r},{duration:50,queue:!1,easing:'easeOutQuad'}),4===a&&(r>e.innerWidth()/2||-0.75>s)&&(n=!0),2===a&&(r<-1*e.innerWidth()/2||0.75<s)&&(o=!0)}}).on('panend',function(i){if(Math.abs(i.gesture.deltaX)<t(this).innerWidth()/2&&(o=!1,n=!1),'touch'===i.gesture.pointerType){var e=t(this);if(n||o){var a;a=n?e.innerWidth():-1*e.innerWidth(),e.velocity({translateX:a},{duration:100,queue:!1,easing:'easeOutQuad',complete:function(){e.css('border','none'),e.velocity({height:0,padding:0},{duration:200,queue:!1,easing:'easeOutQuad',complete:function(){e.remove()}})}})}else e.velocity({translateX:0},{duration:100,queue:!1,easing:'easeOutQuad'});n=!1,o=!1}})})})})(e)}).call(t,n(0))},function(e,t,n){(function(e){(function(t){Materialize.Picker=t(e)})(function(e){function t(a,s,c,p){function u(){return t._.node('div',t._.node('div',t._.node('div',t._.node('div',C.component.nodes(v.open),_.box),_.wrap),_.frame),_.holder)}function m(){x.data(s,C).addClass(_.input).attr('tabindex',-1).val(x.data('value')?C.get('select',w.format):a.value),w.editable||x.on('focus.'+v.id+' click.'+v.id,function(e){e.preventDefault(),C.$root.eq(0).focus()}).on('keydown.'+v.id,f),i(a,{haspopup:!0,expanded:!1,readonly:!1,owns:a.id+'_root'})}function g(){C.$root.on({keydown:f,focusin:function(e){C.$root.removeClass(_.focused),e.stopPropagation()},"mousedown click":function(t){var n=t.target;n!=C.$root.children()[0]&&(t.stopPropagation(),'mousedown'==t.type&&!e(n).is('input, select, textarea, button, option')&&(t.preventDefault(),C.$root.eq(0).focus()))}}).on({focus:function(){x.addClass(_.target)},blur:function(){x.removeClass(_.target)}}).on('focus.toOpen',b).on('click','[data-pick], [data-nav], [data-clear], [data-close]',function(){var t=e(this),n=t.data(),o=t.hasClass(_.navDisabled)||t.hasClass(_.disabled),i=r();i=i&&(i.type||i.href)&&i,(o||i&&!e.contains(C.$root[0],i))&&C.$root.eq(0).focus(),!o&&n.nav?C.set('highlight',C.component.item.highlight,{nav:n.nav}):!o&&'pick'in n?(C.set('select',n.pick),w.closeOnSelect&&C.close(!0)):n.clear?(C.clear(),w.closeOnSelect&&C.close(!0)):n.close&&C.close(!0)}),i(C.$root[0],'hidden',!0)}function h(){var t;!0===w.hiddenName?(t=a.name,a.name=''):(t=['string'==typeof w.hiddenPrefix?w.hiddenPrefix:'','string'==typeof w.hiddenSuffix?w.hiddenSuffix:'_submit'],t=t[0]+a.name+t[1]),C._hidden=e('<input type=hidden name="'+t+'"'+(x.data('value')||a.value?' value="'+C.get('select',w.formatSubmit)+'"':'')+'>')[0],x.on('change.'+v.id,function(){C._hidden.value=a.value?C.get('select',w.formatSubmit):''}),w.container?e(w.container).append(C._hidden):x.before(C._hidden)}function f(e){var t=e.keyCode,n=/^(8|46)$/.test(t);return 27==t?(C.close(),!1):void((32==t||n||!v.open&&C.component.key[t])&&(e.preventDefault(),e.stopPropagation(),n?C.clear().close():C.open()))}function b(e){e.stopPropagation(),'focus'==e.type&&C.$root.addClass(_.focused),C.open()}if(!a)return t;var y=!1,v={id:a.id||'P'+Math.abs(~~(Math.random()*new Date))},w=c?e.extend(!0,{},c.defaults,p):p||{},_=e.extend({},t.klasses(),w.klass),x=e(a),k=function(){return this.start()},C=k.prototype={constructor:k,$node:x,start:function(){return v&&v.start?C:(v.methods={},v.start=!0,v.open=!1,v.type=a.type,a.autofocus=a==r(),a.readOnly=!w.editable,a.id=a.id||v.id,'text'!=a.type&&(a.type='text'),C.component=new c(C,w),C.$root=e(t._.node('div',u(),_.picker,'id="'+a.id+'_root" tabindex="0"')),g(),w.formatSubmit&&h(),m(),w.container?e(w.container).append(C.$root):x.before(C.$root),C.on({start:C.component.onStart,render:C.component.onRender,stop:C.component.onStop,open:C.component.onOpen,close:C.component.onClose,set:C.component.onSet}).on({start:w.onStart,render:w.onRender,stop:w.onStop,open:w.onOpen,close:w.onClose,set:w.onSet}),y=n(C.$root.children()[0]),a.autofocus&&C.open(),C.trigger('start').trigger('render'))},render:function(e){return e?C.$root.html(u()):C.$root.find('.'+_.box).html(C.component.nodes(v.open)),C.trigger('render')},stop:function(){return v.start?(C.close(),C._hidden&&C._hidden.parentNode.removeChild(C._hidden),C.$root.remove(),x.removeClass(_.input).removeData(s),setTimeout(function(){x.off('.'+v.id)},0),a.type=v.type,a.readOnly=!1,C.trigger('stop'),v.methods={},v.start=!1,C):C},open:function(n){return v.open?C:(x.addClass(_.active),i(a,'expanded',!0),setTimeout(function(){C.$root.addClass(_.opened),i(C.$root[0],'hidden',!1)},0),!1!==n&&(v.open=!0,y&&d.css('overflow','hidden').css('padding-right','+='+o()),C.$root.eq(0).focus(),l.on('click.'+v.id+' focusin.'+v.id,function(e){var t=e.target;t!=a&&t!=document&&3!=e.which&&C.close(t===C.$root.children()[0])}).on('keydown.'+v.id,function(n){var o=n.keyCode,i=C.component.key[o],a=n.target;27==o?C.close(!0):a==C.$root[0]&&(i||13==o)?(n.preventDefault(),i?t._.trigger(C.component.key.go,C,[t._.trigger(i)]):!C.$root.find('.'+_.highlighted).hasClass(_.disabled)&&(C.set('select',C.component.item.highlight),w.closeOnSelect&&C.close(!0))):e.contains(C.$root[0],a)&&13==o&&(n.preventDefault(),a.click())})),C.trigger('open'))},close:function(e){return(e&&(C.$root.off('focus.toOpen').eq(0).focus(),setTimeout(function(){C.$root.on('focus.toOpen',b)},0)),x.removeClass(_.active),i(a,'expanded',!1),setTimeout(function(){C.$root.removeClass(_.opened+' '+_.focused),i(C.$root[0],'hidden',!0)},0),!v.open)?C:(v.open=!1,y&&d.css('overflow','').css('padding-right','-='+o()),l.off('.'+v.id),C.trigger('close'))},clear:function(e){return C.set('clear',null,e)},set:function(t,n,o){var i=e.isPlainObject(t),a=i?t:{},r,s;if(o=i&&e.isPlainObject(n)?n:o||{},t){for(r in i||(a[t]=n),a)s=a[r],r in C.component.item&&(void 0===s&&(s=null),C.component.set(r,s,o)),('select'==r||'clear'==r)&&x.val('clear'==r?'':C.get(r,w.format)).trigger('change');C.render()}return o.muted?C:C.trigger('set',a)},get:function(e,n){if(e=e||'value',null!=v[e])return v[e];if('valueSubmit'==e){if(C._hidden)return C._hidden.value;e='value'}if('value'==e)return a.value;if(e in C.component.item){if('string'==typeof n){var o=C.component.get(e);return o?t._.trigger(C.component.formats.toString,C.component,[n,o]):''}return C.component.get(e)}},on:function(t,n,o){var i=e.isPlainObject(t),a=i?t:{},r,s;if(t)for(r in i||(a[t]=n),a)s=a[r],o&&(r='_'+r),v.methods[r]=v.methods[r]||[],v.methods[r].push(s);return C},off:function(){var e=arguments,t,n;for(t=0,namesCount=e.length;t<namesCount;t+=1)n=e[t],n in v.methods&&delete v.methods[n];return C},trigger:function(e,n){var o=function(e){var o=v.methods[e];o&&o.map(function(e){t._.trigger(e,C,[n])})};return o('_'+e),o(e),C}};return new k}function n(e){var t='position',n;return e.currentStyle?n=e.currentStyle[t]:window.getComputedStyle&&(n=getComputedStyle(e)[t]),'fixed'==n}function o(){if(d.height()<=s.height())return 0;var t=e('<div style="visibility:hidden;width:100px" />').appendTo('body'),n=t[0].offsetWidth;t.css('overflow','scroll');var o=e('<div style="width:100%" />').appendTo(t),i=o[0].offsetWidth;return t.remove(),n-i}function i(t,n,o){if(e.isPlainObject(n))for(var i in n)a(t,i,n[i]);else a(t,n,o)}function a(e,t,n){e.setAttribute(('role'==t?'':'aria-')+t,n)}function r(){try{return document.activeElement}catch(e){}}var s=e(window),l=e(document),d=e(document.documentElement);return t.klasses=function(e){return e=e||'picker',{picker:e,opened:e+'--opened',focused:e+'--focused',input:e+'__input',active:e+'__input--active',target:e+'__input--target',holder:e+'__holder',frame:e+'__frame',wrap:e+'__wrap',box:e+'__box'}},t._={group:function(e){for(var n='',o=t._.trigger(e.min,e),i;o<=t._.trigger(e.max,e,[o]);o+=e.i)i=t._.trigger(e.item,e,[o]),n+=t._.node(e.node,i[0],i[1],i[2]);return n},node:function(t,n,o,i){return n?(n=e.isArray(n)?n.join(''):n,o=o?' class="'+o+'"':'',i=i?' '+i:'','<'+t+o+i+'>'+n+'</'+t+'>'):''},lead:function(e){return(10>e?'0':'')+e},trigger:function(e,t,n){return'function'==typeof e?e.apply(t,n||[]):e},digits:function(e){return /\d/.test(e[1])?2:1},isDate:function(e){return-1<{}.toString.call(e).indexOf('Date')&&this.isInteger(e.getDate())},isInteger:function(e){return-1<{}.toString.call(e).indexOf('Number')&&0==e%1},ariaAttr:function(t,n){for(var o in e.isPlainObject(t)||(t={attribute:n}),n='',t){var i=('role'==o?'':'aria-')+o,a=t[o];n+=null==a?'':i+'="'+t[o]+'"'}return n}},t.extend=function(n,o){e.fn[n]=function(i,a){var r=this.data(n);return'picker'==i?r:r&&'string'==typeof i?t._.trigger(r[i],r,[a]):this.each(function(){var a=e(this);a.data(n)||new t(this,n,o,i)})},e.fn[n].defaults=o.defaults},t})}).call(t,n(0))},function(e,t,n){(function(e){(function(t){t(Materialize.Picker,e)})(function(e,t){function n(e,t){var n=this,o=e.$node[0],i=o.value,a=e.$node.data('value'),r=a||i,s=a?t.formatSubmit:t.format,l=function(){return o.currentStyle?'rtl'==o.currentStyle.direction:'rtl'==getComputedStyle(e.$root[0]).direction};n.settings=t,n.$node=e.$node,n.queue={min:'measure create',max:'measure create',now:'now create',select:'parse create validate',highlight:'parse navigate create validate',view:'parse create validate viewset',disable:'deactivate',enable:'activate'},n.item={},n.item.clear=null,n.item.disable=(t.disable||[]).slice(0),n.item.enable=-function(e){return!0===e[0]?e.shift():-1}(n.item.disable),n.set('min',t.min).set('max',t.max).set('now'),r?n.set('select',r,{format:s}):n.set('select',null).set('highlight',n.item.now),n.key={40:7,38:-7,39:function(){return l()?-1:1},37:function(){return l()?1:-1},go:function(e){var t=n.item.highlight,o=new Date(t.year,t.month,t.date+e);n.set('highlight',o,{interval:e}),this.render()}},e.on('render',function(){e.$root.find('.'+t.klass.selectMonth).on('change',function(){var n=this.value;n&&(e.set('highlight',[e.get('view').year,n,e.get('highlight').date]),e.$root.find('.'+t.klass.selectMonth).trigger('focus'))}),e.$root.find('.'+t.klass.selectYear).on('change',function(){var n=this.value;n&&(e.set('highlight',[n,e.get('view').month,e.get('highlight').date]),e.$root.find('.'+t.klass.selectYear).trigger('focus'))})},1).on('open',function(){var o='';n.disabled(n.get('now'))&&(o=':not(.'+t.klass.buttonToday+')'),e.$root.find('button'+o+', select').attr('disabled',!1)},1).on('close',function(){e.$root.find('button, select').attr('disabled',!0)},1)}var o=7,i=e._;n.prototype.set=function(e,t,n){var o=this,i=o.item;return null===t?('clear'==e&&(e='select'),i[e]=t,o):(i['enable'==e?'disable':'flip'==e?'enable':e]=o.queue[e].split(' ').map(function(i){return t=o[i](e,t,n),t}).pop(),'select'==e?o.set('highlight',i.select,n):'highlight'==e?o.set('view',i.highlight,n):e.match(/^(flip|min|max|disable|enable)$/)&&(i.select&&o.disabled(i.select)&&o.set('select',i.select,n),i.highlight&&o.disabled(i.highlight)&&o.set('highlight',i.highlight,n)),o)},n.prototype.get=function(e){return this.item[e]},n.prototype.create=function(e,n,o){var a=this,r;return n=void 0===n?e:n,n==-Infinity||n==Infinity?r=n:t.isPlainObject(n)&&i.isInteger(n.pick)?n=n.obj:t.isArray(n)?(n=new Date(n[0],n[1],n[2]),n=i.isDate(n)?n:a.create().obj):i.isInteger(n)||i.isDate(n)?n=a.normalize(new Date(n),o):n=a.now(e,n,o),{year:r||n.getFullYear(),month:r||n.getMonth(),date:r||n.getDate(),day:r||n.getDay(),obj:r||n,pick:r||n.getTime()}},n.prototype.createRange=function(e,n){var o=this,a=function(e){return!0===e||t.isArray(e)||i.isDate(e)?o.create(e):e};return i.isInteger(e)||(e=a(e)),i.isInteger(n)||(n=a(n)),i.isInteger(e)&&t.isPlainObject(n)?e=[n.year,n.month,n.date+e]:i.isInteger(n)&&t.isPlainObject(e)&&(n=[e.year,e.month,e.date+n]),{from:a(e),to:a(n)}},n.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},n.prototype.overlapRanges=function(e,t){var n=this;return e=n.createRange(e.from,e.to),t=n.createRange(t.from,t.to),n.withinRange(e,t.from)||n.withinRange(e,t.to)||n.withinRange(t,e.from)||n.withinRange(t,e.to)},n.prototype.now=function(e,t,n){return t=new Date,n&&n.rel&&t.setDate(t.getDate()+n.rel),this.normalize(t,n)},n.prototype.navigate=function(e,n,o){var i=t.isArray(n),a=t.isPlainObject(n),r=this.item.view,s,l,d,c;if(i||a){for(a?(l=n.year,d=n.month,c=n.date):(l=+n[0],d=+n[1],c=+n[2]),o&&o.nav&&r&&r.month!==d&&(l=r.year,d=r.month),s=new Date(l,d+(o&&o.nav?o.nav:0),1),l=s.getFullYear(),d=s.getMonth();new Date(l,d,c).getMonth()!==d;)c-=1;n=[l,d,c]}return n},n.prototype.normalize=function(e){return e.setHours(0,0,0,0),e},n.prototype.measure=function(e,t){var n=this;return t?'string'==typeof t?t=n.parse(e,t):i.isInteger(t)&&(t=n.now(e,t,{rel:t})):t='min'==e?-Infinity:Infinity,t},n.prototype.viewset=function(e,t){return this.create([t.year,t.month,1])},n.prototype.validate=function(e,n,o){var a=this,r=n,s=o&&o.interval?o.interval:1,l=-1===a.item.enable,d=a.item.min,c=a.item.max,p=l&&a.item.disable.filter(function(e){if(t.isArray(e)){var o=a.create(e).pick;o<n.pick?u=!0:o>n.pick&&(m=!0)}return i.isInteger(e)}).length,u,m,g,h;if((!o||!o.nav)&&(!l&&a.disabled(n)||l&&a.disabled(n)&&(p||u||m)||!l&&(n.pick<=d.pick||n.pick>=c.pick)))for(l&&!p&&(!m&&0<s||!u&&0>s)&&(s*=-1);a.disabled(n)&&(1<Math.abs(s)&&(n.month<r.month||n.month>r.month)&&(n=r,s=0<s?1:-1),n.pick<=d.pick?(g=!0,s=1,n=a.create([d.year,d.month,d.date+(n.pick===d.pick?0:-1)])):n.pick>=c.pick&&(h=!0,s=-1,n=a.create([c.year,c.month,c.date+(n.pick===c.pick?0:1)])),!(g&&h));)n=a.create([n.year,n.month,n.date+s]);return n},n.prototype.disabled=function(e){var n=this,o=n.item.disable.filter(function(o){return i.isInteger(o)?e.day===(n.settings.firstDay?o:o-1)%7:t.isArray(o)||i.isDate(o)?e.pick===n.create(o).pick:t.isPlainObject(o)?n.withinRange(o,e):void 0});return o=o.length&&!o.filter(function(e){return t.isArray(e)&&'inverted'==e[3]||t.isPlainObject(e)&&e.inverted}).length,-1===n.item.enable?!o:o||e.pick<n.item.min.pick||e.pick>n.item.max.pick},n.prototype.parse=function(e,t,n){var o=this,a={};return t&&'string'==typeof t?(n&&n.format||(n=n||{},n.format=o.settings.format),o.formats.toArray(n.format).map(function(e){var n=o.formats[e],r=n?i.trigger(n,o,[t,a]):e.replace(/^!/,'').length;n&&(a[e]=t.substr(0,r)),t=t.substr(r)}),[a.yyyy||a.yy,+(a.mm||a.m)-1,a.dd||a.d]):t},n.prototype.formats=function(){function e(e,t,n){var o=e.match(/\w+/)[0];return n.mm||n.m||(n.m=t.indexOf(o)+1),o.length}function t(e){return e.match(/\w+/)[0].length}return{d:function(e,t){return e?i.digits(e):t.date},dd:function(e,t){return e?2:i.lead(t.date)},ddd:function(e,n){return e?t(e):this.settings.weekdaysShort[n.day]},dddd:function(e,n){return e?t(e):this.settings.weekdaysFull[n.day]},m:function(e,t){return e?i.digits(e):t.month+1},mm:function(e,t){return e?2:i.lead(t.month+1)},mmm:function(t,n){var o=this.settings.monthsShort;return t?e(t,o,n):o[n.month]},mmmm:function(t,n){var o=this.settings.monthsFull;return t?e(t,o,n):o[n.month]},yy:function(e,t){return e?2:(''+t.year).slice(2)},yyyy:function(e,t){return e?4:t.year},toArray:function(e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,t){var n=this;return n.formats.toArray(e).map(function(e){return i.trigger(n.formats[e],n,[0,t])||e.replace(/^!/,'')}).join('')}}}(),n.prototype.isDateExact=function(e,n){var o=this;return i.isInteger(e)&&i.isInteger(n)||'boolean'==typeof e&&'boolean'==typeof n?e===n:(i.isDate(e)||t.isArray(e))&&(i.isDate(n)||t.isArray(n))?o.create(e).pick===o.create(n).pick:t.isPlainObject(e)&&t.isPlainObject(n)&&o.isDateExact(e.from,n.from)&&o.isDateExact(e.to,n.to)},n.prototype.isDateOverlap=function(e,n){var o=this,a=o.settings.firstDay?1:0;return i.isInteger(e)&&(i.isDate(n)||t.isArray(n))?(e=e%7+a,e===o.create(n).day+1):i.isInteger(n)&&(i.isDate(e)||t.isArray(e))?(n=n%7+a,n===o.create(e).day+1):t.isPlainObject(e)&&t.isPlainObject(n)&&o.overlapRanges(e,n)},n.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},n.prototype.deactivate=function(e,n){var o=this,a=o.item.disable.slice(0);return'flip'==n?o.flipEnable():!1===n?(o.flipEnable(1),a=[]):!0===n?(o.flipEnable(-1),a=[]):n.map(function(e){for(var n=0,r;n<a.length;n+=1)if(o.isDateExact(e,a[n])){r=!0;break}!r&&(i.isInteger(e)||i.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to)&&a.push(e)}),a},n.prototype.activate=function(e,n){var o=this,a=o.item.disable,r=a.length;return'flip'==n?o.flipEnable():!0===n?(o.flipEnable(1),a=[]):!1===n?(o.flipEnable(-1),a=[]):n.map(function(e){var n,s,l,d;for(l=0;l<r;l+=1)if(s=a[l],o.isDateExact(s,e)){n=a[l]=null,d=!0;break}else if(o.isDateOverlap(s,e)){t.isPlainObject(e)?(e.inverted=!0,n=e):t.isArray(e)?(n=e,!n[3]&&n.push('inverted')):i.isDate(e)&&(n=[e.getFullYear(),e.getMonth(),e.getDate(),'inverted']);break}if(n)for(l=0;l<r;l+=1)if(o.isDateExact(a[l],e)){a[l]=null;break}if(d)for(l=0;l<r;l+=1)if(o.isDateOverlap(a[l],e)){a[l]=null;break}n&&a.push(n)}),a.filter(function(e){return null!=e})},n.prototype.nodes=function(e){var t=this,n=t.settings,a=t.item,r=a.now,s=a.select,l=a.highlight,d=a.view,c=a.disable,p=a.min,u=a.max,m=function(e,t){return n.firstDay&&(e.push(e.shift()),t.push(t.shift())),i.node('thead',i.node('tr',i.group({min:0,max:o-1,i:1,node:'th',item:function(o){return[e[o],n.klass.weekdays,'scope=col title="'+t[o]+'"']}})))}((n.showWeekdaysFull?n.weekdaysFull:n.weekdaysLetter).slice(0),n.weekdaysFull.slice(0)),g=function(e){return i.node('div',' ',n.klass['nav'+(e?'Next':'Prev')]+(e&&d.year>=u.year&&d.month>=u.month||!e&&d.year<=p.year&&d.month<=p.month?' '+n.klass.navDisabled:''),'data-nav='+(e||-1)+' '+i.ariaAttr({role:'button',controls:t.$node[0].id+'_table'})+' title="'+(e?n.labelMonthNext:n.labelMonthPrev)+'"')},h=function(o){var a=n.showMonthsShort?n.monthsShort:n.monthsFull;return'short_months'==o&&(a=n.monthsShort),n.selectMonths&&void 0==o?i.node('select',i.group({min:0,max:11,i:1,node:'option',item:function(e){return[a[e],0,'value='+e+(d.month==e?' selected':'')+(d.year==p.year&&e<p.month||d.year==u.year&&e>u.month?' disabled':'')]}}),n.klass.selectMonth+' browser-default',(e?'':'disabled')+' '+i.ariaAttr({controls:t.$node[0].id+'_table'})+' title="'+n.labelMonthSelect+'"'):'short_months'==o?null==s?a[d.month]:a[s.month]:i.node('div',a[d.month],n.klass.month)},f=function(o){var a=d.year,r=!0===n.selectYears?5:~~(n.selectYears/2);if(r){var l=p.year,c=u.year,m=a-r,g=a+r;if(l>m&&(g+=l-m,m=l),c<g){var h=m-l,f=g-c;m-=h>f?f:h,g=c}if(n.selectYears&&void 0==o)return i.node('select',i.group({min:m,max:g,i:1,node:'option',item:function(e){return[e,0,'value='+e+(a==e?' selected':'')]}}),n.klass.selectYear+' browser-default',(e?'':'disabled')+' '+i.ariaAttr({controls:t.$node[0].id+'_table'})+' title="'+n.labelYearSelect+'"')}return'raw'===o&&null!=s?i.node('div',s.year):i.node('div',a,n.klass.year)};return createDayLabel=function(){return null==s?r.date:s.date},createWeekdayLabel=function(){var e=null==s?r.day:s.day;var t=n.weekdaysShort[e];return t},i.node('div',i.node('div',f('raw'),n.klass.year_display)+i.node('span',createWeekdayLabel()+', ','picker__weekday-display')+i.node('span',h('short_months')+' ',n.klass.month_display)+i.node('span',createDayLabel(),n.klass.day_display),n.klass.date_display)+i.node('div',i.node('div',i.node('div',(n.selectYears?h()+f():h()+f())+g()+g(1),n.klass.header)+i.node('table',m+i.node('tbody',i.group({min:0,max:6-1,i:1,node:'tr',item:function(e){var a=n.firstDay&&0===t.create([d.year,d.month,1]).day?-7:0;return[i.group({min:o*e-d.day+a+1,max:function(){return this.min+o-1},i:1,node:'td',item:function(e){e=t.create([d.year,d.month,e+(n.firstDay?1:0)]);var o=s&&s.pick==e.pick,a=l&&l.pick==e.pick,m=c&&t.disabled(e)||e.pick<p.pick||e.pick>u.pick,g=i.trigger(t.formats.toString,t,[n.format,e]);return[i.node('div',e.date,function(t){return t.push(d.month==e.month?n.klass.infocus:n.klass.outfocus),r.pick==e.pick&&t.push(n.klass.now),o&&t.push(n.klass.selected),a&&t.push(n.klass.highlighted),m&&t.push(n.klass.disabled),t.join(' ')}([n.klass.day]),'data-pick='+e.pick+' '+i.ariaAttr({role:'gridcell',label:g,selected:o&&t.$node.val()===g||null,activedescendant:!!a||null,disabled:!!m||null})+' '+(m?'':'tabindex="0"')),'',i.ariaAttr({role:'presentation'})]}})]}})),n.klass.table,'id="'+t.$node[0].id+'_table" '+i.ariaAttr({role:'grid',controls:t.$node[0].id,readonly:!0})),n.klass.calendar_container)+i.node('div',i.node('button',n.today,'btn-flat picker__today waves-effect','type=button data-pick='+r.pick+(e&&!t.disabled(r)?'':' disabled')+' '+i.ariaAttr({controls:t.$node[0].id}))+i.node('button',n.clear,'btn-flat picker__clear waves-effect','type=button data-clear=1'+(e?'':' disabled')+' '+i.ariaAttr({controls:t.$node[0].id}))+i.node('button',n.close,'btn-flat picker__close waves-effect','type=button data-close=true '+(e?'':' disabled')+' '+i.ariaAttr({controls:t.$node[0].id})),n.klass.footer),'picker__container__wrapper')},n.defaults=function(e){return{labelMonthNext:'Next month',labelMonthPrev:'Previous month',labelMonthSelect:'Select a month',labelYearSelect:'Select a year',monthsFull:['January','February','March','April','May','June','July','August','September','October','November','December'],monthsShort:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],weekdaysFull:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],weekdaysShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],weekdaysLetter:['S','M','T','W','T','F','S'],today:'Today',clear:'Clear',close:'Ok',closeOnSelect:!1,format:'d mmmm, yyyy',klass:{table:e+'table',header:e+'header',date_display:e+'date-display',day_display:e+'day-display',month_display:e+'month-display',year_display:e+'year-display',calendar_container:e+'calendar-container',navPrev:e+'nav--prev',navNext:e+'nav--next',navDisabled:e+'nav--disabled',month:e+'month',year:e+'year',selectMonth:e+'select--month',selectYear:e+'select--year',weekdays:e+'weekday',day:e+'day',disabled:e+'day--disabled',selected:e+'day--selected',highlighted:e+'day--highlighted',now:e+'day--today',infocus:e+'day--infocus',outfocus:e+'day--outfocus',footer:e+'footer',buttonClear:e+'button--clear',buttonToday:e+'button--today',buttonClose:e+'button--close'}}}(e.klasses().picker+'__'),e.extend('pickadate',n)})}).call(t,n(0))},function(e,t,n){var o=Math.sin,i=Math.sqrt,a=Math.cos,r=Math.PI;(function(e){(function(t){function e(e){return document.createElementNS(u,e)}function n(e){return(10>e?'0':'')+e}function s(e){var t=++y+'';return e?e+t:t}function l(l,c){function u(t,n){var e=w.offset(),o=/^touch/.test(t.type),a=e.left+_,r=e.top+_,s=(o?t.originalEvent.touches[0]:t).pageX-a,l=(o?t.originalEvent.touches[0]:t).pageY-r,d=i(s*s+l*l),u=!1;if(!(n&&(d<k-T||d>k+T))){t.preventDefault();var m=setTimeout(function(){I.popover.addClass('clockpicker-moving')},200);I.setHand(s,l,!n,!0),p.off(b).on(b,function(t){t.preventDefault();var e=/^touch/.test(t.type),n=(e?t.originalEvent.touches[0]:t).pageX-a,o=(e?t.originalEvent.touches[0]:t).pageY-r;(u||n!=s||o!=l)&&(u=!0,I.setHand(n,o,!1,!0))}),p.off(v).on(v,function(t){p.off(v),t.preventDefault();var e=/^touch/.test(t.type),o=(e?t.originalEvent.changedTouches[0]:t).pageX-a,i=(e?t.originalEvent.changedTouches[0]:t).pageY-r;(n||u)&&o==s&&i==l&&I.setHand(o,i),'hours'===I.currentView?I.toggleView('minutes',A/2):c.autoclose&&(I.minutesView.addClass('clockpicker-dial-out'),setTimeout(function(){I.done()},A/2)),w.prepend(j),clearTimeout(m),I.popover.removeClass('clockpicker-moving'),p.off(b)})}}var h=t(S),w=h.find('.clockpicker-plate'),y=h.find('.picker__holder'),P=h.find('.clockpicker-hours'),E=h.find('.clockpicker-minutes'),O=h.find('.clockpicker-am-pm-block'),V='INPUT'===l.prop('tagName'),N=V?l:l.find('input'),R=t('label[for='+N.attr('id')+']'),I=this;this.id=s('cp'),this.element=l,this.holder=y,this.options=c,this.isAppended=!1,this.isShown=!1,this.currentView='hours',this.isInput=V,this.input=N,this.label=R,this.popover=h,this.plate=w,this.hoursView=P,this.minutesView=E,this.amPmBlock=O,this.spanHours=h.find('.clockpicker-span-hours'),this.spanMinutes=h.find('.clockpicker-span-minutes'),this.spanAmPm=h.find('.clockpicker-span-am-pm'),this.footer=h.find('.picker__footer'),this.amOrPm='PM',c.twelvehour&&(c.ampmclickable?(this.spanAmPm.empty(),t('<div id="click-am">AM</div>').on('click',function(){I.spanAmPm.children('#click-am').addClass('text-primary'),I.spanAmPm.children('#click-pm').removeClass('text-primary'),I.amOrPm='AM'}).appendTo(this.spanAmPm),t('<div id="click-pm">PM</div>').on('click',function(){I.spanAmPm.children('#click-pm').addClass('text-primary'),I.spanAmPm.children('#click-am').removeClass('text-primary'),I.amOrPm='PM'}).appendTo(this.spanAmPm)):(this.spanAmPm.empty(),t('<div id="click-am">AM</div>').appendTo(this.spanAmPm),t('<div id="click-pm">PM</div>').appendTo(this.spanAmPm))),t('<button type="button" class="btn-flat picker__clear" tabindex="'+(c.twelvehour?'3':'1')+'">'+c.cleartext+'</button>').click(t.proxy(this.clear,this)).appendTo(this.footer),t('<button type="button" class="btn-flat picker__close" tabindex="'+(c.twelvehour?'3':'1')+'">'+c.canceltext+'</button>').click(t.proxy(this.hide,this)).appendTo(this.footer),t('<button type="button" class="btn-flat picker__close" tabindex="'+(c.twelvehour?'3':'1')+'">'+c.donetext+'</button>').click(t.proxy(this.done,this)).appendTo(this.footer),this.spanHours.click(t.proxy(this.toggleView,this,'hours')),this.spanMinutes.click(t.proxy(this.toggleView,this,'minutes')),N.on('focus.clockpicker click.clockpicker',t.proxy(this.show,this));var D=t('<div class="clockpicker-tick"></div>'),F,M,L,B;if(c.twelvehour)for(F=1;13>F;F+=1)M=D.clone(),L=F/6*r,B=k,M.css({left:_+o(L)*B-T,top:_-a(L)*B-T}),M.html(0===F?'00':F),P.append(M),M.on(f,u);else for(F=0;24>F;F+=1){M=D.clone(),L=F/6*r;var q=0<F&&13>F;B=q?C:k,M.css({left:_+o(L)*B-T,top:_-a(L)*B-T}),M.html(0===F?'00':F),P.append(M),M.on(f,u)}for(F=0;60>F;F+=5)M=D.clone(),L=F/30*r,M.css({left:_+o(L)*k-T,top:_-a(L)*k-T}),M.html(n(F)),E.append(M),M.on(f,u);if(w.on(f,function(n){0===t(n.target).closest('.clockpicker-tick').length&&u(n,!0)}),m){var j=h.find('.clockpicker-canvas'),H=e('svg');H.setAttribute('class','clockpicker-svg'),H.setAttribute('width',x),H.setAttribute('height',x);var z=e('g');z.setAttribute('transform','translate('+_+','+_+')');var g=e('circle');g.setAttribute('class','clockpicker-canvas-bearing'),g.setAttribute('cx',0),g.setAttribute('cy',0),g.setAttribute('r',4);var W=e('line');W.setAttribute('x1',0),W.setAttribute('y1',0);var $=e('circle');$.setAttribute('class','clockpicker-canvas-bg'),$.setAttribute('r',T),z.appendChild(W),z.appendChild($),z.appendChild(g),H.appendChild(z),j.append(H),this.hand=W,this.bg=$,this.bearing=g,this.g=z,this.canvas=j}d(this.options.init)}function d(e){e&&'function'==typeof e&&e()}var c=t(window),p=t(document),u='http://www.w3.org/2000/svg',m='SVGAngle'in window&&function(){var e=document.createElement('div'),t;return e.innerHTML='<svg/>',t=(e.firstChild&&e.firstChild.namespaceURI)==u,e.innerHTML='',t}(),g=function(){var e=document.createElement('div').style;return'transition'in e||'WebkitTransition'in e||'MozTransition'in e||'msTransition'in e||'OTransition'in e}(),h='ontouchstart'in window,f='mousedown'+(h?' touchstart':''),b='mousemove.clockpicker'+(h?' touchmove.clockpicker':''),v='mouseup.clockpicker'+(h?' touchend.clockpicker':''),w=navigator.vibrate?'vibrate':navigator.webkitVibrate?'webkitVibrate':null,y=0,_=135,k=105,C=70,T=20,x=2*_,A=g?350:1,S='<div class="clockpicker picker"><div class="picker__holder"><div class="picker__frame"><div class="picker__wrap"><div class="picker__box"><div class="picker__date-display"><div class="clockpicker-display"><div class="clockpicker-display-column"><span class="clockpicker-span-hours text-primary"></span>:<span class="clockpicker-span-minutes"></span></div><div class="clockpicker-display-column clockpicker-display-am-pm"><div class="clockpicker-span-am-pm"></div></div></div></div><div class="picker__container__wrapper"><div class="picker__calendar-container"><div class="clockpicker-plate"><div class="clockpicker-canvas"></div><div class="clockpicker-dial clockpicker-hours"></div><div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"></div></div><div class="clockpicker-am-pm-block"></div></div><div class="picker__footer"></div></div></div></div></div></div></div>';l.DEFAULTS={default:'',fromnow:0,donetext:'Ok',cleartext:'Clear',canceltext:'Cancel',autoclose:!1,ampmclickable:!0,darktheme:!1,twelvehour:!0,vibrate:!0},l.prototype.toggle=function(){this[this.isShown?'hide':'show']()},l.prototype.locate=function(){var e=this.element,t=this.popover,n=e.offset(),o=e.outerWidth(),i=e.outerHeight(),a=this.options.align,r=this;t.show()},l.prototype.show=function(){if(!this.isShown){d(this.options.beforeShow),t(':input').each(function(){t(this).attr('tabindex',-1)});var o=this;this.input.blur(),this.popover.addClass('picker--opened'),this.input.addClass('picker__input picker__input--active'),t(document.body).css('overflow','hidden');var e=((this.input.prop('value')||this.options['default']||'')+'').split(':');if(this.options.twelvehour&&'undefined'!=typeof e[1]&&(this.amOrPm=0<e[1].indexOf('AM')?'AM':'PM',e[1]=e[1].replace('AM','').replace('PM','')),'now'===e[0]){var i=new Date(+new Date+this.options.fromnow);e=[i.getHours(),i.getMinutes()],this.options.twelvehour&&(this.amOrPm=12<=e[0]&&24>e[0]?'PM':'AM')}if(this.hours=+e[0]||0,this.minutes=+e[1]||0,this.spanHours.html(this.hours),this.spanMinutes.html(n(this.minutes)),!this.isAppended){var a=document.querySelector(this.options.container);this.options.container&&a?a.appendChild(this.popover[0]):this.popover.insertAfter(this.input),this.options.twelvehour&&('PM'===this.amOrPm?(this.spanAmPm.children('#click-pm').addClass('text-primary'),this.spanAmPm.children('#click-am').removeClass('text-primary')):(this.spanAmPm.children('#click-am').addClass('text-primary'),this.spanAmPm.children('#click-pm').removeClass('text-primary'))),c.on('resize.clockpicker'+this.id,function(){o.isShown&&o.locate()}),this.isAppended=!0}this.toggleView('hours'),this.locate(),this.isShown=!0,p.on('click.clockpicker.'+this.id+' focusin.clockpicker.'+this.id,function(n){var e=t(n.target);0===e.closest(o.popover.find('.picker__wrap')).length&&0===e.closest(o.input).length&&o.hide()}),p.on('keyup.clockpicker.'+this.id,function(t){27===t.keyCode&&o.hide()}),d(this.options.afterShow)}},l.prototype.hide=function(){d(this.options.beforeHide),this.input.removeClass('picker__input picker__input--active'),this.popover.removeClass('picker--opened'),t(document.body).css('overflow','visible'),this.isShown=!1,t(':input').each(function(e){t(this).attr('tabindex',e+1)}),p.off('click.clockpicker.'+this.id+' focusin.clockpicker.'+this.id),p.off('keyup.clockpicker.'+this.id),this.popover.hide(),d(this.options.afterHide)},l.prototype.toggleView=function(e,n){var o=!1;'minutes'===e&&'visible'===t(this.hoursView).css('visibility')&&(d(this.options.beforeHourSelect),o=!0);var i='hours'===e,a=i?this.hoursView:this.minutesView,r=i?this.minutesView:this.hoursView;this.currentView=e,this.spanHours.toggleClass('text-primary',i),this.spanMinutes.toggleClass('text-primary',!i),r.addClass('clockpicker-dial-out'),a.css('visibility','visible').removeClass('clockpicker-dial-out'),this.resetClock(n),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){r.css('visibility','hidden')},A),o&&d(this.options.afterHourSelect)},l.prototype.resetClock=function(e){var t=this.currentView,n=this[t],i='hours'===t,s=r/(i?6:30),l=n*s,d=i&&0<n&&13>n?C:k,c=o(l)*d,p=-a(l)*d,u=this;m&&e?(u.canvas.addClass('clockpicker-canvas-out'),setTimeout(function(){u.canvas.removeClass('clockpicker-canvas-out'),u.setHand(c,p)},e)):this.setHand(c,p)},l.prototype.setHand=function(e,s,l){var d=Math.atan2(e,-s),c='hours'===this.currentView,p=r/(c||l?6:30),u=i(e*e+s*s),g=this.options,h=c&&u<(k+C)/2,f=h?C:k,b;if(g.twelvehour&&(f=k),0>d&&(d=2*r+d),b=Math.round(d/p),d=b*p,g.twelvehour?c?0===b&&(b=12):(l&&(b*=5),60===b&&(b=0)):c?(12===b&&(b=0),b=h?0===b?12:b:0===b?0:b+12):(l&&(b*=5),60===b&&(b=0)),this[this.currentView]!==b&&w&&this.options.vibrate&&!this.vibrateTimer&&(navigator[w](10),this.vibrateTimer=setTimeout(t.proxy(function(){this.vibrateTimer=null},this),100)),this[this.currentView]=b,c?this.spanHours.html(b):this.spanMinutes.html(n(b)),!m)return void this[c?'hoursView':'minutesView'].find('.clockpicker-tick').each(function(){var e=t(this);e.toggleClass('active',b===+e.html())});var v=o(d)*(f-T),_=-a(d)*(f-T),x=o(d)*f,A=-a(d)*f;this.hand.setAttribute('x2',v),this.hand.setAttribute('y2',_),this.bg.setAttribute('cx',x),this.bg.setAttribute('cy',A)},l.prototype.done=function(){d(this.options.beforeDone),this.hide(),this.label.addClass('active');var e=this.input.prop('value'),t=n(this.hours)+':'+n(this.minutes);this.options.twelvehour&&(t+=this.amOrPm),this.input.prop('value',t),t!==e&&(this.input.triggerHandler('change'),!this.isInput&&this.element.trigger('change')),this.options.autoclose&&this.input.trigger('blur'),d(this.options.afterDone)},l.prototype.clear=function(){this.hide(),this.label.removeClass('active');var e=this.input.prop('value'),t='';this.input.prop('value',t),t!==e&&(this.input.triggerHandler('change'),!this.isInput&&this.element.trigger('change')),this.options.autoclose&&this.input.trigger('blur')},l.prototype.remove=function(){this.element.removeData('clockpicker'),this.input.off('focus.clockpicker click.clockpicker'),this.isShown&&this.hide(),this.isAppended&&(c.off('resize.clockpicker'+this.id),this.popover.remove())},t.fn.pickatime=function(e){var n=Array.prototype.slice.call(arguments,1);return this.each(function(){var o=t(this),i=o.data('clockpicker');if(!i){var a=t.extend({},l.DEFAULTS,o.data(),'object'==typeof e&&e);o.data('clockpicker',new l(o,a))}else'function'==typeof i[e]&&i[e].apply(i,n)})}})(e)}).call(t,n(0))},function(e,t,n){(function(e){(function(e){function t(){var t=+e(this).attr('data-length'),n=+e(this).val().length;e(this).parent().find('span[class="character-counter"]').html(n+'/'+t),i(n<=t,e(this))}function n(t){var n=t.parent().find('span[class="character-counter"]');n.length||(n=e('<span/>').addClass('character-counter').css('float','right').css('font-size','12px').css('height',1),t.parent().append(n))}function o(){e(this).parent().find('span[class="character-counter"]').html('')}function i(e,t){var n=t.hasClass('invalid');e&&n?t.removeClass('invalid'):!e&&!n&&(t.removeClass('valid'),t.addClass('invalid'))}e.fn.characterCounter=function(){return this.each(function(){var i=e(this),a=i.parent().find('span[class="character-counter"]');if(!a.length){var r=void 0!==i.attr('data-length');r&&(i.on('input',t),i.on('focus',t),i.on('blur',o),n(i))}})},e(document).ready(function(){e('input, textarea').characterCounter()})})(e)}).call(t,n(0))},function(e,t,n){(function(e){(function(e){var t={init:function(t){return this.each(function(){var n=e('#'+e(this).attr('data-activates')),o=e('body'),a=e(this),r=a.parent('.tap-target-wrapper'),s=r.find('.tap-target-wave'),i=r.find('.tap-target-origin'),l=a.find('.tap-target-content');r.length||(r=a.wrap(e('<div class="tap-target-wrapper"></div>')).parent()),l.length||(l=e('<div class="tap-target-content"></div>'),a.append(l)),s.length||(s=e('<div class="tap-target-wave"></div>'),!i.length&&(i=n.clone(!0,!0),i.addClass('tap-target-origin'),i.removeAttr('id'),i.removeAttr('style'),s.append(i)),r.append(s));var d=function(){r.is('.open')&&(r.removeClass('open'),i.off('click.tapTarget'),e(document).off('click.tapTarget'),e(window).off('resize.tapTarget'))},c=function(){var t='fixed'===n.css('position');if(!t)for(var o=n.parents(),d=0;d<o.length&&(t='fixed'==e(o[d]).css('position'),!t);d++);var i=n.outerWidth(),c=n.outerHeight(),p=t?n.offset().top-e(document).scrollTop():n.offset().top,u=t?n.offset().left-e(document).scrollLeft():n.offset().left,m=e(window).width(),g=e(window).height(),h=m/2,f=g/2,b=u<=h,y=p<=f,v=p>f,w=u>=0.25*m&&u<=0.75*m,_=a.outerWidth(),x=a.outerHeight(),k=p+c/2-x/2,C=u+i/2-_/2,T=t?'fixed':'absolute',A=w?_:_/2+i,S=y?x/2:0,P=b&&!w?_/2-i:0,E=v?'bottom':'top',O=i>c?2*i:2*i,V=O,N={};N.top=y?k:'',N.right=u>h?m-C-_:'',N.bottom=v?g-k-x:'',N.left=b?C:'',N.position=T,r.css(N),l.css({width:A,height:x/2,top:S,right:0,bottom:0,left:P,padding:i,verticalAlign:E}),s.css({top:x/2-V/2,left:_/2-O/2,width:O,height:V})};'open'==t&&(c(),function(){r.is('.open')||(r.addClass('open'),setTimeout(function(){i.off('click.tapTarget').on('click.tapTarget',function(){d(),i.off('click.tapTarget')}),e(document).off('click.tapTarget').on('click.tapTarget',function(){d(),e(document).off('click.tapTarget')});var t=Materialize.throttle(function(){c()},200);e(window).off('resize.tapTarget').on('resize.tapTarget',t)},0))}()),'close'==t&&d()})},open:function(){},close:function(){}};e.fn.tapTarget=function(n){return t[n]||'object'==typeof n?t.init.apply(this,arguments):void e.error('Method '+n+' does not exist on jQuery.tap-target')}})(e)}).call(t,n(0))},function(e,t,n){'use strict';(function(t){t(document).ready(function(){t(document).on('click','input[type=checkbox].switch-action',function(n){var e=t(this),o=e.prop('checked'),i=e.attr('data-namespaceParent'),a=e.attr('data-id'),r=e.attr('data-method'),s=e.attr('data-url');if(void 0===o||void 0===s||void 0===i||void 0===a||void 0===r)throw n.preventDefault(),new Error('Il manque un param\xE8tre pour la requ\xEAte ajax.');t.ajax({url:s,method:'POST',data:{method:r,namespaceParent:i,id:a,value:o},success:function(t){!1===t.success&&e.prop('checked',!o),console.log(t)},error:function(){n.preventDefault()}})})})}).call(t,n(0))},function(e,t,n){'use strict';(function(e){var t=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(t),i=n(2),a='Impossible d\'effectuer la suppression',r=function(t,n,o){e.ajax({url:t,method:'DELETE',data:{namespace:o,id:n},success:function(e){console.log(e),!0===e.success?document.location.reload():(alert(a),console.log(e))}})};(function(){e(document).on('click','a.delete-action',function(t){t.preventDefault();var n=confirm('Etes de vous s\xFBr de vouloir supprimer ?');if(n){e('.textarea-ckeditor.html').length&&(0,i.updateInstances)();var s=e(this).attr('data-url'),l=e(this).attr('data-id'),d=e(this).attr('data-namespace');if(void 0===s||void 0===l||void 0===d)throw alert(a),new Error('Il manque un param\xE8tre pour la requ\xEAte ajax.');e('form#form-update-module').length?(e(this).replaceWith('<div>'+(0,o.default)()+'</div>'),e('form#form-update-module').submit(function(){return e.post(document.URL,e(this).serialize(),function(e){!0===e.success&&r(s,l,d)},'json'),!1}),e('form#form-update-module').submit()):r(s,l,d)}})})()}).call(t,n(0))},function(n,p){(function(o,e){n.exports=e()})('undefined'==typeof self?this:self,function(){return function(a){function r(t){if(e[t])return e[t].exports;var n=e[t]={i:t,l:!1,exports:{}};return a[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}var e={};return r.m=a,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t['default']}:function(){return t};return r.d(e,'a',e),e},r.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},r.p='',r(r.s=2)}([function(o,g,t){'use strict';(function(n,h){var f=t(4),i={function:!0,object:!0},r=i[typeof p]&&p&&!p.nodeType?p:void 0,a=i[typeof n]&&n&&!n.nodeType?n:void 0,s=Object(f.a)(r&&a&&'object'==typeof h&&h),d=Object(f.a)(i[typeof self]&&self),l=Object(f.a)(i[typeof window]&&window),c=Object(f.a)(i[typeof this]&&this),m=s||l!==(c&&c.window)&&l||d||c||Function('return this')();g.a=m}).call(g,t(1)(o),t(3))},function(t){t.exports=function(n){if(!n.webpackPolyfill){var e=Object.create(n);e.children||(e.children=[]),Object.defineProperty(e,'loaded',{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,'id',{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,'exports',{enumerable:!0}),e.webpackPolyfill=1}return e}},function(Xb,e,t){'use strict';function n(n){const e=n.match(/^([^:]+):/);return e?n+` Read more: ${ha}#${e[1]}\n`:n}function o(n,e){return i(n,e)?ka[n][e]:e.replace(/ \[context: [^\]]+\]$/,'')}function i(n,e){return n in ka&&e in ka[n]}function r(i,...e){e.forEach((e)=>{Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)).forEach((t)=>{if(!(t in i.prototype)){const n=Object.getOwnPropertyDescriptor(e,t);n.enumerable=!1,Object.defineProperty(i.prototype,t,n)}})})}function a(){let n='e';for(let e=0;8>e;e++)n+=ia(65536*(1+Math.random())).toString(16).substring(1);return n}function s(n,e){return n[Pa]&&n[Pa][e]?n[Pa][e].emitter:null}function d(n,e){n[Ea]||(n[Ea]=e||a())}function l(t){return t[Ea]}function c(t){return t._events||Object.defineProperty(t,'_events',{value:{}}),t._events}function m(){return{callbacks:[],childEvents:[]}}function u(a,e){const t=c(a);if(t[e])return;let n=e,o=null;const i=[];for(;''!==n&&!t[n];)t[n]=m(),i.push(t[n]),o&&t[n].childEvents.push(o),o=n,n=n.substr(0,n.lastIndexOf(':'));if(''!==n){for(const o of i)o.callbacks=t[n].callbacks.slice();t[n].childEvents.push(o)}}function p(i,e){const a=c(i)[e];if(!a)return[];let s=[a.callbacks];for(let n=0;n<a.childEvents.length;n++){const e=p(i,a.childEvents[n]);s=s.concat(e)}return s}function g(o,e){let t;return o._events&&(t=o._events[e])&&t.callbacks.length?t.callbacks:-1<e.indexOf(':')?g(o,e.substr(0,e.lastIndexOf(':'))):null}function f(a,r,t){for(let[n,o]of a){o?'function'==typeof o&&(o=o(r.name)):o=r.name;const a=new Ca(r.source,o);a.path=[...r.path],n.fire(a,...t)}}function h(o){o=null==o?o:Object(o);var e=[];for(var t in o)e.push(t);return e}function b(t){js in t||(Object.defineProperty(t,js,{value:new Map}),Object.defineProperty(t,qs,{value:new Map}),Object.defineProperty(t,zs,{value:new Map}))}function _(...i){const e=w(...i),t=Array.from(this._bindings.keys()),n=t.length;if(!e.callback&&1<e.to.length)throw new ba('observable-bind-to-no-callback: Binding multiple observables only possible with callback.');if(1<n&&e.callback)throw new ba('observable-bind-to-extra-callback: Cannot bind multiple attributes and use a callback in one binding.');e.to.forEach((t)=>{if(t.attrs.length&&t.attrs.length!==n)throw new ba('observable-bind-to-attrs-length: The number of attributes must match.');t.attrs.length||(t.attrs=this._bindAttrs)}),this._to=e.to,e.callback&&(this._bindings.get(t[0]).callback=e.callback),A(this._observable,this._to),k(this),this._bindAttrs.forEach((t)=>{x(this._observable,t)})}function Ub(t){return t.every((t)=>'string'==typeof t)}function w(...o){if(!o.length)throw new ba('observable-bind-to-parse-error: Invalid argument syntax in `to()`.');const i={to:[]};let t;return'function'==typeof o[o.length-1]&&(i.callback=o.pop()),o.forEach((n)=>{if('string'==typeof n)t.attrs.push(n);else if('object'==typeof n)t={observable:n,attrs:[]},i.to.push(t);else throw new ba('observable-bind-to-parse-error: Invalid argument syntax in `to()`.')}),i}function v(s,e,t,n){const o=s[qs],i=o.get(t),r=i||{};r[n]||(r[n]=new Set),r[n].add(e),i||o.set(t,r)}function k(a){let e;a._bindings.forEach((t,n)=>{a._to.forEach((o)=>{e=o.attrs[t.callback?0:a._bindAttrs.indexOf(n)],t.to.push([o.observable,e]),v(a._observable,t,o.observable,e)})})}function x(a,e){const t=a[zs],n=t.get(e);let o;n.callback?o=n.callback.apply(a,n.to.map((t)=>t[0][t[1]])):(o=n.to[0],o=o[0][o[1]]),a.hasOwnProperty(e)?a[e]=o:a.set(e,o)}function A(i,e){e.forEach((e)=>{const t=i[qs];let n;t.get(e.observable)||i.listenTo(e.observable,'change',(o,a)=>{n=t.get(e.observable)[a],n&&n.forEach((e)=>{x(i,e.attr)})})})}function C(o){const e=new Map;for(const t in o)e.set(t,o[t]);return e}function T(t){return ga(t)?C(t):new Map(t)}function P(t){return!!(t&&t[Symbol.iterator])}function E(t){return'string'==typeof t?[new Ks(t)]:(P(t)||(t=[t]),Array.from(t).map((t)=>'string'==typeof t?new Ks(t):t))}function S(a,r,s,l,d){return{done:!1,value:{type:a,item:r,previousPosition:s,nextPosition:l,length:d}}}function V(i,e){const t=na(i.length,e.length);for(let n=0;n<t;n++)if(i[n]!=e[n])return n;return i.length==e.length?'same':i.length<e.length?'prefix':'extension'}function O(i){var e=-1,t=i?i.length:0;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}function R(i){var e=-1,t=i?i.length:0;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}function F(i){var e=-1,t=i?i.length:0;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}function I(t){this.__data__=new od(t)}function N(t){return Md(Object(t))}function B(t){return ol.call(t)}function M(p,e,g,n,o,i,h){var a;if(n&&(a=i?n(p,o,i,h):n(p)),void 0!==a)return a;if(!Da(p))return p;var s=Ps(p);if(!s){var f=ll(p),l=f==Dl||f==Ll;if(Object(Bl.a)(p))return Nd(p,e);if(f==jl||f==Ml||l&&!i){if(sa(p))return i?p:{};if(a=Nl(l?{}:p),!e)return Ld(p,Id(a,p))}else{if(!ql[f])return i?p:{};a=Rl(p,f,M,e)}}else if(a=ul(p),!e)return Bd(p,a);h||(h=new Td);var c=h.get(p);if(c)return c;if(h.set(p,a),!s)var m=g?zd(p):Fd(p);return Pd(m||p,function(t,o){m&&(o=t,t=p[o]),Ia(a,o,M(t,e,g,n,o,p,h))}),a}function D(o,e){if('function'==typeof e)return e(o);const i={};return e.name&&(i.name=L(e.name,o.name),!i.name)?null:e.attribute&&(i.attribute=j(e.attribute,o),!i.attribute)?null:e.class&&(i.class=q(e.class,o),!i.class)?!1:e.style&&(i.style=z(e.style,o),!i.style)?!1:i}function L(n,e){return n instanceof RegExp?n.test(e):n===e}function j(a,r){const t=[];for(const n in a){const o=a[n];if(r.hasAttribute(n)){const i=r.getAttribute(n);if(o instanceof RegExp){if(o.test(i))t.push(n);else return null;}else if(i===o)t.push(n);else return null}else return null}return t}function q(i,a){const r=[];for(const n of i)if(n instanceof RegExp){const o=a.getClassNames();for(const e of o)n.test(e)&&r.push(e);if(0===r.length)return null}else if(a.hasClass(n))r.push(n);else return null;return r}function z(a,r){const t=[];for(const n in a){const o=a[n];if(r.hasStyle(n)){const i=r.getStyle(n);if(o instanceof RegExp){if(o.test(i))t.push(n);else return null;}else if(i===o)t.push(n);else return null}else return null}return t}function H(l,e){let t=null,n=0,o=0,r=null;if(l.clear(),''!==e){';'!=e.charAt(e.length-1)&&(e+=';');for(let a=0;a<e.length;a++){const s=e.charAt(a);if(null==t)switch(s){case':':r||(r=e.substr(n,a-n),o=a+1);break;case'"':case'\'':t=s;break;case';':const i=e.substr(o,a-o);r&&l.set(r.trim(),i.trim()),r=null,n=a+1;}else s===t&&(t=null)}}}function W(o,e){const t=e.split(/\s+/);o.clear(),t.forEach((e)=>o.add(e))}function $(t){return'string'==typeof t?[new $l(t)]:(P(t)||(t=[t]),Array.from(t).map((t)=>'string'==typeof t?new $l(t):t))}function K(){for(const t of this.getChildren())if(!t.is('uiElement'))return null;return this.childCount}function U(t){return t.item.is('attributeElement')||t.item.is('uiElement')}function Q(t){return'string'==typeof t?[new Ks(t)]:(P(t)||(t=[t]),Array.from(t).map((t)=>'string'==typeof t?new Ks(t):t))}function J(a,e,s){const t=e.getRange(),n=Array.from(a.getAncestors());n.shift(),n.reverse();const o=n.some((n)=>{if(t.containsItem(n)){const e=s.toViewElement(n);return!!e.getCustomProperty('addHighlight')}});return!o}function G(){if(Y(this))return null;let t=this.parent;for(;t&&t.is('attributeElement');){if(1<Y(t))return null;t=t.parent}return!t||1<Y(t)?null:this.childCount}function Y(t){return Array.from(t.getChildren()).filter((t)=>!t.is('uiElement')).length}function X(){return null}function Z(n){let o;if('string'!=typeof n)o=n.keyCode+(n.altKey?mc.alt:0)+(n.ctrlKey?mc.ctrl:0)+(n.shiftKey?mc.shift:0);else if(o=mc[n.toLowerCase()],!o)throw new ba('keyboard-unknown-key: Unknown key name.',{key:n});return o}function ee(t){return'string'==typeof t&&(t=ne(t)),t.map((t)=>'string'==typeof t?Z(t):t).reduce((n,e)=>e+n,0)}function te(n){const e=ne(n);return cc.mac&&'ctrl'==e[0].toLowerCase()?'\u2318'+(e[1]||''):n}function ne(t){return t.split(/\s*\+\s*/)}function oe(o){o.on('keydown',(e,t)=>re(e,t,o.domConverter))}function ie(){return null}function re(o,i,l){if(i.keyCode==mc.arrowright){const n=i.domTarget.ownerDocument.defaultView.getSelection(),e=1==n.rangeCount&&n.getRangeAt(0).collapsed;if(e||i.shiftKey){const o=n.focusNode,t=n.focusOffset,i=l.domPositionToView(o,t);if(null===i)return;let r=!1;const a=i.getLastMatchingPosition((t)=>(t.item.is('uiElement')&&(r=!0),t.item.is('uiElement')||t.item.is('attributeElement')));if(r){const o=l.viewPositionToDom(a);e?n.collapse(o.parent,o.offset):n.extend(o.parent,o.offset)}}}}function ae(t){return'string'==typeof t?[new $l(t)]:(P(t)||(t=[t]),Array.from(t).map((t)=>'string'==typeof t?new $l(t):t))}function se(a){const e=a.offset,r=a.parent;if(r.is('text'))return a;if(r.is('attributeElement')&&0===r.childCount){const n=r.parent,e=r.index;return r.remove(),se(new Zl(n,e))}const t=r.getChild(e-1),n=r.getChild(e);if(!t||!n)return a;if(t.is('text')&&n.is('text'))return we(t,n);if(t.is('attributeElement')&&n.is('attributeElement')&&t.isSimilar(n)){const o=t.childCount;return t.appendChildren(n.getChildren()),n.remove(),se(new Zl(t,o))}return a}function Yb(s,e){e=P(e)?[...e]:[e],Ae(e);const t=Zb(s);if(!t)throw new ba('view-writer-invalid-position-container');const l=ge(s,!0),o=t.insertChildren(l.offset,e),i=l.getShiftedBy(o),r=se(l);if(0===o)return new ec(r,r);else{r.isEqual(l)||i.offset--;const t=se(i);return new ec(r,t)}}function Qb(s){if(Te(s),s.isCollapsed)return new pc;const{start:e,end:t}=pe(s,!0),n=e.parent,o=t.offset-e.offset,i=n.removeChildren(e.offset,o),r=se(e);return s.start=r,s.end=Zl.createFromPosition(r),new pc(i)}function Gb(a,e){let t;if(e.isAfter(a.end)){e=ge(e,!0);const n=e.parent,o=n.childCount;a=pe(a,!0),t=Qb(a),e.offset+=n.childCount-o}else t=Qb(a);return Yb(e,t)}function Jb(l,e){if(!(e instanceof ac))throw new ba('view-writer-wrap-invalid-attribute');if(Te(l),l.isCollapsed)return l;if(l.end.isEqual(l.start.getShiftedBy(1))){const t=l.start.nodeAfter;if(t instanceof ac&&ve(e,t))return l}if(xe(l)&&ve(e,l.start.parent)){const e=l.start.parent.parent,t=l.start.parent.index;return ec.createFromParentsAndOffsets(e,t,e,t+1)}const{start:t,end:n}=pe(l,!0),o=t.parent,i=fe(o,t.offset,n.offset,e),r=he(o,i.start.offset,i.end.offset,e),a=se(r.start);a.isEqual(r.start)||r.end.offset--;const s=se(r.end);return new ec(a,s)}function Zb(n){let e=n.parent;for(;!Ce(e);){if(!e)return;e=e.parent}return e}function pe(s,e=!1){const t=s.start,n=s.end;if(Te(s),s.isCollapsed){const t=ge(s.start,e);return new ec(t,t)}const o=ge(n,e),i=o.parent.childCount,r=ge(t,e);return o.offset+=o.parent.childCount-i,new ec(r,o)}function ge(a,l=!1){const d=a.offset,n=a.parent;if(a.parent.is('emptyElement'))throw new ba('view-writer-cannot-break-empty-element');if(a.parent.is('uiElement'))throw new ba('view-writer-cannot-break-ui-element');if(!l&&n.is('text')&&Ce(n.parent))return Zl.createFromPosition(a);if(Ce(n))return Zl.createFromPosition(a);if(n.is('text'))return ge(ye(a),l);const e=n.childCount;if(d==e){const t=new Zl(n.parent,n.index+1);return ge(t,l)}if(0===d){const t=new Zl(n.parent,n.index);return ge(t,l)}else{const t=n.index+1,e=n.clone();n.parent.insertChildren(t,e);const o=n.childCount-d,i=n.removeChildren(d,o);e.appendChildren(i);const a=new Zl(n.parent,t);return ge(a,l)}}function fe(s,l,d,e){let n=l;const c=[];for(;n<d;){const i=s.getChild(n);if(i.isSimilar(e)){const e=i.getChildren(),t=i.childCount;i.remove(),s.insertChildren(n,e),c.push(new Zl(s,n),new Zl(s,n+t)),n+=t,d+=t-1}else i.is('attributeElement')&&fe(i,0,i.childCount,e),n++}let t=0;for(const n of c){if(n.offset-=t,n.offset==l||n.offset==d)continue;const o=se(n);o.isEqual(n)||(t++,d--)}return ec.createFromParentsAndOffsets(s,l,s,d)}function he(l,s,t,e){let o=s;const d=[];for(;o<t;){const i=l.getChild(o),t=i.is('text'),n=i.is('attributeElement'),a=i.is('emptyElement'),r=i.is('uiElement');if(t||a||r||n&&be(e,i)){const t=e.clone();i.remove(),t.appendChildren(i),l.insertChildren(o,t),d.push(new Zl(l,o))}else n&&he(i,0,i.childCount,e);o++}let n=0;for(const o of d){if(o.offset-=n,o.offset==s)continue;const i=se(o);i.isEqual(o)||(n++,t--)}return ec.createFromParentsAndOffsets(l,s,l,t)}function be(n,e){return!!(n.priority<e.priority)||!(n.priority>e.priority)&&n.getIdentity()<e.getIdentity()}function _e(o){const e=o.nodeBefore;if(e&&e.is('text'))return new Zl(e,e.data.length);const t=o.nodeAfter;return t&&t.is('text')?new Zl(t,0):o}function ye(n){if(n.offset==n.parent.data.length)return new Zl(n.parent.parent,n.parent.index+1);if(0===n.offset)return new Zl(n.parent.parent,n.parent.index);const e=n.parent.data.slice(n.offset);return n.parent.data=n.parent.data.slice(0,n.offset),n.parent.parent.insertChildren(n.parent.index+1,new $l(e)),new Zl(n.parent.parent,n.parent.index+1)}function we(o,e){const t=o.data.length;return o.data+=e.data,e.remove(),new Zl(o,t)}function ve(o,e){if(o.name!==e.name||o.priority!==e.priority)return!1;for(const t of o.getAttributeKeys())if('class'!==t&&'style'!==t&&e.hasAttribute(t)&&e.getAttribute(t)!==o.getAttribute(t))return!1;for(const t of o.getStyleNames())if(e.hasStyle(t)&&e.getStyle(t)!==o.getStyle(t))return!1;for(const t of o.getAttributeKeys())'class'!==t&&'style'!==t&&(e.hasAttribute(t)||e.setAttribute(t,o.getAttribute(t)));for(const t of o.getStyleNames())e.hasStyle(t)||e.setStyle(t,o.getStyle(t));for(const t of o.getClassNames())e.hasClass(t)||e.addClass(t);return!0}function ke(o,e){if(o.name!==e.name||o.priority!==e.priority)return!1;for(const t of o.getAttributeKeys())if('class'!==t&&'style'!==t&&(!e.hasAttribute(t)||e.getAttribute(t)!==o.getAttribute(t)))return!1;if(!e.hasClass(...o.getClassNames()))return!1;for(const t of o.getStyleNames())if(!e.hasStyle(t)||e.getStyle(t)!==o.getStyle(t))return!1;for(const t of o.getAttributeKeys())'class'!==t&&'style'!==t&&e.removeAttribute(t);return e.removeClass(...o.getClassNames()),e.removeStyle(...o.getStyleNames()),!0}function xe(t){return t.start.parent==t.end.parent&&t.start.parent.is('attributeElement')&&0===t.start.offset&&t.end.offset===t.start.parent.childCount}function Ae(n){for(const o of n){if(!fc.some((t)=>o instanceof t))throw new ba('view-writer-insert-invalid-node');o.is('text')||Ae(o.getChildren())}}function Ce(t){return t&&(t.is('containerElement')||t.is('documentFragment'))}function Te(o){const e=Zb(o.start),i=Zb(o.end);if(!e||!i||e!==i)throw new ba('view-writer-invalid-range-container')}function Pe(a){return(e,t,n,o)=>{const i=a instanceof Ul?a.clone(!0):a(t,n,o);if(i&&n.consume(t.item,'insert')){const n=o.mapper.toViewPosition(t.range.start);o.mapper.bindElements(t.item,i),gc.insert(n,i)}}}function Ee(){return(i,a,e,t)=>{if(e.consume(a.item,'insert')){const o=t.mapper.toViewPosition(a.range.start),e=new $l(a.item.data);gc.insert(o,e)}}}function Se(s){return(l,t,n,o)=>{let i,r;if(s instanceof Ul?(i=s.clone(!0),r=s.clone(!0)):(t.isOpening=!0,i=s(t,n,o),t.isOpening=!1,r=s(t,n,o)),i&&r){const a=t.markerRange,e=l.name;if(!a.isCollapsed||n.consume(a,e)){for(const o of a)if(!n.consume(o.item,e))return;const s=o.mapper;gc.insert(s.toViewPosition(a.start),i),a.isCollapsed||gc.insert(s.toViewPosition(a.end),r)}}}}function Ve(a){return a=a||((n,o)=>({value:n,key:o})),(e,s,n,o)=>{if(n.consume(s.item,De(e.name))){const{key:e,value:t}=a(s.attributeNewValue,s.attributeKey,s,n,o);o.mapper.toViewElement(s.item).setAttribute(e,t)}}}function Oe(a){return a=a||((n,e)=>({key:e})),(e,r,n,o)=>{if(n.consume(r.item,De(e.name))){const{key:e}=a(r.attributeOldValue,r.attributeKey,r,n,o);o.mapper.toViewElement(r.item).removeAttribute(e)}}}function Re(s){return(e,l,n,o)=>{const t=s instanceof Ul?s.clone(!0):s(l.attributeNewValue,l,n,o);if(!t)return;if(!n.consume(l.item,De(e.name)))return;let i=o.mapper.toViewRange(l.range);if(null!==l.attributeOldValue&&!(s instanceof Ul)){const e=s(l.attributeOldValue,l,n,o);i=gc.unwrap(i,e)}gc.wrap(i,t)}}function Fe(a){return(e,t,n,o)=>{const i=a instanceof Ul?a.clone(!0):a(t.attributeOldValue,t,n,o);if(i&&n.consume(t.item,De(e.name))){const n=o.mapper.toViewRange(t.range);gc.unwrap(n,i)}}}function Ie(){return(a,s,e,t)=>{if(!e.consume(s.item,'remove'))return;let n=t.mapper.toViewPosition(s.sourcePosition),o;if(s.item.is('element'))n=n.getLastMatchingPosition((t)=>!t.item.is('containerElement')),n.parent.is('text')&&n.isAtEnd&&(n=Zl.createAfter(n.parent)),o=ec.createOn(n.nodeAfter);else{const t=Le(n,s.item.offsetSize);o=new ec(n,t)}gc.remove(o.getTrimmed()),'$graveyard'==s.item.root.rootName&&t.mapper.unbindModelElement(s.item)}}function Ne(s){return(l,t,n,d)=>{const i='function'==typeof s?s(t,n,d):s,o=t.item;if(i&&!t.markerRange.isCollapsed&&o.is('textProxy')&&n.consume(o,l.name)){i.id||(i.id=t.markerName);const n=je(i),e=d.mapper.toViewRange(t.range);'addMarker'==l.name.split(':')[0]?gc.wrap(e,n):gc.unwrap(e,n)}}}function Be(s){return(l,t,n,o)=>{const i='function'==typeof s?s(t,n,o):s,r=t.item;if(i&&!t.markerRange.isCollapsed&&r.is('element')&&n.test(t.item,l.name)){i.priority||(i.priority=10),i.id||(i.id=t.markerName);const a=o.mapper.toViewElement(r),e='addMarker'==l.name.split(':')[0],s=e?'addHighlight':'removeHighlight';if(a&&a.getCustomProperty(s)){n.consume(t.item,l.name);for(const t of Zs.createIn(r))n.consume(t.item,l.name);a.getCustomProperty(s)(a,e?i:i.id)}}}}function Me(s){return(l,t,n,o)=>{let i,r;if(s instanceof Ul?(i=s.clone(!0),r=s.clone(!0)):(t.isOpening=!0,i=s(t,n,o),t.isOpening=!1,r=s(t,n,o)),i&&r){const a=t.markerRange,e=l.name;if(!a.isCollapsed||n.consume(a,e)){for(const o of a)if(!n.consume(o.item,e))return;const s=o.mapper.toViewRange(a);gc.clear(s.getEnlarged(),r),i.isSimilar(r)||gc.clear(s.getEnlarged(),i)}}}}function De(n){const e=n.split(':');return e[0]+':'+e[1]}function Le(i,a){const t=new Jl({startPosition:i,singleCharacters:!0});let n=0;for(const e of t)if('text'==e.type&&(n++,n==a))return t.position}function je(o){const e=new hc('span',o.attributes);if(o.class){const t=Array.isArray(o.class)?o.class:[o.class];e.addClass(...t)}return o.priority&&(e.priority=o.priority),e.setCustomProperty('highlightDescriptorId',o.id),e}function qe(a,e){e=ty(e);const t=e.reduce((n,e)=>n+e.offsetSize,0),n=a.parent;$e(a);const o=a.index;return n.insertChildren(o,e),ny(n,o+e.length),ny(n,o),new Zs(a,a.getShiftedBy(t))}function ey(o){if(!o.isFlat)throw new ba('model-writer-remove-range-not-flat: Trying to remove a range which starts and ends in different element.');const e=o.start.parent;$e(o.start),$e(o.end);const t=e.removeChildren(o.start.index,o.end.index-o.start.index);return ny(e,o.start.index),t}function ty(i){const a=[];i instanceof Array||(i=[i]);for(let e=0;e<i.length;e++)if('string'==typeof i[e])a.push(new Ks(i[e]));else if(i[e]instanceof Us)a.push(new Ks(i[e].data,i[e].getAttributes()));else if(i[e]instanceof oc||i[e]instanceof Qs)for(const t of i[e])a.push(t);else i[e]instanceof $s&&a.push(i[e]);for(let t=1;t<a.length;t++){const n=a[t],e=a[t-1];n instanceof Ks&&e instanceof Ks&&Ke(n,e)&&(a.splice(t-1,2,new Ks(e.data+n.data,e.getAttributes())),t--)}return a}function ny(a,e){const t=a.getChild(e-1),n=a.getChild(e);if(t&&n&&t.is('text')&&n.is('text')&&Ke(t,n)){const o=new Ks(t.data+n.data,t.getAttributes());a.removeChildren(e-1,2),a.insertChildren(e-1,o)}}function $e(s){const e=s.textNode,t=s.parent;if(e){const n=s.offset-e.startOffset,o=e.index;t.removeChildren(o,1);const i=new Ks(e.data.substr(0,n),e.getAttributes()),r=new Ks(e.data.substr(n),e.getAttributes());t.insertChildren(o,[i,r])}}function Ke(i,e){const t=i.getAttributes(),n=e.getAttributes();for(const o of t){if(o[1]!==e.getAttribute(o[0]))return!1;n.next()}return n.next().done}function Ue(i){const e=new Set,a=new Map,t=new Gs({startPosition:ry.createAt(i,0),ignoreElementEnd:!0});for(const o of t)'$marker'==o.item.name&&e.add(o.item);for(const n of e){const o=n.getAttribute('data-name'),e=ry.createBefore(n);a.has(o)?a.get(o).end=ry.createFromPosition(e):a.set(o,new Zs(ry.createFromPosition(e))),ey(Zs.createOn(n))}return a}function Qe(){return(i,a,t,n)=>{if(!a.output&&t.consume(a.input,{name:!0})){const o=n.convertChildren(a.input,t,a);a.output=new oc(ty(o))}}}function Je(){return(a,e,t,n)=>{const o={name:'$text',inside:e.context};n.schema.check(o)&&t.consume(e.input)&&(e.output=new Ks(e.input.data))}}function Ge(){const i=new Set(['insert','move','remove','reinsert']);this.listenTo(this.root.document,'change',(e,t,n)=>{i.has(t)&&Ye.call(this,t,n.range,n.sourcePosition)},{priority:'high'})}function Ye(l,d,t){const n=d.end.offset-d.start.offset;let o;switch(l){case'insert':const e='sticksToNext'==this.stickiness;o=this._getTransformedByInsertion(d.start,n,e);break;case'move':case'remove':case'reinsert':const i=Zs.createFromPositionAndShift(t,n),a=i.containsPosition(this)||i.start.isEqual(this)&&'sticksToNext'==this.stickiness||i.end.isEqual(this)&&'sticksToPrevious'==this.stickiness;if(a)o=this._getCombined(t,d.start);else{const i='sticksToNext'==this.stickiness;o=this._getTransformedByMove(t,d.start,n,i)}}if(!this.isEqual(o)){const t=ry.createFromPosition(this);this.path=o.path,this.root=o.root,this.fire('change',t)}}function Xe(s,e,t,n){n||(n=s.model.batch()),t.isCollapsed||s.deleteContent(t,n);const o=new kc(s,n,t.anchor);let i;i=e.is('documentFragment')?e.getChildren():[e],o.handleNodes(i,{isFirst:!0,isLast:!0});const r=o.getSelectionRange();r?t.setRanges([r]):ya.warn('insertcontent-no-range: Cannot determine a proper selection range after insertion.')}function Ze(t){return t.is('text')?'$text':t.name}function et(s,e,t={}){if(!s.isCollapsed){const n=e.document.schema;if(!t.doNotResetEntireContent&&st(n,s))return void at(e,s);const o=s.getFirstRange(),i=o.start,r=vc.createFromPosition(o.end);o.start.isTouching(o.end)||e.remove(o),t.leaveUnmerged||(tt(e,i,r),n.removeDisallowedAttributes(i.parent.getChildren(),i,e)),s.setCollapsedAt(i),nt(n,i)&&rt(e,i,s),r.detach()}}function tt(a,e,r){const t=e.parent,n=r.parent;if(t!=n&&t.parent&&n.parent&&it(e,r)){for(e=ry.createAfter(t),r=ry.createBefore(n),r.isEqual(e)||a.move(n,e),a.merge(e);r.parent.isEmpty;){const e=r.parent;r=ry.createBefore(e),a.remove(e)}tt(a,e,r)}}function nt(i,e){const a=i.check({name:'$text',inside:e}),r=i.check({name:'paragraph',inside:e});return!a&&r}function it(i,e){const t=i.root.document.schema,n=new Zs(i,e);for(const o of n.getWalker())if(t.objects.has(o.item.name)||t.limits.has(o.item.name))return!1;return!0}function rt(i,e,t){const n=new Js('paragraph');i.insert(e,n),t.setCollapsedAt(n)}function at(o,e){const t=o.document.schema.getLimitElement(e);o.remove(Zs.createIn(t)),rt(o,ry.createAt(t),e)}function st(i,e){const t=i.getLimitElement(e);if(!e.containsEntireContent(t))return!1;const n=e.getFirstRange();return n.start.parent!=n.end.parent&&i.check({name:'paragraph',inside:t.name})}function dt(t){return!!t&&1==t.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(t)}function lt(t){return!!t&&1==t.length&&/[\ud800-\udbff]/.test(t)}function ct(t){return!!t&&1==t.length&&/[\udc00-\udfff]/.test(t)}function mt(n,e){return lt(n.charAt(e-1))&&ct(n.charAt(e))}function ut(n,e){return dt(n.charAt(e))}function pt(l,c,e={}){const t=l.model.schema,n='backward'!=e.direction,p=e.unit?e.unit:'character',u=c.focus,a=new Gs({boundaries:ht(u,n),singleCharacters:!0,direction:n?'forward':'backward'}),m={walker:a,schema:t,isForward:n,unit:p};for(let t;t=a.next();){if(t.done)return;const n=gt(m,t.value);if(n)return void c.moveFocusTo(n)}}function gt(n,e){if('text'==e.type)return ft(n.walker,n.unit);if(e.type==(n.isForward?'elementStart':'elementEnd')){if(n.schema.objects.has(e.item.name))return ry.createAt(e.item,n.isForward?'after':'before');if(n.schema.check({name:'$text',inside:e.nextPosition}))return e.nextPosition}else{if(n.schema.limits.has(e.item.name))return void n.walker.skip(()=>!0);if(n.schema.check({name:'$text',inside:e.nextPosition}))return e.nextPosition}}function ft(a,e){const t=a.position.textNode;if(t){const n=t.data;for(let o=a.position.offset-t.startOffset;mt(n,o)||'character'==e&&ut(n,o);)a.next(),o=a.position.offset-t.startOffset}return a.position}function ht(i,e){const t=i.root,n=ry.createAt(t,e?'end':0);return e?new Zs(i,n):new Zs(n,i)}function bt(l){const d=new oc,t=l.getFirstRange();if(!t||t.isCollapsed)return d;const e=t.start.root,o=t.start.getCommonPath(t.end),i=e.getNodeByPath(o);let r=t.start.parent==t.end.parent?t:Zs.createFromParentsAndOffsets(i,t.start.path[o.length],i,t.end.path[o.length]+1);const a=r.end.offset-r.start.offset;for(const e of r.getItems({shallow:!0}))e.is('textProxy')?d.appendChildren(new Ks(e.data,e.getAttributes())):d.appendChildren(e.clone(!0));if(r!=t){const n=t._getTransformedByMove(r.start,ry.createAt(d,0),a)[0],e=new Zs(ry.createAt(d),n.start),o=new Zs(n.end,ry.createAt(d,'end'));_t(o),_t(e)}return d}function _t(o){const n=[];Array.from(o.getItems({direction:'backward'})).map((t)=>Zs.createOn(t)).filter((e)=>{const t=(e.start.isAfter(o.start)||e.start.isEqual(o.start))&&(e.end.isBefore(o.end)||e.end.isEqual(o.end));return t}).forEach((t)=>{n.push(t.start.parent),ey(t)}),n.forEach((n)=>{for(let o=n;o.parent&&o.isEmpty;){const t=Zs.createOn(o);o=o.parent,ey(t)}})}function yt(o){var e=-1,t=o?o.length:0;for(this.__data__=new Cd;++e<t;)this.add(o[e])}function wt(a,e,t,n,o){return a===e||(null!=a&&null!=e&&(Da(a)||da(e))?qc(a,e,wt,t,n,o):a!==a&&e!==e)}function vt(n,o){if(im.prototype[n])throw new ba('model-batch-register-taken: This batch method name is already taken.',{name:n});im.prototype[n]=o}function kt(i,e,t,n){n instanceof Zs?At(i,i.document,e,t,n):xt(i,i.document,e,t,n)}function xt(l,e,t,n,o){const i=o.getAttribute(t);let r,a;const s=o.is('rootElement')?new am:new rm;i!=n&&(l.addDelta(s),o.is('rootElement')?a=new Xc(o,t,i,n,e.version):(r=o.is('element')?new Zs(ry.createBefore(o),ry.createFromParentAndOffset(o,0)):new Zs(ry.createBefore(o),ry.createAfter(o)),a=new Wc(r,t,i,n,e.version)),s.addOperation(a),e.applyOperation(a))}function At(p,e,t,n,o){function i(){0===u.operations.length&&p.addDelta(u);const o=new Zs(m,s),i=new Wc(o,t,d,n,e.version);u.addOperation(i),e.applyOperation(i)}const u=new rm;let m=o.start,s,d,r;for(const l of o)r=l.item.getAttribute(t),s&&d!=r&&(d!=n&&i(),m=s),s=l.nextPosition,d=r;s instanceof ry&&s!=m&&d!=n&&i()}function Ct(a,e,t,n,o){const i=new $c(t,n,o,a.document.version);e.addOperation(i),a.document.applyOperation(i)}function Tt(s,e,t){const n=new dm;s.addDelta(n);const o=s.document.graveyard,i=new ry(o,[0]),r=new Uc(e,t,i,s.document.version);n.addOperation(r),s.document.applyOperation(r)}function Pt(o,e,t){e.addOperation(t),o.document.applyOperation(t)}function Et(t){return[t.clone()]}function oy(o,e){for(let t=0;t<e.length;t++)e[t].baseVersion=o+t+1;return e}function Vt(n,e){return null===n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)}function Ot(t){return 0===t.length?null:1==t.length?t[0]:(t[0].end=t[t.length-1].end,t[0])}function Rt(a,e,t){const n=[];for(let o=0;o<a.length;o++){const r=Ft(a[o],e,t.isSticky);n.push(r);for(let e=o+1;e<a.length;e++)a[e]=a[e]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];e=e._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany,!0,!1)}return n}function Ft(a,e,t){let n='$graveyard'==e.root.rootName?Uc:'$graveyard'==a.start.root.rootName?Kc:$c;const o=new n(a.start,a.end.offset-a.start.offset,e,0);return o.isSticky=t,o}function It(l,e,t,n,d){var i=-1,r=l.length;for(t||(t=ym),d||(d=[]);++i<r;){var a=l[i];0<e&&t(a)?1<e?It(a,e-1,t,n,d):jd(d,a):!n&&(d[d.length]=a)}return d}function Nt(s,l){if('function'!=typeof s||l&&'function'!=typeof l)throw new TypeError(Dm);var d=function(){var e=arguments,t=l?l.apply(this,e):e[0],n=d.cache;if(n.has(t))return n.get(t);var o=s.apply(this,e);return d.cache=n.set(t,o),o};return d.cache=new(Nt.Cache||Cd),d}function Bt(o,e){for(const i of e)for(const e of i.operations)e.baseVersion=++o;return e}function Mt(t){return t.reduce((n,e)=>n+e.operations.length,0)}function Dt(i,e){const t=i[i.length-1];let a=t.operations.length+t.baseVersion;const o=new om;for(let t=0;t<e;t++)o.addOperation(new Gc(a++));i.push(o)}function Lt(o,e,t){Ht(o,e,t),jt(o,e,t),zt(e,t),qt(e,t)}function jt(a,e,s){const n=s.originalDelta.get(e);if(s.document.history.isUndoingDelta(n)){const e=s.document.history.getUndoneDelta(n),t=s.wasAffected.get(a),o=t.get(e);void 0!==o&&(s.insertBefore=o)}}function qt(i,e){const t=e.originalDelta.get(i),n=e.document.history;e.forceNotSticky=n.isUndoneDelta(t)||n.isUndoingDelta(t)}function zt(i,e){const t=e.document.history,n=e.originalDelta.get(i);e.forceWeakRemove=t.isUndoneDelta(n)}function Ht(a,r,e){e.wasAffected.get(a)||e.wasAffected.set(a,new Map);const t=e.originalDelta.get(r);let n=!!e.wasAffected.get(a).get(t);for(const t of a.operations){for(const o of r.operations)if(t instanceof $c&&o instanceof $c&&Wt(t,o)){n=!0;break}if(n)break}e.wasAffected.get(a).set(t,n)}function Wt(a,e){const t=a.targetPosition,n=e.sourcePosition,o=V(n.getParentPath(),t.getParentPath());return t.root==n.root&&'same'==o&&n.offset<t.offset}function $t(i,e,t){delete t.insertBefore,delete t.forceNotSticky,delete t.forceWeakRemove;const n=t.wasAffected.get(i);t.wasAffected.delete(i);for(const o of e)t.wasAffected.set(o,new Map(n))}function Kt(a,r){let t=[],n=null,e;switch(a){case sm:case dm:for(const o of r)n=o instanceof Gc?new om:o instanceof Uc?new dm:new sm,n.addOperation(o),t.push(n);return t;case cm:case pm:return n=new a,n.addOperation(r[0]),n.addOperation(r[1]),t=Kt(sm,r.slice(2)),[n].concat(t);case mm:case gm:return t=Kt(sm,r.slice(0,-2)),n=new a,n.addOperation(r[r.length-2]),n.addOperation(r[r.length-1]),t.concat(n);case um:return n=r[0]instanceof Gc?new om:new um,n.addOperation(r[0]),[n];case rm:for(e=0;e<r.length&&!!(r[e]instanceof Gc);e++);e==r.length?n=new om:(n=new rm,0!=e&&r.unshift(r.splice(e,1)[0]));for(const t of r)n.addOperation(t);return[n];default:n=new a;for(const t of r)n.addOperation(t);return[n];}}function Ut(s,e,t,n){const o=s.document,i=new cp,r=new Jc(e,t,n,o.markers,o.version);s.addDelta(i),i.addOperation(r),o.applyOperation(r)}function Qt(i,e){const t=i.clone(),n=t.operations[0];return n.oldRange&&(n.oldRange=n.oldRange.getTransformedByDelta(e)[0]),n.newRange&&(n.newRange=n.newRange.getTransformedByDelta(e)[0]),[t]}function Jt(l,c){function t(){const t=new Zs(l.position.getShiftedBy(a),l.position.getShiftedBy(s)),o=new Wc(t,c.key,r,c.value,0);e.addOperation(o)}const e=new rm,n=l.nodes;let r=n.getNode(0).getAttribute(c.key),a=0,s=n.getNode(0).offsetSize;for(let d=1;d<n.length;d++){const o=n.getNode(d),e=o.getAttribute(c.key);e!=r&&(r!=c.value&&t(),r=e,a=s),s+=o.offsetSize}return t(),e}function Gt(){const t=new om;return t.addOperation(new Gc(0)),t}function Yt(){const a=new Set(['insert','move','remove','reinsert']);this.listenTo(this.root.document,'change',(e,t,n,o,i)=>{a.has(t)&&Xt.call(this,t,i,o,n.range,n.sourcePosition)},{priority:'high'})}function Xt(p,u,g,h,f){const t=h.end.offset-h.start.offset;let r=h.start;('move'==p||'remove'==p||'reinsert'==p)&&(r=r._getTransformedByInsertion(f,t));const a=this._getTransformedByDocumentChange(p,u,r,t,f);('move'==p||'remove'==p||'reinsert'==p)&&3==a.length&&(a[2]=h);const s=Zs.createFromRanges(a),d=!s.isEqual(this),l=this.containsPosition(r),c=f&&(this.containsPosition(f)||this.start.isEqual(f));if(d){const a=Zs.createFromRange(this);this.start=s.start,this.end=s.end,this.fire('change:range',a,{type:p,batch:g,range:h,sourcePosition:f})}else(l||c)&&this.fire('change:content',Zs.createFromRange(this),{type:p,batch:g,range:h,sourcePosition:f})}function Zt(o,i){if(o.size!=i.size)return!1;for(const t of o.entries()){const n=JSON.stringify(t[1]),e=JSON.stringify(i.get(t[0]));if(n!==e)return!1}return!0}function en(n,e){return!e.has(n)&&(e.add(n),n.document.schema.itemExtends(n.name,'$block')&&n.parent)}function tn(i,a){const e=i.parent.getAncestors({parentFirst:!0,includeSelf:!0}),t=e.find((t)=>en(t,a));return e.forEach((t)=>a.add(t)),t}function nn(t){return t instanceof Us||t instanceof Ks?t.getAttributes():null}function on(i,a,e){if(!a||'transparent'==a.type)return;const r=i.range&&i.range.start.parent;!r||r.isEmpty||e.enqueueChanges(()=>{const t=Array.from(r.getAttributeKeys()).filter((t)=>t.startsWith(bp));for(const e of t)a.removeAttribute(r,e)})}function rn(s,e,t){for(let n=t.length-1,o=e.length-1;0<=n&&0<=o;){const i=e[o];if(!s.hasItem(i))return!1;const r=s._extensionChains.get(i);if(r.includes(t[n]))n--,o--;else return!1}return!0}function an(i){const e=i.textNode;if(e){const t=e.data,n=i.offset-e.startOffset;return!mt(t,n)&&!ut(t,n)}return!0}function*sn(o,i){for(let a=!1;!a;){if(a=!0,o){const n=o.next();n.done||(a=!1,yield{walker:o,value:n.value})}if(i){const n=i.next();n.done||(a=!1,yield{walker:i,value:n.value})}}}function dn(t){return!!(t&&ud(t.addEventListener))}function ln(t){return t['data-ck-expando']||(t['data-ck-expando']=a())}function cn(o){let e=0;for(const t of o)e++;return e}function mn(t){return t instanceof Text&&t.data.substr(0,Oy)===Vy}function un(t){return t.data.length==Oy&&mn(t)}function pn(t){return mn(t)?t.data.slice(Oy):t.data}function gn(o,e){let t=Mp.get(e);return t||(t=e(window.document),Mp.set(e,t)),o.isEqualNode(t)}function fn(t){t.on('keydown',hn)}function hn(n,o){if(o.keyCode==mc.arrowleft){const i=o.domTarget.ownerDocument.defaultView.getSelection();if(1==i.rangeCount&&i.getRangeAt(0).collapsed){const e=i.getRangeAt(0).startContainer,t=i.getRangeAt(0).startOffset;mn(e)&&t<=Oy&&i.collapse(e,0)}}}function bn(h,e,t){function o(o){const n=(void 0===l[o-1]?-1:l[o-1])+1,s=void 0===l[o+1]?-1:l[o+1],c=n>s?-1:1;d[o+c]&&(d[o]=d[o+c].slice(0)),d[o]||(d[o]=[]),d[o].push(n>s?f:r);let u=oa(n,s),p=u-o;for(;p<i&&u<a&&t(h[p],e[u]);)p++,u++,d[o].push('equal');return u}t=t||function(n,e){return n===e};let f,r;if(e.length<h.length){const t=h;h=e,e=t,f='delete',r='insert'}else f='insert',r='delete';const i=h.length,a=e.length,s=a-i,d={},l={};let n=0,c;do{for(c=-n;c<s;c++)l[c]=o(c);for(c=s+n;c>s;c--)l[c]=o(c);l[s]=o(s),n++}while(l[s]!==a);return d[s].slice(1)}function _n(o,e,t){o.insertBefore(t,o.childNodes[e]||null)}function yn(n){const e=n.parentNode;e&&e.removeChild(n)}function wn(n){if('false'==n.getAttribute('contenteditable'))return!1;const e=n.findAncestor((t)=>t.hasAttribute('contenteditable'));return!e||'true'==e.getAttribute('contenteditable')}function vn(n){let e=0;for(;n.previousSibling;)n=n.previousSibling,e++;return e}function kn(n){const e=[];for(;n&&n.nodeType!=Node.DOCUMENT_NODE;)e.unshift(n),n=n.parentNode;return e}function xn(i,e){const t=kn(i),n=kn(e);let o=0;for(;t[o]==n[o]&&t[o];)o++;return 0==o?null:t[o-1]}function An(i,a,e){let t=kn(i);return e&&(t=t.slice(t.indexOf(e)+1)),t.some((t)=>t.tagName&&a.includes(t.tagName.toLowerCase()))}function Cn(n,e){for(;n&&n!=Lp.document;)e(n),n=n.parentNode}function Tn(t){return t==mc.arrowright||t==mc.arrowleft||t==mc.arrowup||t==mc.arrowdown}function Pn(t){return'[object Range]'==Object.prototype.toString.apply(t)}function En(t){return'[object Window]'==Object.prototype.toString.apply(t)}function Sn(n){const e=n.ownerDocument.defaultView.getComputedStyle(n);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}function Vn(o,e){for(const t of og)o[t]=e[t]}function On(t){return!!tg(t)&&t===t.ownerDocument.body}function Rn({target:s,viewportOffset:e=0}){const t=Ln(s);for(let n=t,o=null;n;){let i;i=n==t?jn(s):jn(o),In(i,()=>qn(s,n));const r=qn(s,n);iy(n,r,e),n.parent==n?n=null:(o=n.frameElement,n=n.parent)}}function iy(l,e,t){const d=e.clone().moveBy(0,t),o=e.clone().moveBy(0,-t),i=new ng(l).excludeScrollbarsAndBorders();if(![o,d].every((t)=>i.contains(t))){let{scrollX:n,scrollY:a}=l;Bn(o,i)?a-=i.top-e.top+t:Nn(d,i)&&(a+=e.bottom-i.bottom+t),Mn(e,i)?n-=i.left-e.left+t:Dn(e,i)&&(n+=e.right-i.right+t),l.scrollTo(n,a)}}function In(a,e){const t=Ln(a);for(let n,o;a!=t.document.body;)o=e(),n=new ng(a).excludeScrollbarsAndBorders(),n.contains(o)||(Bn(o,n)?a.scrollTop-=n.top-o.top:Nn(o,n)&&(a.scrollTop+=o.bottom-n.bottom),Mn(o,n)?a.scrollLeft-=n.left-o.left:Dn(o,n)&&(a.scrollLeft+=o.right-n.right)),a=a.parentNode}function Nn(n,e){return n.bottom>e.bottom}function Bn(n,e){return n.top<e.top}function Mn(n,e){return n.left<e.left}function Dn(n,e){return n.right>e.right}function Ln(t){return Pn(t)?t.startContainer.ownerDocument.defaultView:t.ownerDocument.defaultView}function jn(n){if(Pn(n)){let e=n.commonAncestorContainer;return e.nodeType==Node.TEXT_NODE&&(e=e.parentNode),e}return n.parentNode}function qn(i,e){const t=Ln(i),n=new ng(i);if(t===e)return n;for(let o=t;o!=e;){const i=o.frameElement,e=new ng(i).excludeScrollbarsAndBorders();n.moveBy(e.left,e.top),o=o.parent}return n}function zn(s,n){return(e,t)=>{const o=t.newSelection,i=new hp,r=[];for(const i of o.getRanges())r.push(n.toModelRange(i));i.setRanges(r,o.isBackward),i.isEqual(s.selection)||s.enqueueChanges(()=>{s.selection.setTo(i)})}}function Hn(){return(a,e,t,n)=>{const o=e.selection;if(!o.isCollapsed&&t.consume(o,'selection')){n.viewSelection.removeAllRanges();for(const i of o.getRanges()){const e=n.mapper.toViewRange(i);n.viewSelection.addRange(e,o.isBackward)}}}}function Wn(){return(a,e,t,r)=>{const o=e.selection;if(o.isCollapsed&&t.consume(o,'selection')){const i=o.getFirstPosition(),e=r.mapper.toViewPosition(i),t=gc.breakAttributes(e);r.viewSelection.removeAllRanges(),r.viewSelection.addRange(new ec(t,t))}}}function $n(a){return(e,t,n,o)=>{const i=a instanceof Ul?a.clone(!0):a(t.value,t,t.selection,n,o);if(i){const a='selectionAttribute:'+t.key;Un(t.selection,o.viewSelection,i,n,a)}}}function Kn(a){return(s,l,n,o)=>{const i='function'==typeof a?a(l,n,o):a;if(i){i.id||(i.id=l.markerName);const a=je(i),e='selectionMarker:'+l.markerName;Un(l.selection,o.viewSelection,a,n,e)}}}function Un(a,e,t,n,o){if(!a.isCollapsed)return;if(!n.consume(a,o))return;let i=e.getFirstPosition();Qn(i.parent)&&(i=i.getLastMatchingPosition((t)=>t.item.is('uiElement'))),i=gc.wrapPosition(i,t),e.removeAllRanges(),e.addRange(new ec(i,i))}function Qn(n){if(!n.is('element'))return!1;for(const e of n.getChildren())if(!e.is('uiElement'))return!1;return!0}function Jn(){return(i,e,t,n)=>{for(const o of n.viewSelection.getRanges())o.isCollapsed&&o.end.parent.document&&gc.mergeAttributes(o.start);n.viewSelection.removeAllRanges()}}function Gn(){return(i,e,t,n)=>n.viewSelection.setFake(!1)}function Yn(t){return t instanceof HTMLTextAreaElement?t.value:t.innerHTML}function Xn(n,e){n instanceof HTMLTextAreaElement&&(n.value=e),n.innerHTML=e}function Zn(t){return(t+'').toLowerCase()}function eo({origin:a,originKeystrokeHandler:e,originFocusTracker:s,toolbar:l,beforeFocus:n,afterBlur:o}){s.add(l.element),e.set('Alt+F10',(o,e)=>{s.isFocused&&!l.focusTracker.isFocused&&(n&&n(),l.focus(),e())}),l.keystrokes.set('Esc',(e,t)=>{l.focusTracker.isFocused&&(a.focus(),o&&o(),t())})}function to(t){return Array.isArray(t)?{items:t}:t?Object.assign({items:[]},t):{items:[]}}function no(t){return t.every((t)=>'string'==typeof t)}function oo(t){return!!t&&((t.value&&(t=t.value),Array.isArray(t))?t.some(oo):!!(t instanceof hg))}function io(n,o){return n.map((t)=>t instanceof hg?t.getValue(o):t)}function ro(i,e,{node:t}){let n=io(i,t);n=1==i.length&&i[0]instanceof _g?n[0]:n.reduce(bo,''),wo(n)?e.remove():e.set(n)}function ao(n){return{set(e){n.textContent=e},remove(){n.textContent=''}}}function so(i,e,t){return{set(n){i.setAttributeNS(t,e,n)},remove(){i.removeAttributeNS(t,e)}}}function lo(o,e){return{set(t){o.style[e]=t},remove(){o.style[e]=null}}}function co(n){const e=gg(n,(t)=>{if(t&&(t instanceof hg||ko(t)||vo(t)||xo(t)))return t});return e}function mo(o){if('string'==typeof o?o=go(o):o.text&&fo(o),o.on&&(o.eventListeners=po(o.on),delete o.on),!o.text){o.attributes&&uo(o.attributes);const e=[];if(o.children)if(xo(o.children))e.push(o.children);else for(const t of o.children)ko(t)||vo(t)||dn(t)?e.push(t):e.push(new fg(t));o.children=e}return o}function uo(n){for(const e in n)n[e].value&&(n[e].value=[].concat(n[e].value)),ho(n,e)}function po(n){for(const e in n)ho(n,e);return n}function go(t){return{text:[t]}}function fo(t){Array.isArray(t.text)||(t.text=[t.text])}function ho(n,e){Array.isArray(n[e])||(n[e]=[n[e]])}function bo(n,e){return wo(e)?n:wo(n)?e:`${n} ${e}`}function _o(o,e){for(const t in e)o[t]?o[t].push(...e[t]):o[t]=e[t]}function yo(i,e){if(e.attributes&&(!i.attributes&&(i.attributes={}),_o(i.attributes,e.attributes)),e.eventListeners&&(!i.eventListeners&&(i.eventListeners={}),_o(i.eventListeners,e.eventListeners)),e.text&&i.text.push(...e.text),e.children&&e.children.length){if(i.children.length!=e.children.length)throw new ba('ui-template-extend-children-mismatch: The number of children in extended definition does not match.');let t=0;for(const n of e.children)yo(i.children[t++],n)}}function wo(t){return!t&&0!==t}function vo(t){return t instanceof yg}function ko(t){return t instanceof fg}function xo(t){return t instanceof pg}function Ao(){return{children:[],bindings:[],attributes:{}}}function Co(t){return'class'==t||'style'==t}function To(n){return(e)=>e+n}function Po(t){return!!(t.focus&&'none'!=Lp.window.getComputedStyle(t.element).display)}function Eo(n){return n.bindTemplate.to((e)=>{e.target===n.element&&e.preventDefault()})}function So(o){const e=o.files?Array.from(o.files):[],t=o.items?Array.from(o.items):[];return e.length?e:t.filter((t)=>'file'===t.kind).map((t)=>t.getAsFile())}function Vo(a,e){const t=e.target.ownerDocument,n=e.clientX,o=e.clientY;let i;return t.caretRangeFromPoint&&t.caretRangeFromPoint(n,o)?i=t.caretRangeFromPoint(n,o):e.rangeParent&&(i=t.createRange(),i.setStart(e.rangeParent,e.rangeOffset),i.collapse(!0)),i?a.domConverter.domRangeToView(i):a.selection.getFirstRange()}function Oo(t){return t=t.replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\n\n/g,'</p><p>').replace(/\n/g,' ').replace(/^\s/,'&nbsp;').replace(/\s$/,'&nbsp;').replace(/\s\s/g,' &nbsp;'),-1<t.indexOf('</p><p>')&&(t=`<p>${t}</p>`),t}function Ro(t){return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(n,e)=>1==e.length?' ':e)}function Fo(i){let a='';if(i.is('text')||i.is('textProxy'))a=i.data;else if(i.is('img')&&i.hasAttribute('alt'))a=i.getAttribute('alt');else{let t=null;for(const n of i.getChildren()){const o=Fo(n);t&&(t.is('containerElement')||n.is('containerElement'))&&(Mg.includes(t.name)||Mg.includes(n.name)?a+='\n':a+='\n\n'),a+=o,t=n}}return a}function Io(l,e,t,n){const o=t.isCollapsed,i=t.getFirstRange(),r=i.start.parent,a=i.end.parent;if(n.limits.has(r.name)||n.limits.has(a.name))return void(o||r!=a||l.deleteContent(t,e));if(o)No(e,t,i.start);else{const n=!(i.start.isAtStart&&i.end.isAtEnd);l.deleteContent(t,e,{leaveUnmerged:n}),n&&(r==a?No(e,t,t.focus):t.setCollapsedAt(a))}}function No(a,e,t){const n=t.parent,o=new n.constructor(n.name,n.getAttributes());t.isAtEnd?a.insert(ry.createAfter(t.parent),o):t.isAtStart?a.insert(ry.createBefore(t.parent),o):a.split(t),e.setCollapsedAt(t.parent.nextSibling)}function Bo(s,l){function t(){i&&(e.push(i),i=null)}function n(t){return i&&i.type==t}const e=[];let o=0,i;return s.forEach((a)=>{'equal'==a?(t(),o++):'insert'==a?(n('insert')?i.values.push(l[o]):(t(),i={type:'insert',index:o,values:[l[o]]}),o++):n('delete')?i.howMany++:(t(),i={type:'delete',index:o,howMany:1})}),t(),e}function Mo(t){return!!t.ctrlKey||Ug.includes(t.keyCode)}function Do(n,e){return n instanceof $l&&e instanceof $l?n.data===e.data:n===e}function Lo(o){if(1==o.newChildren.length-o.oldChildren.length){const e=bn(o.oldChildren,o.newChildren,Do),t=Bo(e,o.newChildren);if(!(1<t.length)){const n=t[0];return n.values[0]instanceof $l?n:void 0}}}function jo(n){const e=n.map((t)=>t.node).reduce((n,e)=>n.getCommonAncestor(e,{includeSelf:!0}));return e?e.getAncestors({includeSelf:!0,parentFirst:!0}).find((t)=>t.is('containerElement')||t.is('rootElement')):void 0}function qo(n){if(0==n.length)return!1;for(const e of n)if('children'===e.type&&!Lo(e))return!0;return!1}function zo(t){return t.every((t)=>t.is('text'))}function Ho(s){let e=null,l=null;for(let t=0;t<s.length;t++){const n=s[t];'equal'!=n&&(e=null==e?t:e,l=t)}let n=0,i=0;for(let t=e;t<=l;t++)'insert'!=s[t]&&n++,'delete'!=s[t]&&i++;return{insertions:i,deletions:n,firstChangeAt:e}}function Wo(o,e){const i=$o([o],e);i.sort((n,e)=>n.start.isBefore(e.start)?-1:1);for(let n=1;n<i.length;n++){const o=i[n-1],e=i[n];o.end.isTouching(e.start)&&(o.end=e.end,i.splice(n,1),n--)}return i}function $o(i,e){for(const o of e)for(const e of o.operations)for(let t=0;t<i.length;t++){let n;switch(e.type){case'insert':n=i[t]._getTransformedByInsertion(e.position,e.nodes.maxOffset,!0);break;case'move':case'remove':case'reinsert':n=i[t]._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!0);}n&&(i.splice(t,1,...n),t=t+n.length-1)}return i}function Ko(){let t=Uo(ff);return t&&t.length==hf||(t=Jo(hf),Qo(ff,t)),t}function Uo(i){i=i.toLowerCase();const e=document.cookie.split(';');for(const a of e){const e=a.split('='),t=decodeURIComponent(e[0].trim().toLowerCase());if(t===i)return decodeURIComponent(e[1])}return null}function Qo(n,e){document.cookie=encodeURIComponent(n)+'='+encodeURIComponent(e)+';path=/'}function Jo(o){let i='';const t=new Uint8Array(o);window.crypto.getRandomValues(t);for(let n=0;n<t.length;n++){const o=bf.charAt(t[n]%bf.length);i+=0.5<Math.random()?o.toUpperCase():o}return i}function Go(t){return Array.from(t.getChildren()).reduce((n,e)=>n+e.data,'')}function Yo(){return new xf}function Xo(a,e,t,n){if(P(a)){for(const o of a)Xo(o,e,t,n);return}const o=Array.from(a.getAttributeKeys());o.push(e.key);const s={name:a.name||'$text',attributes:o,inside:t.context};n.schema.check(s)&&a.setAttribute(e.key,e.value)}function Zo(){return new Af}function ei(n){const e=n.next();return e.done?null:e.value}function ti(t){return'blockQuote'==t.parent.name?t.parent:null}function ni(a){let e=0,t;const n=[];for(;e<a.length;){const o=a[e],i=a[e+1];t||(t=ry.createBefore(o)),i&&o.nextSibling==i||(n.push(new Zs(t,ry.createAfter(o))),t=null),e++}return n}function oi(i,e){const t=i.check({name:'blockQuote',inside:ry.createBefore(e)}),n=i.check({name:e.name,attributes:Array.from(e.getAttributeKeys()),inside:'blockQuote'});return t&&n}function ii(a,s=512){try{const e=a.match(Hf)[1],t=atob(a.replace(Hf,'')),o=[];for(let i=0;i<t.length;i+=s){const a=t.slice(i,i+s),n=Array(a.length);for(let t=0;t<a.length;t++)n[t]=a.charCodeAt(t);o.push(new Uint8Array(n))}return new Blob(o,{type:e})}catch(t){throw new Error('Problem with decoding Base64 image data.')}}function ri(n){if('string'!=typeof n)return!1;const o=n.match(Hf);return!!(o&&o.length)}function ai(){return(i,a,t,n)=>{if(t.test(a.input,{name:!0,class:'image'})&&n.schema.check({name:'image',inside:a.context,attributes:'src'})){const o=Array.from(a.input.getChildren()).find((t)=>t.is('img'));if(o&&o.hasAttribute('src')&&t.test(o,{name:!0})){const e=n.convertItem(o,t,a);a.context.push(e);const i=n.convertChildren(a.input,t,a);a.context.pop(),yc.insert(ry.createAt(e),i),a.output=e}}}}function si(i,e,t=li){for(const n of i)n.on(`addAttribute:${e}:image`,t()),n.on(`changeAttribute:${e}:image`,t()),n.on(`removeAttribute:${e}:image`,t())}function di(){return(s,l,e,t)=>{const o=s.name.split(':'),n=o[0]+':'+o[1],i=l.item;if(e.consume(i,n)){const a=t.mapper.toViewElement(i),s=a.getChild(0),e=o[0];if('removeAttribute'==e){const t=l.attributeOldValue;t.data&&(s.removeAttribute('srcset'),s.removeAttribute('sizes'),t.width&&s.removeAttribute('width'))}else{const t=l.attributeNewValue;t.data&&(s.setAttribute('srcset',t.data),s.setAttribute('sizes','100vw'),t.width&&s.setAttribute('width',t.width))}}}}function li(){return(s,l,e,t)=>{const o=s.name.split(':'),n=o[0]+':'+o[1],i=l.item;if(e.consume(i,n)){const a=t.mapper.toViewElement(i),e=a.getChild(0),n=o[0];'removeAttribute'==n?e.removeAttribute(l.attributeKey):e.setAttribute(l.attributeKey,l.attributeNewValue)}}}function ci(a,s,t,n){const o=s.input;if(t.test(o,{name:!0,attribute:['src']})){const i=mi({name:'image',attributes:['src']},s.context,n.schema);if(i){const e=Object.assign({},s);e.context=i,s.output=n.convertItem(o,t,e),Gf.add(s.output)}}}function mi(i,a,r){a=a.slice();for(const e={name:i.name,attributes:i.attributes,inside:a};a.length&&!r.check(e);){const t=a.pop(),n='string'==typeof t?t:t.name;if(r.limits.has(n))return null}return a.length?a:null}function ui(n,a){if(a.output&&a.output.is('element')){const t=[];for(let e=a.output.childCount-1;0<=e;e--){const n=a.output.getChild(e);if(Gf.has(n)){const o=a.output.childCount-e-1;let i=null;0<o&&(i=a.output.clone(!1),i.appendChildren(a.output.removeChildren(e+1,o))),n.remove(),t.shift(),i&&t.unshift(i),t.unshift(n),0<a.output.childCount&&t.unshift(a.output)}}t.length&&(a.output=new oc(t))}}function pi(n,e){return n&&e&&n.priority==e.priority&&fi(n.class)==fi(e.class)}function gi(n,e){return!!(n.priority>e.priority)||!(n.priority<e.priority)&&fi(n.class)>fi(e.class)}function fi(t){return Array.isArray(t)?t.sort().join(','):t}function hi(t){return!!t.getCustomProperty(Xf)}function bi(o,e={}){function i(t){return Array.isArray(t)?t:[t]}return o.setAttribute('contenteditable','false'),o.getFillerOffset=ki,o.addClass(eh),o.setCustomProperty(Xf,!0),e.label&&yi(o,e.label),_i(o,(n,e)=>n.addClass(...i(e.class)),(n,e)=>n.removeClass(...i(e.class))),o}function _i(a,e,t){const n=new Yf;n.on('change:top',(n,o)=>{o.oldDescriptor&&t(a,o.oldDescriptor),o.newDescriptor&&e(a,o.newDescriptor)}),a.setCustomProperty('addHighlight',(o,e)=>n.add(e)),a.setCustomProperty('removeHighlight',(o,e)=>n.remove(e))}function yi(n,e){n.setCustomProperty(Zf,e)}function wi(n){const e=n.getCustomProperty(Zf);return e?'function'==typeof e?e():e:''}function vi(i){return i.addClass('ck-editable'),i.setAttribute('contenteditable',i.isReadOnly?'false':'true'),i.on('change:isReadOnly',(e,t,n)=>{i.setAttribute('contenteditable',n?'false':'true')}),i.on('change:isFocused',(e,t,n)=>{n?i.addClass('ck-editable_focused'):i.removeClass('ck-editable_focused')}),i}function ki(){return null}function xi(i,e){return i.setCustomProperty(nh,!0),bi(i,{label:function(){const t=i.getChild(0),n=t.getAttribute('alt');return n?`${n} ${e}`:e}})}function Ai(t){return!!t.getCustomProperty(nh)&&hi(t)}function Ci(n){const e=n.getSelectedElement();return!!(e&&Ai(e))}function Ti(t){return t instanceof Js&&'image'==t.name}function Pi(){return new Gl('figure',{class:'image'},new sc('img'))}function Ei(t){return t==mc.arrowright||t==mc.arrowleft||t==mc.arrowup||t==mc.arrowdown}function Si(t){return t==mc.delete||t==mc.backspace}function Vi(t){return Z(t)==sh}function Oi(t){for(;t;){if(t instanceof Xl&&!(t instanceof zp))return!0;t=t.parent}return!1}function Ri({emitter:i,activator:a,callback:e,contextElements:t}){i.listenTo(document,'mousedown',(n,{target:o})=>{if(a()){for(const n of t)if(n.contains(o))return;e()}})}function Fi({view:o}){o.listenTo(o.element,'submit',(e,t)=>{t.preventDefault(),o.fire('submit')},{useCapture:!0})}function Ii(t){for(;t&&'html'!=t.tagName.toLowerCase();){if('static'!=Lp.window.getComputedStyle(t).position)return t;t=t.parentElement}return null}function Ni({element:p,target:e,positions:u,limiter:n,fitInViewport:g}){qa(e)&&(e=e()),qa(n)&&(n=n());const h=Ii(p.parentElement),r=new ng(p),a=new ng(e);let s,d;if(!n&&!g)[d,s]=Bi(u[0],a,r);else{const o=n&&new ng(n).getVisible(),e=g&&new ng(Lp.window);[d,s]=Mi(u,a,r,o,e)||Bi(u[0],a,r)}let{left:f,top:b}=Di(s);if(h){const n=Di(new ng(h)),e=Sn(h);f-=n.left,b-=n.top,f+=h.scrollLeft,b+=h.scrollTop,f-=e.left,b-=e.top}return{left:f,top:b,name:d}}function Bi(a,e,t){const{left:n,top:o,name:i}=a(e,t);return[i,t.clone().moveTo(n,o)]}function Mi(c,h,t,n,f){let b=0,r=0,e,a;const s=t.getArea();return c.some((l)=>{function d(){r=p,b=u,e=m,a=c}const[c,m]=Bi(l,h,t);let u,p;if(n)if(f){const t=n.getIntersection(f);u=t?t.getIntersectionArea(m):0}else u=n.getIntersectionArea(m);return f&&(p=f.getIntersectionArea(m)),f&&!n?p>r&&d():!f&&n?u>b&&d():p>r&&u>=b?d():p>=r&&u>b&&d(),u===s}),e?[a,e]:null}function Di({left:i,top:e}){const{scrollX:t,scrollY:n}=Lp.window;return{left:i+t,top:e+n}}function Li(t){return tg(t)?t:Pn(t)?t.commonAncestorContainer:'function'==typeof t?Li(t()):null}function ji(n,e){return n.top-e.height-Iy.arrowVerticalOffset}function qi(t){return t.bottom+Iy.arrowVerticalOffset}function zi(o){const e=o.plugins.get('ContextualBalloon');if(Ci(o.editing.view.selection)){const t=Hi(o);e.updatePosition(t)}}function Hi(o){const e=o.editing.view,t=Iy.defaultPositions;return{target:e.domConverter.viewToDom(e.selection.getSelectedElement()),positions:[t.northArrowSouth,t.southArrowNorth]}}function Wi(n){const e=/^image\/(jpeg|png|gif|bmp)$/;return e.test(n.type)}function $i(o){const e=o.getSelectedElement();if(e)return ry.createAfter(e);const i=o.getSelectedBlocks().next().value;if(i){if(i.isEmpty)return ry.createAt(i);const e=ry.createAfter(i);return o.focus.isTouching(e)?e:ry.createBefore(i)}return o.focus}function Ki(t){return Array.from(t.types).includes('text/html')&&''!==t.getData('text/html')}function Ui(){const t=new uc('div',{class:'ck-progress-bar'});return t.setCustomProperty(jh,!0),t}function Qi(n){for(const e of n.getChildren())if(e.getCustomProperty(jh))return e}function Ji(n,e){return e.check({name:'paragraph',inside:ry.createBefore(n)})}function Gi(i,a,t,n){if(t.test(a.input,{name:a.input.name})&&Xi(a.input,a.context,n.schema,!1)){a.context.push('paragraph');const o=n.convertItem(a.input,t,a);a.context.pop(),a.output=o}}function Yi(l,d,e,t){if(!d.output)return;const n=Wh.paragraphLikeElements.has(d.input.name)&&!d.output.is('element'),o=d.input.is('documentFragment')||d.input.is('element')&&d.output.is('element')||n;if(!o)return;const r=d.output.is('element');r&&d.context.push(d.output);let c=null;for(let o=0;o<d.output.childCount;o++){const i=d.output.getChild(o);Xi(i,d.context,t.schema,n)?(c?o--:(c=new Js('paragraph'),d.output.insertChildren(i.index,c)),i.remove(),c.appendChildren(i)):c=null}r&&d.context.pop()}function Xi(a,e,r,n){const s=a.name||'$text';return!n&&r.check({name:s,inside:e})?!1:!!r.check({name:'paragraph',inside:e})&&!!r.check({name:s,inside:e.concat('paragraph')})}function Zi(i,e){for(const t of i.getRootNames()){const n=i.getRoot(t);n.isEmpty?!$h.has(n)&&$h.set(n,e):$h.delete(n)}}function er(){for(const[i,e]of $h){const t=e.document,n=t.schema;n.check({name:'paragraph',inside:[i]})&&t.enqueueChanges(()=>{$h.delete(i),e.insert(ry.createAt(i),new Js('paragraph'))})}}function tr(o,e,i){return i.check({name:e,inside:ry.createBefore(o)})}function nr(i,e){const t=new rf(e);t.bind('label','isOn','isEnabled','withText','keystroke','tooltip').to(i);const n=new Zh(e);return new Xh(e,t,n)}function or(i,a){const r=nr(i,a),n=r.listView=new Gh(a);return n.items.bindTo(i.items).using((t)=>{const e=new Yh(a);return e.bind(...Object.keys(t)).to(t),e}),n.items.delegate('execute').to(r),r.panelView.children.add(n),r.on('change:isOpen',(n,e,t)=>{t?ir(r):r.stopListening(document)}),r.on('execute',()=>{r.isOpen=!1}),r.keystrokes.set('arrowdown',(o,e)=>{r.isOpen&&(n.focus(),e())}),r.keystrokes.set('arrowup',(o,e)=>{r.isOpen&&(n.focusLast(),e())}),r}function ir(o){o.listenTo(document,'click',(e,{target:t})=>{o.element==t||o.element.contains(t)||(o.isOpen=!1)})}function rr(n,o){return Array.prototype.concat(...n.map((t)=>[t,o]))}function ar(i,e,t){const n=i.document;if(!n)throw new ba('view-placeholder-element-is-detached: Provided element is not placed in document.');sr(i),ab.has(n)||(ab.set(n,new Map),rb.listenTo(n,'render',()=>dr(n),{priority:'high'})),i.setAttribute('data-placeholder',e),ab.get(n).set(i,t),lr(i,t)}function sr(n){const e=n.document;n.removeClass('ck-placeholder'),n.removeAttribute('data-placeholder'),ab.has(e)&&ab.get(e).delete(n)}function dr(n){const e=ab.get(n);for(const[t,i]of e)lr(t,i)}function lr(a,e){const t=a.document;if(t){const n=t.selection,o=n.anchor;if(e&&!e())return void a.removeClass('ck-placeholder');const i=!Array.from(a.getChildren()).some((t)=>!t.is('uiElement'));return!t.isFocused&&i?void a.addClass('ck-placeholder'):void(i&&o&&o.parent!==a?a.addClass('ck-placeholder'):a.removeClass('ck-placeholder'))}}function cr(o,e){return()=>{const t=new Xl('figcaption');return t.document=o,t.setCustomProperty(sb,!0),ar(t,e),vi(t)}}function mr(n){for(const e of n.getChildren())if(e instanceof Js&&'caption'==e.name)return e;return null}function ur(n){const e=n.parent;return'figcaption'==n.name&&e&&'figure'==e.name&&e.hasClass('image')?{name:!0}:null}function pr(i,e,t,n){if('insert'===e){const o=new Gs({boundaries:t.range,ignoreElementEnd:!0});for(const i of o){const t=i.item;'elementStart'==i.type&&Ti(t)&&!mr(t)&&n.document.enqueueChanges(()=>{mr(t)||n.insert(ry.createAt(t,'end'),new Js('caption'))})}}}function gr(s,e=!0){return(t,l,o,i)=>{const r=l.item;if((r.childCount||e)&&Ti(r.parent)){if(!o.consume(l.item,'insert'))return;const e=i.mapper.toViewElement(l.range.start.parent),t=s instanceof Ul?s.clone(!0):s();r.childCount||t.addClass('ck-hidden'),fr(t,l.item,e,i.mapper)}}}function fr(a,e,t,n){const o=Zl.createAt(t,'end');gc.insert(o,a),n.bindElements(e,a)}function hr(o){const e=o.getAncestors({includeSelf:!0}),t=e.find((t)=>'caption'==t.name);return t&&t.parent&&'image'==t.parent.name?t:null}function br(p){return(e,u,n,o)=>{const i=e.name.split(':')[0],r=i+':imageStyle';if(n.test(u.item,r)){const e=wr(u.attributeNewValue,p),t=wr(u.attributeOldValue,p),a=o.mapper.toViewElement(u.item),s=vr(i,t,a),l=kr(i,e,a);(s||l)&&n.consume(u.item,r)}}}function _r(n){const e=n.filter((t)=>!t.isDefault);return(t,a,n,o)=>{for(const i of e)yr(i,a,n,o)}}function yr(s,e,t,n){const o=e.input,i=e.output;if(t.test(o,{class:s.className})&&Ti(i)){const r=[...i.getAttributeKeys(),'imageStyle'];n.schema.check({name:'image',inside:e.context,attributes:r})&&(t.consume(o,{class:s.className}),i.setAttribute('imageStyle',s.name))}}function wr(o,e){for(const t of e)if(t.name===o)return t}function vr(o,e,t){return e&&('changeAttribute'==o||'removeAttribute'==o)&&(t.removeClass(e.className),!0)}function kr(o,e,t){return e&&('addAttribute'==o||'changeAttribute'==o)&&(t.addClass(e.className),!0)}function xr(i){const a=vb.defaultStyles,t=vb.defaultIcons;if('string'==typeof i)a[i]?i=Object.assign({},a[i]):(ya.warn('image-style-not-found: There is no such image style of given name.',{name:i}),i={name:i});else if(a[i.name]){const e=a[i.name],n=Object.assign({},i);for(const o in e)i.hasOwnProperty(o)||(n[o]=e[o]);i=n}return'string'==typeof i.icon&&t[i.icon]&&(i.icon=t[i.icon]),i}function Ar(n,e){return new Zs(Cr(n,e,!0),Cr(n,e,!1))}function Cr(a,e,t){let n=a.textNode||(t?a.nodeBefore:a.nodeAfter),o=null;for(;n&&n.getAttribute('linkHref')==e;)o=n,n=t?n.previousSibling:n.nextSibling;return o?ry.createAt(o,t?'before':'after'):a}function Tr(t){return t.getAncestors().find((t)=>t instanceof Cb)}function Pr(a,e,t){const n=e?a[0]:a[a.length-1];if(n.is('listItem'))for(let o=n[e?'previousSibling':'nextSibling'],i=n.getAttribute('indent');o&&o.is('listItem')&&o.getAttribute('indent')>=t;)i>o.getAttribute('indent')&&(i=o.getAttribute('indent')),o.getAttribute('indent')==i&&a[e?'unshift':'push'](o),o=o[e?'previousSibling':'nextSibling']}function Er(n,e){return e.check({name:'listItem',attributes:['type','indent'],inside:ry.createBefore(n)})}function Sr(i,e){const t=Vr(i,!1);if(t)return void e.setAttribute(i,'type',t.getAttribute('type'));const n=Vr(i,!0);n&&e.setAttribute(i,'type',n.getAttribute('type'))}function Vr(o,e){for(let t=o[e?'nextSibling':'previousSibling'];t&&t.is('listItem')&&t.getAttribute('indent')>=o.getAttribute('indent');){if(t.getAttribute('indent')==o.getAttribute('indent'))return t;t=t[e?'nextSibling':'previousSibling']}return null}function Or(){const t=!this.isEmpty&&('ul'==this.getChild(0).name||'ol'==this.getChild(0).name);return this.isEmpty||t?0:null}function Rr(i,a,t,n){if(t.test(a.item,'insert')&&t.test(a.item,'addAttribute:type')&&t.test(a.item,'addAttribute:indent')){t.consume(a.item,'insert'),t.consume(a.item,'addAttribute:type'),t.consume(a.item,'addAttribute:indent');const o=a.item,e=Ur(o,n.mapper),i=n.mapper.toViewPosition(ry.createBefore(o));Gr(o,e,n.mapper,i)}}function Fr(s,e,t,n){if(!t.consume(e.item,'changeAttribute:type'))return;const o=n.mapper.toViewElement(e.item);gc.breakContainer(Zl.createBefore(o)),gc.breakContainer(Zl.createAfter(o));let i=o.parent;const r='numbered'==e.attributeNewValue?'ol':'ul';i=gc.rename(i,r),Jr(i,i.nextSibling),Jr(i.previousSibling,i)}function Ir(l,e,t,n){if(!t.consume(e.item,'remove'))return;let o=n.mapper.toViewPosition(e.sourcePosition);o=o.getLastMatchingPosition((t)=>!t.item.is('li'));const i=o.nodeAfter;gc.breakContainer(Zl.createBefore(i)),gc.breakContainer(Zl.createAfter(i));const r=i.parent,a=r.previousSibling,s=ec.createOn(r);gc.remove(s),a&&a.nextSibling&&Jr(a,a.nextSibling),Yr(e.item.getAttribute('indent')+1,e.sourcePosition,s.start,i,n.mapper),'$graveyard'==e.item.root.rootName&&n.mapper.unbindModelElement(e.item)}function Nr(l,e,t,n){if(!t.consume(e.item,'changeAttribute:indent'))return;const o=n.mapper.toViewElement(e.item);gc.breakContainer(Zl.createBefore(o)),gc.breakContainer(Zl.createAfter(o));const i=o.parent,r=i.previousSibling,a=ec.createOn(i);gc.remove(a);let s;r&&r.nextSibling&&(s=Jr(r,r.nextSibling)),s||(s=a.start),Yr(e.attributeOldValue+1,e.range.start,a.start,o,n.mapper),Gr(e.item,o,n.mapper,s)}function Br(i,a,e,t){if('listItem'!=a.item.name){let r=t.mapper.toViewPosition(a.range.start);const s=[];for(;('ul'==r.parent.name||'ol'==r.parent.name)&&(r=gc.breakContainer(r),'li'==r.parent.name);){const n=r,t=Zl.createAt(r.parent,'end');if(!n.isEqual(t)){const o=gc.remove(new ec(n,t));s.push(o)}r=Zl.createAfter(r.parent)}if(0<s.length){for(let e=0;e<s.length;e++){const n=r.nodeBefore,t=gc.insert(r,s[e]);if(r=t.end,0<e){const e=Jr(n,n.nextSibling);e&&e.parent==n&&r.offset--}}Jr(r.nodeBefore,r.nodeAfter)}}}function Mr(i,a,e,t){if(!a.item.is('listItem')){const o=t.mapper.toViewPosition(a.sourcePosition),e=o.nodeBefore,n=o.nodeAfter;Jr(e,n)}}function Dr(i,s,t,n){if(t.consume(s.input,{name:!0})){const o=new Js('listItem');s.indent=s.indent?s.indent:0,o.setAttribute('indent',s.indent);const e=s.input.parent&&'ol'==s.input.parent.name?'numbered':'bulleted';o.setAttribute('type',e),s.context.push(o),s.indent++;const l=new oc;l.appendChildren(o);for(const e of s.input.getChildren()){const i=n.convertItem(e,t,s);'ul'==e.name||'ol'==e.name?l.appendChildren(Array.from(i.getChildren())):yc.insert(ry.createAt(o,'end'),i)}s.indent--,s.context.pop(),s.output=l}}function Lr(o,i,e){if(e.test(i.input,{name:!0})){const n=Array.from(i.input.getChildren());for(const e of n)e.is('li')||e.remove()}}function jr(o,i,e){if(e.test(i.input,{name:!0})){if(0===i.input.childCount)return;const a=[...i.input.getChildren()];let e=!1,r=!0;for(const o of a)!e||o.is('ul')||o.is('ol')||o.remove(),o.is('text')?(r&&(o.data=o.data.replace(/^\s+/,'')),(!o.nextSibling||o.nextSibling.is('ul')||o.nextSibling.is('ol'))&&(o.data=o.data.replace(/\s+$/,''))):(o.is('ul')||o.is('ol'))&&(e=!0),r=!1}}function qr(o,a){const t=a.modelPosition.nodeBefore;if(t&&t.is('listItem')){const n=a.mapper.toViewElement(t),r=n.getAncestors().find((t)=>t.is('ul')||t.is('ol')),o=new Jl({startPosition:Zl.createAt(n,0)});for(const t of o)if('elementStart'==t.type&&t.item.is('li')){a.viewPosition=t.previousPosition;break}else if('elementEnd'==t.type&&t.item==r){a.viewPosition=t.nextPosition;break}}}function zr(l,d){const t=d.viewPosition,e=t.parent,n=d.mapper;if('ul'==e.name||'ol'==e.name){if(!t.isAtEnd){const o=n.toModelElement(t.nodeAfter);d.modelPosition=ry.createBefore(o)}else{const i=n.toModelElement(t.nodeBefore),e=n.getModelLength(t.nodeBefore);d.modelPosition=ry.createBefore(i).getShiftedBy(e)}l.stop()}else if('li'==e.name&&t.nodeBefore&&('ul'==t.nodeBefore.name||'ol'==t.nodeBefore.name)){const o=n.toModelElement(e);let i=1,a=t.nodeBefore;for(;a&&(a.is('ul')||a.is('ol'));)i+=n.getModelLength(a),a=a.previousSibling;d.modelPosition=ry.createBefore(o).getShiftedBy(i),l.stop()}}function Hr(a){return(e,t,r,o)=>{if('transparent'!=o.type)if('remove'==t){const e=r.range.end.offset-r.range.start.offset,t=r.sourcePosition._getTransformedByInsertion(r.range.start,e,!0);Wr(t,a,o),$r(t,!1,a,o)}else if('move'==t){const e=r.range.end.offset-r.range.start.offset,t=r.sourcePosition._getTransformedByInsertion(r.range.start,e,!0);Wr(t,a,o),$r(t,!1,a,o),Wr(r.range.start,a,o),$r(r.range.start,!1,a,o),Wr(r.range.end,a,o),$r(r.range.end,!0,a,o)}else if('rename'==t&&'listItem'==r.oldName&&'listItem'!=r.newName){const e=r.element;a.enqueueChanges(()=>{o.removeAttribute(e,'indent').removeAttribute(e,'type')});const t=ry.createAfter(r.element);Wr(t,a,o)}else'insert'==t&&(Wr(r.range.start,a,o),$r(r.range.start,!1,a,o),Wr(r.range.end,a,o),$r(r.range.end,!0,a,o))}}function Wr(i,e,t){let n=i.nodeAfter;n&&'listItem'==n.name&&e.enqueueChanges(()=>{const a=n.previousSibling,e=a&&a.is('listItem')?a.getAttribute('indent')+1:0;let s=n.getAttribute('indent')-e;const i=[];for(;n&&'listItem'==n.name&&n.getAttribute('indent')>e;){s>n.getAttribute('indent')&&(s=n.getAttribute('indent'));const t=n.getAttribute('indent')-s;i.push({item:n,indent:t}),n=n.nextSibling}if(0<i.length)for(const n of i.reverse())t.setAttribute(n.item,'indent',n.indent)})}function $r(a,s,e,l){let o=a[s?'nodeBefore':'nodeAfter'];o&&o.is('listItem')&&0!==o.getAttribute('indent')&&e.enqueueChanges(()=>{const i=Xr(o,!s);if(i&&i!=o)for(const e=i.getAttribute('indent'),t=i.getAttribute('type');o&&o.is('listItem')&&o.getAttribute('indent')>=e;)o.getAttribute('type')!=t&&o.getAttribute('indent')==e&&l.setAttribute(o,'type',t),o=o[s?'previousSibling':'nextSibling']})}function Kr(i,[e,a]){let t=e.is('documentFragment')?e.getChild(0):e;if(t&&t.is('listItem')){const n=a.getFirstPosition();let o=null;if(n.parent.is('listItem')?o=n.parent:n.nodeBefore&&n.nodeBefore.is('listItem')&&(o=n.nodeBefore),o){const n=o.getAttribute('indent');if(0<n)for(;t&&t.is('listItem');)t.setAttribute('indent',t.getAttribute('indent')+n),t=t.nextSibling}}}function Ur(a,e){const t='numbered'==a.getAttribute('type')?'ol':'ul',n=new Db,o=new Gl(t,null);return o.appendChildren(n),e.bindElements(a,n),n}function Qr(p,e){const t=e.getNext?'nextSibling':'previousSibling',n=e.getNext?'nodeAfter':'nodeBefore',o=!!e.checkAllSiblings,u=!!e.sameIndent,r=!!e.biggerIndent,a=!!e.smallerIndent,s=!!e.isMapped,m=p instanceof Js?p.getAttribute('indent'):e.indent;for(let l=p instanceof Js?p[t]:p[n];l&&'listItem'==l.name;){const n=l.getAttribute('indent');if(u&&m==n||r&&m<n||a&&m>n){if(!s||e.mapper.toViewElement(l))return l;l=l[t];continue}if(!o)return null;l=l[t]}return null}function Jr(n,e){return n&&e&&('ul'==n.name||'ol'==n.name)&&n.name==e.name?gc.mergeContainers(Zl.createAfter(n)):null}function Gr(l,c,t,e){const o=c.parent;let i=Qr(l,{sameIndent:!0,smallerIndent:!0,checkAllSiblings:!0}),r;if(i&&i.getAttribute('indent')==l.getAttribute('indent')){const n=t.toViewElement(i);r=gc.breakContainer(Zl.createAfter(n))}else i=l.previousSibling,r=i&&'listItem'==i.name?i.getAttribute('indent')<l.getAttribute('indent')?t.toViewPosition(ry.createAt(i,'end')):e.parent.is('ul')||e.parent.is('ol')?gc.breakContainer(e):e:t.toViewPosition(ry.createBefore(l));r=Zr(r),gc.insert(r,o);const p=Qr(l,{biggerIndent:!0,getNext:!0,isMapped:!0,mapper:t});if(p){const n=t.toViewElement(p);gc.breakContainer(Zl.createBefore(n));const e=Zl.createBefore(n.parent),o=Xr(p,!1),i=t.toViewElement(o),r=gc.breakContainer(Zl.createAfter(i)),a=new ec(e,r),s=Zl.createAt(c,'end');gc.move(a,s)}Jr(o,o.nextSibling),Jr(o.previousSibling,o)}function Yr(l,d,t,n,o){const i=Qr(d,{sameIndent:!0,smallerIndent:!0,checkAllSiblings:!0,indent:l}),c=i?i.getAttribute('indent'):null;let a;if(!i)a=t;else if(c==l){const t=o.toViewElement(i).parent;a=Zl.createAfter(t)}else{const t=ry.createAt(i,'end');a=o.toViewPosition(t)}a=Zr(a);for(const e of[...n.getChildren()])(e.is('ul')||e.is('ol'))&&(a=gc.move(ec.createOn(e),a).end,Jr(e,e.nextSibling),Jr(e.previousSibling,e))}function Xr(a,e){const t=a.getAttribute('indent'),n=e?'previousSibling':'nextSibling';let o=a;for(;a[n]&&a[n].is('listItem')&&a[n].getAttribute('indent')>=t;)a=a[n],a.getAttribute('indent')==t&&(o=a);return o}function Zr(t){return t.getLastMatchingPosition((t)=>t.item.is('uiElement'))}function ea(o){let i=1;for(const t of o.getChildren())if('ul'==t.name||'ol'==t.name)for(const n of t.getChildren())i+=ea(n);return i}var ta=Number.POSITIVE_INFINITY,na=Math.min,oa=Math.max,ia=Math.floor;Object.defineProperty(e,'__esModule',{value:!0});var ra=Object.getPrototypeOf,aa=function(t){return ra(Object(t))},sa=function(n){var e=!1;if(null!=n&&'function'!=typeof n.toString)try{e=!!(n+'')}catch(e){}return e},da=function(t){return!!t&&'object'==typeof t},la=Object.prototype,ca=Function.prototype.toString,ma=la.hasOwnProperty,ua=ca.call(Object),pa=la.toString,ga=function(o){if(!da(o)||'[object Object]'!=pa.call(o)||sa(o))return!1;var e=aa(o);if(null===e)return!0;var t=ma.call(e,'constructor')&&e.constructor;return'function'==typeof t&&t instanceof t&&ca.call(t)==ua};class fa{constructor(n,e){this._config={},e&&this.define(e),n&&this._setObjectToTarget(this._config,n)}set(n,e){this._setToTarget(this._config,n,e)}define(n,e){this._setToTarget(this._config,n,e,!0)}get(t){return this._getFromSource(this._config,t)}_setToTarget(a,e,t,n=!1){if(ga(e))return void this._setObjectToTarget(a,e,n);const o=e.split('.');e=o.pop();for(const i of o)ga(a[i])||(a[i]={}),a=a[i];return ga(t)?(ga(a[e])||(a[e]={}),a=a[e],void this._setObjectToTarget(a,t,n)):void(n&&'undefined'!=typeof a[e]||(a[e]=t))}_getFromSource(i,e){const t=e.split('.');e=t.pop();for(const n of t){if(!ga(i[n])){i=null;break}i=i[n]}return i?i[e]:void 0}_setObjectToTarget(i,e,t){Object.keys(e).forEach((n)=>{this._setToTarget(i,n,e[n],t)})}}const ha='https://ckeditor5.github.io/docs/nightly/ckeditor5/latest/framework/guides/support/error-codes.html';class ba extends Error{constructor(o,e){o=n(o),e&&(o+=' '+JSON.stringify(e)),super(o),this.name='CKEditorError',this.data=e}static isCKEditorError(t){return t instanceof ba}}const _a={error(o,e){console.error(n(o),e)},warn(o,e){console.warn(n(o),e)}};var ya=_a;class wa{constructor(n,e=[]){this._editor=n,this._availablePlugins=new Map,this._plugins=new Map;for(const t of e)this._availablePlugins.set(t,t),t.pluginName&&this._availablePlugins.set(t.pluginName,t)}*[Symbol.iterator](){for(const t of this._plugins)'function'==typeof t[0]&&(yield t)}get(t){return this._plugins.get(t)}load(p,g=[]){function t(o){return r.includes(o)||i.get(o)||s.has(o)?void 0:n(o).catch((n)=>{throw ya.error('plugincollection-load: It was not possible to load the plugin.',{plugin:o}),n})}function n(n){return new Promise((l)=>{s.add(n),n.requires&&n.requires.forEach((i)=>{const o=h(i);if(g.includes(o))throw new ba('plugincollection-required: Cannot load a plugin because one of its dependencies is listed inthe `removePlugins` option.',{plugin:o,requiredBy:n});t(o)});const o=new n(a);i._add(n,o),d.push(o),l()})}function h(t){return'function'==typeof t?t:i._availablePlugins.get(t)}function e(t){return t.map((t)=>h(t)).filter((t)=>!!t)}const i=this,a=this._editor,s=new Set,d=[],o=e(p),r=e(g),l=function(o){const e=[];for(const t of o)h(t)||e.push(t);return e.length?e:null}(p);if(l){const t='plugincollection-plugin-not-found: Some plugins are not available and could not be loaded.';return ya.error(t,{plugins:l}),Promise.reject(new ba(t,{plugins:l}))}return Promise.all(o.map(t)).then(()=>d)}destroy(){const t=Array.from(this).map(([,t])=>t).filter((t)=>'function'==typeof t.destroy).map((t)=>t.destroy());return Promise.all(t)}_add(o,i){this._plugins.set(o,i);const t=o.pluginName;t&&(this._plugins.has(t)?ya.warn('plugincollection-plugin-name-conflict: Two plugins with the same name were loaded.',{pluginName:t,plugin1:this._plugins.get(t).constructor,plugin2:o}):this._plugins.set(t,i))}}class va{constructor(){this._commands=new Map}add(n,e){this._commands.set(n,e)}get(t){return this._commands.get(t)}execute(o,...i){const t=this.get(o);if(!t)throw new ba('commandcollection-command-not-found: Command does not exist.',{commandName:o});t.execute(...i)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const t of this.commands())t.destroy()}}let ka={};class xa{constructor(t){this.lang=t||'en',this.t=(...t)=>this._t(...t)}_t(i,a){let e=o(this.lang,i);return a&&(e=e.replace(/%(\d+)/g,(t,e)=>e<a.length?a[e]:t)),e}}var Aa=function(){return function t(){t.called=!0}};class Ca{constructor(n,e){this.source=n,this.name=e,this.path=[],this.stop=Aa(),this.off=Aa()}}const Ta={get(t){return'number'==typeof t?t:this[t]||this.normal},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5},Pa=Symbol('listeningTo'),Ea=Symbol('emitterId'),Sa={on(i,s,e={}){u(this,i);const n=p(this,i),o=Ta.get(e.priority);s={callback:s,priority:o};for(const t of n){let i=!1;for(let e=0;e<t.length;e++)if(t[e].priority<o){t.splice(e,0,s),i=!0;break}i||t.push(s)}},once(o,i,e){this.on(o,function(t,...e){t.off(),i.call(this,t,...e)},e)},off(o,i){const e=p(this,o);for(const t of e)for(let n=0;n<t.length;n++)t[n].callback==i&&(t.splice(n,1),n--)},listenTo(c,p,t,n){let o,i;this[Pa]||(this[Pa]={});const r=this[Pa];l(c)||d(c);const a=l(c);(o=r[a])||(o=r[a]={emitter:c,callbacks:{}}),(i=o.callbacks[p])||(i=o.callbacks[p]=[]),i.push(t),c.on(p,t,n)},stopListening(s,d,t){const n=this[Pa];let o=s&&l(s);const i=n&&o&&n[o],r=i&&d&&i.callbacks[d];if(n&&(!s||i)&&(!d||r))if(t)s.off(d,t);else if(r){for(;t=r.pop();)s.off(d,t);delete i.callbacks[d]}else if(i){for(d in i.callbacks)this.stopListening(s,d);delete n[o]}else{for(o in n)this.stopListening(n[o].emitter);delete this[Pa]}},fire(i,...a){const s=i instanceof Ca?i:new Ca(this,i),n=s.name;let o=g(this,n);if(s.path.push(this),o){const i=[s,...a];o=Array.from(o);for(let e=0;e<o.length&&(o[e].callback.apply(this,i),s.off.called&&(delete s.off.called,this.off(n,o[e].callback)),!s.stop.called);e++);}if(this._delegations){const t=this._delegations.get(n),e=this._delegations.get('*');t&&f(t,s,a),e&&f(e,s,a)}return s.return},delegate(...i){return{to:(a,t)=>{this._delegations||(this._delegations=new Map);for(const n of i){const o=this._delegations.get(n);o?o.set(a,t):this._delegations.set(n,new Map([[a,t]]))}}}},stopDelegating(o,i){if(this._delegations)if(!o)this._delegations.clear();else if(!i)this._delegations.delete(o);else{const e=this._delegations.get(o);e&&e.delete(i)}}};var Va=Sa,Oa=function(n,e){return n===e||n!==n&&e!==e},Ra=Object.prototype,Fa=Ra.hasOwnProperty,Ia=function(i,e,t){var n=i[e];Fa.call(i,e)&&Oa(n,t)&&(void 0!==t||e in i)||(i[e]=t)},Na=function(l,e,t,n){t||(t={});for(var o=-1,i=e.length;++o<i;){var r=e[o],a=n?n(t[r],l[r],r,t,l):l[r];Ia(t,r,a)}return t},Ba=function(n){return function(e){return null==e?void 0:e[n]}},Ma=Ba('length'),Da=function(n){var o=typeof n;return!!n&&('object'==o||'function'==o)},La=Object.prototype,ja=La.toString,qa=function(n){var e=Da(n)?ja.call(n):'';return'[object Function]'==e||'[object GeneratorFunction]'==e},za=function(t){return'number'==typeof t&&-1<t&&0==t%1&&9007199254740991>=t},Ha=function(t){return null!=t&&za(Ma(t))&&!qa(t)},Wa=/^(?:0|[1-9]\d*)$/,$a=function(n,o){return o=null==o?9007199254740991:o,!!o&&('number'==typeof n||Wa.test(n))&&-1<n&&0==n%1&&n<o},Ka=function(i,e,a){if(!Da(a))return!1;var n=typeof e;return('number'==n?!!(Ha(a)&&$a(e,a.length)):!!('string'==n&&e in a))&&Oa(a[e],i)},Ua=function(i,e,t){var n=t.length;return 0===n?i.call(e):1===n?i.call(e,t[0]):2===n?i.call(e,t[0],t[1]):3===n?i.call(e,t[0],t[1],t[2]):i.apply(e,t)},Qa=Object.prototype,Ja=Qa.toString,Ga=function(t){return'symbol'==typeof t||da(t)&&'[object Symbol]'==Ja.call(t)},Ya=0/0,Xa=/^\s+|\s+$/g,Za=/^[-+]0x[0-9a-f]+$/i,es=/^0b[01]+$/i,ts=/^0o[0-7]+$/i,ns=parseInt,os=function(o){if('number'==typeof o)return o;if(Ga(o))return Ya;if(Da(o)){var i=qa(o.valueOf)?o.valueOf():o;o=Da(i)?i+'':i}if('string'!=typeof o)return 0===o?o:+o;o=o.replace(Xa,'');var t=es.test(o);return t||ts.test(o)?ns(o.slice(2),t?2:8):Za.test(o)?Ya:+o},is=1/0,ay=function(n){if(!n)return 0===n?n:0;if(n=os(n),n===is||n===-is){var o=0>n?-1:1;return 1.7976931348623157e308*o}return n===n?n:0},as=function(o){var e=ay(o),t=e%1;return e===e?t?e-t:e:0},ss=oa,ds=function(s,l){if('function'!=typeof s)throw new TypeError('Expected a function');return l=ss(void 0===l?s.length-1:as(l),0),function(){for(var e=arguments,t=-1,n=ss(e.length-l,0),o=Array(n);++t<n;)o[t]=e[l+t];switch(l){case 0:return s.call(this,o);case 1:return s.call(this,e[0],o);case 2:return s.call(this,e[0],e[1],o);}var i=Array(l+1);for(t=-1;++t<l;)i[t]=e[t];return i[l]=o,Ua(s,this,i)}},ls=Object.prototype,cs=function(o){var e=o&&o.constructor,i='function'==typeof e&&e.prototype||ls;return o===i},ms=t(0),us=ms.a.Reflect,ps=us,gs=function(o){for(var e=[],t;!(t=o.next()).done;)e.push(t.value);return e},fs=Object.prototype,hs=ps?ps.enumerate:void 0,bs=fs.propertyIsEnumerable;hs&&!bs.call({valueOf:1},'valueOf')&&(h=function(t){return gs(hs(t))});var _s=h,ys=function(i,e){for(var t=-1,n=Array(i);++t<i;)n[t]=e(t);return n},ws=function(t){return da(t)&&Ha(t)},vs=Object.prototype,ks=vs.hasOwnProperty,xs=vs.toString,As=vs.propertyIsEnumerable,Cs=function(t){return ws(t)&&ks.call(t,'callee')&&(!As.call(t,'callee')||'[object Arguments]'==xs.call(t))},Ts=Array.isArray,Ps=Ts,Es=Object.prototype,Ss=Es.toString,Vs=function(t){return'string'==typeof t||!Ps(t)&&da(t)&&'[object String]'==Ss.call(t)},Os=function(n){var e=n?n.length:void 0;return za(e)&&(Ps(n)||Vs(n)||Cs(n))?ys(e,String):null},Rs=Object.prototype,Fs=Rs.hasOwnProperty,Is=function(l){for(var e=-1,t=cs(l),n=_s(l),o=n.length,i=Os(l),c=i||[],a=c.length,s;++e<o;)s=n[e],!!i&&('length'==s||$a(s,a))||'constructor'==s&&(t||!Fs.call(l,s))||c.push(s);return c},Ns=Object.prototype,Bs=Ns.propertyIsEnumerable,Ms=!Bs.call({valueOf:1},'valueOf'),Ds=function(l){return ds(function(e,t){var n=-1,o=t.length,i=1<o?t[o-1]:void 0,d=2<o?t[2]:void 0;for(i=3<l.length&&'function'==typeof i?(o--,i):void 0,d&&Ka(t[0],t[1],d)&&(i=3>o?void 0:i,o=1),e=Object(e);++n<o;){var a=t[n];a&&l(e,a,n,i)}return e})}(function(o,e){if(Ms||cs(e)||Ha(e))return void Na(e,Is(e),o);for(var t in e)Ia(o,t,e[t])}),Ls=Ds;const js=Symbol('attributes'),qs=Symbol('boundObservables'),zs=Symbol('boundAttributes'),Hs={set(i,e){if(Da(i))return void Object.keys(i).forEach((e)=>{this.set(e,i[e])},this);b(this);const a=this[js];if(i in this&&!a.has(i))throw new ba('observable-set-cannot-override: Cannot override an existing property.');Object.defineProperty(this,i,{enumerable:!0,configurable:!0,get(){return a.get(i)},set(e){const t=a.get(i);t===e&&a.has(i)||(a.set(i,e),this.fire('change:'+i,i,e,t))}}),this[i]=e},bind(...o){if(!o.length||!Ub(o))throw new ba('observable-bind-wrong-attrs: All attributes must be strings.');if(new Set(o).size!==o.length)throw new ba('observable-bind-duplicate-attrs: Attributes must be unique.');b(this);const i=this[zs];o.forEach((t)=>{if(i.has(t))throw new ba('observable-bind-rebind: Cannot bind the same attribute more that once.')});const t=new Map;return o.forEach((n)=>{const a={attr:n,to:[]};i.set(n,a),t.set(n,a)}),{to:_,_observable:this,_bindAttrs:o,_to:[],_bindings:t}},unbind(...o){if(!(js in this))return;const l=this[zs],t=this[qs];if(o.length){if(!Ub(o))throw new ba('observable-unbind-wrong-attrs: Attributes must be strings.');o.forEach((n)=>{const d=l.get(n);let o,i,r,a;d.to.forEach((n)=>{o=n[0],i=n[1],r=t.get(o),a=r[i],a.delete(d),a.size||delete r[i],Object.keys(r).length||(t.delete(o),this.stopListening(o,'change'))}),l.delete(n)})}else t.forEach((n,e)=>{this.stopListening(e,'change')}),t.clear(),l.clear()},decorate(n){const o=this[n];if(!o)throw new ba('observablemixin-cannot-decorate-undefined: Cannot decorate an undefined method.',{object:this,methodName:n});this.on(n,(t,e)=>{t.return=o.apply(this,e)}),this[n]=function(...e){return this.fire(n,e)}}};var Ws=Hs;Ls(Hs,Va);class $s{constructor(t){this.parent=null,this._attrs=T(t)}get index(){let t;if(!this.parent)return null;if(null===(t=this.parent.getChildIndex(this)))throw new ba('model-node-not-found-in-parent: The node\'s parent does not contain this node.');return t}get startOffset(){let t;if(!this.parent)return null;if(null===(t=this.parent.getChildStartOffset(this)))throw new ba('model-node-not-found-in-parent: The node\'s parent does not contain this node.');return t}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}get document(){return this.root==this?null:this.root.document||null}clone(){return new $s(this._attrs)}getPath(){const n=[];for(let e=this;e.parent;)n.unshift(e.startOffset),e=e.parent;return n}getAncestors(o={includeSelf:!1,parentFirst:!1}){const e=[];for(let t=o.includeSelf?this:this.parent;t;)e[o.parentFirst?'push':'unshift'](t),t=t.parent;return e}getCommonAncestor(i,e={}){const t=this.getAncestors(e),n=i.getAncestors(e);let o=0;for(;t[o]==n[o]&&t[o];)o++;return 0==o?null:t[o-1]}remove(){this.parent.removeChildren(this.index)}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}setAttribute(n,e){this._attrs.set(n,e)}setAttributesTo(t){this._attrs=T(t)}removeAttribute(t){return this._attrs.delete(t)}clearAttributes(){this._attrs.clear()}toJSON(){const t={};return this._attrs.size&&(t.attributes=[...this._attrs]),t}}class Ks extends $s{constructor(n,e){super(e),this.data=n||''}get offsetSize(){return this.data.length}is(t){return'text'==t}clone(){return new Ks(this.data,this.getAttributes())}toJSON(){const t=super.toJSON();return t.data=this.data,t}static fromJSON(t){return new Ks(t.data,t.attributes)}}class Us{constructor(o,e,t){if(this.textNode=o,0>e||e>o.offsetSize)throw new ba('model-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.');if(0>t||e+t>o.offsetSize)throw new ba('model-textproxy-wrong-length: Given length value is incorrect.');this.data=o.data.substring(e,e+t),this.offsetInText=e}get startOffset(){return null===this.textNode.startOffset?null:this.textNode.startOffset+this.offsetInText}get offsetSize(){return this.data.length}get endOffset(){return null===this.startOffset?null:this.startOffset+this.offsetSize}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}is(t){return'textProxy'==t}getPath(){const t=this.textNode.getPath();return 0<t.length&&(t[t.length-1]+=this.offsetInText),t}getAncestors(o={includeSelf:!1,parentFirst:!1}){const e=[];for(let t=o.includeSelf?this:this.parent;t;)e[o.parentFirst?'push':'unshift'](t),t=t.parent;return e}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}class Qs{constructor(t){this._nodes=[],t&&this.insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((n,e)=>n+e.offsetSize,0)}getNode(t){return this._nodes[t]||null}getNodeIndex(n){const e=this._nodes.indexOf(n);return-1==e?null:e}getNodeStartOffset(n){const e=this.getNodeIndex(n);return null===e?null:this._nodes.slice(0,e).reduce((n,e)=>n+e.offsetSize,0)}indexToOffset(n){if(n==this._nodes.length)return this.maxOffset;const e=this._nodes[n];if(!e)throw new ba('model-nodelist-index-out-of-bounds: Given index cannot be found in the node list.');return this.getNodeStartOffset(e)}offsetToIndex(o){let e=0;for(const t of this._nodes){if(o>=e&&o<e+t.offsetSize)return this.getNodeIndex(t);e+=t.offsetSize}if(e!=o)throw new ba('model-nodelist-offset-out-of-bounds: Given offset cannot be found in the node list.');return this.length}insertNodes(n,e){for(const t of e)if(!(t instanceof $s))throw new ba('model-nodelist-insertNodes-not-node: Trying to insert an object which is not a Node instance.');this._nodes.splice(n,0,...e)}removeNodes(n,e=1){return this._nodes.splice(n,e)}toJSON(){return this._nodes.map((t)=>t.toJSON())}}class Js extends $s{constructor(o,e,t){super(e),this.name=o,this._children=new Qs,t&&this.insertChildren(0,t)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}is(n,e=null){return e?'element'==n&&e==this.name:'element'==n||n==this.name}getChild(t){return this._children.getNode(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}clone(n=!1){const e=n?Array.from(this._children).map((t)=>t.clone(!0)):null;return new Js(this.name,this.getAttributes(),e)}offsetToIndex(t){return this._children.offsetToIndex(t)}appendChildren(t){this.insertChildren(this.childCount,t)}insertChildren(n,e){e=E(e);for(const t of e)null!==t.parent&&t.remove(),t.parent=this;this._children.insertNodes(n,e)}removeChildren(o,e=1){const t=this._children.removeNodes(o,e);for(const n of t)n.parent=null;return t}getNodeByPath(o){let e=this;for(const t of o)e=e.getChild(e.offsetToIndex(t));return e}toJSON(){const n=super.toJSON();if(n.name=this.name,0<this._children.length){n.children=[];for(const e of this._children)n.children.push(e.toJSON())}return n}static fromJSON(o){let e=null;if(o.children){e=[];for(const t of o.children)t.name?e.push(Js.fromJSON(t)):e.push(Ks.fromJSON(t))}return new Js(o.name,o.attributes,e)}}class Gs{constructor(n={}){if(!n.boundaries&&!n.startPosition)throw new ba('model-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.');const e=n.direction||'forward';if('forward'!=e&&'backward'!=e)throw new ba('model-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.',{direction:e});this.direction=e,this.boundaries=n.boundaries||null,this.position=n.startPosition?ry.createFromPosition(n.startPosition):ry.createFromPosition(this.boundaries['backward'==this.direction?'end':'start']),this.singleCharacters=!!n.singleCharacters,this.shallow=!!n.shallow,this.ignoreElementEnd=!!n.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}skip(a){let e,r,n,o;do n=this.position,o=this._visitedParent,({done:e,value:r}=this.next());while(!e&&a(r));e||(this.position=n,this._visitedParent=o)}next(){return'forward'==this.direction?this._next():this._previous()}_next(){const s=this.position,l=ry.createFromPosition(this.position),t=this._visitedParent;if(null===t.parent&&l.offset===t.maxOffset)return{done:!0};if(t===this._boundaryEndParent&&l.offset==this.boundaries.end.offset)return{done:!0};const n=l.textNode?l.textNode:l.nodeAfter;if(n instanceof Js)return this.shallow?l.offset++:(l.path.push(0),this._visitedParent=n),this.position=l,S('elementStart',n,s,l,1);if(n instanceof Ks){let o;if(this.singleCharacters)o=1;else{let i=n.endOffset;this._boundaryEndParent==t&&this.boundaries.end.offset<i&&(i=this.boundaries.end.offset),o=i-l.offset}const e=l.offset-n.startOffset,i=new Us(n,e,o);return l.offset+=o,this.position=l,S('text',i,s,l,o)}return l.path.pop(),l.offset++,this.position=l,this._visitedParent=t.parent,this.ignoreElementEnd?this._next():S('elementEnd',t,s,l)}_previous(){const s=this.position,l=ry.createFromPosition(this.position),t=this._visitedParent;if(null===t.parent&&0===l.offset)return{done:!0};if(t==this._boundaryStartParent&&l.offset==this.boundaries.start.offset)return{done:!0};const n=l.textNode?l.textNode:l.nodeBefore;if(n instanceof Js)return l.offset--,this.shallow?(this.position=l,S('elementStart',n,s,l,1)):(l.path.push(n.maxOffset),this.position=l,this._visitedParent=n,this.ignoreElementEnd?this._previous():S('elementEnd',n,s,l));if(n instanceof Ks){let o;if(this.singleCharacters)o=1;else{let i=n.startOffset;this._boundaryStartParent==t&&this.boundaries.start.offset>i&&(i=this.boundaries.start.offset),o=l.offset-i}const e=l.offset-n.startOffset,i=new Us(n,e-o,o);return l.offset-=o,this.position=l,S('text',i,s,l,o)}return l.path.pop(),this.position=l,this._visitedParent=t.parent,S('elementStart',t,s,l,1)}}var Ys=function(n){var e=n?n.length:0;return e?n[e-1]:void 0};class ry{constructor(n,e){if(!n.is('element')&&!n.is('documentFragment'))throw new ba('model-position-root-invalid: Position root invalid.');if(!(e instanceof Array)||0===e.length)throw new ba('model-position-path-incorrect: Position path must be an array with at least one item.',{path:e});e=n.getPath().concat(e),n=n.root,this.root=n,this.path=e}get offset(){return Ys(this.path)}set offset(t){this.path[this.path.length-1]=t}get parent(){let n=this.root;for(let e=0;e<this.path.length-1;e++)n=n.getChild(n.offsetToIndex(this.path[e]));return n}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){const t=this.parent.getChild(this.index);return t instanceof Ks&&t.startOffset<this.offset?t:null}get nodeAfter(){return null===this.textNode?this.parent.getChild(this.index):null}get nodeBefore(){return null===this.textNode?this.parent.getChild(this.index-1):null}get isAtStart(){return 0===this.offset}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(n){if(this.root!=n.root)return'different';const e=V(this.path,n.path);return'same'===e?'same':'prefix'===e?'before':'extension'===e?'after':this.path[e]<n.path[e]?'before':'after'}getLastMatchingPosition(o,e={}){e.startPosition=this;const t=new Gs(e);return t.skip(o),t.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){return this.parent.is('documentFragment')?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonPath(o){if(this.root!=o.root)return[];const e=V(this.path,o.path),i='string'==typeof e?na(this.path.length,o.path.length):e;return this.path.slice(0,i)}getCommonAncestor(i){const e=this.getAncestors(),t=i.getAncestors();let n=0;for(;e[n]==t[n]&&e[n];)n++;return 0==n?null:e[n-1]}getShiftedBy(o){const e=ry.createFromPosition(this),t=e.offset+o;return e.offset=0>t?0:t,e}isAfter(t){return'after'==this.compareWith(t)}isBefore(t){return'before'==this.compareWith(t)}isEqual(t){return'same'==this.compareWith(t)}isTouching(i){let e=null,t=null;const n=this.compareWith(i);switch(n){case'same':return!0;case'before':e=ry.createFromPosition(this),t=ry.createFromPosition(i);break;case'after':e=ry.createFromPosition(i),t=ry.createFromPosition(this);break;default:return!1;}for(let n=e.parent;e.path.length+t.path.length;){if(e.isEqual(t))return!0;if(e.path.length>t.path.length){if(e.offset!==n.maxOffset)return!1;e.path=e.path.slice(0,-1),n=n.parent,e.offset++}else{if(0!==t.offset)return!1;t.path=t.path.slice(0,-1)}}}_getTransformedByDeletion(i,e){const t=ry.createFromPosition(this);if(this.root!=i.root)return t;if('same'==V(i.getParentPath(),this.getParentPath())){if(i.offset<this.offset){if(i.offset+e>this.offset)return null;t.offset-=e}}else if('prefix'==V(i.getParentPath(),this.getParentPath())){const n=i.path.length-1;if(i.offset<=this.path[n]){if(i.offset+e>this.path[n])return null;t.path[n]-=e}}return t}_getTransformedByInsertion(i,e,t){const a=ry.createFromPosition(this);if(this.root!=i.root)return a;if('same'==V(i.getParentPath(),this.getParentPath()))(i.offset<this.offset||i.offset==this.offset&&t)&&(a.offset+=e);else if('prefix'==V(i.getParentPath(),this.getParentPath())){const t=i.path.length-1;i.offset<=this.path[t]&&(a.path[t]+=e)}return a}_getTransformedByMove(a,e,t,n,o){let i=this._getTransformedByDeletion(a,t);return e=e._getTransformedByDeletion(a,t),i=null===i||o&&i.isEqual(a)?this._getCombined(a,e):i._getTransformedByInsertion(e,t,n),i}_getCombined(i,e){const t=i.path.length-1,n=ry.createFromPosition(e);return n.offset=n.offset+this.path[t]-i.offset,n.path=n.path.concat(this.path.slice(t+1)),n}static createAt(o,e){if(o instanceof ry)return this.createFromPosition(o);else{const t=o;if('end'==e)e=t.maxOffset;else{if('before'==e)return this.createBefore(t);if('after'==e)return this.createAfter(t);e||(e=0)}return this.createFromParentAndOffset(t,e)}}static createAfter(t){if(!t.parent)throw new ba('model-position-after-root: You cannot make a position after root.',{root:t});return this.createFromParentAndOffset(t.parent,t.endOffset)}static createBefore(t){if(!t.parent)throw new ba('model-position-before-root: You cannot make a position before root.',{root:t});return this.createFromParentAndOffset(t.parent,t.startOffset)}static createFromParentAndOffset(o,e){if(!o.is('element')&&!o.is('documentFragment'))throw new ba('model-position-parent-incorrect: Position parent have to be a element or document fragment.');const t=o.getPath();return t.push(e),new this(o.root,t)}static createFromPosition(t){return new this(t.root,t.path.slice())}static fromJSON(n,e){if('$graveyard'===n.root)return new ry(e.graveyard,n.path);if(!e.hasRoot(n.root))throw new ba('model-position-fromjson-no-root: Cannot create position for document. Root with specified name does not exist.',{rootName:n.root});return new ry(e.getRoot(n.root),n.path)}}class Zs{constructor(n,e=null){this.start=ry.createFromPosition(n),this.end=e?ry.createFromPosition(e):ry.createFromPosition(n)}*[Symbol.iterator](){yield*new Gs({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(i,e=!1){i.isCollapsed&&(e=!1);const t=this.containsPosition(i.start)||e&&this.start.isEqual(i.start),n=this.containsPosition(i.end)||e&&this.end.isEqual(i.end);return t&&n}containsItem(n){const e=ry.createBefore(n);return this.containsPosition(e)||this.start.isEqual(e)}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(n){const e=[];return this.isIntersecting(n)?(this.containsPosition(n.start)&&e.push(new Zs(this.start,n.start)),this.containsPosition(n.end)&&e.push(new Zs(n.end,this.end))):e.push(Zs.createFromRange(this)),e}getIntersection(o){if(this.isIntersecting(o)){let e=this.start,t=this.end;return this.containsPosition(o.start)&&(e=o.start),this.containsPosition(o.end)&&(t=o.end),new Zs(e,t)}return null}getMinimalFlatRanges(){const i=[],e=this.start.getCommonPath(this.end).length,a=ry.createFromPosition(this.start);for(let n=a.parent;a.path.length>e+1;){const e=n.maxOffset-a.offset;0!=e&&i.push(new Zs(a,a.getShiftedBy(e))),a.path=a.path.slice(0,-1),a.offset++,n=n.parent}for(;a.path.length<=this.end.path.length;){const e=this.end.path[a.path.length-1],t=e-a.offset;0!=t&&i.push(new Zs(a,a.getShiftedBy(t))),a.offset=e,a.path.push(0)}return i}getWalker(t={}){return t.boundaries=this,new Gs(t)}*getItems(n={}){n.boundaries=this,n.ignoreElementEnd=!0;const e=new Gs(n);for(const t of e)yield t.item}*getPositions(n={}){n.boundaries=this;const e=new Gs(n);yield e.position;for(const t of e)yield t.nextPosition}getTransformedByDelta(a){const e=[Zs.createFromRange(this)],t=new Set(['insert','move','remove','reinsert']);for(const r of a.operations)if(t.has(r.type))for(let t=0;t<e.length;t++){const n=e[t]._getTransformedByDocumentChange(r.type,a.type,r.targetPosition||r.position,r.howMany||r.nodes.maxOffset,r.sourcePosition);e.splice(t,1,...n),t+=n.length-1}return e}getTransformedByDeltas(o){const i=[Zs.createFromRange(this)];for(const t of o)for(let n=0;n<i.length;n++){const e=i[n].getTransformedByDelta(t);i.splice(n,1,...e),n+=e.length-1}for(let t=0;t<i.length;t++){const a=i[t];for(let e=t+1;e<i.length;e++){const t=i[e];(a.containsRange(t)||t.containsRange(a)||a.isEqual(t))&&i.splice(e,1)}}return i}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}_getTransformedByDocumentChange(a,r,s,n,o){if('insert'==a)return this._getTransformedByInsertion(s,n,!1,!1);else{const i=Zs.createFromPositionAndShift(o,n);if('merge'==r&&this.isCollapsed&&(this.start.isEqual(i.start)||this.start.isEqual(i.end))){const e=this.start.offset-i.start.offset;return[new Zs(s.getShiftedBy(e))]}if('split'==r&&this.isCollapsed&&this.end.isEqual(i.end))return[new Zs(s.getShiftedBy(n))];if((i.containsPosition(this.start)||i.start.isEqual(this.start))&&this.containsPosition(i.end)&&this.end.isAfter(s)){const i=this.start._getCombined(o,s._getTransformedByDeletion(o,n)),e=this.end._getTransformedByMove(o,s,n,!1,!1);return[new Zs(i,e)]}if((i.containsPosition(this.end)||i.end.isEqual(this.end))&&this.containsPosition(i.start)&&this.start.isBefore(s)){const i=this.start._getTransformedByMove(o,s,n,!0,!1),e=this.end._getCombined(o,s._getTransformedByDeletion(o,n));return[new Zs(i,e)]}return this._getTransformedByMove(o,s,n)}}_getTransformedByInsertion(a,e,t=!1,r=!1){if(t&&this.containsPosition(a))return[new Zs(this.start,a),new Zs(a._getTransformedByInsertion(a,e,!0),this.end._getTransformedByInsertion(a,e,this.isCollapsed))];else{const t=Zs.createFromRange(this),n=!!t.isCollapsed||r;return t.start=t.start._getTransformedByInsertion(a,e,!r),t.end=t.end._getTransformedByInsertion(a,e,n),[t]}}_getTransformedByMove(l,e,t){if(this.isCollapsed){const n=this.start._getTransformedByMove(l,e,t,!0,!1);return[new Zs(n)]}let n;const o=new Zs(l,l.getShiftedBy(t)),i=this.getDifference(o);let r=null;const a=this.getIntersection(o);1==i.length?r=new Zs(i[0].start._getTransformedByDeletion(l,t),i[0].end._getTransformedByDeletion(l,t)):2==i.length&&(r=new Zs(this.start,this.end._getTransformedByDeletion(l,t)));const s=e._getTransformedByDeletion(l,t);return n=r?r._getTransformedByInsertion(s,t,null!==a):[],a&&n.push(new Zs(a.start._getCombined(o.start,s),a.end._getCombined(o.start,s))),n}static createFromPositionAndShift(i,e){const t=i,n=i.getShiftedBy(e);return 0<e?new this(t,n):new this(n,t)}static createFromParentsAndOffsets(i,e,t,n){return new this(ry.createFromParentAndOffset(i,e),ry.createFromParentAndOffset(t,n))}static createFromRange(t){return new this(t.start,t.end)}static createIn(t){return this.createFromParentsAndOffsets(t,0,t,t.maxOffset)}static createOn(t){return this.createFromPositionAndShift(ry.createBefore(t),t.offsetSize)}static createCollapsedAt(i,e){const t=ry.createAt(i,e),n=ry.createFromPosition(t);return new Zs(t,n)}static createFromRanges(i){if(0===i.length)throw new ba('range-create-from-ranges-empty-array: At least one range has to be passed.');else if(1==i.length)return this.createFromRange(i[0]);const e=i[0];i.sort((n,e)=>n.start.isAfter(e.start)?1:-1);const a=i.indexOf(e),n=new this(e.start,e.end);for(let e=a-1;0<=e&&i[e].end.isEqual(n.start);e++)n.start=ry.createFromPosition(i[e].start);for(let e=a+1;e<i.length&&i[e].start.isEqual(n.end);e++)n.end=ry.createFromPosition(i[e].end);return n}static fromJSON(n,e){return new this(ry.fromJSON(n.start,e),ry.fromJSON(n.end,e))}}var ed=function(o,e){for(var t=o.length;t--;)if(Oa(o[t][0],e))return t;return-1},td=Array.prototype,nd=td.splice;O.prototype.clear=function(){this.__data__=[]},O.prototype['delete']=function(i){var e=this.__data__,t=ed(e,i);if(0>t)return!1;var n=e.length-1;return t==n?e.pop():nd.call(e,t,1),!0},O.prototype.get=function(o){var e=this.__data__,t=ed(e,o);return 0>t?void 0:e[t][1]},O.prototype.has=function(t){return-1<ed(this.__data__,t)},O.prototype.set=function(i,e){var t=this.__data__,n=ed(t,i);return 0>n?t.push([i,e]):t[n][1]=e,this};var od=O,id=Function.prototype.toString,rd=function(t){if(null!=t){try{return id.call(t)}catch(e){}try{return t+''}catch(e){}}return''},ad=/[\\^$.*+?()[\]{}|]/g,sd=/^\[object .+?Constructor\]$/,dd=Object.prototype,ld=Function.prototype.toString,cd=dd.hasOwnProperty,md=RegExp('^'+ld.call(cd).replace(ad,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$'),ud=function(n){if(!Da(n))return!1;var e=qa(n)||sa(n)?md:sd;return e.test(rd(n))},pd=function(o,e){var t=o[e];return ud(t)?t:void 0},gd=pd(Object,'create'),fd=gd,hd=Object.prototype,bd=hd.hasOwnProperty,_d=Object.prototype,yd=_d.hasOwnProperty;R.prototype.clear=function(){this.__data__=fd?fd(null):{}},R.prototype['delete']=function(t){return this.has(t)&&delete this.__data__[t]},R.prototype.get=function(o){var e=this.__data__;if(fd){var t=e[o];return'__lodash_hash_undefined__'===t?void 0:t}return bd.call(e,o)?e[o]:void 0},R.prototype.has=function(n){var e=this.__data__;return fd?void 0!==e[n]:yd.call(e,n)},R.prototype.set=function(o,e){var t=this.__data__;return t[o]=fd&&void 0===e?'__lodash_hash_undefined__':e,this};var wd=R,vd=pd(ms.a,'Map'),kd=vd,xd=function(n){var o=typeof n;return'string'==o||'number'==o||'symbol'==o||'boolean'==o?'__proto__'!==n:null===n},Ad=function(o,e){var i=o.__data__;return xd(e)?i['string'==typeof e?'string':'hash']:i.map};F.prototype.clear=function(){this.__data__={hash:new wd,map:new(kd||od),string:new wd}},F.prototype['delete']=function(t){return Ad(this,t)['delete'](t)},F.prototype.get=function(t){return Ad(this,t).get(t)},F.prototype.has=function(t){return Ad(this,t).has(t)},F.prototype.set=function(n,e){return Ad(this,n).set(n,e),this};var Cd=F;I.prototype.clear=function(){this.__data__=new od},I.prototype['delete']=function(t){return this.__data__['delete'](t)},I.prototype.get=function(t){return this.__data__.get(t)},I.prototype.has=function(t){return this.__data__.has(t)},I.prototype.set=function(o,e){var t=this.__data__;return t instanceof od&&200==t.__data__.length&&(t=this.__data__=new Cd(t.__data__)),t.set(o,e),this};var Td=I,Pd=function(i,e){for(var t=-1,n=i.length;++t<n&&!1!==e(i[t],t,i););return i},Ed=Object.prototype,Sd=Ed.hasOwnProperty,Vd=function(n,o){return Sd.call(n,o)||'object'==typeof n&&o in n&&null===aa(n)},Od=Object.keys,Rd=function(t){return Od(Object(t))},Fd=function(a){var e=cs(a);if(!(e||Ha(a)))return Rd(a);var t=Os(a),s=t||[],o=s.length;for(var i in a)!Vd(a,i)||!!t&&('length'==i||$a(i,o))||e&&'constructor'==i||s.push(i);return s},Id=function(n,e){return n&&Na(e,Fd(e),n)},Nd=function(o,e){if(e)return o.slice();var t=new o.constructor(o.length);return o.copy(t),t},Bd=function(i,e){var t=-1,n=i.length;for(e||(e=Array(n));++t<n;)e[t]=i[t];return e},Md=Object.getOwnPropertySymbols;Md||(N=function(){return[]});var Dd=N,Ld=function(n,e){return Na(n,Dd(n),e)},jd=function(a,e){for(var t=-1,n=e.length,o=a.length;++t<n;)a[o+t]=e[t];return a},qd=function(i,e,t){var n=e(i);return Ps(i)?n:jd(n,t(i))},zd=function(t){return qd(t,Fd,Dd)},Hd=pd(ms.a,'DataView'),Wd=Hd,$d=pd(ms.a,'Promise'),Kd=$d,Ud=pd(ms.a,'Set'),Qd=Ud,Jd=pd(ms.a,'WeakMap'),Gd=Jd,Yd='[object Map]',Xd='[object Promise]',Zd='[object Set]',el='[object WeakMap]',tl='[object DataView]',nl=Object.prototype,ol=nl.toString,il=rd(Wd),rl=rd(kd),al=rd(Kd),sl=rd(Qd),dl=rd(Gd);(Wd&&B(new Wd(new ArrayBuffer(1)))!=tl||kd&&B(new kd)!=Yd||Kd&&B(Kd.resolve())!=Xd||Qd&&B(new Qd)!=Zd||Gd&&B(new Gd)!=el)&&(B=function(i){var e=ol.call(i),t='[object Object]'==e?i.constructor:void 0,n=t?rd(t):void 0;if(n)switch(n){case il:return tl;case rl:return Yd;case al:return Xd;case sl:return Zd;case dl:return el;}return e});var ll=B,cl=Object.prototype,ml=cl.hasOwnProperty,ul=function(o){var e=o.length,t=o.constructor(e);return e&&'string'==typeof o[0]&&ml.call(o,'index')&&(t.index=o.index,t.input=o.input),t},pl=ms.a.Uint8Array,gl=pl,fl=function(n){var e=new n.constructor(n.byteLength);return new gl(e).set(new gl(n)),e},hl=function(o,e){var t=e?fl(o.buffer):o.buffer;return new o.constructor(t,o.byteOffset,o.byteLength)},bl=function(n,e){return n.set(e[0],e[1]),n},_l=function(a,e,t,n){var o=-1,i=a.length;for(n&&i&&(t=a[++o]);++o<i;)t=e(t,a[o],o,a);return t},yl=function(o){var i=-1,t=Array(o.size);return o.forEach(function(n,e){t[++i]=[e,n]}),t},wl=function(i,e,t){var n=e?t(yl(i),!0):yl(i);return _l(n,bl,new i.constructor)},vl=/\w*$/,kl=function(n){var e=new n.constructor(n.source,vl.exec(n));return e.lastIndex=n.lastIndex,e},xl=function(n,e){return n.add(e),n},Al=function(o){var i=-1,t=Array(o.size);return o.forEach(function(n){t[++i]=n}),t},Cl=function(i,e,t){var n=e?t(Al(i),!0):Al(i);return _l(n,xl,new i.constructor)},Tl=ms.a.Symbol,Pl=Tl,El=Pl?Pl.prototype:void 0,Sl=El?El.valueOf:void 0,Vl=function(t){return Sl?Object(Sl.call(t)):{}},Ol=function(o,e){var t=e?fl(o.buffer):o.buffer;return new o.constructor(t,o.byteOffset,o.length)},Rl=function(a,r,t,n){var o=a.constructor;return'[object ArrayBuffer]'===r?fl(a):'[object Boolean]'===r||'[object Date]'===r?new o(+a):'[object DataView]'===r?hl(a,n):'[object Float32Array]'===r||'[object Float64Array]'===r||'[object Int8Array]'===r||'[object Int16Array]'===r||'[object Int32Array]'===r||'[object Uint8Array]'===r||'[object Uint8ClampedArray]'===r||'[object Uint16Array]'===r||'[object Uint32Array]'===r?Ol(a,n):'[object Map]'===r?wl(a,n,t):'[object Number]'===r||'[object String]'===r?new o(a):'[object RegExp]'===r?kl(a):'[object Set]'===r?Cl(a,n,t):'[object Symbol]'===r?Vl(a):void 0},Fl=Object.create,Il=function(t){return Da(t)?Fl(t):{}},Nl=function(t){return'function'!=typeof t.constructor||cs(t)?{}:Il(aa(t))},Bl=t(5),Ml='[object Arguments]',Dl='[object Function]',Ll='[object GeneratorFunction]',jl='[object Object]',ql={};ql[Ml]=ql['[object Array]']=ql['[object ArrayBuffer]']=ql['[object DataView]']=ql['[object Boolean]']=ql['[object Date]']=ql['[object Float32Array]']=ql['[object Float64Array]']=ql['[object Int8Array]']=ql['[object Int16Array]']=ql['[object Int32Array]']=ql['[object Map]']=ql['[object Number]']=ql[jl]=ql['[object RegExp]']=ql['[object Set]']=ql['[object String]']=ql['[object Symbol]']=ql['[object Uint8Array]']=ql['[object Uint8ClampedArray]']=ql['[object Uint16Array]']=ql['[object Uint32Array]']=!0,ql['[object Error]']=ql[Dl]=ql['[object WeakMap]']=!1;var zl=M,Hl=function(t){return zl(t,!1,!0)};class Wl{constructor(){this.parent=null}get index(){let t;if(!this.parent)return null;if(-1==(t=this.parent.getChildIndex(this)))throw new ba('view-node-not-found-in-parent: The node\'s parent does not contain this node.');return t}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}get document(){return this.parent instanceof Wl?this.parent.document:null}getAncestors(o={includeSelf:!1,parentFirst:!1}){const e=[];for(let t=o.includeSelf?this:this.parent;t;)e[o.parentFirst?'push':'unshift'](t),t=t.parent;return e}getCommonAncestor(i,e={}){const t=this.getAncestors(e),n=i.getAncestors(e);let o=0;for(;t[o]==n[o]&&t[o];)o++;return 0==o?null:t[o-1]}remove(){this.parent.removeChildren(this.index)}_fireChange(n,e){this.fire('change:'+n,e),this.parent&&this.parent._fireChange(n,e)}toJSON(){const t=Hl(this);return delete t.parent,t}}r(Wl,Va);class $l extends Wl{constructor(t){super(),this._data=t}clone(){return new $l(this.data)}is(t){return'text'==t}get data(){return this._data}set data(t){this._fireChange('text',this),this._data=t}isSimilar(t){return!!(t instanceof $l)&&(this===t||this.data===t.data)}}class Kl{constructor(...t){this._patterns=[],this.add(...t)}add(...n){for(let e of n)('string'==typeof e||e instanceof RegExp)&&(e={name:e}),e.class&&('string'==typeof e.class||e.class instanceof RegExp)&&(e.class=[e.class]),this._patterns.push(e)}match(...n){for(const o of n)for(const i of this._patterns){const a=D(o,i);if(a)return{element:o,pattern:i,match:a}}return null}matchAll(...o){const i=[];for(const t of o)for(const a of this._patterns){const r=D(t,a);r&&i.push({element:t,pattern:a,match:r})}return 0<i.length?i:null}getElementName(){if(1!==this._patterns.length)return null;const n=this._patterns[0],o=n.name;return'function'!=typeof n&&o&&!(o instanceof RegExp)?o:null}}class Ul extends Wl{constructor(o,e,t){if(super(),this.name=o,this._attrs=ga(e)?C(e):new Map(e),this._children=[],t&&this.insertChildren(0,t),this._classes=new Set,this._attrs.has('class')){const t=this._attrs.get('class');W(this._classes,t),this._attrs.delete('class')}this._styles=new Map,this._attrs.has('style')&&(H(this._styles,this._attrs.get('style')),this._attrs.delete('style')),this._customProperties=new Map}get childCount(){return this._children.length}get isEmpty(){return 0===this._children.length}is(n,e=null){return e?'element'==n&&e==this.name:'element'==n||n==this.name}clone(o=!1){const e=[];if(o)for(const t of this.getChildren())e.push(t.clone(o));const t=new this.constructor(this.name,this._attrs,e);return t._classes=new Set(this._classes),t._styles=new Map(this._styles),t._customProperties=new Map(this._customProperties),t.getFillerOffset=this.getFillerOffset,t}appendChildren(t){return this.insertChildren(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){0<this._classes.size&&(yield'class'),0<this._styles.size&&(yield'style');for(const t of this._attrs.keys())yield t}*getAttributes(){yield*this._attrs.entries(),0<this._classes.size&&(yield['class',this.getAttribute('class')]),0<this._styles.size&&(yield['style',this.getAttribute('style')])}getAttribute(t){if('class'==t)return 0<this._classes.size?[...this._classes].join(' '):void 0;if('style'==t){if(0<this._styles.size){let o='';for(const[e,t]of this._styles)o+=`${e}:${t};`;return o}return}return this._attrs.get(t)}hasAttribute(t){return'class'==t?0<this._classes.size:'style'==t?0<this._styles.size:this._attrs.has(t)}setAttribute(n,e){this._fireChange('attributes',this),'class'==n?W(this._classes,e):'style'==n?H(this._styles,e):this._attrs.set(n,e)}insertChildren(i,e){this._fireChange('children',this);let t=0;e=$(e);for(const n of e)null!==n.parent&&n.remove(),n.parent=this,this._children.splice(i,0,n),i++,t++;return t}removeAttribute(t){return this._fireChange('attributes',this),'class'==t?!!(0<this._classes.size)&&(this._classes.clear(),!0):'style'==t?!!(0<this._styles.size)&&(this._styles.clear(),!0):this._attrs.delete(t)}removeChildren(o,e=1){this._fireChange('children',this);for(let t=o;t<o+e;t++)this._children[t].parent=null;return this._children.splice(o,e)}isSimilar(o){if(!(o instanceof Ul))return!1;if(this===o)return!0;if(this.name!=o.name)return!1;if(this._attrs.size!==o._attrs.size||this._classes.size!==o._classes.size||this._styles.size!==o._styles.size)return!1;for(const[e,t]of this._attrs)if(!o._attrs.has(e)||o._attrs.get(e)!==t)return!1;for(const e of this._classes)if(!o._classes.has(e))return!1;for(const[e,t]of this._styles)if(!o._styles.has(e)||o._styles.get(e)!==t)return!1;return!0}addClass(...t){this._fireChange('attributes',this),t.forEach((t)=>this._classes.add(t))}removeClass(...t){this._fireChange('attributes',this),t.forEach((t)=>this._classes.delete(t))}hasClass(...n){for(const e of n)if(!this._classes.has(e))return!1;return!0}getClassNames(){return this._classes.keys()}setStyle(o,e){if(this._fireChange('attributes',this),ga(o)){const e=Object.keys(o);for(const t of e)this._styles.set(t,o[t])}else this._styles.set(o,e)}getStyle(t){return this._styles.get(t)}getStyleNames(){return this._styles.keys()}hasStyle(...n){for(const e of n)if(!this._styles.has(e))return!1;return!0}removeStyle(...t){this._fireChange('attributes',this),t.forEach((t)=>this._styles.delete(t))}findAncestor(...n){const e=new Kl(...n);for(let t=this.parent;t;){if(e.match(t))return t;t=t.parent}return null}setCustomProperty(n,e){this._customProperties.set(n,e)}getCustomProperty(t){return this._customProperties.get(t)}removeCustomProperty(t){return this._customProperties.delete(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const o=Array.from(this._classes).sort().join(','),e=Array.from(this._styles).map((t)=>`${t[0]}:${t[1]}`).sort().join(';'),t=Array.from(this._attrs).map((t)=>`${t[0]}="${t[1]}"`).sort().join(' ');return this.name+(''==o?'':` class="${o}"`)+(''==e?'':` style="${e}"`)+(''==t?'':` ${t}`)}}class Ql{constructor(o,e,t){if(this.textNode=o,0>e||e>o.data.length)throw new ba('view-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.');if(0>t||e+t>o.data.length)throw new ba('view-textproxy-wrong-length: Given length value is incorrect.');this.data=o.data.substring(e,e+t),this.offsetInText=e}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}is(t){return'textProxy'==t}getAncestors(o={includeSelf:!1,parentFirst:!1}){const e=[];for(let t=o.includeSelf?this.textNode:this.parent;null!==t;)e[o.parentFirst?'push':'unshift'](t),t=t.parent;return e}}class Jl{constructor(t={}){if(!t.boundaries&&!t.startPosition)throw new ba('view-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.');if(t.direction&&'forward'!=t.direction&&'backward'!=t.direction)throw new ba('view-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.',{direction:t.direction});this.boundaries=t.boundaries||null,this.position=t.startPosition?Zl.createFromPosition(t.startPosition):Zl.createFromPosition(t.boundaries['backward'==t.direction?'end':'start']),this.direction=t.direction||'forward',this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}skip(i){let e,a,n;do n=this.position,({done:e,value:a}=this.next());while(!e&&i(a));e||(this.position=n)}next(){return'forward'==this.direction?this._next():this._previous()}_next(){let a=Zl.createFromPosition(this.position);const e=this.position,r=a.parent;if(null===r.parent&&a.offset===r.childCount)return{done:!0};if(r===this._boundaryEndParent&&a.offset==this.boundaries.end.offset)return{done:!0};let t;if(r instanceof $l){if(a.isAtEnd)return this.position=Zl.createAfter(r),this._next();t=r.data[a.offset]}else t=r.getChild(a.offset);if(t instanceof Ul)return this.shallow?a.offset++:a=new Zl(t,0),this.position=a,this._formatReturnValue('elementStart',t,e,a,1);if(!(t instanceof $l)){if('string'==typeof t){let n;if(this.singleCharacters)n=1;else{const e=r===this._boundaryEndParent?this.boundaries.end.offset:r.data.length;n=e-a.offset}const t=new Ql(r,a.offset,n);return a.offset+=n,this.position=a,this._formatReturnValue('text',t,e,a,n)}return a=Zl.createAfter(r),this.position=a,this.ignoreElementEnd?this._next():this._formatReturnValue('elementEnd',r,e,a)}if(this.singleCharacters)return a=new Zl(t,0),this.position=a,this._next();else{let o=t.data.length,n=t;return t==this._boundaryEndParent?(o=this.boundaries.end.offset,n=new Ql(t,0,o),a=Zl.createAfter(n)):a.offset++,this.position=a,this._formatReturnValue('text',n,e,a,o)}}_previous(){let a=Zl.createFromPosition(this.position);const e=this.position,r=a.parent;if(null===r.parent&&0===a.offset)return{done:!0};if(r==this._boundaryStartParent&&a.offset==this.boundaries.start.offset)return{done:!0};let s;if(r instanceof $l){if(a.isAtStart)return this.position=Zl.createBefore(r),this._previous();s=r.data[a.offset-1]}else s=r.getChild(a.offset-1);if(s instanceof Ul)return this.shallow?(a.offset--,this.position=a,this._formatReturnValue('elementStart',s,e,a,1)):(a=new Zl(s,s.childCount),this.position=a,this.ignoreElementEnd?this._previous():this._formatReturnValue('elementEnd',s,e,a));if(!(s instanceof $l)){if('string'==typeof s){let n;if(!this.singleCharacters){const e=r===this._boundaryStartParent?this.boundaries.start.offset:0;n=a.offset-e}else n=1;a.offset-=n;const t=new Ql(r,a.offset,n);return this.position=a,this._formatReturnValue('text',t,e,a,n)}return a=Zl.createBefore(r),this.position=a,this._formatReturnValue('elementStart',r,e,a,1)}if(this.singleCharacters)return a=new Zl(s,s.data.length),this.position=a,this._previous();else{let o=s.data.length,n=s;if(s==this._boundaryStartParent){const e=this.boundaries.start.offset;n=new Ql(s,e,s.data.length-e),o=n.data.length,a=Zl.createBefore(n)}else a.offset--;return this.position=a,this._formatReturnValue('text',n,e,a,o)}}_formatReturnValue(a,r,s,l,d){return r instanceof Ql&&(r.offsetInText+r.data.length==r.textNode.data.length&&('forward'!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?s=Zl.createAfter(r.textNode):(l=Zl.createAfter(r.textNode),this.position=l)),0===r.offsetInText&&('backward'!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?s=Zl.createBefore(r.textNode):(l=Zl.createBefore(r.textNode),this.position=l))),{done:!1,value:{type:a,item:r,previousPosition:s,nextPosition:l,length:d}}}}class Gl extends Ul{constructor(o,e,t){super(o,e,t),this.getFillerOffset=K}is(n,e=null){return e?'containerElement'==n&&e==this.name||super.is(n,e):'containerElement'==n||super.is(n)}}const Yl=Symbol('document');class Xl extends Gl{constructor(o,e,t){super(o,e,t),this.set('isReadOnly',!1),this.set('isFocused',!1)}get document(){return this.getCustomProperty(Yl)}set document(n){if(this.getCustomProperty(Yl))throw new ba('view-editableelement-document-already-set: View document is already set.');this.setCustomProperty(Yl,n),this.bind('isReadOnly').to(n),this.bind('isFocused').to(n,'isFocused',(e)=>e&&n.selection.editableElement==this),this.listenTo(n,'render',()=>{this.isFocused=n.isFocused&&n.selection.editableElement==this},{priority:'high'})}}r(Xl,Ws);class Zl{constructor(n,e){this.parent=n,this.offset=e}get nodeAfter(){return this.parent.is('text')?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is('text')?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return 0===this.offset}get isAtEnd(){const t=this.parent.is('text')?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;for(;!(t instanceof Xl);)if(t.parent)t=t.parent;else return null;return t}getShiftedBy(o){const e=Zl.createFromPosition(this),t=e.offset+o;return e.offset=0>t?0:t,e}getLastMatchingPosition(o,e={}){e.startPosition=this;const t=new Jl(e);return t.skip(o),t.position}getAncestors(){return this.parent.is('documentFragment')?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(i){const e=this.getAncestors(),t=i.getAncestors();let n=0;for(;e[n]==t[n]&&e[n];)n++;return 0==n?null:e[n-1]}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return'before'==this.compareWith(t)}isAfter(t){return'after'==this.compareWith(t)}compareWith(l){if(this.isEqual(l))return'same';if(this.parent===l.parent)return 0>this.offset-l.offset?'before':'after';const e=this.getAncestors(),t=l.getAncestors(),n=V(e,t);let o;switch(n){case 0:return'different';case'prefix':o=e.length-1;break;case'extension':o=t.length-1;break;default:o=n-1;}const i=e[o],r=e[o+1],a=t[o+1];if(i===this.parent){const t=this.offset-a.index;return 0>=t?'before':'after'}if(i===l.parent){const e=r.index-l.offset;return 0>e?'before':'after'}const s=r.index-a.index;return 0>s?'before':'after'}static createAt(o,e){if(o instanceof Zl)return this.createFromPosition(o);else{const t=o;if('end'==e)e=t.is('text')?t.data.length:t.childCount;else{if('before'==e)return this.createBefore(t);if('after'==e)return this.createAfter(t);e||(e=0)}return new Zl(t,e)}}static createAfter(t){if(t.is('textProxy'))return new Zl(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new ba('view-position-after-root: You can not make position after root.',{root:t});return new Zl(t.parent,t.index+1)}static createBefore(t){if(t.is('textProxy'))return new Zl(t.textNode,t.offsetInText);if(!t.parent)throw new ba('view-position-before-root: You can not make position before root.',{root:t});return new Zl(t.parent,t.index)}static createFromPosition(t){return new this(t.parent,t.offset)}}class ec{constructor(n,e=null){this.start=Zl.createFromPosition(n),this.end=e?Zl.createFromPosition(e):Zl.createFromPosition(n)}*[Symbol.iterator](){yield*new Jl({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let n=this.start.getLastMatchingPosition(U,{direction:'backward'}),e=this.end.getLastMatchingPosition(U);return n.parent.is('text')&&n.isAtStart&&(n=Zl.createBefore(n.parent)),e.parent.is('text')&&e.isAtEnd&&(e=Zl.createAfter(e.parent)),new ec(n,e)}getTrimmed(){let i=this.start.getLastMatchingPosition(U);if(i.isAfter(this.end)||i.isEqual(this.end))return new ec(i,i);let e=this.end.getLastMatchingPosition(U,{direction:'backward'});const t=i.nodeAfter,n=e.nodeBefore;return t&&t.is('text')&&(i=new Zl(t,0)),n&&n.is('text')&&(e=new Zl(n,n.data.length)),new ec(i,e)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(i,e=!1){i.isCollapsed&&(e=!1);const t=this.containsPosition(i.start)||e&&this.start.isEqual(i.start),n=this.containsPosition(i.end)||e&&this.end.isEqual(i.end);return t&&n}getDifference(n){const e=[];return this.isIntersecting(n)?(this.containsPosition(n.start)&&e.push(new ec(this.start,n.start)),this.containsPosition(n.end)&&e.push(new ec(n.end,this.end))):e.push(ec.createFromRange(this)),e}getIntersection(o){if(this.isIntersecting(o)){let e=this.start,t=this.end;return this.containsPosition(o.start)&&(e=o.start),this.containsPosition(o.end)&&(t=o.end),new ec(e,t)}return null}getWalker(t={}){return t.boundaries=this,new Jl(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}*getItems(n={}){n.boundaries=this,n.ignoreElementEnd=!0;const e=new Jl(n);for(const t of e)yield t.item}*getPositions(n={}){n.boundaries=this;const e=new Jl(n);yield e.position;for(const t of e)yield t.nextPosition}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}static createFromParentsAndOffsets(i,e,t,n){return new this(new Zl(i,e),new Zl(t,n))}static createFromRange(t){return new this(t.start,t.end)}static createFromPositionAndShift(i,e){const t=i,n=i.getShiftedBy(e);return 0<e?new this(t,n):new this(n,t)}static createIn(t){return this.createFromParentsAndOffsets(t,0,t,t.childCount)}static createOn(t){return this.createFromPositionAndShift(Zl.createBefore(t),1)}static createCollapsedAt(i,e){const t=Zl.createAt(i,e),n=Zl.createFromPosition(t);return new ec(t,n)}}class tc{constructor(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this.on('modelToViewPosition',(n,o)=>{if(!o.viewPosition){const t=this._modelToViewMapping.get(o.modelPosition.parent);o.viewPosition=this._findPositionIn(t,o.modelPosition.offset)}},{priority:'low'}),this.on('viewToModelPosition',(a,e)=>{if(e.modelPosition)return;let t=e.viewPosition.parent,n=this._viewToModelMapping.get(t);for(;!n;)t=t.parent,n=this._viewToModelMapping.get(t);const r=this._toModelOffset(e.viewPosition.parent,e.viewPosition.offset,t);e.modelPosition=ry.createFromParentAndOffset(n,r)},{priority:'low'})}bindElements(n,e){this._modelToViewMapping.set(n,e),this._viewToModelMapping.set(e,n)}unbindViewElement(n){const e=this.toModelElement(n);this._unbindElements(e,n)}unbindModelElement(n){const e=this.toViewElement(n);this._unbindElements(n,e)}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap}toModelElement(t){return this._viewToModelMapping.get(t)}toViewElement(t){return this._modelToViewMapping.get(t)}toModelRange(t){return new Zs(this.toModelPosition(t.start),this.toModelPosition(t.end))}toViewRange(t){return new ec(this.toViewPosition(t.start),this.toViewPosition(t.end))}toModelPosition(n){const o={viewPosition:n,mapper:this};return this.fire('viewToModelPosition',o),o.modelPosition}toViewPosition(n){const o={modelPosition:n,mapper:this};return this.fire('modelToViewPosition',o),o.viewPosition}registerViewToModelLength(n,e){this._viewToModelLengthCallbacks.set(n,e)}_toModelOffset(a,e,t){if(t!=a){const n=this._toModelOffset(a.parent,a.index,t),o=this._toModelOffset(a,e,a);return n+o}if(a.is('text'))return e;let n=0;for(let o=0;o<e;o++)n+=this.getModelLength(a.getChild(o));return n}_unbindElements(n,e){this._viewToModelMapping.delete(e),this._modelToViewMapping.delete(n)}getModelLength(o){if(this._viewToModelLengthCallbacks.get(o.name)){const e=this._viewToModelLengthCallbacks.get(o.name);return e(o)}if(this._viewToModelMapping.has(o))return 1;if(o.is('text'))return o.data.length;if(o.is('uiElement'))return 0;else{let e=0;for(const t of o.getChildren())e+=this.getModelLength(t);return e}}_findPositionIn(a,e){let t=0,n=0,o=0,i;if(a.is('text'))return new Zl(a,e);for(;n<e;)i=a.getChild(o),t=this.getModelLength(i),n+=t,o++;return n==e?this._moveViewPositionToTextNode(new Zl(a,o)):this._findPositionIn(i,e-(n-t))}_moveViewPositionToTextNode(o){const e=o.nodeBefore,t=o.nodeAfter;return e instanceof $l?new Zl(e,e.data.length):t instanceof $l?new Zl(t,0):o}}r(tc,Va);class nc{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(n,e){n instanceof Us&&(n=this._getSymbolForTextProxy(n)),this._consumable.has(n)||this._consumable.set(n,new Map),this._consumable.get(n).set(e,!0)}consume(n,e){return n instanceof Us&&(n=this._getSymbolForTextProxy(n)),!!this.test(n,e)&&(this._consumable.get(n).set(e,!1),!0)}test(i,e){i instanceof Us&&(i=this._getSymbolForTextProxy(i));const t=this._consumable.get(i);if(void 0===t)return null;const n=t.get(e);return void 0===n?null:n}revert(o,e){o instanceof Us&&(o=this._getSymbolForTextProxy(o));const t=this.test(o,e);return!1===t?(this._consumable.get(o).set(e,!0),!0):!0!==t&&null}_getSymbolForTextProxy(i){let e=null;const t=this._textProxyRegistry.get(i.startOffset);if(t){const n=t.get(i.endOffset);n&&(e=n.get(i.parent))}return e||(e=this._addSymbolForTextProxy(i.startOffset,i.endOffset,i.parent)),e}_addSymbolForTextProxy(a,e,t){const n=Symbol('textProxySymbol');let o,i;return o=this._textProxyRegistry.get(a),o||(o=new Map,this._textProxyRegistry.set(a,o)),i=o.get(e),i||(i=new Map,o.set(e,i)),i.set(t,n),n}}class oc{constructor(t){this.markers=new Map,this._children=new Qs,t&&this.insertChildren(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}is(t){return'documentFragment'==t}getChild(t){return this._children.getNode(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(o){let e=this;for(const t of o)e=e.getChild(e.offsetToIndex(t));return e}offsetToIndex(t){return this._children.offsetToIndex(t)}appendChildren(t){this.insertChildren(this.childCount,t)}insertChildren(n,e){e=Q(e);for(const t of e)null!==t.parent&&t.remove(),t.parent=this;this._children.insertNodes(n,e)}removeChildren(o,e=1){const t=this._children.removeNodes(o,e);for(const n of t)n.parent=null;return t}toJSON(){const n=[];for(const e of this._children)n.push(e.toJSON());return n}static fromJSON(o){const e=[];for(const t of o)t.name?e.push(Js.fromJSON(t)):e.push(Ks.fromJSON(t));return new oc(e)}}class ic{constructor(n,e={}){this._modelDocument=n,this.conversionApi=Ls({dispatcher:this},e)}convertChange(n,e){'remove'!==n&&e.range&&'$graveyard'==e.range.root.rootName||'remove'==n&&'$graveyard'==e.sourcePosition.root.rootName||'rename'==n&&'$graveyard'==e.element.root.rootName||('insert'==n||'reinsert'==n?this.convertInsertion(e.range):'move'==n?this.convertMove(e.sourcePosition,e.range):'remove'==n?this.convertRemove(e.sourcePosition,e.range):'addAttribute'==n||'removeAttribute'==n||'changeAttribute'==n?this.convertAttribute(n,e.range,e.key,e.oldValue,e.newValue):'rename'==n&&this.convertRename(e.element,e.oldName))}convertInsertion(i){const a=this._createInsertConsumable(i);for(const t of i){const r=t.item,n=Zs.createFromPositionAndShift(t.previousPosition,t.length),s={item:r,range:n};this._testAndFire('insert',s,a);for(const e of r.getAttributeKeys())s.attributeKey=e,s.attributeOldValue=null,s.attributeNewValue=r.getAttribute(e),this._testAndFire(`addAttribute:${e}`,s,a)}for(const e of this._modelDocument.markers){const t=e.getRange(),n=t.getIntersection(i);n&&J(i.start,e,this.conversionApi.mapper)&&this.convertMarker('addMarker',e.name,n)}}convertMove(o,e){if(e.start.isBefore(o)){this.convertInsertion(e);const t=o._getTransformedByInsertion(e.start,e.end.offset-e.start.offset);this.convertRemove(t,e)}else this.convertRemove(o,e),this.convertInsertion(e)}convertRemove(i,a){const t=this._createConsumableForRange(a,'remove');for(const n of a.getItems({shallow:!0}))this._testAndFire('remove',{sourcePosition:i,item:n},t)}convertAttribute(l,e,d,c,p){if(c!=p){const u=this._createConsumableForRange(e,l+':'+d);for(const r of e){const e=r.item,a=Zs.createFromPositionAndShift(r.previousPosition,r.length);this._testAndFire(`${l}:${d}`,{item:e,range:a,attributeKey:d,attributeOldValue:c,attributeNewValue:p},u)}}}convertRename(i,e){if(i.name!=e){const t=i.clone(!0);t.name=e,this.conversionApi.mapper.bindElements(t,this.conversionApi.mapper.toViewElement(i));const n=new oc;n.appendChildren(t),this.convertRemove(ry.createBefore(i),Zs.createOn(t)),this.convertInsertion(Zs.createOn(i))}}convertSelection(a){const i=Array.from(this._modelDocument.markers.getMarkersAtPosition(a.getFirstPosition())),r=this._createSelectionConsumable(a,i);this.fire('selection',{selection:a},r,this.conversionApi);for(const n of i){const o=n.getRange();if(!J(a.getFirstPosition(),n,this.conversionApi.mapper))continue;const s={selection:a,markerName:n.name,markerRange:o};r.test(a,'selectionMarker:'+n.name)&&this.fire('selectionMarker:'+n.name,s,r,this.conversionApi)}for(const n of a.getAttributeKeys()){const i={selection:a,key:n,value:a.getAttribute(n)};r.test(a,'selectionAttribute:'+i.key)&&this.fire('selectionAttribute:'+i.key,i,r,this.conversionApi)}}convertMarker(a,s,l){if(l.root.document&&'$graveyard'!=l.root.rootName){const d=a+':'+s;if(l.isCollapsed){const o=new nc;return o.add(l,d),void this.fire(d,{markerName:s,markerRange:l},o,this.conversionApi)}const o=this._createConsumableForRange(l,d);for(const i of l){const e=i.item;if(!o.test(e,d))continue;const c={item:e,range:Zs.createFromPositionAndShift(i.previousPosition,i.length),markerName:s,markerRange:l};this.fire(d,c,o,this.conversionApi)}}}_createInsertConsumable(o){const i=new nc;for(const t of o){const o=t.item;i.add(o,'insert');for(const e of o.getAttributeKeys())i.add(o,'addAttribute:'+e)}return i}_createConsumableForRange(i,e){const t=new nc;for(const n of i.getItems())t.add(n,e);return t}_createSelectionConsumable(i,e){const t=new nc;t.add(i,'selection');for(const n of e)t.add(i,'selectionMarker:'+n.name);for(const n of i.getAttributeKeys())t.add(i,'selectionAttribute:'+n);return t}_testAndFire(i,e,t){if(t.test(e.item,i)){const n=e.item.name||'$text';this.fire(i+':'+n,e,t,this.conversionApi)}}}r(ic,Va);const rc=10;class ac extends Ul{constructor(o,e,t){super(o,e,t),this.priority=rc,this.getFillerOffset=G}is(n,e=null){return e?'attributeElement'==n&&e==this.name||super.is(n,e):'attributeElement'==n||super.is(n)}clone(n){const e=super.clone(n);return e.priority=this.priority,e}isSimilar(t){return super.isSimilar(t)&&this.priority==t.priority}}ac.DEFAULT_PRIORITY=rc;class sc extends Ul{constructor(o,e,t){super(o,e,t),this.getFillerOffset=X}is(n,e=null){return e?'emptyElement'==n&&e==this.name||super.is(n,e):'emptyElement'==n||super.is(n)}insertChildren(n,e){if(e&&(e instanceof Wl||0<Array.from(e).length))throw new ba('view-emptyelement-cannot-add: Cannot add child nodes to EmptyElement instance.')}}const dc=navigator.userAgent.toLowerCase(),lc={mac:function(t){return-1<t.indexOf('macintosh')}(dc)};var cc=lc;const mc=function(){const o={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,cmd:1114112,shift:2228224,alt:4456448};for(let e=65;90>=e;e++){const t=String.fromCharCode(e);o[t.toLowerCase()]=e}for(let e=48;57>=e;e++)o[e-48]=e;for(let e=112;123>=e;e++)o['f'+(e-111)]=e;return o}();class uc extends Ul{constructor(o,e,t){super(o,e,t),this.getFillerOffset=ie}is(n,e=null){return e?'uiElement'==n&&e==this.name||super.is(n,e):'uiElement'==n||super.is(n)}insertChildren(n,e){if(e&&(e instanceof Wl||0<Array.from(e).length))throw new ba('view-uielement-cannot-add: Cannot add child nodes to UIElement instance.')}render(n){const e=n.createElement(this.name);for(const t of this.getAttributeKeys())e.setAttribute(t,this.getAttribute(t));return e}}class pc{constructor(t){this._children=[],t&&this.insertChildren(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}is(t){return'documentFragment'==t}appendChildren(t){return this.insertChildren(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}insertChildren(i,e){this._fireChange('children',this);let t=0;e=ae(e);for(const n of e)null!==n.parent&&n.remove(),n.parent=this,this._children.splice(i,0,n),i++,t++;return t}removeChildren(o,e=1){this._fireChange('children',this);for(let t=o;t<o+e;t++)this._children[t].parent=null;return this._children.splice(o,e)}_fireChange(n,e){this.fire('change:'+n,e)}}r(pc,Va);var gc={breakAttributes:function(t){return t instanceof Zl?ge(t):pe(t)},breakContainer:function(a){const e=a.parent;if(!e.is('containerElement'))throw new ba('view-writer-break-non-container-element: Trying to break an element which is not a container element.');if(!e.parent)throw new ba('view-writer-break-root: Trying to break root element.');if(a.isAtStart)return Zl.createBefore(e);if(!a.isAtEnd){const t=e.clone(!1);Yb(Zl.createAfter(e),t);const n=new ec(a,Zl.createAt(e,'end')),o=new Zl(t,0);Gb(n,o)}return Zl.createAfter(e)},mergeAttributes:se,mergeContainers:function(a){const e=a.nodeBefore,r=a.nodeAfter;if(!e||!r||!e.is('containerElement')||!r.is('containerElement'))throw new ba('view-writer-merge-containers-invalid-position: Element before and after given position cannot be merged.');const s=e.getChild(e.childCount-1),o=s instanceof $l?Zl.createAt(s,'end'):Zl.createAt(e,'end');return Gb(ec.createIn(r),Zl.createAt(e,'end')),Qb(ec.createOn(r)),o},insert:Yb,remove:Qb,clear:function(a,r){Te(a);const e=a.getWalker({direction:'backward',ignoreElementEnd:!0});for(const t of e){const o=t.item;let n;if(o.is('element')&&r.isSimilar(o))n=ec.createOn(o);else if(!t.nextPosition.isAfter(a.start)&&(o.is('text')||o.is('textProxy'))){const t=o.getAncestors().find((t)=>t.is('element')&&r.isSimilar(t));t&&(n=ec.createIn(t))}n&&(n.end.isAfter(a.end)&&(n.end=a.end),n.start.isBefore(a.start)&&(n.start=a.start),Qb(n))}},move:Gb,wrap:Jb,wrapPosition:function(s,e){if(!(e instanceof ac))throw new ba('view-writer-wrap-invalid-attribute');if(e.isSimilar(s.parent))return _e(Zl.createFromPosition(s));s.parent.is('text')&&(s=ye(s));const t=new ac;t.priority=ta,t.isSimilar=()=>!1,s.parent.insertChildren(s.offset,t);const n=new ec(s,s.getShiftedBy(1));Jb(n,e);const o=new Zl(t.parent,t.index);t.remove();const i=o.nodeBefore,r=o.nodeAfter;return i instanceof $l&&r instanceof $l?we(i,r):_e(o)},unwrap:function(l,e){if(!(e instanceof ac))throw new ba('view-writer-unwrap-invalid-attribute');if(Te(l),l.isCollapsed)return l;if(l.end.isEqual(l.start.getShiftedBy(1))){const t=l.start.nodeAfter;if(!e.isSimilar(t)&&t instanceof ac&&ke(e,t))return l}const{start:t,end:n}=pe(l,!0),o=t.parent,i=fe(o,t.offset,n.offset,e),r=se(i.start);r.isEqual(i.start)||i.end.offset--;const a=se(i.end);return new ec(r,a)},rename:function(o,e){const t=new Gl(e,o.getAttributes());return Yb(Zl.createAfter(o),t),Gb(ec.createIn(o),Zl.createAt(t)),Qb(ec.createOn(o)),t}};const fc=[$l,ac,Gl,sc,uc];class hc extends ac{isSimilar(t){return!!t.is('attributeElement')&&this.getCustomProperty('highlightDescriptorId')===t.getCustomProperty('highlightDescriptorId')}}class bc{constructor(){this._consumables=new Map}add(o,e){let t;return o.is('text')||o.is('documentFragment')?void this._consumables.set(o,!0):void(this._consumables.has(o)?t=this._consumables.get(o):(t=new _c,this._consumables.set(o,t)),t.add(e))}test(o,e){const t=this._consumables.get(o);return void 0===t?null:o.is('text')||o.is('documentFragment')?t:t.test(e)}consume(n,e){return!!this.test(n,e)&&(n.is('text')||n.is('documentFragment')?this._consumables.set(n,!1):this._consumables.get(n).consume(e),!0)}revert(o,e){const t=this._consumables.get(o);void 0!==t&&(o.is('text')||o.is('documentFragment')?this._consumables.set(o,!0):t.revert(e))}static consumablesFromElement(a){const e={name:!0,attribute:[],class:[],style:[]},t=a.getAttributeKeys();for(const n of t)'style'!=n&&'class'!=n&&e.attribute.push(n);const r=a.getClassNames();for(const t of r)e.class.push(t);const o=a.getStyleNames();for(const t of o)e.style.push(t);return e}static createFrom(o,e){if(e||(e=new bc),o.is('text'))return e.add(o),e;o.is('element')&&e.add(o,bc.consumablesFromElement(o)),o.is('documentFragment')&&e.add(o);for(const t of o.getChildren())e=bc.createFrom(t,e);return e}}class _c{constructor(){this._canConsumeName=null,this._consumables={attribute:new Map,style:new Map,class:new Map}}add(n){for(const e in n.name&&(this._canConsumeName=!0),this._consumables)e in n&&this._add(e,n[e])}test(o){if(o.name&&!this._canConsumeName)return this._canConsumeName;for(const e in this._consumables)if(e in o){const t=this._test(e,o[e]);if(!0!==t)return t}return!0}consume(n){for(const e in n.name&&(this._canConsumeName=!1),this._consumables)e in n&&this._consume(e,n[e])}revert(n){for(const e in n.name&&(this._canConsumeName=!0),this._consumables)e in n&&this._revert(e,n[e])}_add(a,e){const t=Ps(e)?e:[e],n=this._consumables[a];for(const o of t){if('attribute'===a&&('class'===o||'style'===o))throw new ba('viewconsumable-invalid-attribute: Classes and styles should be handled separately.');n.set(o,!0)}}_test(a,e){const t=Ps(e)?e:[e],n=this._consumables[a];for(const o of t)if('attribute'===a&&('class'===o||'style'===o)){const t=this._test(o,[...this._consumables[o].keys()]);if(!0!==t)return t}else{const t=n.get(o);if(void 0===t)return null;if(!t)return!1}return!0}_consume(a,e){const t=Ps(e)?e:[e],n=this._consumables[a];for(const o of t)'attribute'===a&&('class'===o||'style'===o)?this._consume(o,[...this._consumables[o].keys()]):n.set(o,!1)}_revert(a,e){const t=Ps(e)?e:[e],n=this._consumables[a];for(const o of t)if('attribute'===a&&('class'===o||'style'===o))this._revert(o,[...this._consumables[o].keys()]);else{const t=n.get(o);!1===t&&n.set(o,!0)}}}var yc={insert:qe,remove:ey,move:function(o,e){if(!o.isFlat)throw new ba('model-writer-move-range-not-flat: Trying to move a range which starts and ends in different element.');const t=this.remove(o);return e=e._getTransformedByDeletion(o.start,o.end.offset-o.start.offset),this.insert(e,t)},setAttribute:function(i,a,t){$e(i.start),$e(i.end);for(const n of i.getItems()){const o=n.is('textProxy')?n.textNode:n;null===t?o.removeAttribute(a):o.setAttribute(a,t),ny(o.parent,o.index)}ny(i.end.parent,i.end.index)},removeAttribute:function(n,e){this.setAttribute(n,e,null)},normalizeNodes:ty};class wc{constructor(t={}){this.conversionApi=Ls({},t),this.conversionApi.convertItem=this._convertItem.bind(this),this.conversionApi.convertChildren=this._convertChildren.bind(this)}convert(i,e={}){this.fire('viewCleanup',i);const t=bc.createFrom(i);let n=this._convertItem(i,t,e);return n?(n.is('documentFragment')||(n=new oc([n])),n.markers=Ue(n),n):new oc}_convertItem(i,a,t={}){const n=Ls({},t,{input:i,output:null});return i.is('element')?this.fire('element:'+i.name,n,a,this.conversionApi):i.is('text')?this.fire('text',n,a,this.conversionApi):this.fire('documentFragment',n,a,this.conversionApi),n.output&&!(n.output instanceof $s||n.output instanceof oc)?(ya.warn('view-conversion-dispatcher-incorrect-result: Incorrect conversion result was dropped.',[i,n.output]),null):n.output}_convertChildren(a,r,t={}){const e=Array.from(a.getChildren()),n=e.map((n)=>this._convertItem(n,r,t)).filter((t)=>t instanceof $s||t instanceof oc).reduce((n,e)=>n.concat(e.is('documentFragment')?Array.from(e.getChildren()):e),[]);return new oc(n)}}r(wc,Va);class vc extends ry{constructor(o,e,t){if(super(o,e),!this.root.is('rootElement'))throw new ba('model-liveposition-root-not-rootelement: LivePosition\'s root has to be an instance of RootElement.');this.stickiness=t||'sticksToNext',Ge.call(this)}detach(){this.stopListening()}}r(vc,Va);class kc{constructor(o,e,t){this.dataController=o,this.batch=e,this.position=t,this.canMergeWith=new Set([this.position.parent]),this.schema=o.model.schema}handleNodes(i,e){i=Array.from(i);for(let t=0;t<i.length;t++){const n=i[t];this._handleNode(n,{isFirst:0===t&&e.isFirst,isLast:t===i.length-1&&e.isLast})}}getSelectionRange(){return this.nodeToSelect?Zs.createOn(this.nodeToSelect):this.dataController.model.getNearestSelectionRange(this.position)}_handleNode(o,e){if(this._checkIsObject(o))return void this._handleObject(o,e);const t=this._checkAndSplitToAllowedPosition(o,e);return t?void(this._insert(o),this._mergeSiblingsOf(o,e)):void this._handleDisallowedNode(o,e)}_handleObject(n,e){this._checkAndSplitToAllowedPosition(n)?this._insert(n):this._tryAutoparagraphing(n,e)}_handleDisallowedNode(n,e){n.is('element')?this.handleNodes(n.getChildren(),e):this.schema.check({name:'$text',inside:this.position})?(this.schema.removeDisallowedAttributes([n],this.position),this._handleNode(n,e)):this._tryAutoparagraphing(n,e)}_insert(n){if(!this._checkIsAllowed(n,this.position))return void ya.error('insertcontent-wrong-position: The node cannot be inserted on the given position.',{node:n,position:this.position});const o=vc.createFromPosition(this.position);this.batch.insert(this.position,n),this.position=ry.createFromPosition(o),o.detach(),this.nodeToSelect=this._checkIsObject(n)&&!this.schema.check({name:'$text',inside:this.position})?n:null}_mergeSiblingsOf(a,e){if(a instanceof Js){const t=e.isFirst&&a.previousSibling instanceof Js&&this.canMergeWith.has(a.previousSibling),n=e.isLast&&a.nextSibling instanceof Js&&this.canMergeWith.has(a.nextSibling),o=vc.createBefore(a),i=vc.createAfter(a);if(t){const n=vc.createFromPosition(this.position);this.batch.merge(o);const e=n.nodeBefore;this.schema.removeDisallowedAttributes(e.getChildren(),ry.createAt(e),this.batch),this.position=ry.createFromPosition(n),n.detach()}if(n){this.position.isEqual(i)||ya.error('insertcontent-wrong-position-on-merge: The insertion position should equal the merge position'),this.position=ry.createAt(i.nodeBefore,'end');const t=new vc(this.position.root,this.position.path,'sticksToPrevious');this.batch.merge(i),this.schema.removeDisallowedAttributes(t.parent.getChildren(),t,this.batch),this.position=ry.createFromPosition(t),t.detach()}o.detach(),i.detach(),t||n||this.schema.removeDisallowedAttributes(a.getChildren(),ry.createAt(a),this.batch)}}_tryAutoparagraphing(o,e){const t=new Js('paragraph');this._getAllowedIn(t,this.position.parent)&&(o.is('text')&&!this._checkIsAllowed(o,[t])&&this.schema.removeDisallowedAttributes([o],[t]),this._checkIsAllowed(o,[t])&&(t.appendChildren(o),this._handleNode(t,e)))}_checkAndSplitToAllowedPosition(n){const e=this._getAllowedIn(n,this.position.parent);if(!e)return!1;for(;e!=this.position.parent;){if(this.schema.limits.has(this.position.parent.name))return!1;if(this.position.isAtStart){const t=this.position.parent;this.position=ry.createBefore(t),t.isEmpty&&this.batch.remove(t)}else if(this.position.isAtEnd)this.position=ry.createAfter(this.position.parent);else{const t=ry.createAfter(this.position.parent);this.batch.split(this.position),this.position=t,this.canMergeWith.add(this.position.nodeAfter)}}return!0}_getAllowedIn(n,e){return this._checkIsAllowed(n,[e])?e:e.parent?this._getAllowedIn(n,e.parent):null}_checkIsAllowed(n,e){return this.schema.check({name:Ze(n),attributes:Array.from(n.getAttributeKeys()),inside:e})}_checkIsObject(t){return this.schema.objects.has(Ze(t))}}class xc{constructor(n,e){this.model=n,this.processor=e,this.mapper=new tc,this.modelToView=new ic(this.model,{mapper:this.mapper}),this.modelToView.on('insert:$text',Ee(),{priority:'lowest'}),this.viewToModel=new wc({schema:n.schema}),this.viewToModel.on('text',Je(),{priority:'lowest'}),this.viewToModel.on('element',Qe(),{priority:'lowest'}),this.viewToModel.on('documentFragment',Qe(),{priority:'lowest'}),['insertContent','deleteContent','modifySelection','getSelectedContent'].forEach((t)=>this.decorate(t))}get(t='main'){return this.stringify(this.model.getRoot(t))}stringify(n){const e=this.toView(n);return this.processor.toData(e)}toView(o){const e=Zs.createIn(o),t=new pc;return this.mapper.bindElements(o,t),this.modelToView.convertInsertion(e),this.mapper.clearBindings(),t}set(o,e='main'){const t=this.model.getRoot(e);this.model.enqueueChanges(()=>{this.model.selection.removeAllRanges(),this.model.selection.clearAttributes(),this.model.batch('transparent').remove(Zs.createIn(t)).insert(ry.createAt(t,0),this.parse(o))})}parse(o,e='$root'){const t=this.processor.toView(o);return this.toModel(t,e)}toModel(n,e='$root'){return this.viewToModel.convert(n,{context:[e]})}destroy(){}insertContent(o,e,t){Xe(this,o,e,t)}deleteContent(o,e,t){et(o,e,t)}modifySelection(n,e){pt(this,n,e)}getSelectedContent(t){return bt(t)}hasContent(n){if(n instanceof Js&&(n=Zs.createIn(n)),n.isCollapsed)return!1;for(const e of n.getItems())if(e.is('textProxy')||this.model.schema.objects.has(e.name))return!0;return!1}}r(xc,Ws);class Ac{constructor(t){this.baseVersion=t}toJSON(){const t=Hl(this,!0);return t.__className=this.constructor.className,delete t.delta,t}static get className(){return'engine.model.operation.Operation'}static fromJSON(t){return new this(t.baseVersion)}}yt.prototype.add=yt.prototype.push=function(t){return this.__data__.set(t,'__lodash_hash_undefined__'),this},yt.prototype.has=function(t){return this.__data__.has(t)};var Cc=yt,Tc=function(i,e){for(var t=-1,n=i.length;++t<n;)if(e(i[t],t,i))return!0;return!1},Pc=function(h,e,b,n,o,i){var t=2&o,a=h.length,r=e.length;if(a!=r&&!(t&&r>a))return!1;var s=i.get(h);if(s)return s==e;var l=-1,d=!0,c=1&o?new Cc:void 0;for(i.set(h,e);++l<a;){var u=h[l],p=e[l];if(n)var m=t?n(p,u,l,e,h,i):n(u,p,l,h,e,i);if(void 0!==m){if(m)continue;d=!1;break}if(c){if(!Tc(e,function(a,e){if(!c.has(e)&&(u===a||b(u,a,n,o,i)))return c.add(e)})){d=!1;break}}else if(!(u===p||b(u,p,n,o,i))){d=!1;break}}return i['delete'](h),d},Ec=Pl?Pl.prototype:void 0,Sc=Ec?Ec.valueOf:void 0,Vc=function(c,p,u,n,o,i,r){switch(u){case'[object DataView]':if(c.byteLength!=p.byteLength||c.byteOffset!=p.byteOffset)return!1;c=c.buffer,p=p.buffer;case'[object ArrayBuffer]':return c.byteLength==p.byteLength&&n(new gl(c),new gl(p));case'[object Boolean]':case'[object Date]':return+c==+p;case'[object Error]':return c.name==p.name&&c.message==p.message;case'[object Number]':return c==+c?c==+p:p!=+p;case'[object RegExp]':case'[object String]':return c==p+'';case'[object Map]':var a=yl;case'[object Set]':var s=2&i;if(a||(a=Al),c.size!=p.size&&!s)return!1;var m=r.get(c);return m?m==p:(i|=1,r.set(c,p),Pc(a(c),a(p),n,o,i,r));case'[object Symbol]':if(Sc)return Sc.call(c)==Sc.call(p);}return!1},Oc=function(v,e,t,n,o,i){var r=2&o,x=Fd(v),s=x.length,d=Fd(e),l=d.length;if(s!=l&&!r)return!1;for(var c=s,m;c--;)if(m=x[c],r?!(m in e):!Vd(e,m))return!1;var u=i.get(v);if(u)return u==e;var p=!0;i.set(v,e);for(var g=r;++c<s;){m=x[c];var k=v[m],h=e[m];if(n)var b=r?n(h,k,m,e,v,i):n(k,h,m,v,e,i);if(void 0===b?!(k===h||t(k,h,n,o,i)):!b){p=!1;break}g||(g='constructor'==m)}if(p&&!g){var C=v.constructor,T=e.constructor;C!=T&&'constructor'in v&&'constructor'in e&&!('function'==typeof C&&C instanceof C&&'function'==typeof T&&T instanceof T)&&(p=!1)}return i['delete'](v),p},Rc={};Rc['[object Float32Array]']=Rc['[object Float64Array]']=Rc['[object Int8Array]']=Rc['[object Int16Array]']=Rc['[object Int32Array]']=Rc['[object Uint8Array]']=Rc['[object Uint8ClampedArray]']=Rc['[object Uint16Array]']=Rc['[object Uint32Array]']=!0,Rc['[object Arguments]']=Rc['[object Array]']=Rc['[object ArrayBuffer]']=Rc['[object Boolean]']=Rc['[object DataView]']=Rc['[object Date]']=Rc['[object Error]']=Rc['[object Function]']=Rc['[object Map]']=Rc['[object Number]']=Rc['[object Object]']=Rc['[object RegExp]']=Rc['[object Set]']=Rc['[object String]']=Rc['[object WeakMap]']=!1;var Fc=Object.prototype,Ic=Fc.toString,Nc=function(t){return da(t)&&za(t.length)&&!!Rc[Ic.call(t)]},Bc='[object Arguments]',Mc='[object Array]',Dc='[object Object]',Lc=Object.prototype,jc=Lc.hasOwnProperty,qc=function(b,e,t,n,o,i){var r=Ps(b),a=Ps(e),s=Mc,d=Mc;r||(s=ll(b),s=s==Bc?Dc:s),a||(d=ll(e),d=d==Bc?Dc:d);var l=s==Dc&&!sa(b),y=d==Dc&&!sa(e),m=s==d;if(m&&!l)return i||(i=new Td),r||Nc(b)?Pc(b,e,t,n,o,i):Vc(b,e,s,t,n,o,i);if(!(2&o)){var v=l&&jc.call(b,'__wrapped__'),p=y&&jc.call(e,'__wrapped__');if(v||p){var g=v?b.value():b,f=p?e.value():e;return i||(i=new Td),t(g,f,n,o,i)}}return!!m&&(i||(i=new Td),Oc(b,e,t,n,o,i))},zc=wt,Hc=function(n,e){return zc(n,e)};class Wc extends Ac{constructor(a,e,t,n,o){super(o),this.range=Zs.createFromRange(a),this.key=e,this.oldValue=void 0===t?null:t,this.newValue=void 0===n?null:n}get type(){return null===this.oldValue?'addAttribute':null===this.newValue?'removeAttribute':'changeAttribute'}clone(){return new Wc(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Wc(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_execute(){for(const t of this.range.getItems()){if(null!==this.oldValue&&!Hc(t.getAttribute(this.key),this.oldValue))throw new ba('attribute-operation-wrong-old-value: Changed node has different attribute value than operation\'s old attribute value.',{item:t,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&t.hasAttribute(this.key))throw new ba('attribute-operation-attribute-exists: The attribute with given key already exists.',{node:t,key:this.key})}return Hc(this.oldValue,this.newValue)||yc.setAttribute(this.range,this.key,this.newValue),{range:this.range,key:this.key,oldValue:this.oldValue,newValue:this.newValue}}static get className(){return'engine.model.operation.AttributeOperation'}static fromJSON(n,e){return new Wc(Zs.fromJSON(n.range,e),n.key,n.oldValue,n.newValue,n.baseVersion)}}class $c extends Ac{constructor(i,e,t,n){super(n),this.sourcePosition=ry.createFromPosition(i),this.howMany=e,this.targetPosition=ry.createFromPosition(t),this.isSticky=!1}get type(){return'move'}clone(){const t=new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion);return t.isSticky=this.isSticky,t}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const n=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany),e=new this.constructor(this.getMovedRangeStart(),this.howMany,n,this.baseVersion+1);return e.isSticky=this.isSticky,e}_execute(){const a=this.sourcePosition.parent,r=this.targetPosition.parent,s=this.sourcePosition.offset,n=this.targetPosition.offset;if(!a||!r)throw new ba('move-operation-position-invalid: Source position or target position is invalid.');else if(s+this.howMany>a.maxOffset)throw new ba('move-operation-nodes-do-not-exist: The nodes which should be moved do not exist.');else if(a===r&&s<n&&n<s+this.howMany)throw new ba('move-operation-range-into-itself: Trying to move a range of nodes to the inside of that range.');else if(this.sourcePosition.root==this.targetPosition.root&&'prefix'==V(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){const t=this.sourcePosition.path.length-1;if(this.targetPosition.path[t]>=s&&this.targetPosition.path[t]<s+this.howMany)throw new ba('move-operation-node-into-itself: Trying to move a range of nodes into one of nodes from that range.')}const o=yc.move(Zs.createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition);return{sourcePosition:this.sourcePosition,range:o}}static get className(){return'engine.model.operation.MoveOperation'}static fromJSON(a,e){const t=ry.fromJSON(a.sourcePosition,e),n=ry.fromJSON(a.targetPosition,e),o=new this(t,a.howMany,n,a.baseVersion);return a.isSticky&&(o.isSticky=!0),o}}class Kc extends $c{get position(){return this.targetPosition}set position(t){this.targetPosition=t}get type(){return'reinsert'}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new Uc(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}static get className(){return'engine.model.operation.ReinsertOperation'}}class Uc extends $c{get type(){return'remove'}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new Kc(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}static get className(){return'engine.model.operation.RemoveOperation'}}class Qc extends Ac{constructor(o,e,t){super(t),this.position=ry.createFromPosition(o),this.nodes=new Qs(ty(e))}get type(){return'insert'}clone(){const t=new Qs([...this.nodes].map((t)=>t.clone(!0)));return new Qc(this.position,t,this.baseVersion)}getReversed(){const n=this.position.root.document.graveyard,e=new ry(n,[0]);return new Uc(this.position,this.nodes.maxOffset,e,this.baseVersion+1)}_execute(){const n=this.nodes;this.nodes=new Qs([...n].map((t)=>t.clone(!0)));const e=qe(this.position,n);return{range:e}}static get className(){return'engine.model.operation.InsertOperation'}static fromJSON(i,e){const t=[];for(const n of i.nodes)n.name?t.push(Js.fromJSON(n)):t.push(Ks.fromJSON(n));return new Qc(ry.fromJSON(i.position,e),t,i.baseVersion)}}class Jc extends Ac{constructor(a,e,t,n,o){super(o),this.name=a,this.oldRange=e?Zs.createFromRange(e):null,this.newRange=t?Zs.createFromRange(t):null,this._markers=n}get type(){return'marker'}clone(){return new Jc(this.name,this.oldRange,this.newRange,this._markers,this.baseVersion)}getReversed(){return new Jc(this.name,this.newRange,this.oldRange,this._markers,this.baseVersion+1)}_execute(){const t=this.newRange?'set':'remove';return this._markers[t](this.name,this.newRange),{name:this.name,type:t}}toJSON(){const t=super.toJSON();return delete t._markers,t}static get className(){return'engine.model.operation.MarkerOperation'}static fromJSON(n,e){return new Jc(n.name,n.oldRange?Zs.fromJSON(n.oldRange,e):null,n.newRange?Zs.fromJSON(n.newRange,e):null,e.markers,n.baseVersion)}}class Gc extends Ac{get type(){return'noop'}clone(){return new Gc(this.baseVersion)}getReversed(){return new Gc(this.baseVersion+1)}_execute(){return{}}static get className(){return'engine.model.operation.NoOperation'}}class Yc extends Ac{constructor(i,e,t,n){super(n),this.position=i,this.oldName=e,this.newName=t}get type(){return'rename'}clone(){return new Yc(ry.createFromPosition(this.position),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Yc(ry.createFromPosition(this.position),this.newName,this.oldName,this.baseVersion+1)}_execute(){const t=this.position.nodeAfter;if(!(t instanceof Js))throw new ba('rename-operation-wrong-position: Given position is invalid or node after it is not an instance of Element.');else if(t.name!==this.oldName)throw new ba('rename-operation-wrong-name: Element to change has different name than operation\'s old name.');return t.name!=this.newName&&(t.name=this.newName),{element:t,oldName:this.oldName}}static get className(){return'engine.model.operation.RenameOperation'}static fromJSON(n,e){return new Yc(ry.fromJSON(n.position,e),n.oldName,n.newName,n.baseVersion)}}class Xc extends Ac{constructor(a,e,t,n,o){super(o),this.root=a,this.key=e,this.oldValue=t,this.newValue=n}get type(){return null===this.oldValue?'addRootAttribute':null===this.newValue?'removeRootAttribute':'changeRootAttribute'}clone(){return new Xc(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Xc(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_execute(){if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new ba('rootattribute-operation-wrong-old-value: Changed node has different attribute value than operation\'s old attribute value.',{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new ba('rootattribute-operation-attribute-exists: The attribute with given key already exists.',{root:this.root,key:this.key});return null===this.newValue?this.root.removeAttribute(this.key):this.root.setAttribute(this.key,this.newValue),{root:this.root,key:this.key,oldValue:this.oldValue,newValue:this.newValue}}static get className(){return'engine.model.operation.RootAttributeOperation'}static fromJSON(n,o){if(!o.hasRoot(n.root))throw new ba('rootattribute-operation-fromjson-no-root: Cannot create RootAttributeOperation. Root with specified name does not exist.',{rootName:n});return new Xc(o.getRoot(n.root),n.key,n.oldValue,n.newValue,n.baseVersion)}}const Zc={};Zc[Wc.className]=Wc,Zc[Qc.className]=Qc,Zc[Jc.className]=Jc,Zc[$c.className]=$c,Zc[Gc.className]=Gc,Zc[Ac.className]=Ac,Zc[Kc.className]=Kc,Zc[Uc.className]=Uc,Zc[Yc.className]=Yc,Zc[Xc.className]=Xc;class em{static fromJSON(n,e){return Zc[n.__className].fromJSON(n,e)}}const tm=new Map;class nm{static fromJSON(i,e){if(!tm.has(i.__className))throw new ba('delta-fromjson-no-deserializer: This delta has no defined deserializer',{name:i.__className});const t=tm.get(i.__className),a=new t;for(const t of i.operations)a.addOperation(em.fromJSON(t,e));for(const t in i)'__className'!=t&&void 0===a[t]&&(a[t]=i[t]);return a}static register(t){tm.set(t.className,t)}}class om{constructor(){this.batch=null,this.operations=[]}get baseVersion(){return 0<this.operations.length?this.operations[0].baseVersion:null}set baseVersion(n){for(const e of this.operations)e.baseVersion=n++}get _reverseDeltaClass(){return om}addOperation(t){return t.delta=this,this.operations.push(t),t}clone(){const n=new this.constructor;for(const e of this.operations)n.addOperation(e.clone());return n}getReversed(){const n=new this._reverseDeltaClass;for(const e of this.operations)n.addOperation(e.getReversed());n.operations.reverse();for(let e=0;e<n.operations.length;e++)n.operations[e].baseVersion=this.operations[this.operations.length-1].baseVersion+e+1;return n}toJSON(){const t=Hl(this);return t.__className=this.constructor.className,delete t.batch,t}static get className(){return'engine.model.delta.Delta'}}nm.register(om);class im{constructor(n,e='default'){this.document=n,this.deltas=[],this.type=e}get baseVersion(){return 0<this.deltas.length?this.deltas[0].baseVersion:null}addDelta(t){return t.batch=this,this.deltas.push(t),t}*getOperations(){for(const t of this.deltas)yield*t.operations}}class rm extends om{get type(){return'attribute'}get key(){return this.operations[0]?this.operations[0].key:null}get value(){return this.operations[0]?this.operations[0].newValue:null}get range(){if(this._range)return this._range;let o=null,e=null;for(const t of this.operations)t instanceof Gc||((null==o||o.isAfter(t.range.start))&&(o=t.range.start),(null==e||e.isBefore(t.range.end))&&(e=t.range.end));return o&&e?(this._range=new Zs(o,e),this._range):null}get _reverseDeltaClass(){return rm}toJSON(){const t=super.toJSON();return delete t._range,t}static get className(){return'engine.model.delta.AttributeDelta'}}class am extends om{static get className(){return'engine.model.delta.RootAttributeDelta'}}vt('setAttribute',function(o,e,t){return kt(this,e,t,o),this}),vt('removeAttribute',function(n,e){return kt(this,e,null,n),this}),nm.register(rm),nm.register(am);class sm extends om{get type(){return'move'}get howMany(){return this._moveOperation?this._moveOperation.howMany:null}get sourcePosition(){return this._moveOperation?this._moveOperation.sourcePosition:null}get targetPosition(){return this._moveOperation?this._moveOperation.targetPosition:null}get _moveOperation(){return this.operations[0]||null}get _reverseDeltaClass(){return sm}static get className(){return'engine.model.delta.MoveDelta'}}vt('move',function(o,e){const t=new sm;if(this.addDelta(t),o instanceof Zs){if(!o.isFlat)throw new ba('batch-move-range-not-flat: Range to move is not flat.');Ct(this,t,o.start,o.end.offset-o.start.offset,e)}else Ct(this,t,ry.createBefore(o),1,e);return this}),nm.register(sm);class dm extends sm{static get className(){return'engine.model.delta.RemoveDelta'}}vt('remove',function(n){if(n instanceof Zs){const o=n.getMinimalFlatRanges().reverse();for(const t of o)Tt(this,t.start,t.end.offset-t.start.offset)}else Tt(this,ry.createBefore(n),1);return this}),nm.register(dm);class lm extends om{get type(){return'insert'}get position(){return this._insertOperation?this._insertOperation.position:null}get nodes(){return this._insertOperation?this._insertOperation.nodes:null}get _insertOperation(){return this.operations[0]||null}get _reverseDeltaClass(){return dm}static get className(){return'engine.model.delta.InsertDelta'}}vt('insert',function(a,e){const t=ty(e);if(0===t.length)return this;const n=new lm,o=new Qc(a,t,this.document.version);if(this.addDelta(n),n.addOperation(o),this.document.applyOperation(o),e instanceof oc)for(const[r,n]of e.markers){const e=ry.createAt(n.root),t=new Zs(n.start._getCombined(e,a),n.end._getCombined(e,a));this.setMarker(r,t)}return this}),nm.register(lm);class cm extends om{get type(){return'split'}get position(){return this._moveOperation?this._moveOperation.sourcePosition:null}get _cloneOperation(){return this.operations[0]||null}get _moveOperation(){return this.operations[1]&&this.operations[1]instanceof $c?this.operations[1]:null}get _reverseDeltaClass(){return mm}static get className(){return'engine.model.delta.SplitDelta'}}vt('split',function(a){const e=new cm;this.addDelta(e);const t=a.parent;if(!t.parent)throw new ba('batch-split-root: Root element can not be split.');const n=new Js(t.name,t.getAttributes()),o=new Qc(ry.createAfter(t),n,this.document.version);e.addOperation(o),this.document.applyOperation(o);const i=new $c(a,t.maxOffset-a.offset,ry.createFromParentAndOffset(n,0),this.document.version);return i.isSticky=!0,e.addOperation(i),this.document.applyOperation(i),this}),nm.register(cm);class mm extends om{get type(){return'merge'}get position(){return this._removeOperation?this._removeOperation.sourcePosition:null}get _removeOperation(){return this.operations[1]||null}get _reverseDeltaClass(){return cm}static get className(){return'engine.model.delta.MergeDelta'}}vt('merge',function(c){const e=new mm;this.addDelta(e);const t=c.nodeBefore,n=c.nodeAfter;if(!(t instanceof Js))throw new ba('batch-merge-no-element-before: Node before merge position must be an element.');if(!(n instanceof Js))throw new ba('batch-merge-no-element-after: Node after merge position must be an element.');const o=ry.createFromParentAndOffset(n,0),i=ry.createFromParentAndOffset(t,t.maxOffset),r=new $c(o,n.maxOffset,i,this.document.version);r.isSticky=!0,e.addOperation(r),this.document.applyOperation(r);const a=this.document.graveyard,s=new ry(a,[0]),d=new Uc(c,1,s,this.document.version);return e.addOperation(d),this.document.applyOperation(d),this}),nm.register(mm);class um extends om{get type(){return'rename'}get _reverseDeltaClass(){return um}static get className(){return'engine.model.delta.RenameDelta'}}vt('rename',function(i,e){if(!(i instanceof Js))throw new ba('batch-rename-not-element-instance: Trying to rename an object which is not an instance of Element.');const t=new um;this.addDelta(t);const n=new Yc(ry.createBefore(i),i.name,e,this.document.version);return Pt(this,t,n),this}),nm.register(um);class pm extends om{get type(){return'wrap'}get range(){const t=this._moveOperation;return t?Zs.createFromPositionAndShift(t.sourcePosition,t.howMany):null}get howMany(){const t=this.range;return t?t.end.offset-t.start.offset:0}get _insertOperation(){return this.operations[0]||null}get _moveOperation(){return this.operations[1]||null}get _reverseDeltaClass(){return gm}static get className(){return'engine.model.delta.WrapDelta'}}vt('wrap',function(s,e){if(!s.isFlat)throw new ba('batch-wrap-range-not-flat: Range to wrap is not flat.');const t=e instanceof Js?e:new Js(e);if(0<t.childCount)throw new ba('batch-wrap-element-not-empty: Element to wrap with is not empty.');if(null!==t.parent)throw new ba('batch-wrap-element-attached: Element to wrap with is already attached to tree model.');const n=new pm;this.addDelta(n);const o=new Qc(s.end,t,this.document.version);n.addOperation(o),this.document.applyOperation(o);const i=ry.createFromParentAndOffset(t,0),r=new $c(s.start,s.end.offset-s.start.offset,i,this.document.version);return n.addOperation(r),this.document.applyOperation(r),this}),nm.register(pm);class gm extends om{get type(){return'unwrap'}get position(){return this._moveOperation?this._moveOperation.targetPosition:null}get _moveOperation(){return this.operations[0]||null}get _reverseDeltaClass(){return pm}static get className(){return'engine.model.delta.UnwrapDelta'}}vt('unwrap',function(s){if(null===s.parent)throw new ba('batch-unwrap-element-no-parent: Trying to unwrap an element which has no parent.');const e=new gm;this.addDelta(e);const t=ry.createFromParentAndOffset(s,0),n=new $c(t,s.maxOffset,ry.createBefore(s),this.document.version);n.isSticky=!0,e.addOperation(n),this.document.applyOperation(n);const o=this.document.graveyard,i=new ry(o,[0]),r=new Uc(ry.createBefore(s),1,i,this.document.version);return e.addOperation(r),this.document.applyOperation(r),this}),nm.register(gm);class fm extends lm{static get className(){return'engine.model.delta.WeakInsertDelta'}}vt('weakInsert',function(i,e){const t=new fm;this.addDelta(t),e=ty(e);for(const t of e)t.setAttributesTo(this.document.selection.getAttributes());const n=new Qc(i,e,this.document.version);return t.addOperation(n),this.document.applyOperation(n),this}),nm.register(fm);var hm=function(a,e,t={isStrong:!1}){let n,o;a instanceof Qc?n=bm.InsertOperation:a instanceof Wc?n=bm.AttributeOperation:a instanceof Xc?n=bm.RootAttributeOperation:a instanceof Yc?n=bm.RenameOperation:a instanceof Jc?n=bm.MarkerOperation:a instanceof $c?n=bm.MoveOperation:o=Et,n&&(e instanceof Qc?o=n.InsertOperation:e instanceof Wc?o=n.AttributeOperation:e instanceof Xc?o=n.RootAttributeOperation:e instanceof Yc?o=n.RenameOperation:e instanceof Jc?o=n.MarkerOperation:e instanceof $c?o=n.MoveOperation:o=Et);const i=o(a,e,t);return oy(a.baseVersion,i)};const bm={InsertOperation:{InsertOperation(a,e,t){const n=a.clone(),o=void 0===t.insertBefore?!t.isStrong:t.insertBefore;return n.position=n.position._getTransformedByInsertion(e.position,e.nodes.maxOffset,o),[n]},AttributeOperation:Et,RootAttributeOperation:Et,RenameOperation:Et,MarkerOperation:Et,MoveOperation(a,e,t){const n=a.clone(),o=void 0===t.insertBefore?!t.isStrong:t.insertBefore;return n.position=a.position._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,o,e.isSticky&&!t.forceNotSticky),[n]}},AttributeOperation:{InsertOperation(o,e){const t=o.range._getTransformedByInsertion(e.position,e.nodes.maxOffset,!0,!1);return t.reverse().map((e)=>new Wc(e,o.key,o.oldValue,o.newValue,o.baseVersion))},AttributeOperation(a,e,t){if(a.key===e.key){const n=a.range.getDifference(e.range).map((e)=>new Wc(e,a.key,a.oldValue,a.newValue,a.baseVersion)),o=a.range.getIntersection(e.range);return o&&(t.isStrong?n.push(new Wc(o,e.key,e.newValue,a.newValue,a.baseVersion)):0===n.length&&n.push(new Gc(0))),n}return[a.clone()]},RootAttributeOperation:Et,RenameOperation:Et,MarkerOperation:Et,MoveOperation(a,e){const t=Zs.createFromPositionAndShift(e.sourcePosition,e.howMany);let n=[];const o=Ot(a.range.getDifference(t)),i=a.range.getIntersection(t);return null!==o&&(o.start=o.start._getTransformedByDeletion(e.sourcePosition,e.howMany),o.end=o.end._getTransformedByDeletion(e.sourcePosition,e.howMany),n=o._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,!0,!1).reverse()),null!==i&&(i.start=i.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),i.end=i.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),n.push(i)),n.map((e)=>new Wc(e,a.key,a.oldValue,a.newValue,a.baseVersion))}},RootAttributeOperation:{InsertOperation:Et,AttributeOperation:Et,RootAttributeOperation(o,e,t){return o.root!==e.root||o.key!==e.key||(o.newValue===e.newValue||t.isStrong)&&o.newValue!==e.newValue?[o.clone()]:[new Gc(o.baseVersion)]},RenameOperation:Et,MarkerOperation:Et,MoveOperation:Et},RenameOperation:{InsertOperation(o,e){const t=o.clone();return t.position=t.position._getTransformedByInsertion(e.position,e.nodes.maxOffset,!0),[t]},AttributeOperation:Et,RootAttributeOperation:Et,RenameOperation(i,e,t){const n=i.clone();if(i.position.isEqual(e.position))if(t.isStrong)n.oldName=e.newName;else return[new Gc(i.baseVersion)];return[n]},MarkerOperation:Et,MoveOperation(i,e){const t=i.clone(),n=t.position.isEqual(e.sourcePosition);return t.position=t.position._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!0,n),[t]}},MarkerOperation:{InsertOperation(o,e){const t=o.clone();return t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertion(e.position,e.nodes.maxOffset,!1,!1)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertion(e.position,e.nodes.maxOffset,!1,!1)[0]),[t]},AttributeOperation:Et,RootAttributeOperation:Et,RenameOperation:Et,MarkerOperation(i,e,t){const n=i.clone();if(i.name==e.name)if(t.isStrong)n.oldRange=e.newRange;else return[new Gc(i.baseVersion)];return[n]},MoveOperation(o,i){const t=o.clone();if(t.oldRange){const n=t.oldRange._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany);t.oldRange=Zs.createFromRanges(n)}if(t.newRange){const n=t.newRange._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany);t.newRange=Zs.createFromRanges(n)}return[t]}},MoveOperation:{InsertOperation(s,e,t){let n=Zs.createFromPositionAndShift(s.sourcePosition,s.howMany);const o=s.isSticky&&!t.forceNotSticky;n=n._getTransformedByInsertion(e.position,e.nodes.maxOffset,!1,o)[0];const i=void 0===t.insertBefore?!t.isStrong:t.insertBefore,r=new s.constructor(n.start,n.end.offset-n.start.offset,s.targetPosition._getTransformedByInsertion(e.position,e.nodes.maxOffset,i),s.baseVersion);return r.isSticky=s.isSticky,[r]},AttributeOperation:Et,RootAttributeOperation:Et,RenameOperation:Et,MarkerOperation:Et,MoveOperation(h,f,e){const t=Zs.createFromPositionAndShift(h.sourcePosition,h.howMany),n=Zs.createFromPositionAndShift(f.sourcePosition,f.howMany);let o=e.isStrong;const i=h.isSticky&&!e.forceNotSticky,b=void 0===e.insertBefore?!o:e.insertBefore,s=h.targetPosition._getTransformedByMove(f.sourcePosition,f.targetPosition,f.howMany,b,f.isSticky&&!e.forceNotSticky);if(Vt(h,f)&&Vt(f,h))return[f.getReversed()];const d=t.containsPosition(f.targetPosition)||t.start.isEqual(f.targetPosition)&&i||t.end.isEqual(f.targetPosition)&&i;if(d&&t.containsRange(n,!0))return t.start=t.start._getTransformedByMove(f.sourcePosition,f.targetPosition,f.howMany,!i),t.end=t.end._getTransformedByMove(f.sourcePosition,f.targetPosition,f.howMany,i),Rt([t],s,h);const y=n.containsPosition(h.targetPosition)||n.start.isEqual(h.targetPosition)&&f.isSticky&&!e.forceNotSticky||n.end.isEqual(h.targetPosition)&&f.isSticky&&!e.forceNotSticky;if(y&&n.containsRange(t,!0))return t.start=t.start._getCombined(f.sourcePosition,f.getMovedRangeStart()),t.end=t.end._getCombined(f.sourcePosition,f.getMovedRangeStart()),Rt([t],s,h);const c=V(h.sourcePosition.getParentPath(),f.sourcePosition.getParentPath());if('prefix'==c||'extension'==c)return t.start=t.start._getTransformedByMove(f.sourcePosition,f.targetPosition,f.howMany,!i),t.end=t.end._getTransformedByMove(f.sourcePosition,f.targetPosition,f.howMany,i),Rt([t],s,h);e.forceWeakRemove||(h instanceof Uc&&!(f instanceof Uc)?o=!0:!(h instanceof Uc)&&f instanceof Uc&&(o=!1));const m=[],u=t.getDifference(n);for(const t of u){t.start=t.start._getTransformedByDeletion(f.sourcePosition,f.howMany),t.end=t.end._getTransformedByDeletion(f.sourcePosition,f.howMany);const o='same'==V(t.start.getParentPath(),f.getMovedRangeStart().getParentPath()),e=t._getTransformedByInsertion(f.getMovedRangeStart(),f.howMany,o,i);m.push(...e)}const p=t.getIntersection(n);return null!==p&&o&&!d&&(p.start=p.start._getCombined(f.sourcePosition,f.getMovedRangeStart()),p.end=p.end._getCombined(f.sourcePosition,f.getMovedRangeStart()),0===m.length?m.push(p):1==m.length?n.start.isBefore(t.start)||n.start.isEqual(t.start)?m.unshift(p):m.push(p):m.splice(1,0,p)),0===m.length?[new Gc(h.baseVersion)]:Rt(m,s,h)}}};var _m=function(a,e,s){var n=-1,o=a.length;0>e&&(e=-e>o?0:o+e),s=s>o?o:s,0>s&&(s+=o),o=e>s?0:s-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=a[n+e];return i},ot=Math.ceil,ym=function(t){return Ps(t)||Cs(t)},wm=It,vm=function(a,e,t){for(var n=a.length,o=e+(t?0:-1),i;t?o--:++o<n;)if(i=a[o],i!==i)return o;return-1},km=function(a,e,t){if(e!==e)return vm(a,t);for(var n=t-1,o=a.length;++n<o;)if(a[n]===e)return n;return-1},xm=function(n,e){return!!n.length&&-1<km(n,e,0)},Am=function(a,e,t){for(var n=-1,o=a.length;++n<o;)if(t(e,a[n]))return!0;return!1},Cm=function(a,e){for(var t=-1,n=a.length,o=Array(n);++t<n;)o[t]=e(a[t],t,a);return o},Tm=function(n){return function(e){return n(e)}},Pm=function(n,e){return n.has(e)},Em=function(p,e,t,n){var o=-1,i=xm,r=!0,a=p.length,g=[],d=e.length;if(!a)return g;t&&(e=Cm(e,Tm(t))),n?(i=Am,r=!1):200<=e.length&&(i=Pm,r=!1,e=new Cc(e));outer:for(;++o<a;){var l=p[o],c=t?t(l):l;if(l=n||0!==l?l:0,r&&c===c){for(var m=d;m--;)if(e[m]===c)continue outer;g.push(l)}else i(e,c,n)||g.push(l)}return g},Sm=ds(function(n,e){return ws(n)?Em(n,wm(e,1,ws,!0)):[]}),sy=function(p,e,t,n){var g=t.length,i=g,h=!n;if(null==p)return!i;for(p=Object(p);g--;){var a=t[g];if(h&&a[2]?a[1]!==p[a[0]]:!(a[0]in p))return!1}for(;++g<i;){a=t[g];var s=a[0],d=p[s],l=a[1];if(!(h&&a[2])){var c=new Td;if(n)var m=n(d,l,s,p,e,c);if(void 0===m?!zc(l,d,n,3,c):!m)return!1}else if(void 0===d&&!(s in p))return!1}return!0},Om=function(t){return t===t&&!Da(t)},Rm=function(n,e){return Cm(e,function(e){return[e,n[e]]})},Fm=function(o){var i=-1,t=Array(o.size);return o.forEach(function(n){t[++i]=[n,n]}),t},Im=function(o){return function(e){var t=ll(e);return'[object Map]'==t?yl(e):'[object Set]'==t?Fm(e):Rm(e,o(e))}}(Fd),Nm=function(o){for(var e=Im(o),t=e.length;t--;)e[t][2]=Om(e[t][1]);return e},Bm=function(o,e){return function(t){return null!=t&&t[o]===e&&(void 0!==e||o in Object(t))}},Mm=function(o){var e=Nm(o);return 1==e.length&&e[0][2]?Bm(e[0][0],e[0][1]):function(t){return t===o||sy(t,o,e)}},Dm='Expected a function';Nt.Cache=Cd;var Lm=Pl?Pl.prototype:void 0,jm=Lm?Lm.toString:void 0,qm=function(n){if('string'==typeof n)return n;if(Ga(n))return jm?jm.call(n):'';var o=n+'';return'0'==o&&1/n==-(1/0)?'-0':o},zm=function(t){return null==t?'':qm(t)},Hm=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,Wm=/\\(\\)?/g,$m=Nt(function(n){var a=[];return zm(n).replace(Hm,function(t,e,n,o){a.push(n?o.replace(Wm,'$1'):e||t)}),a}),Km=function(t){return Ps(t)?t:$m(t)},Um=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qm=/^\w*$/,Jm=function(o,i){if(Ps(o))return!1;var t=typeof o;return'number'==t||'symbol'==t||'boolean'==t||null==o||Ga(o)||Qm.test(o)||!Um.test(o)||null!=i&&o in Object(i)},Gm=function(n){if('string'==typeof n||Ga(n))return n;var o=n+'';return'0'==o&&1/n==-(1/0)?'-0':o},Ym=function(i,e){e=Jm(e,i)?[e]:Km(e);for(var t=0,n=e.length;null!=i&&t<n;)i=i[Gm(e[t++])];return t&&t==n?i:void 0},Xm=function(i,e,t){var n=null==i?void 0:Ym(i,e);return void 0===n?t:n},Zm=function(n,e){return e in Object(n)},eu=function(s,e,t){e=Jm(e,s)?[e]:Km(e);for(var n=-1,o=e.length,l,r;++n<o&&(r=Gm(e[n]),!!(l=null!=s&&t(s,r)));)s=s[r];if(l)return l;var o=s?s.length:0;return!!o&&za(o)&&$a(r,o)&&(Ps(s)||Vs(s)||Cs(s))},tu=function(n,e){return null!=n&&eu(n,e,Zm)},nu=function(i,e){return Jm(i)&&Om(e)?Bm(Gm(i),e):function(t){var n=Xm(t,i);return void 0===n&&n===e?tu(t,i):zc(e,n,void 0,3)}},ou=function(t){return t},iu=function(n){return function(e){return Ym(e,n)}},ru=function(t){return Jm(t)?Ba(Gm(t)):iu(t)},au=function(t){return'function'==typeof t?t:null==t?ou:'object'==typeof t?Ps(t)?nu(t[0],t[1]):Mm(t):ru(t)},su=ds(function(o,e){var t=Ys(e);return ws(t)&&(t=void 0),ws(o)?Em(o,wm(e,1,ws,!0),au(t)):[]}),ly=ds(function(o,e){var t=Ys(e);return ws(t)&&(t=void 0),ws(o)?Em(o,wm(e,1,ws,!0),void 0,t):[]}),dy=function(i,e,t){var n=i?i.length:0;return n?(e=t||void 0===e?1:as(e),_m(i,0>e?0:e,n)):[]},cy=function(i,e,t){var n=i?i.length:0;return n?(e=t||void 0===e?1:as(e),e=n-e,_m(i,0,0>e?0:e)):[]},py=function(a,e,t,n){for(var o=a.length,i=n?o:-1;(n?i--:++i<o)&&e(a[i],i,a););return t?_m(a,n?0:i,n?i+1:o):_m(a,n?i+1:0,n?o:i)},uu=function(o,e,t){return o===o&&(void 0!==t&&(o=o<=t?o:t),void 0!==e&&(o=o>=e?o:e)),o},pu=function(t){return t?uu(as(t),0,4294967295):0},gu=function(a,e,t,r){var o=a.length;for(t=as(t),0>t&&(t=-t>o?0:o+t),r=void 0===r||r>o?o:as(r),0>r&&(r+=o),r=t>r?0:pu(r);t<r;)a[t++]=e;return a},fu=function(a,e,t){for(var n=a.length,o=t?n:-1;t?o--:++o<n;)if(e(a[o],o,a))return o;return-1},hu=function(t){return t&&t.length?t[0]:void 0},uy=function(h,e,t){for(var b=t?Am:xm,o=h[0].length,i=h.length,r=i,a=Array(i),s=Infinity,d=[],l;r--;)l=h[r],r&&e&&(l=Cm(l,Tm(e))),s=na(l.length,s),a[r]=!t&&(e||120<=o&&120<=l.length)?new Cc(r&&l):void 0;l=h[0];var c=-1,m=a[0];outer:for(;++c<o&&d.length<s;){var u=l[c],p=e?e(u):u;if(u=t||0!==u?u:0,m?!Pm(m,p):!b(d,p,t)){for(r=i;--r;){var g=a[r];if(g?!Pm(g,p):!b(h[r],p,t))continue outer}m&&m.push(p),d.push(u)}}return d},_u=function(t){return ws(t)?t:[]},yu=ds(function(n){var e=Cm(n,_u);return e.length&&e[0]===n[0]?uy(e):[]}),my=ds(function(o){var e=Ys(o),t=Cm(o,_u);return e===Ys(t)?e=void 0:t.pop(),t.length&&t[0]===o[0]?uy(t,au(e)):[]}),gy=ds(function(o){var e=Ys(o),t=Cm(o,_u);return e===Ys(t)?e=void 0:t.pop(),t.length&&t[0]===o[0]?uy(t,void 0,e):[]}),hy=Array.prototype,xu=hy.join,Au=function(o,e){var t=o.length;if(t)return e+=0>e?t:0,$a(e,t)?o[e]:void 0},Cu=function(a,e,t,n){for(var o=t-1,i=a.length;++o<i;)if(n(a[o],e))return o;return-1},Tu=Array.prototype,Pu=Tu.splice,Eu=function(p,e,t,n){var o=n?Cu:km,i=-1,r=e.length,a=p;for(t&&(a=Cm(p,Tm(t)));++i<r;)for(var s=0,d=e[i],l=t?t(d):d;-1<(s=o(a,l,s,n));)a!==p&&Pu.call(a,s,1),Pu.call(p,s,1);return p},Su=function(n,e){return n&&n.length&&e&&e.length?Eu(n,e):n},fy=ds(Su),by=function(a,e){for(var t=-1,n=e.length,o=Array(n);++t<n;)o[t]=null==a?void 0:Xm(a,e[t]);return o},Ru=function(n,e){return 1==e.length?n:Ym(n,_m(e,0,-1))},Fu=Array.prototype,Iu=Fu.splice,Nu=function(l,e){for(var t=l?e.length:0,n=t-1,o;t--;)if(o=e[t],t==n||o!==i){var i=o;if($a(o))Iu.call(l,o,1);else if(!Jm(o,l)){var r=Km(o),a=Ru(l,r);null!=a&&delete a[Gm(Ys(r))]}else delete l[Gm(o)]}return l},Bu=function(c,e){if(c!==e){var t=void 0!==c,p=null===c,u=c===c,m=Ga(c),g=void 0!==e,h=null===e,f=e===e,b=Ga(e);if(!h&&!b&&!m&&c>e||m&&g&&f&&!h&&!b||p&&g&&f||!t&&f||!u)return 1;if(!p&&!m&&!b&&c<e||b&&t&&u&&!p&&!m||h&&t&&u||!g&&u||!f)return-1}return 0},Mu=ds(function(i,e){e=wm(e,1);var t=i?i.length:0,n=by(i,e);return Nu(i,Cm(e,function(n){return $a(n,t)?+n:n}).sort(Bu)),n}),yy=Array.prototype,Lu=yy.reverse,ju=function(b,e,t,n){e=t(e);for(var o=0,i=b?b.length:0,r=e!==e,a=null===e,s=Ga(e),d=void 0===e;o<i;){var l=ia((o+i)/2),c=t(b[l]),m=void 0!==c,u=null===c,y=c===c,g=Ga(c);if(r)var v=n||y;else v=d?y&&(n||m):a?y&&m&&(n||!u):s?y&&m&&!u&&(n||!g):u||g?!1:n?c<=e:c<e;v?o=l+1:i=l}return na(i,4294967294)},qu=function(s,e,l){var n=0,o=s?s.length:n;if('number'==typeof e&&e===e&&o<=2147483647){for(;n<o;){var i=n+o>>>1,r=s[i];null!==r&&!Ga(r)&&(l?r<=e:r<e)?n=i+1:o=i}return o}return ju(s,e,ou,l)},zu=function(l,e){for(var t=-1,c=l.length,o=0,i=[];++t<c;){var r=l[t],a=e?e(r):r;if(!t||!Oa(a,s)){var s=a;i[o++]=0===r?0:r}}return i},Hu=Qd&&1/Al(new Qd([,-0]))[1]==1/0?function(t){return new Qd(t)}:function(){},Wu=function(p,e,t){var n=-1,o=xm,i=p.length,r=!0,a=[],s=a;if(t)r=!1,o=Am;else if(200<=i){var d=e?null:Hu(p);if(d)return Al(d);r=!1,o=Pm,s=new Cc}else s=e?[]:a;outer:for(;++n<i;){var l=p[n],c=e?e(l):l;if(l=t||0!==l?l:0,r&&c===c){for(var m=s.length;m--;)if(s[m]===c)continue outer;e&&s.push(c),a.push(l)}else o(s,c,t)||(s!==a&&s.push(c),a.push(l))}return a},$u=ds(function(t){return Wu(wm(t,1,ws,!0))}),vy=ds(function(n){var e=Ys(n);return ws(e)&&(e=void 0),Wu(wm(n,1,ws,!0),au(e))}),wy=ds(function(n){var e=Ys(n);return ws(e)&&(e=void 0),Wu(wm(n,1,ws,!0),void 0,e)}),_y=function(s,e){for(var t=-1,n=s.length,o=0,i=[],r;++t<n;)r=s[t],e(r,t,s)&&(i[o++]=r);return i},Ju=function(n){if(!(n&&n.length))return[];var o=0;return n=_y(n,function(t){if(ws(t))return o=oa(t.length,o),!0}),ys(o,function(e){return Cm(n,Ba(e))})},xy=function(o,i){if(!(o&&o.length))return[];var e=Ju(o);return null==i?e:Cm(e,function(t){return Ua(i,void 0,t)})},ky=ds(function(n,e){return ws(n)?Em(n,e):[]}),Cy=function(a,e,t){for(var n=-1,o=a.length,i;++n<o;)i=i?jd(Em(i,a[n],e,t),Em(a[n],i,e,t)):a[n];return i&&i.length?Wu(i,e,t):[]},Zu=ds(function(t){return Cy(_y(t,ws))}),Ty=ds(function(n){var e=Ys(n);return ws(e)&&(e=void 0),Cy(_y(n,ws),au(e))}),Ay=ds(function(n){var e=Ys(n);return ws(e)&&(e=void 0),Cy(_y(n,ws),void 0,e)}),Sy=ds(Ju),Py=function(l,e,t){for(var n=-1,o=l.length,i=e.length,r={},a;++n<o;)a=n<i?e[n]:void 0,t(r,l[n],a);return r},ip=function(c,e,t,n){e=Jm(e,c)?[e]:Km(e);for(var o=-1,i=e.length,r=c,a;null!=r&&++o<i;){if(a=Gm(e[o]),Da(r)){var s=t;if(o!=i-1){var d=r[a];s=n?n(d,a,r):void 0,void 0===s&&(s=null==d?$a(e[o+1])?[]:{}:d)}Ia(r,a,s)}r=r[a]}return c},rp=ds(function(o){var e=o.length,t=1<e?o[e-1]:void 0;return t='function'==typeof t?(o.pop(),t):void 0,xy(o,t)}),Ey={chunk:function(s,e,t){e=(t?Ka(s,e,t):void 0===e)?1:oa(as(e),0);var n=s?s.length:0;if(!n||1>e)return[];for(var l=0,i=0,r=Array(ot(n/e));l<n;)r[i++]=_m(s,l,l+=e);return r},compact:function(a){for(var e=-1,t=a?a.length:0,n=0,o=[],i;++e<t;)i=a[e],i&&(o[n++]=i);return o},concat:function(){for(var i=arguments.length,e=Array(i?i-1:0),t=arguments[0],n=i;n--;)e[n-1]=arguments[n];return i?jd(Ps(t)?Bd(t):[t],wm(e,1)):[]},difference:Sm,differenceBy:su,differenceWith:ly,drop:dy,dropRight:cy,dropRightWhile:function(n,e){return n&&n.length?py(n,au(e,3),!0,!0):[]},dropWhile:function(n,e){return n&&n.length?py(n,au(e,3),!0):[]},fill:function(a,e,t,r){var o=a?a.length:0;return o?(t&&'number'!=typeof t&&Ka(a,e,t)&&(t=0,r=o),gu(a,e,t,r)):[]},findIndex:function(n,e){return n&&n.length?fu(n,au(e,3)):-1},findLastIndex:function(n,e){return n&&n.length?fu(n,au(e,3),!0):-1},first:hu,flatten:function(n){var e=n?n.length:0;return e?wm(n,1):[]},flattenDeep:function(n){var e=n?n.length:0;return e?wm(n,1/0):[]},flattenDepth:function(o,e){var t=o?o.length:0;return t?(e=void 0===e?1:as(e),wm(o,e)):[]},fromPairs:function(a){for(var e=-1,t=a?a.length:0,n={},o;++e<t;)o=a[e],n[o[0]]=o[1];return n},head:hu,indexOf:function(i,e,t){var n=i?i.length:0;return n?(t=as(t),0>t&&(t=oa(n+t,0)),km(i,e,t)):-1},initial:function(t){return cy(t,1)},intersection:yu,intersectionBy:my,intersectionWith:gy,join:function(n,e){return n?xu.call(n,e):''},last:Ys,lastIndexOf:function(a,e,t){var n=a?a.length:0;if(!n)return-1;var r=n;if(void 0!==t&&(r=as(t),r=(0>r?oa(n+r,0):na(r,n-1))+1),e!==e)return vm(a,r,!0);for(;r--;)if(a[r]===e)return r;return-1},nth:function(n,e){return n&&n.length?Au(n,as(e)):void 0},pull:fy,pullAll:Su,pullAllBy:function(o,e,t){return o&&o.length&&e&&e.length?Eu(o,e,au(t)):o},pullAllWith:function(o,e,t){return o&&o.length&&e&&e.length?Eu(o,e,void 0,t):o},pullAt:Mu,remove:function(s,e){var t=[];if(!(s&&s.length))return t;var n=-1,o=[],i=s.length;for(e=au(e,3);++n<i;){var r=s[n];e(r,n,s)&&(t.push(r),o.push(n))}return Nu(s,o),t},reverse:function(t){return t?Lu.call(t):t},slice:function(i,e,t){var a=i?i.length:0;return a?(t&&'number'!=typeof t&&Ka(i,e,t)?(e=0,t=a):(e=null==e?0:as(e),t=void 0===t?a:as(t)),_m(i,e,t)):[]},sortedIndex:function(n,e){return qu(n,e)},sortedIndexBy:function(o,e,t){return ju(o,e,au(t))},sortedIndexOf:function(i,e){var t=i?i.length:0;if(t){var n=qu(i,e);if(n<t&&Oa(i[n],e))return n}return-1},sortedLastIndex:function(n,e){return qu(n,e,!0)},sortedLastIndexBy:function(o,e,t){return ju(o,e,au(t),!0)},sortedLastIndexOf:function(i,e){var t=i?i.length:0;if(t){var n=qu(i,e,!0)-1;if(Oa(i[n],e))return n}return-1},sortedUniq:function(t){return t&&t.length?zu(t):[]},sortedUniqBy:function(n,e){return n&&n.length?zu(n,au(e)):[]},tail:function(t){return dy(t,1)},take:function(o,e,t){return o&&o.length?(e=t||void 0===e?1:as(e),_m(o,0,0>e?0:e)):[]},takeRight:function(i,e,t){var n=i?i.length:0;return n?(e=t||void 0===e?1:as(e),e=n-e,_m(i,0>e?0:e,n)):[]},takeRightWhile:function(n,e){return n&&n.length?py(n,au(e,3),!1,!0):[]},takeWhile:function(n,e){return n&&n.length?py(n,au(e,3)):[]},union:$u,unionBy:vy,unionWith:wy,uniq:function(t){return t&&t.length?Wu(t):[]},uniqBy:function(n,e){return n&&n.length?Wu(n,au(e)):[]},uniqWith:function(n,e){return n&&n.length?Wu(n,void 0,e):[]},unzip:Ju,unzipWith:xy,without:ky,xor:Zu,xorBy:Ty,xorWith:Ay,zip:Sy,zipObject:function(n,e){return Py(n||[],e||[],Ia)},zipObjectDeep:function(n,e){return Py(n||[],e||[],ip)},zipWith:rp};const sp=new Map,dp={transform(a,e,t){const n=dp.getTransformationCase(a,e)||dp.defaultTransform,o=n(a,e,Object.assign({},t)),i=Ey.last(e.operations).baseVersion;return Bt(i,o)},defaultTransform(s,e,l){const n=[];let o=e.operations,c=[];for(const t of s.operations){const r=[t];for(const e of o)for(let t=0;t<r.length;t++){const n=r[t],o=hm(n,e,l);Array.prototype.splice.apply(r,[t,1].concat(o)),t+=o.length-1;const i=Object.assign({},l);i.isStrong=!l.isStrong,i.insertBefore=void 0===l.insertBefore?void 0:!l.insertBefore;const a=hm(e,n,i);Array.prototype.push.apply(c,a)}o=c,c=[];for(const e of r)n.push(e)}return Kt(s.constructor,n)},addTransformationCase(i,e,t){let n=sp.get(i);n||(n=new Map,sp.set(i,n)),n.set(e,t)},getTransformationCase(a,e){let t=sp.get(a.constructor);if(!t||!t.get(e.constructor)){const n=sp.keys();for(const o of n)if(a instanceof o&&sp.get(o).get(e.constructor)){t=sp.get(o);break}}return t?t.get(e.constructor):void 0},transformDeltaSets(l,e,t=null){const n=Array.from(l),c=Array.from(e),p=null!==t,u={isStrong:!0};if(p){u.wasAffected=new Map,u.originalDelta=new Map,u.document=t,u.undoMode=!0;for(const t of c)u.originalDelta.set(t,t)}for(let o=0;o<n.length;o++){const a=[n[o]];for(let e=0;e<c.length;e++){const l=[c[e]];for(let e=0;e<a.length;e++)for(let t=0;t<l.length;t++){p&&Lt(a[e],l[t],u);const n=dp.transform(a[e],l[t],{insertBefore:u.insertBefore,forceNotSticky:u.forceNotSticky,isStrong:u.isStrong,forceWeakRemove:u.forceWeakRemove,undoMode:u.undoMode}),o=dp.transform(l[t],a[e],{insertBefore:!u.insertBefore,forceNotSticky:u.forceNotSticky,isStrong:!u.isStrong,forceWeakRemove:u.forceWeakRemove,undoMode:u.undoMode});if(p){$t(a[e],n,u);const i=u.originalDelta.get(l[t]);for(const t of o)u.originalDelta.set(t,i)}a.splice(e,1,...n),e+=n.length-1,l.splice(t,1,...o),t+=o.length-1}c.splice(e,1,...l),e+=l.length-1}n.splice(o,1,...a),o+=a.length-1}const a=Mt(n)-Mt(l),r=Mt(c)-Mt(e);return r<a?Dt(c,a-r):a<r&&Dt(n,r-a),{deltasA:n,deltasB:c}}};var lp=dp;class cp extends om{get type(){return'marker'}get _reverseDeltaClass(){return cp}static get className(){return'engine.model.delta.MarkerDelta'}}vt('setMarker',function(a,r){const s='string'==typeof a?a:a.name,n=this.document.markers.get(s);if(!r&&!n)throw new ba('batch-setMarker-no-range: Range parameter is required when adding a new marker.');const l=n?n.getRange():null;return r?Ut(this,s,l,r):Ut(this,s,null,l),this}),vt('removeMarker',function(o){const i='string'==typeof o?o:o.name;if(!this.document.markers.has(i))throw new ba('batch-removeMarker-no-marker: Trying to remove marker which does not exist.');const t=this.document.markers.get(i).getRange();return Ut(this,i,t,null),this}),nm.register(cp);const mp=lp.addTransformationCase,up=lp.defaultTransform;mp(rm,fm,(i,e,t)=>{const n=up(i,e,t);return i.range.containsPosition(e.position)&&n.push(Jt(e,i)),n}),mp(rm,cm,(a,l,e)=>{if(!l.position)return up(a,l,e);const t=e.undoMode,d=new ry(l.position.root,l.position.path.slice(0,-1)),i=up(a,l,e);if(t||!(l._cloneOperation instanceof Qc))return i;for(const t of a.operations)if(t.range.containsPosition(d)||t.range.start.isEqual(d)){const o=new rm,e=d.getShiftedBy(1),n=ry.createFromPosition(e);n.path.push(0);const a=l._cloneOperation.nodes.getNode(0).getAttribute(t.key);o.addOperation(new Wc(new Zs(e,n),t.key,void 0===a?null:a,t.newValue,0)),i.push(o);break}return i}),mp(lm,mm,(i,e,t)=>{if(!e.position)return up(i,e,t);const n=t.undoMode;return!n&&i.position.isEqual(e.position)?[e.getReversed(),i.clone()]:up(i,e,t)}),mp(cp,cm,Qt),mp(cp,mm,Qt),mp(cp,pm,Qt),mp(cp,gm,Qt),mp(cp,sm,Qt),mp(cp,um,Qt),mp(sm,mm,(a,e,t)=>{const n=t.undoMode;if(n||!e.position)return up(a,e,t);const o=a.sourcePosition.root==e.position.root&&'same'===V(a.sourcePosition.getParentPath(),e.position.getParentPath()),i=a.sourcePosition.offset<=e.position.offset&&a.sourcePosition.offset+a.howMany>e.position.offset;return o&&i?[e.getReversed(),a.clone()]:up(a,e,t)}),mp(mm,lm,(i,e,t)=>{if(!i.position)return up(i,e,t);const n=t.undoMode;return!n&&i.position.isEqual(e.position)?[Gt()]:up(i,e,t)}),mp(mm,sm,(a,e,t)=>{const n=t.undoMode;if(n||!a.position)return up(a,e,t);const o=a.position.root==e.sourcePosition.root&&'same'===V(a.position.getParentPath(),e.sourcePosition.getParentPath()),i=e.sourcePosition.offset<=a.position.offset&&e.sourcePosition.offset+e.howMany>a.position.offset;return o&&i?[Gt()]:up(a,e,t)}),mp(cm,cm,(a,e,t)=>{const n=t.undoMode;if(n)return up(a,e,t);if(!a.position||!e.position)return up(a,e,t);const o=a.position.getParentPath(),i=e.position.getParentPath();if(a.position.root==e.position.root&&'same'==V(o,i))if(a=a.clone(),a.position.offset<e.position.offset||a.position.offset==e.position.offset&&t.isStrong){a._cloneOperation instanceof Kc&&e._cloneOperation instanceof Kc&&a._cloneOperation.sourcePosition.offset>e._cloneOperation.sourcePosition.offset&&a._cloneOperation.sourcePosition.offset--;const t=Zs.createFromPositionAndShift(a.position,a._moveOperation.howMany),n=Zs.createFromPositionAndShift(e.position,e._moveOperation.howMany),o=t.getDifference(n);let i=0;for(const t of o)i+=t.end.offset-t.start.offset;return 0==i?(a.operations.pop(),a.addOperation(new Gc(a.operations[0].baseVersion+1))):a.operations[1].howMany=i,[a]}else{const n=Object.assign({},t);return n.isStrong=!0,n.insertBefore=!0,up(a,e,n)}return up(a,e,t)}),mp(cm,gm,(o,e,t)=>o.position?o.position.root==e.position.root&&'same'===V(e.position.path,o.position.getParentPath())?[Gt()]:up(o,e,t):up(o,e,t)),mp(cm,pm,(s,e,t)=>{if(!s.position)return up(s,e,t);const n=s.position.root==e.range.start.root,o=n&&'same'===V(s.position.getParentPath(),e.range.start.getParentPath()),i=e.range.start.offset<s.position.offset&&e.range.end.offset>=s.position.offset;if(o&&i)return[Gt()];if(n&&'same'===V(s.position.getParentPath(),e.range.end.getShiftedBy(-1).path)){const t=s.clone(),n=ry.createFromPosition(e.range.start);n.path.push(e.howMany-1);const o=n.getShiftedBy(1);t._cloneOperation.position=o;const i=ry.createFromPosition(n);i.path.push(s.position.offset),t._moveOperation.sourcePosition=i;const r=ry.createFromPosition(o);return r.path.push(0),t._moveOperation.targetPosition=r,[t]}return up(s,e,t)}),mp(cm,rm,(a,e,t)=>{if(!a.position)return up(a,e,t);a=a.clone();const n=t.undoMode,r=new ry(a.position.root,a.position.path.slice(0,-1));if(n||!(a._cloneOperation instanceof Qc))return[a];for(const n of e.operations)if(n.range.containsPosition(r)||n.range.start.isEqual(r)){null===n.newValue?a._cloneOperation.nodes.getNode(0).removeAttribute(n.key):a._cloneOperation.nodes.getNode(0).setAttribute(n.key,n.newValue);break}return[a]}),mp(gm,cm,(o,e,t)=>e.position?o.position.root==e.position.root&&'same'===V(o.position.path,e.position.getParentPath())?[e.getReversed(),o.clone()]:up(o,e,t):up(o,e,t)),mp(fm,rm,(o,e)=>{const t=[o.clone()];return e.range.containsPosition(o.position)&&t.push(Jt(o,e)),t}),mp(pm,cm,(a,e,t)=>{if(!e.position)return up(a,e,t);const n=a.range.start.root==e.position.root,o=n&&'same'===V(a.range.start.getParentPath(),e.position.getParentPath()),i=a.range.start.offset<e.position.offset&&a.range.end.offset>=e.position.offset;if(o&&i)return[e.getReversed(),a.clone()];if(n&&'same'===V(e.position.getParentPath(),a.range.end.getShiftedBy(-1).path)){const e=a.clone();return e._insertOperation.position.offset++,e._moveOperation.howMany++,e._moveOperation.targetPosition.path[e._moveOperation.targetPosition.path.length-2]++,[e]}return up(a,e,t)}),mp(um,cm,(a,e,t)=>{const n=t.undoMode,o=up(a,e,t);if(n||!(e._cloneOperation instanceof Qc))return o;const i=e._cloneOperation.position.getShiftedBy(-1);if(i&&a.operations[0].position.isEqual(i)){const e=a.clone();e.operations[0].position=i.getShiftedBy(1),o.push(e)}return o}),mp(cm,um,(a,e,t)=>{a=a.clone();const n=t.undoMode;if(n||!(a._cloneOperation instanceof Qc))return[a];const r=a._cloneOperation.position.getShiftedBy(-1);if(r&&!n&&e.operations[0].position.isEqual(r)){const t=e.clone();return t.operations[0].position=r.getShiftedBy(1),t.operations[0].oldName=a._cloneOperation.nodes.getNode(0).name,[a,t]}return[a]}),mp(dm,cm,(a,e,t)=>{const n=up(a,e,t),o=e._cloneOperation.position||e._cloneOperation.targetPosition;if(!o)return up(a,e,t);const s=t.undoMode;if(s)return n;for(const i of n)if(i instanceof dm){const n=i._moveOperation,e=n.sourcePosition.getShiftedBy(n.howMany);e.isEqual(o)&&(n.howMany+=1)}return n}),mp(cm,dm,(s,e,t)=>{const n=t.undoMode;if(n)return up(s,e,t);const o=s._cloneOperation.position||s._cloneOperation.targetPosition;if(!o)return up(s,e,t);e=e.clone();const l=e._moveOperation,r=l.sourcePosition.getShiftedBy(l.howMany);return r.isEqual(o)&&(l.howMany+=1),up(s,e,t)});class pp extends Js{constructor(o,e,t='main'){super(e),this._doc=o,this.rootName=t}get document(){return this._doc}is(n,e){return e?'rootElement'==n&&e==this.name||super.is(n,e):'rootElement'==n||super.is(n)}toJSON(){return this.rootName}}class gp{constructor(){this._deltas=[],this._historyPoints=new Map,this._undoPairs=new Map,this._undoneDeltas=new Set}addDelta(n){if(0<n.operations.length&&!this._historyPoints.has(n.baseVersion)){const e=this._deltas.length;this._deltas[e]=n,this._historyPoints.set(n.baseVersion,e)}}*getDeltas(o=0,i=ta){if(0!==this._deltas.length){let t=this._getIndex(o);if(-1!=t)for(;t<this._deltas.length;){const n=this._deltas[t++];if(n.baseVersion>=i)break;yield n}}}getDelta(n){const e=this._historyPoints.get(n);return void 0===e?null:this._deltas[e]}setDeltaAsUndone(n,e){this._undoPairs.set(e,n),this._undoneDeltas.add(n)}isUndoingDelta(t){return this._undoPairs.has(t)}isUndoneDelta(t){return this._undoneDeltas.has(t)}getUndoneDelta(t){return this._undoPairs.get(t)}_getIndex(o){const e=this._historyPoints.get(o);if(void 0===e){const e=this._deltas[this._deltas.length-1],t=e.baseVersion+e.operations.length;if(0>o||o>=t)return-1;throw new ba('model-history-wrong-version: Given base version points to the middle of a delta.')}return e}}class fp extends Zs{constructor(n,e){super(n,e),Yt.call(this)}detach(){this.stopListening()}}r(fp,Va);class hp{constructor(n,e){this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map,n&&this.setRanges(n,e)}get anchor(){if(0<this._ranges.length){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(0<this._ranges.length){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){const t=this._ranges.length;return 1===t&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(i){if(this.rangeCount!=i.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(i.anchor)||!this.focus.isEqual(i.focus))return!1;for(const e of this._ranges){let t=!1;for(const n of i._ranges)if(e.isEqual(n)){t=!0;break}if(!t)return!1}return!0}*getRanges(){for(const t of this._ranges)yield Zs.createFromRange(t)}getFirstRange(){let n=null;for(const o of this._ranges)(!n||o.start.isBefore(n.start))&&(n=o);return n?Zs.createFromRange(n):null}getLastRange(){let n=null;for(const o of this._ranges)(!n||o.end.isAfter(n.end))&&(n=o);return n?Zs.createFromRange(n):null}getFirstPosition(){const t=this.getFirstRange();return t?ry.createFromPosition(t.start):null}getLastPosition(){const t=this.getLastRange();return t?ry.createFromPosition(t.end):null}addRange(n,e=!1){this._pushRange(n),this._lastRangeBackward=!!e,this.fire('change:range',{directChange:!0})}removeAllRanges(){0<this._ranges.length&&(this._removeAllRanges(),this.fire('change:range',{directChange:!0}))}setRanges(o,e=!1){o=Array.from(o);const i=o.some((n)=>{if(!(n instanceof Zs))throw new ba('model-selection-added-not-range: Trying to add an object that is not an instance of Range.');return this._ranges.every((e)=>!e.isEqual(n))});if(o.length!==this._ranges.length||i){this._removeAllRanges();for(const e of o)this._pushRange(e);this._lastRangeBackward=!!e,this.fire('change:range',{directChange:!0})}}setTo(t){t instanceof hp?this.setRanges(t.getRanges(),t.isBackward):t instanceof Zs?this.setRanges([t]):P(t)?this.setRanges(t):this.setRanges([new Zs(t)])}setIn(t){this.setRanges([Zs.createIn(t)])}setOn(t){this.setRanges([Zs.createOn(t)])}setCollapsedAt(i,e){const t=ry.createAt(i,e),n=new Zs(t,t);this.setRanges([n])}collapseToStart(){const t=this.getFirstPosition();null!==t&&this.setRanges([new Zs(t,t)])}collapseToEnd(){const t=this.getLastPosition();null!==t&&this.setRanges([new Zs(t,t)])}moveFocusTo(o,e){if(null===this.anchor)throw new ba('model-selection-moveFocusTo-no-ranges: Cannot set selection focus if there are no ranges in selection.');const t=ry.createAt(o,e);if('same'!=t.compareWith(this.focus)){const n=this.anchor;this._ranges.length&&this._popRange(),'before'==t.compareWith(n)?this.addRange(new Zs(t,n),!0):this.addRange(new Zs(n,t))}}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}clearAttributes(){if(0<this._attrs.size){const t=Array.from(this._attrs.keys());this._attrs.clear(),this.fire('change:attribute',{attributeKeys:t,directChange:!0})}}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire('change:attribute',{attributeKeys:[t],directChange:!0}))}setAttribute(n,e){this.getAttribute(n)!==e&&(this._attrs.set(n,e),this.fire('change:attribute',{attributeKeys:[n],directChange:!0}))}setAttributesTo(i){if(i=T(i),!Zt(i,this._attrs)){const e=new Set(Array.from(i.keys()).concat(Array.from(this._attrs.keys())));for(const[t,n]of i)this._attrs.get(t)===n&&e.delete(t);this._attrs=i,this.fire('change:attribute',{attributeKeys:Array.from(e),directChange:!0})}}getSelectedElement(){if(1!==this.rangeCount)return null;const o=this.getFirstRange(),e=o.start.nodeAfter,t=o.end.nodeBefore;return e instanceof Js&&e==t?e:null}*getSelectedBlocks(){const i=new WeakSet;for(const e of this.getRanges()){const t=tn(e.start,i);t&&(yield t);for(const t of e.getWalker())'elementEnd'==t.type&&en(t.item,i)&&(yield t.item);const n=tn(e.end,i);n&&!e.end.isTouching(ry.createAt(n))&&(yield n)}}containsEntireContent(o=this.anchor.root){const e=ry.createAt(o),t=ry.createAt(o,'end');return e.isTouching(this.getFirstPosition())&&t.isTouching(this.getLastPosition())}static createFromSelection(n){const e=new this;return e.setTo(n),e}_pushRange(t){if(!(t instanceof Zs))throw new ba('model-selection-added-not-range: Trying to add an object that is not an instance of Range.');this._checkRange(t),this._ranges.push(Zs.createFromRange(t))}_checkRange(n){for(let o=0;o<this._ranges.length;o++)if(n.isIntersecting(this._ranges[o]))throw new ba('model-selection-range-intersects: Trying to add a range that intersects with another range from selection.',{addedRange:n,intersectingRange:this._ranges[o]})}_popRange(){this._ranges.pop()}_removeAllRanges(){for(;0<this._ranges.length;)this._popRange()}}r(hp,Va);const bp='selection:',_p=new Set(['addAttribute','removeAttribute','changeAttribute','addRootAttribute','removeRootAttribute','changeRootAttribute']);class yp extends hp{constructor(t){super(),this._document=t,this._attributePriority=new Map,this.listenTo(this._document,'change',(i,e,t,n)=>{_p.has(e)&&this._updateAttributes(!1),on(t,n,this._document)})}get isCollapsed(){const t=this._ranges.length;return 0===t?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return 0<this._ranges.length}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}addRange(n,e=!1){super.addRange(n,e),this.refreshAttributes()}removeAllRanges(){super.removeAllRanges(),this.refreshAttributes()}setRanges(n,e=!1){super.setRanges(n,e),this.refreshAttributes()}setAttribute(n,e){(this.isCollapsed&&this.anchor.parent.isEmpty&&this._storeAttribute(n,e),this._setAttribute(n,e))&&this.fire('change:attribute',{attributeKeys:[n],directChange:!0})}removeAttribute(t){(this.isCollapsed&&this.anchor.parent.isEmpty&&this._removeStoredAttribute(t),this._removeAttribute(t))&&this.fire('change:attribute',{attributeKeys:[t],directChange:!0})}setAttributesTo(n){n=T(n),this.isCollapsed&&this.anchor.parent.isEmpty&&this._setStoredAttributesTo(n);const o=this._setAttributesTo(n);if(0<o.size){const t=Array.from(o);this.fire('change:attribute',{attributeKeys:t,directChange:!0})}}clearAttributes(){this.setAttributesTo([])}refreshAttributes(){this._updateAttributes(!0)}static createFromSelection(){throw new ba('documentselection-cannot-create: Cannot create a new DocumentSelection instance.')}_popRange(){this._ranges.pop().detach()}_pushRange(n){const e=this._prepareRange(n);e&&this._ranges.push(e)}_prepareRange(n){if(!(n instanceof Zs))throw new ba('model-selection-added-not-range: Trying to add an object that is not an instance of Range.');if(n.root==this._document.graveyard)return void ya.warn('model-selection-range-in-graveyard: Trying to add a Range that is in the graveyard root. Range rejected.');this._checkRange(n);const i=fp.createFromRange(n);return this.listenTo(i,'change:range',(t,e,n)=>{i.root==this._document.graveyard&&this._fixGraveyardSelection(i,n.sourcePosition),this.fire('change:range',{directChange:!1})}),i}_updateAttributes(i){const e=T(this._getSurroundingAttributes()),a=T(this.getAttributes());if(i)this._attributePriority=new Map,this._attrs=new Map;else for(const[n,e]of this._attributePriority)'low'==e&&(this._attrs.delete(n),this._attributePriority.delete(n));this._setAttributesTo(e,!1);const n=[];for(const[e,t]of this.getAttributes())a.has(e)&&a.get(e)===t||n.push(e);for(const[e]of a)this.hasAttribute(e)||n.push(e);0<n.length&&this.fire('change:attribute',{attributeKeys:n,directChange:!1})}static _getStoreAttributeKey(t){return bp+t}static _isStoreAttributeKey(t){return t.startsWith(bp)}_setAttribute(a,e,t=!0){const n=t?'normal':'low';if('low'==n&&'normal'==this._attributePriority.get(a))return!1;const o=super.getAttribute(a);return o!==e&&(this._attrs.set(a,e),this._attributePriority.set(a,n),!0)}_removeAttribute(o,e=!0){const t=e?'normal':'low';return'low'==t&&'normal'==this._attributePriority.get(o)?!1:!!super.hasAttribute(o)&&(this._attrs.delete(o),this._attributePriority.set(o,t),!0)}_setAttributesTo(a,r=!0){const t=new Set;for(const[e,n]of this.getAttributes())a.get(e)!==n&&this._removeAttribute(e,r)&&t.add(e);for(const[n,o]of a){const i=this._setAttribute(n,o,r);i&&t.add(n)}return t}*_getStoredAttributes(){const o=this.getFirstPosition().parent;if(this.isCollapsed&&o.isEmpty)for(const e of o.getAttributeKeys())if(e.startsWith(bp)){const t=e.substr(bp.length);yield[t,o.getAttribute(e)]}}_removeStoredAttribute(n){const e=yp._getStoreAttributeKey(n);this._document.batch().removeAttribute(this.anchor.parent,e)}_storeAttribute(o,e){const t=yp._getStoreAttributeKey(o);this._document.batch().setAttribute(this.anchor.parent,t,e)}_setStoredAttributesTo(a){const r=this.anchor.parent,t=this._document.batch();for(const[n]of this._getStoredAttributes()){const o=yp._getStoreAttributeKey(n);t.removeAttribute(r,o)}for(const[n,o]of a){const i=yp._getStoreAttributeKey(n);t.setAttribute(r,i,o)}}_getSurroundingAttributes(){const i=this.getFirstPosition(),e=this._document.schema;let a=null;if(!this.isCollapsed){const t=this.getFirstRange();for(const n of t){if(n.item.is('element')&&e.objects.has(n.item.name))break;'text'==n.type&&null==a&&(a=n.item.getAttributes())}}else{const r=i.textNode?i.textNode:i.nodeBefore,t=i.textNode?i.textNode:i.nodeAfter;if(a=nn(r),a||(a=nn(t)),!a)for(let t=r;t&&!a;)t=t.previousSibling,a=nn(t);if(!a)for(let o=t;o&&!a;)o=o.nextSibling,a=nn(o);a||(a=this._getStoredAttributes())}return a}_fixGraveyardSelection(a,e){const t=ry.createFromPosition(e),n=this._document.getNearestSelectionRange(t),o=this._ranges.indexOf(a);if(this._ranges.splice(o,1),a.detach(),n){const t=this._prepareRange(n);this._ranges.splice(o,0,t)}this.fire('change:range',{directChange:!1})}}class wp{constructor(){this.objects=new Set,this.limits=new Set,this._items=new Map,this._extensionChains=new Map,this.registerItem('$root'),this.registerItem('$block'),this.registerItem('$inline'),this.registerItem('$text','$inline'),this.allow({name:'$block',inside:'$root'}),this.allow({name:'$inline',inside:'$block'}),this.limits.add('$root'),this.registerItem('$clipboardHolder','$root'),this.allow({name:'$inline',inside:'$clipboardHolder'})}allow(t){this._getItem(t.name).allow(wp._normalizeQueryPath(t.inside),t.attributes)}disallow(t){this._getItem(t.name).disallow(wp._normalizeQueryPath(t.inside),t.attributes)}requireAttributes(n,e){this._getItem(n).requireAttributes(e)}check(i){if(!this.hasItem(i.name))return!1;Ps(i.attributes)?0===i.attributes.length&&i.attributes.push(void 0):i.attributes=[i.attributes];const a=wp._normalizeQueryPath(i.inside),t=this._extensionChains.get(i.name).map((t)=>this._getItem(t));if(!this._getItem(i.name)._checkRequiredAttributes(i.attributes))return!1;for(const n of i.attributes)for(const o of t)if(o._hasMatchingPath('disallow',a,n))return!1;for(const n of i.attributes){if(n&&yp._isStoreAttributeKey(n))continue;let o=!1;for(const e of t)if(e._hasMatchingPath('allow',a,n)){o=!0;break}if(!o)return!1}return!0}hasItem(t){return this._items.has(t)}registerItem(o,e){if(this.hasItem(o))throw new ba('model-schema-item-exists: Item with specified name already exists in schema.');if(!!e&&!this.hasItem(e))throw new ba('model-schema-no-item: Item with specified name does not exist in schema.');this._items.set(o,new vp(this));const i=this.hasItem(e)?this._extensionChains.get(e).concat(o):[o];this._extensionChains.set(o,i)}itemExtends(o,i){if(!this.hasItem(o)||!this.hasItem(i))throw new ba('model-schema-no-item: Item with specified name does not exist in schema.');const e=this._extensionChains.get(o);return e.some((t)=>t==i)}checkAttributeInSelection(o,i){if(o.isCollapsed)return this.check({name:'$text',inside:o.getFirstPosition(),attributes:i});else{const t=o.getRanges();for(const o of t)for(const t of o){const n=t.item.name||'$text',a=Array.from(t.item.getAttributeKeys()).concat(i);if(this.check({name:n,inside:t.previousPosition,attributes:a}))return!0}}return!1}getValidRanges(i,s){const l=[];for(const n of i){let d=n.start,e=n.start;const o=n.end;for(const i of n.getWalker()){const n=i.item.name||'$text',r=ry.createBefore(i.item);this.check({name:n,inside:r,attributes:s})||(!e.isEqual(d)&&l.push(new Zs(e,d)),e=i.nextPosition),d=i.nextPosition}e&&!e.isEqual(o)&&l.push(new Zs(e,o))}return l}getLimitElement(n){let e=Array.from(n.getRanges()).reduce((n,e)=>n?n.getCommonAncestor(e.getCommonAncestor()):e.getCommonAncestor(),null);for(;!this.limits.has(e.name)&&e.parent;)e=e.parent;return e}removeDisallowedAttributes(i,a,s){for(const n of i){const o=n.is('text')?'$text':n.name,t=Array.from(n.getAttributeKeys()),l=wp._normalizeQueryPath(a);if(!this.check({name:o,attributes:t,inside:l}))for(const i of n.getAttributeKeys())this.check({name:o,attributes:i,inside:l})||(s?s.removeAttribute(n,i):n.removeAttribute(i));n.is('element')&&this.removeDisallowedAttributes(n.getChildren(),l.concat(n.name),s)}}_getItem(t){if(!this.hasItem(t))throw new ba('model-schema-no-item: Item with specified name does not exist in schema.');return this._items.get(t)}static _normalizeQueryPath(o){let e=[];if(Ps(o))for(const t of o)t instanceof Js?e.push(t.name):Vs(t)&&e.push(t);else if(o instanceof ry){for(let t=o.parent;null!==t;)e.push(t.name),t=t.parent;e.reverse()}else Vs(o)&&(e=o.split(' '));return e}}class vp{constructor(t){this._schema=t,this._allowed=[],this._disallowed=[],this._requiredAttributes=[]}allow(n,e){this._addPath('_allowed',n,e)}disallow(n,e){this._addPath('_disallowed',n,e)}requireAttributes(t){this._requiredAttributes.push(t)}toJSON(){const t=Hl(this);return t._schema='[model.Schema]',t}_addPath(i,e,a){e=e.slice(),Ps(a)||(a=[a]);for(const n of a)this[i].push({path:e,attribute:n})}_getPaths(i,e){const t='allow'===i?this._allowed:this._disallowed,n=[];for(const o of t)o.attribute===e&&n.push(o.path);return n}_checkRequiredAttributes(i){let e=!0;for(const t of this._requiredAttributes){e=!0;for(const n of t)if(-1==i.indexOf(n)){e=!1;break}if(e)break}return e}_hasMatchingPath(i,e,t){const n=this._getPaths(i,t);for(const o of n)if(rn(this._schema,e,o))return!0;return!1}}class kp{constructor(){this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(t){return this._markers.has(t)}get(t){return this._markers.get(t)||null}set(a,s){const t=a instanceof xp?a.name:a,n=this._markers.get(t);if(n){const o=n.getRange();if(o.isEqual(s))return n;this.remove(t)}const e=fp.createFromRange(s),o=new xp(t,e);return this._markers.set(t,o),this.fire('add:'+t,o),o}remove(o){const e=o instanceof xp?o.name:o,t=this._markers.get(e);return!!t&&(this._markers.delete(e),this.fire('remove:'+e,t),this._destroyMarker(t),!0)}*getMarkersAtPosition(n){for(const e of this)e.getRange().containsPosition(n)&&(yield e)}destroy(){for(const t of this._markers.values())this._destroyMarker(t);this._markers=null,this.stopListening()}*getMarkersGroup(n){for(const e of this._markers.values())e.name.startsWith(n+':')&&(yield e)}_destroyMarker(t){t.stopListening(),t._liveRange.detach(),t._liveRange=null}}r(kp,Va);class xp{constructor(n,e){this.name=n,this._liveRange=e,this._liveRange.delegate('change:range').to(this),this._liveRange.delegate('change:content').to(this)}getStart(){if(!this._liveRange)throw new ba('marker-destroyed: Cannot use a destroyed marker instance.');return ry.createFromPosition(this._liveRange.start)}getEnd(){if(!this._liveRange)throw new ba('marker-destroyed: Cannot use a destroyed marker instance.');return ry.createFromPosition(this._liveRange.end)}getRange(){if(!this._liveRange)throw new ba('marker-destroyed: Cannot use a destroyed marker instance.');return Zs.createFromRange(this._liveRange)}}r(xp,Va);const Ap='$graveyard';class Cp{constructor(){this.version=0,this.schema=new wp,this.history=new gp(this),this.markers=new kp,this.selection=new yp(this),this._pendingChanges=[],this.roots=new Map,this.selection.on('change:range',()=>{for(const t of this.selection.getRanges())if(!this._validateSelectionRange(t))throw new ba('document-selection-wrong-position: Range from document selection starts or ends at incorrect position.',{range:t})}),this.createRoot('$root',Ap)}get graveyard(){return this.getRoot(Ap)}applyOperation(n){if(n.baseVersion!==this.version)throw new ba('model-document-applyOperation-wrong-version: Only operations with matching versions can be applied.',{operation:n});const o=n._execute();this.version++,this.history.addDelta(n.delta),this.fire('change',n.type,o,n.delta.batch,n.delta.type)}batch(t){return new im(this,t)}createRoot(o='$root',e='main'){if(this.roots.has(e))throw new ba('model-document-createRoot-name-exists: Root with specified name already exists.',{name:e});const i=new pp(this,o,e);return this.roots.set(e,i),i}destroy(){this.selection.destroy(),this.stopListening()}enqueueChanges(t){if(this._pendingChanges.push(t),1==this._pendingChanges.length){for(;this._pendingChanges.length;)this._pendingChanges[0](),this._pendingChanges.shift();this.fire('changesDone')}}getRoot(t='main'){if(!this.roots.has(t))throw new ba('model-document-getRoot-root-not-exist: Root with specified name does not exist.',{name:t});return this.roots.get(t)}hasRoot(t){return this.roots.has(t)}getRootNames(){return Array.from(this.roots.keys()).filter((t)=>t!=Ap)}getNearestSelectionRange(i,a='both'){if(this.schema.check({name:'$text',inside:i}))return new Zs(i);let r,t;('both'==a||'backward'==a)&&(r=new Gs({startPosition:i,direction:'backward'})),('both'==a||'forward'==a)&&(t=new Gs({startPosition:i}));for(const n of sn(r,t)){const o=n.walker==r?'elementEnd':'elementStart',e=n.value;if(e.type==o&&this.schema.objects.has(e.item.name))return Zs.createOn(e.item);if(this.schema.check({name:'$text',inside:e.nextPosition}))return new Zs(e.nextPosition)}return null}transformDeltas(o,e,t=!1){return lp.transformDeltaSets(o,e,t?this:null)}toJSON(){const t=Hl(this);return t.selection='[engine.model.DocumentSelection]',t}_getDefaultRoot(){for(const t of this.roots.values())if(t!==this.graveyard)return t;return this.graveyard}_getDefaultRange(){const o=this._getDefaultRoot(),e=new ry(o,[0]),t=this.getNearestSelectionRange(e);return t||new Zs(e)}_validateSelectionRange(t){return an(t.start)&&an(t.end)}}r(Cp,Va);class Tp{constructor(n){const e=this.constructor.build&&this.constructor.build.plugins;this.config=new fa(n,this.constructor.build&&this.constructor.build.config),this.config.define('plugins',e),this.plugins=new wa(this,e),this.commands=new va,this.locale=new xa(this.config.get('lang')),this.t=this.locale.t,this.document=new Cp,this.data=new xc(this.document),this.set('isReadOnly',!1)}initPlugins(){function o(n,o){return n.reduce((t,e)=>e[o]?t.then(e[o].bind(e)):t,Promise.resolve())}const i=this,t=this.config;return function(){const n=t.get('plugins')||[],e=t.get('removePlugins')||[];return i.plugins.load(n,e)}().then((e)=>o(e,'init').then(()=>o(e,'afterInit'))).then(()=>this.fire('pluginsReady'))}destroy(){return this.fire('destroy'),this.stopListening(),this.commands.destroy(),this.plugins.destroy().then(()=>{this.document.destroy(),this.data.destroy()})}execute(...t){this.commands.execute(...t)}static create(o){return new Promise((e)=>{const t=new this(o);e(t.initPlugins().then(()=>{t.fire('dataReady'),t.fire('ready')}).then(()=>t))})}}r(Tp,Ws);const Pp=Ls({},Va,{listenTo(...n){const e=n[0];dn(e)&&(n[0]=this._getProxyEmitter(e)||new Sp(e)),Va.listenTo.apply(this,n)},stopListening(...o){const e=o[0];if(dn(e)){const t=this._getProxyEmitter(e);if(!t)return;o[0]=t}Va.stopListening.apply(this,o)},_getProxyEmitter(t){return s(this,ln(t))}});var Ep=Pp;class Sp{constructor(t){d(this,ln(t)),this._domNode=t}}Ls(Sp.prototype,Va,{on(o,e,i={}){if(Va.on.call(this,o,e,i),!(this._domListeners&&this._domListeners[o])){const e=this._createDomListener(o,!!i.useCapture);this._domNode.addEventListener(o,e,!!i.useCapture),this._domListeners||(this._domListeners={}),this._domListeners[o]=e}},off(o,e){Va.off.call(this,o,e);let t;!this._domListeners[o]||(t=this._events[o])&&t.callbacks.length||this._domListeners[o].removeListener()},_createDomListener(o,e){const t=(e)=>{this.fire(o,e)};return t.removeListener=()=>{this._domNode.removeEventListener(o,t,e),delete this._domListeners[o]},t}});class Vp{constructor(){this._listener=Object.create(Ep)}listenTo(t){this._listener.listenTo(t,'keydown',(n,e)=>{this._listener.fire('_keydown:'+Z(e),e)})}set(a,r,e={}){const t=ee(a),n=e.priority;this._listener.listenTo(this._listener,'_keydown:'+t,(t,e)=>{r(e,()=>{e.preventDefault(),e.stopPropagation(),t.stop()}),t.return=!0},{priority:n})}press(t){return!!this._listener.fire('_keydown:'+Z(t),t)}destroy(){this._listener.stopListening()}}class Op extends Vp{constructor(t){super(),this.editor=t}set(o,i,e={}){if('string'==typeof i){const o=i;i=(e,t)=>{this.editor.execute(o),t()}}super.set(o,i,e)}}class Rp{constructor(n,e){this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel='',n&&this.setRanges(n,e)}setFake(n=!0,e={}){this._isFake=n,this._fakeSelectionLabel=n?e.label||'':'',this.fire('change')}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const n=this._ranges[this._ranges.length-1],e=this._lastRangeBackward?n.end:n.start;return Zl.createFromPosition(e)}get focus(){if(!this._ranges.length)return null;const n=this._ranges[this._ranges.length-1],e=this._lastRangeBackward?n.start:n.end;return Zl.createFromPosition(e)}get isCollapsed(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}addRange(n,e){if(!(n instanceof ec))throw new ba('view-selection-invalid-range: Invalid Range.');this._pushRange(n),this._lastRangeBackward=!!e,this.fire('change')}*getRanges(){for(const t of this._ranges)yield ec.createFromRange(t)}getFirstRange(){let n=null;for(const o of this._ranges)(!n||o.start.isBefore(n.start))&&(n=o);return n?ec.createFromRange(n):null}getLastRange(){let n=null;for(const o of this._ranges)(!n||o.end.isAfter(n.end))&&(n=o);return n?ec.createFromRange(n):null}getFirstPosition(){const t=this.getFirstRange();return t?Zl.createFromPosition(t.start):null}getLastPosition(){const t=this.getLastRange();return t?Zl.createFromPosition(t.end):null}isEqual(i){if(this.isFake!=i.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=i.fakeSelectionLabel)return!1;if(this.rangeCount!=i.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(i.anchor)||!this.focus.isEqual(i.focus))return!1;for(const e of this._ranges){let t=!1;for(const n of i._ranges)if(e.isEqual(n)){t=!0;break}if(!t)return!1}return!0}isSimilar(i){if(this.isBackward!=i.isBackward)return!1;const e=cn(this.getRanges()),t=cn(i.getRanges());if(e!=t)return!1;if(0==e)return!0;for(let e of this.getRanges()){e=e.getTrimmed();let t=!1;for(let n of i.getRanges())if(n=n.getTrimmed(),e.start.isEqual(n.start)&&e.end.isEqual(n.end)){t=!0;break}if(!t)return!1}return!0}removeAllRanges(){this._ranges.length&&(this._ranges=[],this.fire('change'))}setRanges(o,e){this._ranges=[];for(const t of o){if(!(t instanceof ec))throw new ba('view-selection-invalid-range: Invalid Range.');this._pushRange(t)}this._lastRangeBackward=!!e,this.fire('change')}setTo(t){t instanceof Rp?(this._isFake=t._isFake,this._fakeSelectionLabel=t._fakeSelectionLabel,this.setRanges(t.getRanges(),t.isBackward)):t instanceof ec?this.setRanges([t]):P(t)?this.setRanges(t):this.setRanges([new ec(t)])}setIn(t){this.setRanges([ec.createIn(t)])}setOn(t){this.setRanges([ec.createOn(t)])}setCollapsedAt(i,e){const t=Zl.createAt(i,e),n=new ec(t,t);this.setRanges([n])}collapseToStart(){const t=this.getFirstPosition();null!==t&&this.setRanges([new ec(t,t)])}collapseToEnd(){const t=this.getLastPosition();null!==t&&this.setRanges([new ec(t,t)])}moveFocusTo(o,e){if(null===this.anchor)throw new ba('view-selection-moveFocusTo-no-ranges: Cannot set selection focus if there are no ranges in selection.');const t=Zl.createAt(o,e);if('same'!=t.compareWith(this.focus)){const n=this.anchor;this._ranges.pop(),'before'==t.compareWith(n)?this.addRange(new ec(t,n),!0):this.addRange(new ec(n,t))}}getSelectedElement(){if(1!==this.rangeCount)return null;const o=this.getFirstRange(),e=o.start.nodeAfter,t=o.end.nodeBefore;return e instanceof Ul&&e==t?e:null}static createFromSelection(n){const e=new Rp;return e.setTo(n),e}_pushRange(n){for(const o of this._ranges)if(n.isIntersecting(o))throw new ba('view-selection-range-intersects: Trying to add a range that intersects with another range from selection.',{addedRange:n,intersectingRange:o});this._ranges.push(ec.createFromRange(n))}}r(Rp,Va);const Fp=(n)=>{const e=n.createElement('br');return e.dataset.ckeFiller=!0,e},Ip=(t)=>t.createTextNode('\xA0'),Oy=7;let Vy='';for(let n=0;n<Oy;n++)Vy+='\u200B';const Mp=new WeakMap;class Dp{constructor(n,e){this.domDocuments=new Set,this.domConverter=n,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this.selection=e,this._inlineFiller=null,this.isFocused=!1,this._fakeSelectionContainer=null}markToSync(n,e){if('text'===n)this.domConverter.mapViewToDom(e.parent)&&this.markedTexts.add(e);else{if(!this.domConverter.mapViewToDom(e))return;if('attributes'===n)this.markedAttributes.add(e);else if('children'===n)this.markedChildren.add(e);else throw new ba('view-renderer-unknown-type: Unknown type passed to Renderer.markToSync.')}}render(){let o;this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?o=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(o=this.selection.getFirstPosition(),this.markedChildren.add(o.parent));for(const n of this.markedTexts)!this.markedChildren.has(n.parent)&&this.domConverter.mapViewToDom(n.parent)&&this._updateText(n,{inlineFillerPosition:o});for(const t of this.markedAttributes)this._updateAttrs(t);for(const n of this.markedChildren)this._updateChildren(n,{inlineFillerPosition:o});if(o){const e=this.domConverter.viewPositionToDom(o),t=e.parent.ownerDocument;this._inlineFiller=mn(e.parent)?e.parent:this._addInlineFiller(t,e.parent,e.offset)}else this._inlineFiller=null;this._updateSelection(),this._updateFocus(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_addInlineFiller(a,e,t){const n=e instanceof Array?e:e.childNodes,o=n[t];if(this.domConverter.isText(o))return o.data=Vy+o.data,o;else{const o=a.createTextNode(Vy);return Array.isArray(e)?n.splice(t,0,o):_n(e,t,o),o}}_getInlineFillerPosition(){const t=this.selection.getFirstPosition();return t.parent.is('text')?Zl.createBefore(this.selection.getFirstPosition().parent):t}_isSelectionInInlineFiller(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const n=this.selection.getFirstPosition(),e=this.domConverter.viewPositionToDom(n);return e&&this.domConverter.isText(e.parent)&&mn(e.parent)}_removeInlineFiller(){const t=this._inlineFiller;if(!mn(t))throw new ba('view-renderer-filler-was-lost: The inline filler node was lost.');un(t)?t.parentNode.removeChild(t):t.data=t.data.substr(Oy),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const a=this.selection.getFirstPosition(),e=a.parent,t=a.offset;if(!this.domConverter.mapViewToDom(e.root))return!1;if(!e.is('element'))return!1;if(!wn(e))return!1;if(t===e.getFillerOffset())return!1;const n=a.nodeBefore,o=a.nodeAfter;return n instanceof $l||o instanceof $l?!1:!0}_updateText(s,e){const t=this.domConverter.findCorrespondingDomText(s),n=this.domConverter.viewToDom(s,t.ownerDocument),o=t.data;let i=n.data;const r=e.inlineFillerPosition;r&&r.parent==s.parent&&r.offset==s.index&&(i=Vy+i),o!=i&&(t.data=i)}_updateAttrs(i){const e=this.domConverter.mapViewToDom(i),t=Array.from(e.attributes).map((t)=>t.name),a=i.getAttributeKeys();for(const t of a)e.setAttribute(t,i.getAttribute(t));for(const n of t)i.hasAttribute(n)||e.removeAttribute(n)}_updateChildren(p,e){function t(o,e){return!(o!==e)||(n.isText(o)&&n.isText(e)?o.data===e.data:gn(o,n.blockFiller)&&gn(e,n.blockFiller))}const n=this.domConverter,o=n.mapViewToDom(p);if(o){const r=o.ownerDocument,a=e.inlineFillerPosition,s=o.childNodes,d=Array.from(n.viewChildrenToDom(p,r,{bind:!0}));a&&a.parent==p&&this._addInlineFiller(r,d,a.offset);const l=bn(s,d,t);let c=0;const u=new Set;for(const t of l)'insert'===t?(_n(o,c,d[c]),c++):'delete'===t?(u.add(s[c]),yn(s[c])):c++;for(const t of u)t.parentNode||this.domConverter.unbindDomElement(t)}}_updateSelection(){if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();const t=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&t&&(this.selection.isFake?this._updateFakeSelection(t):(this._removeFakeSelection(),this._updateDomSelection(t)))}_updateFakeSelection(a){const e=a.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=e.createElement('div'),this._fakeSelectionContainer.style.position='fixed',this._fakeSelectionContainer.style.top=0,this._fakeSelectionContainer.style.left='-9999px',this._fakeSelectionContainer.appendChild(e.createTextNode('\xA0'))),this._fakeSelectionContainer.parentElement||a.appendChild(this._fakeSelectionContainer);const t=this.selection.fakeSelectionLabel||'\xA0';this._fakeSelectionContainer.firstChild.data=t;const n=e.getSelection();n.removeAllRanges();const o=e.createRange();o.selectNodeContents(this._fakeSelectionContainer),n.addRange(o),this.domConverter.bindFakeSelection(this._fakeSelectionContainer,this.selection)}_updateDomSelection(n){const o=n.ownerDocument.defaultView.getSelection();if(this._domSelectionNeedsUpdate(o)){const t=this.domConverter.viewPositionToDom(this.selection.anchor),e=this.domConverter.viewPositionToDom(this.selection.focus);o.collapse(t.parent,t.offset),o.extend(e.parent,e.offset)}}_domSelectionNeedsUpdate(n){if(!this.domConverter.isDomSelectionCorrect(n))return!0;const e=n&&this.domConverter.domSelectionToView(n);return e&&this.selection.isEqual(e)?!1:!this.selection.isCollapsed&&this.selection.isSimilar(e)?!1:!0}_removeDomSelection(){for(const o of this.domDocuments){const e=o.getSelection();if(e.rangeCount){const e=o.activeElement,t=this.domConverter.mapDomToView(e);e&&t&&o.getSelection().removeAllRanges()}}}_removeFakeSelection(){const t=this._fakeSelectionContainer;t&&t.remove()}_updateFocus(){if(this.isFocused){const t=this.selection.editableElement;t&&this.domConverter.focus(t)}}}r(Dp,Ws);var Lp={window,document};class jp{constructor(t={}){this.blockFiller=t.blockFiller||Fp,this.preElements=['pre'],this.blockElements=['p','div','h1','h2','h3','h4','h5','h6'],this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap}bindFakeSelection(n,e){this._fakeSelectionMapping.set(n,Rp.createFromSelection(e))}fakeSelectionToView(t){return this._fakeSelectionMapping.get(t)}bindElements(n,e){this._domToViewMapping.set(n,e),this._viewToDomMapping.set(e,n)}unbindDomElement(n){const e=this._domToViewMapping.get(n);if(e){this._domToViewMapping.delete(n),this._viewToDomMapping.delete(e);for(const e of Array.from(n.childNodes))this.unbindDomElement(e)}}bindDocumentFragments(n,e){this._domToViewMapping.set(n,e),this._viewToDomMapping.set(e,n)}viewToDom(a,e,t={}){if(a.is('text')){const t=this._processDataFromViewText(a);return e.createTextNode(t)}else{if(this.mapViewToDom(a))return this.mapViewToDom(a);let n;if(a.is('documentFragment'))n=e.createDocumentFragment(),t.bind&&this.bindDocumentFragments(n,a);else{if(a.is('uiElement'))return n=a.render(e),t.bind&&this.bindElements(n,a),n;n=e.createElement(a.name),t.bind&&this.bindElements(n,a);for(const e of a.getAttributeKeys())n.setAttribute(e,a.getAttribute(e))}if(t.withChildren||void 0===t.withChildren)for(const o of this.viewChildrenToDom(a,e,t))n.appendChild(o);return n}}*viewChildrenToDom(a,e,t={}){const n=a.getFillerOffset&&a.getFillerOffset();let o=0;for(const i of a.getChildren())n===o&&(yield this.blockFiller(e)),yield this.viewToDom(i,e,t),o++;n===o&&(yield this.blockFiller(e))}viewRangeToDom(i){const e=this.viewPositionToDom(i.start),t=this.viewPositionToDom(i.end),n=document.createRange();return n.setStart(e.parent,e.offset),n.setEnd(t.parent,t.offset),n}viewPositionToDom(a){const e=a.parent;if(e.is('text')){const t=this.findCorrespondingDomText(e);if(!t)return null;let i=a.offset;return mn(t)&&(i+=Oy),{parent:t,offset:i}}else{let s,l,d;if(0===a.offset){if(s=this.mapViewToDom(e),!s)return null;d=s.childNodes[0]}else{const e=a.nodeBefore;if(l=e.is('text')?this.findCorrespondingDomText(e):this.mapViewToDom(a.nodeBefore),!l)return null;s=l.parentNode,d=l.nextSibling}if(this.isText(d)&&mn(d))return{parent:d,offset:Oy};const t=l?vn(l)+1:0;return{parent:s,offset:t}}}domToView(i,e={}){if(gn(i,this.blockFiller))return null;const t=this.getParentUIElement(i,this._domToViewMapping);if(t)return t;if(this.isText(i)){if(un(i))return null;else{const e=this._processDataFromDomText(i);return''===e?null:new $l(e)}}else if(this.isComment(i))return null;else{if(this.mapDomToView(i))return this.mapDomToView(i);let t;if(this.isDocumentFragment(i))t=new pc,e.bind&&this.bindDocumentFragments(i,t);else{const n=e.keepOriginalCase?i.tagName:i.tagName.toLowerCase();t=new Ul(n),e.bind&&this.bindElements(i,t);const o=i.attributes;for(let n=o.length-1;0<=n;n--)t.setAttribute(o[n].name,o[n].value)}if(e.withChildren||void 0===e.withChildren)for(const n of this.domChildrenToView(i,e))t.appendChildren(n);return t}}*domChildrenToView(a,e={}){for(let t=0;t<a.childNodes.length;t++){const n=a.childNodes[t],o=this.domToView(n,e);null!==o&&(yield o)}}domSelectionToView(a){if(1===a.rangeCount){let e=a.getRangeAt(0).startContainer;this.isText(e)&&(e=e.parentNode);const t=this.fakeSelectionToView(e);if(t)return t}const e=new Rp,t=this.isDomSelectionBackward(a);for(let n=0;n<a.rangeCount;n++){const o=a.getRangeAt(n),i=this.domRangeToView(o);i&&e.addRange(i,t)}return e}domRangeToView(o){const e=this.domPositionToView(o.startContainer,o.startOffset),t=this.domPositionToView(o.endContainer,o.endOffset);return e&&t?new ec(e,t):null}domPositionToView(i,e){if(gn(i,this.blockFiller))return this.domPositionToView(i.parentNode,vn(i));const t=this.mapDomToView(i);if(t&&t.is('uiElement'))return Zl.createBefore(t);if(this.isText(i)){if(un(i))return this.domPositionToView(i.parentNode,vn(i));const t=this.findCorrespondingViewText(i);let n=e;return t?(mn(i)&&(n-=Oy,n=0>n?0:n),new Zl(t,n)):null}if(0===e){const e=this.mapDomToView(i);if(e)return new Zl(e,0)}else{const t=i.childNodes[e-1],n=this.isText(t)?this.findCorrespondingViewText(t):this.mapDomToView(t);if(n&&n.parent)return new Zl(n.parent,n.index+1)}return null}mapDomToView(t){return this.getParentUIElement(t)||this._domToViewMapping.get(t)}findCorrespondingViewText(o){if(un(o))return null;const e=this.getParentUIElement(o);if(e)return e;const t=o.previousSibling;if(t){if(!this.isElement(t))return null;const n=this.mapDomToView(t);if(n){const e=n.nextSibling;return e instanceof $l?n.nextSibling:null}}else{const n=this.mapDomToView(o.parentNode);if(n){const t=n.getChild(0);return t instanceof $l?t:null}}return null}mapViewToDom(t){return this._viewToDomMapping.get(t)}findCorrespondingDomText(n){const e=n.previousSibling;return e&&this.mapViewToDom(e)?this.mapViewToDom(e).nextSibling:!e&&n.parent&&this.mapViewToDom(n.parent)?this.mapViewToDom(n.parent).childNodes[0]:null}focus(n){const i=this.mapViewToDom(n);if(i&&i.ownerDocument.activeElement!==i){const{scrollX:t,scrollY:e}=Lp.window,a=[];Cn(i,(o)=>{const{scrollLeft:e,scrollTop:t}=o;a.push([e,t])}),i.focus(),Cn(i,(o)=>{const[e,t]=a.shift();o.scrollLeft=e,o.scrollTop=t}),Lp.window.scrollTo(t,e)}}isText(t){return t&&t.nodeType==Node.TEXT_NODE}isElement(t){return t&&t.nodeType==Node.ELEMENT_NODE}isDocumentFragment(t){return t&&t.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isComment(t){return t&&t.nodeType==Node.COMMENT_NODE}isDomSelectionBackward(o){if(o.isCollapsed)return!1;const e=document.createRange();e.setStart(o.anchorNode,o.anchorOffset),e.setEnd(o.focusNode,o.focusOffset);const t=e.collapsed;return e.detach(),t}getParentUIElement(n){const o=kn(n);for(o.pop();o.length;){const t=o.pop(),e=this._domToViewMapping.get(t);if(e&&e.is('uiElement'))return e}return null}isDomSelectionCorrect(t){return this._isDomSelectionPositionCorrect(t.anchorNode,t.anchorOffset)&&this._isDomSelectionPositionCorrect(t.focusNode,t.focusOffset)}_isDomSelectionPositionCorrect(o,e){if(this.isText(o)&&mn(o)&&e<Oy)return!1;if(this.isElement(o)&&mn(o.childNodes[e]))return!1;const t=this.mapDomToView(o);return t&&t.is('uiElement')?!1:!0}_processDataFromViewText(i){let e=i.data;if(i.getAncestors().some((t)=>this.preElements.includes(t.name)))return e;if(' '==e.charAt(0)){const t=this._getTouchingViewTextNode(i,!1),a=t&&this._nodeEndsWithSpace(t);(a||!t)&&(e='\xA0'+e.substr(1))}if(' '==e.charAt(e.length-1)){const t=this._getTouchingViewTextNode(i,!0);t||(e=e.substr(0,e.length-1)+'\xA0')}return e.replace(/ {2}/g,' \xA0')}_nodeEndsWithSpace(n){if(n.getAncestors().some((t)=>this.preElements.includes(t.name)))return!1;const e=this._processDataFromViewText(n);return' '==e.charAt(e.length-1)}_processDataFromDomText(i){let e=pn(i);if(An(i,this.preElements))return e;e=e.replace(/[ \n\t\r]{1,}/g,' ');const t=this._getTouchingDomTextNode(i,!1),a=this._getTouchingDomTextNode(i,!0);return(!t||/[^\S\u00A0]/.test(t.data.charAt(t.data.length-1)))&&(e=e.replace(/^ /,'')),a||(e=e.replace(/ $/,'')),e=e.replace(/ \u00A0/g,'  '),(!t||/[^\S\u00A0]/.test(t.data.charAt(t.data.length-1)))&&(e=e.replace(/^\u00A0/,' ')),a&&'\xA0'!=a.data.charAt(0)||(e=e.replace(/\u00A0( *)$/,' $1')),e}_getTouchingViewTextNode(o,e){const t=new Jl({startPosition:e?Zl.createAfter(o):Zl.createBefore(o),direction:e?'forward':'backward'});for(const n of t){if(n.item.is('containerElement'))return null;if(n.item.is('text'))return n.item}return null}_getTouchingDomTextNode(a,e){if(!a.parentNode)return null;const t=e?'nextNode':'previousNode',n=a.ownerDocument,o=n.createTreeWalker(n.childNodes[0],NodeFilter.SHOW_TEXT);o.currentNode=a;const i=o[t]();if(null!==i){const e=xn(a,i);if(e&&!An(a,this.blockElements,e)&&!An(i,this.blockElements,e))return i}return null}}const qp=Symbol('rootName');class zp extends Xl{constructor(t){super(t),this.rootName='main'}is(n,e=null){return e?'rootElement'==n&&e==this.name||super.is(n,e):'rootElement'==n||super.is(n)}get rootName(){return this.getCustomProperty(qp)}set rootName(t){this.setCustomProperty(qp,t)}}class Hp{constructor(t){this.document=t,this.isEnabled=!1}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}destroy(){this.disable(),this.stopListening()}}r(Hp,Ep);var Wp=function(i,e,t){t='function'==typeof t?t:void 0;var a=t?t(i,e):void 0;return void 0===a?zc(i,e,t):!!a};class $p extends Hp{constructor(t){super(t),this._config={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},this.domConverter=t.domConverter,this.renderer=t.renderer,this._domElements=[],this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(t){this._domElements.push(t),this.isEnabled&&this._mutationObserver.observe(t,this._config)}enable(){super.enable();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(l){function d(n,e){if(!Array.isArray(n))return n===e||n.is('text')&&e.is('text')&&n.data===e.data}if(0===l.length)return;const c=this.domConverter,n=new Map,p=new Set;for(const n of l)if('childList'===n.type){const t=c.mapDomToView(n.target);if(t&&t.is('uiElement'))continue;t&&!this._isBogusBrMutation(n)&&p.add(t)}for(const o of l){const t=c.mapDomToView(o.target);if(!(t&&t.is('uiElement'))&&'characterData'===o.type){const t=c.findCorrespondingViewText(o.target);t&&!p.has(t.parent)?n.set(t,{type:'text',oldText:t.data,newText:pn(o.target),node:t}):!t&&mn(o.target)&&p.add(c.mapDomToView(o.target.parentNode))}}const u=[];for(const e of n.values())this.renderer.markToSync('text',e.node),u.push(e);for(const t of p){const n=c.mapViewToDom(t),e=Array.from(t.getChildren()),r=Array.from(c.domChildrenToView(n));Wp(e,r,d)||(this.renderer.markToSync('children',t),u.push({type:'children',oldChildren:e,newChildren:r,node:t}))}const o=l[0].target.ownerDocument.getSelection();let i=null;if(o&&o.anchorNode){const n=c.domPositionToView(o.anchorNode,o.anchorOffset),e=c.domPositionToView(o.focusNode,o.focusOffset);n&&e&&(i=new Rp,i.setCollapsedAt(n),i.moveFocusTo(e))}this.document.fire('mutations',u,i),this.document.render()}_isBogusBrMutation(n){let e=null;return null===n.nextSibling&&0===n.removedNodes.length&&1==n.addedNodes.length&&(e=this.domConverter.domToView(n.addedNodes[0],{withChildren:!1})),e&&e.is('element','br')}}var Kp=Date.now,Up=Kp,Qp=function(v,w,t){function n(e){var t=g,n=f;return g=f=void 0,x=e,b=v.apply(n,t),b}function o(t){return x=t,_=setTimeout(a,w),m?n(t):b}function i(t){var e=t-l,n=t-x,o=w-e;return u?na(o,h-n):o}function r(t){var e=t-l,n=t-x;return!l||e>=w||0>e||u&&n>=h}function a(){var t=Up();return r(t)?s(t):void(_=setTimeout(a,i(t)))}function s(t){return(clearTimeout(_),_=void 0,p&&g)?n(t):(g=f=void 0,b)}function d(){var t=Up(),e=r(t);if(g=arguments,f=this,l=t,e){if(void 0===_)return o(l);if(u)return clearTimeout(_),_=setTimeout(a,w),n(l)}return void 0===_&&(_=setTimeout(a,w)),b}var l=0,x=0,m=!1,u=!1,p=!0,g,f,h,b,_;if('function'!=typeof v)throw new TypeError('Expected a function');return w=os(w)||0,Da(t)&&(m=!!t.leading,u='maxWait'in t,h=u?oa(os(t.maxWait)||0,w):h,p='trailing'in t?!!t.trailing:p),d.cancel=function(){void 0!==_&&clearTimeout(_),l=x=0,g=f=_=void 0},d.flush=function(){return void 0===_?b:s(Up())},d};class Jp extends Hp{constructor(t){super(t),this.mutationObserver=t.getObserver($p),this.document=t,this.selection=t.selection,this.domConverter=t.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=Qp((t)=>this.document.fire('selectionChangeDone',t),200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._loopbackCounter=0}observe(n){const e=n.ownerDocument;this._documents.has(e)||(this.listenTo(e,'selectionchange',()=>{this._handleSelectionChange(e)}),this._documents.add(e))}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionChange(o){if(this.isEnabled&&(this.document.isFocused||this.document.isReadOnly)){this.mutationObserver.flush();const i=o.defaultView.getSelection(),a=this.domConverter.domSelectionToView(i);if(!(this.selection.isEqual(a)&&this.domConverter.isDomSelectionCorrect(i))){if(60<++this._loopbackCounter)return void ya.warn('selectionchange-infinite-loop: Selection change observer detected an infinite rendering loop.');if(this.selection.isSimilar(a))this.document.render();else{const o={oldSelection:this.selection,newSelection:a,domSelection:i};this.document.fire('selectionChange',o),this._fireSelectionChangeDoneDebounced(o)}}}}_clearInfiniteLoop(){this._loopbackCounter=0}}class Gp{constructor(o,e,t){this.document=o,this.domEvent=e,this.domTarget=e.target,Ls(this,t)}get target(){return this.document.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class Yp extends Hp{constructor(t){super(t),this.useCapture=!1}observe(n){const e='string'==typeof this.domEventType?[this.domEventType]:this.domEventType;e.forEach((e)=>{this.listenTo(n,e,(n,e)=>{this.isEnabled&&this.onDomEvent(e)},{useCapture:this.useCapture})})}fire(o,e,t){this.isEnabled&&this.document.fire(o,new Gp(this.document,e,t))}}class Xp extends Yp{constructor(i){super(i),this.domEventType=['focus','blur'],this.useCapture=!0,i.on('focus',()=>{i.isFocused=!0,this._renderTimeoutId=setTimeout(()=>i.render(),0)}),i.on('blur',(e,t)=>{const n=i.selection.editableElement;(null===n||n===t.target)&&(i.isFocused=!1,i.render())})}onDomEvent(t){this.fire(t.type,t)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}class Zp extends Yp{constructor(t){super(t),this.domEventType=['keydown','keyup']}onDomEvent(t){this.fire(t.type,t,{keyCode:t.keyCode,altKey:t.altKey,ctrlKey:t.ctrlKey||t.metaKey,shiftKey:t.shiftKey,get keystroke(){return Z(this)}})}}class eg extends Hp{constructor(t){super(t),this._fireSelectionChangeDoneDebounced=Qp((t)=>this.document.fire('selectionChangeDone',t),200)}observe(){const i=this.document;i.on('keydown',(e,t)=>{const n=i.selection;n.isFake&&Tn(t.keyCode)&&this.isEnabled&&(t.preventDefault(),this._handleSelectionMove(t.keyCode))},{priority:'lowest'})}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(i){const e=this.document.selection,a=Rp.createFromSelection(e);a.setFake(!1),(i==mc.arrowleft||i==mc.arrowup)&&a.collapseToStart(),(i==mc.arrowright||i==mc.arrowdown)&&a.collapseToEnd();const r={oldSelection:e,newSelection:a,domSelection:null};this.document.fire('selectionChange',r),this._fireSelectionChangeDoneDebounced(r)}}var tg=function(t){return!!t&&1===t.nodeType&&da(t)&&!ga(t)};class ng{constructor(o){const i=Pn(o);if(Object.defineProperty(this,'_source',{value:o._source||o,writable:!0,enumerable:!1}),tg(o)||i){const t=i?o.startContainer:o;t.ownerDocument&&t.ownerDocument.body.contains(t)||ya.warn('rect-source-not-in-dom: The source of this rect does not belong to any rendered DOM tree.',{source:o}),i?Vn(this,ng.getDomRangeRects(o)[0]):Vn(this,o.getBoundingClientRect())}else if(En(o)){const{innerWidth:e,innerHeight:i}=o;Vn(this,{top:0,right:e,bottom:i,left:0,width:e,height:i})}else Vn(this,o)}clone(){return new ng(this)}moveTo(n,e){return this.top=e,this.right=n+this.width,this.bottom=e+this.height,this.left=n,this}moveBy(n,e){return this.top+=e,this.right+=n,this.left+=n,this.bottom+=e,this}getIntersection(n){const e={top:oa(this.top,n.top),right:na(this.right,n.right),bottom:na(this.bottom,n.bottom),left:oa(this.left,n.left)};return e.width=e.right-e.left,e.height=e.bottom-e.top,0>e.width||0>e.height?null:new ng(e)}getIntersectionArea(n){const e=this.getIntersection(n);return e?e.getArea():0}getArea(){return this.width*this.height}getVisible(){const o=this._source;let i=this.clone();if(!On(o))for(let t=o.parentNode||o.commonAncestorContainer;t&&!On(t);){const n=new ng(t),e=i.getIntersection(n);if(e)e.getArea()<i.getArea()&&(i=e);else return null;t=t.parentNode}return i}isEqual(n){for(const e of og)if(this[e]!==n[e])return!1;return!0}contains(n){const e=this.getIntersection(n);return!!(e&&e.isEqual(n))}excludeScrollbarsAndBorders(){const i=this._source;let e,t;if(En(i))e=i.innerWidth-i.document.documentElement.clientWidth,t=i.innerHeight-i.document.documentElement.clientHeight;else{const n=Sn(this._source);e=i.offsetWidth-i.clientWidth,t=i.offsetHeight-i.clientHeight,this.moveBy(n.left,n.top)}return this.width-=e,this.right-=e,this.height-=t,this.bottom-=t,this}static getDomRangeRects(o){const i=[],t=Array.from(o.getClientRects());if(t.length)for(const n of t)i.push(new ng(n));else{const e=new ng(o.startContainer.getBoundingClientRect());e.right=e.left,e.width=0,i.push(e)}return i}}const og=['top','right','bottom','left','width','height'];Object.assign({},{scrollViewportToShowTarget:Rn,scrollAncestorsToShowTarget:function(n){const e=jn(n);In(e,()=>new ng(n))}});class ig{constructor(){this.domRoots=new Map,this.selection=new Rp,this.domConverter=new jp,this.roots=new Map,this.set('isReadOnly',!1),this.set('isFocused',!1),this.renderer=new Dp(this.domConverter,this.selection),this.renderer.bind('isFocused').to(this),this._observers=new Map,this.addObserver($p),this.addObserver(Jp),this.addObserver(Xp),this.addObserver(Zp),this.addObserver(eg),fn(this),oe(this),this.decorate('render')}addObserver(n){let e=this._observers.get(n);if(e)return e;e=new n(this),this._observers.set(n,e);for(const[t,i]of this.domRoots)e.observe(i,t);return e.enable(),e}getObserver(t){return this._observers.get(t)}createRoot(i,a='main'){const t='string'==typeof i?i:i.tagName,n=new zp(t.toLowerCase(),a);return n.document=this,this.roots.set(a,n),n.on('change:children',(n,e)=>this.renderer.markToSync('children',e)),n.on('change:attributes',(n,e)=>this.renderer.markToSync('attributes',e)),n.on('change:text',(n,e)=>this.renderer.markToSync('text',e)),this.domConverter.isElement(i)&&this.attachDomRoot(i,a),n}attachDomRoot(o,e='main'){const t=this.getRoot(e);this.domRoots.set(e,o),this.domConverter.bindElements(o,t),this.renderer.markToSync('children',t),this.renderer.domDocuments.add(o.ownerDocument);for(const t of this._observers.values())t.observe(o,e)}getRoot(t='main'){return this.roots.get(t)}getDomRoot(t='main'){return this.domRoots.get(t)}render(){this.disableObservers(),this.renderer.render(),this.enableObservers()}focus(){if(!this.isFocused){const t=this.selection.editableElement;t?(this.domConverter.focus(t),this.render()):ya.warn('view-focus-no-selection: There is no selection in any editable to focus.')}}scrollToTheSelection(){const t=this.selection.getFirstRange();t&&Rn({target:this.domConverter.viewRangeToDom(t),viewportOffset:20})}disableObservers(){for(const t of this._observers.values())t.disable()}enableObservers(){for(const t of this._observers.values())t.enable()}destroy(){for(const t of this._observers.values())t.destroy()}}r(ig,Ws);class rg{constructor(t){this.model=t,this.view=new ig,this.mapper=new tc,this.modelToView=new ic(this.model,{mapper:this.mapper,viewSelection:this.view.selection}),this.listenTo(this.model,'change',(o,e,t)=>{this.modelToView.convertChange(e,t)},{priority:'low'}),this.listenTo(this.model,'changesDone',()=>{const t=this.model.selection;this.modelToView.convertSelection(t),this.view.render()},{priority:'low'}),this.listenTo(this.model.markers,'add',(n,e)=>{this.modelToView.convertMarker('addMarker',e.name,e.getRange())}),this.listenTo(this.model.markers,'remove',(n,e)=>{this.modelToView.convertMarker('removeMarker',e.name,e.getRange())}),this.listenTo(this.view,'selectionChange',zn(this.model,this.mapper)),this.modelToView.on('insert:$text',Ee(),{priority:'lowest'}),this.modelToView.on('remove',Ie(),{priority:'low'}),this.modelToView.on('selection',Jn(),{priority:'low'}),this.modelToView.on('selection',Gn(),{priority:'low'}),this.modelToView.on('selection',Hn(),{priority:'low'}),this.modelToView.on('selection',Wn(),{priority:'low'})}createRoot(i,e='main'){const t=this.view.createRoot(i,e),n=this.model.getRoot(e);return this.mapper.bindElements(n,t),t}destroy(){this.view.destroy(),this.stopListening()}}r(rg,Ws);class ag extends Tp{constructor(n,e){super(e),this.element=n,this.editing=new rg(this.document),this.editing.view.bind('isReadOnly').to(this),this.keystrokes=new Op(this),this.keystrokes.listenTo(this.editing.view),this._attachToForm()}destroy(){return Promise.resolve().then(()=>this.keystrokes.destroy()).then(()=>this.editing.destroy()).then(super.destroy())}setData(t){this.data.set(t)}getData(){return this.data.get()}updateEditorElement(){Xn(this.element,this.getData())}loadDataFromEditorElement(){this.setData(Yn(this.element))}_attachToForm(){const i=this.element;if(i&&'textarea'===i.tagName.toLowerCase()&&i.form){let e;const t=i.form,n=()=>this.updateEditorElement();qa(t.submit)&&(e=t.submit,t.submit=()=>{n(),e.apply(t)}),t.addEventListener('submit',n),this.on('destroy',()=>{t.removeEventListener('submit',n),e&&(t.submit=e)})}}static create(i,e){return new Promise((t)=>{const n=new this(i,e);t(n.initPlugins().then(()=>{n.fire('dataReady'),n.fire('ready')}).then(()=>n))})}}class sg{getHtml(o){const e=document.implementation.createHTMLDocument(''),t=e.createElement('div');return t.appendChild(o),t.innerHTML}}class dg{constructor(){this._domParser=new DOMParser,this._domConverter=new jp({blockFiller:Ip}),this._htmlWriter=new sg}toData(n){const e=this._domConverter.viewToDom(n,document);return this._htmlWriter.getHtml(e)}toView(n){const e=this._toDom(n);return this._domConverter.domToView(e)}_toDom(i){const e=this._domParser.parseFromString(i,'text/html'),t=e.createDocumentFragment(),n=e.body.childNodes;for(;0<n.length;)t.appendChild(n[0]);return t}}class lg{constructor(t){this.editor=t,this._components=new Map}*names(){yield*this._components.keys()}add(n,o){if(this.has(n))throw new ba('componentfactory-item-exists: The item already exists in the component factory.',{name:n});this._components.set(Zn(n),o)}create(t){if(!this.has(t))throw new ba('componentfactory-item-missing: The required component is not registered in the factory.',{name:t});return this._components.get(Zn(t))(this.editor.locale)}has(t){return this._components.has(Zn(t))}}class cg{constructor(){this.set('isFocused',!1),this.focusedElement=null,this._elements=new Set,this._nextEventLoopTimeout=null}add(t){if(this._elements.has(t))throw new ba('focusTracker-add-element-already-exist');this.listenTo(t,'focus',()=>this._focus(t),{useCapture:!0}),this.listenTo(t,'blur',()=>this._blur(),{useCapture:!0}),this._elements.add(t)}remove(t){t===this.focusedElement&&this._blur(t),this._elements.has(t)&&(this.stopListening(t),this._elements.delete(t))}_focus(t){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=t,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}r(cg,Ep),r(cg,Ws);class mg{constructor(n,e){this.editor=n,this.view=e,this.componentFactory=new lg(n),this.focusTracker=new cg,this._toolbarConfig=to(n.config.get('toolbar'))}init(){const o=this.editor,e=this.view;e.render(),e.stickyPanel.bind('isActive').to(this.focusTracker,'isFocused'),e.stickyPanel.limiterElement=e.element,this._toolbarConfig.viewportTopOffset&&(e.stickyPanel.viewportTopOffset=this._toolbarConfig.viewportTopOffset);const t=o.editing.createRoot('div');e.editable.bind('isReadOnly').to(t),e.editable.bind('isFocused').to(o.editing.view),e.editable.name=t.rootName,this.focusTracker.add(this.view.editableElement),this.view.toolbar.fillFromConfig(this._toolbarConfig.items,this.componentFactory),eo({origin:o.editing.view,originFocusTracker:this.focusTracker,originKeystrokeHandler:o.keystrokes,toolbar:this.view.toolbar})}destroy(){this.view.destroy()}}class ug{constructor(t={}){this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||'id',this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(i,e){let t;const r=this._idProperty;if(r in i){if(t=i[r],'string'!=typeof t)throw new ba('collection-add-invalid-id');if(this.get(t))throw new ba('collection-add-item-already-exists')}else i[r]=t=a();if(void 0===e)e=this._items.length;else if(e>this._items.length||0>e)throw new ba('collection-add-item-invalid-index');return this._items.splice(e,0,i),this._itemMap.set(t,i),this.fire('add',i,e),this}get(n){let o;if('string'==typeof n)o=this._itemMap.get(n);else if('number'==typeof n)o=this._items[n];else throw new ba('collection-get-invalid-arg: Index or id must be given.');return o||null}getIndex(n){let o;return o='string'==typeof n?this._itemMap.get(n):n,this._items.indexOf(o)}remove(s){let l=!1,t,n,o;const d=this._idProperty;if('string'==typeof s?(n=s,o=this._itemMap.get(n),l=!o,o&&(t=this._items.indexOf(o))):'number'==typeof s?(t=s,o=this._items[t],l=!o,o&&(n=o[d])):(o=s,n=o[d],t=this._items.indexOf(o),l=-1==t||!this._itemMap.get(n)),l)throw new ba('collection-remove-404: Item not found.');this._items.splice(t,1),this._itemMap.delete(n);const r=this._bindToInternalToExternalMap.get(o);return this._bindToInternalToExternalMap.delete(o),this._bindToExternalToInternalMap.delete(r),this.fire('remove',o),o}map(n,e){return this._items.map(n,e)}find(n,e){return this._items.find(n,e)}filter(n,e){return this._items.filter(n,e)}clear(){for(this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);this.length;)this.remove(0)}bindTo(t){if(this._bindToCollection)throw new ba('collection-bind-to-rebind: The collection cannot be bound more than once.');return this._bindToCollection=t,{as:(n)=>{this._setUpBindToBinding((e)=>new n(e))},using:(n)=>{'function'==typeof n?this._setUpBindToBinding((e)=>n(e)):this._setUpBindToBinding((e)=>e[n])}}}_setUpBindToBinding(a){const e=this._bindToCollection,t=(t,n,o)=>{const i=e._bindToCollection==this,r=e._bindToInternalToExternalMap.get(n);if(i&&r)this._bindToExternalToInternalMap.set(n,r),this._bindToInternalToExternalMap.set(r,n);else{const e=a(n);this._bindToExternalToInternalMap.set(n,e),this._bindToInternalToExternalMap.set(e,n),this.add(e,o)}};for(const n of e)t(null,n);this.listenTo(e,'add',t),this.listenTo(e,'remove',(o,e)=>{const t=this._bindToExternalToInternalMap.get(e);t&&this.remove(t)})}[Symbol.iterator](){return this._items[Symbol.iterator]()}}r(ug,Va);class pg extends ug{constructor(t){super({idProperty:'viewUid'}),this.on('add',(o,e,t)=>{e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}),this.on('remove',(n,e)=>{e.element&&this._parentElement&&e.element.remove()}),this.locale=t,this._parentElement=null}destroy(){this.map((t)=>t.destroy())}setParent(t){this._parentElement=t}delegate(...a){if(!a.length||!no(a))throw new ba('ui-viewcollection-delegate-wrong-events: All event names must be strings.');return{to:(e)=>{for(const t of this)for(const n of a)t.delegate(n).to(e);this.on('add',(t,n)=>{for(const o of a)n.delegate(o).to(e)}),this.on('remove',(t,n)=>{for(const o of a)n.stopDelegating(o,e)})}}}}r(ug,Ws);var gg=function(n,e){return zl(n,!0,!0,e)};class fg{constructor(t){Object.assign(this,mo(co(t))),this._isRendered=!1,this._revertData=null}render(){const t=this._renderNode({intoFragment:!0});return this._isRendered=!0,t}apply(t){return this._revertData=Ao(),this._renderNode({node:t,isApplying:!0,revertData:this._revertData}),t}revert(t){if(!this._revertData)throw new ba('ui-template-revert-not-applied: Attempting to revert a template which has not been applied yet.');this._revertTemplateFromNode(t,this._revertData)}*getViews(){function*o(e){if(e.children)for(const t of e.children)vo(t)?yield t:ko(t)&&(yield*o(t))}yield*o(this)}static bind(a,r){return{to(i,s){return new bg({eventNameOrFunction:i,attribute:i,observable:a,emitter:r,callback:s})},if(s,l,d){return new _g({observable:a,emitter:r,attribute:s,valueIfTrue:l,callback:d})}}}static extend(n,e){n._isRendered&&ya.warn('template-extend-render: Attempting to extend a template which has already been rendered.'),yo(n,mo(co(e)))}_renderNode(n){let e;if(e=n.node?this.tag&&this.text:this.tag?this.text:!this.text,e)throw new ba('ui-template-wrong-syntax: Node definition must have either "tag" or "text" when rendering a new Node.');return this.text?this._renderText(n):this._renderElement(n)}_renderElement(n){let e=n.node;return e||(e=n.node=document.createElementNS(this.ns||'http://www.w3.org/1999/xhtml',this.tag)),this._renderAttributes(n),this._renderElementChildren(n),this._setUpListeners(n),e}_renderText(n){let o=n.node;return o?n.revertData.text=o.textContent:o=n.node=document.createTextNode(''),oo(this.text)?this._bindToObservable({schema:this.text,updater:ao(o),data:n}):o.textContent=this.text.join(''),o}_renderAttributes(l){let d,t,n,o;if(this.attributes){const i=l.node,r=l.revertData;for(d in this.attributes)if(n=i.getAttribute(d),t=this.attributes[d],r&&(r.attributes[d]=n),o=Da(t[0])&&t[0].ns?t[0].ns:null,oo(t)){const a=o?t[0].value:t;r&&Co(d)&&a.unshift(n),this._bindToObservable({schema:a,updater:so(i,d,o),data:l})}else'style'==d&&'string'!=typeof t[0]?this._renderStyleAttribute(t[0],l):(r&&n&&Co(d)&&t.unshift(n),t=t.map((t)=>t?t.value||t:t).reduce((n,e)=>n.concat(e),[]).reduce(bo,''),wo(t)||i.setAttributeNS(o,d,t))}}_renderStyleAttribute(a,e){const r=e.node;for(const n in a){const o=a[n];oo(o)?this._bindToObservable({schema:[o],updater:lo(r,n),data:e}):r.style[n]=o}}_renderElementChildren(a){const e=a.node,s=a.intoFragment?document.createDocumentFragment():e,t=a.isApplying;let n=0;for(const i of this.children)if(xo(i)){if(!t){i.setParent(e);for(const t of i)s.appendChild(t.element)}}else if(vo(i))t||(!i.isRendered&&i.render(),s.appendChild(i.element));else if(dn(i))s.appendChild(i);else if(t){const e=a.revertData,t=Ao();e.children.push(t),i._renderNode({node:s.childNodes[n++],isApplying:!0,revertData:t})}else s.appendChild(i.render());a.intoFragment&&e.appendChild(s)}_setUpListeners(a){if(this.eventListeners)for(const e in this.eventListeners){const t=this.eventListeners[e].map((t)=>{const[n,o]=e.split('@');return t.activateDomEventListener(n,o,a)});a.revertData&&a.revertData.bindings.push(t)}}_bindToObservable({schema:a,updater:e,data:t}){const n=t.revertData;ro(a,e,t);const o=a.filter((t)=>!wo(t)).filter((t)=>t.observable).map((n)=>n.activateAttributeListener(a,e,t));n&&n.bindings.push(o)}_revertTemplateFromNode(i,e){for(const t of e.bindings)for(const n of t)n();if(e.text)return void(i.textContent=e.text);for(const t in e.attributes){const n=e.attributes[t];null===n?i.removeAttribute(t):i.setAttribute(t,n)}for(let t=0;t<e.children.length;++t)this._revertTemplateFromNode(i.childNodes[t],e.children[t])}}r(fg,Va);class hg{constructor(t){Object.assign(this,t)}getValue(n){const e=this.observable[this.attribute];return this.callback?this.callback(e,n):e}activateAttributeListener(i,e,t){const n=()=>ro(i,e,t);return this.emitter.listenTo(this.observable,'change:'+this.attribute,n),()=>{this.emitter.stopListening(this.observable,'change:'+this.attribute,n)}}}class bg extends hg{activateDomEventListener(i,a,e){const n=(o,e)=>{(!a||e.target.matches(a))&&('function'==typeof this.eventNameOrFunction?this.eventNameOrFunction(e):this.observable.fire(this.eventNameOrFunction,e))};return this.emitter.listenTo(e.node,i,n),()=>{this.emitter.stopListening(e.node,i,n)}}}class _g extends hg{getValue(n){const e=super.getValue(n);return!wo(e)&&(this.valueIfTrue||!0)}}class yg{constructor(o){this.element=null,this.isRendered=!1,this.locale=o,this.t=o&&o.t,this._viewCollections=new ug,this._unboundChildren=this.createCollection(),this._viewCollections.on('add',(e,t)=>{t.locale=o})}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=fg.bind(this,this)}createCollection(){const t=new pg;return this._viewCollections.add(t),t}registerChildren(n){P(n)||(n=[n]);for(const e of n)this._unboundChildren.add(e)}deregisterChildren(n){P(n)||(n=[n]);for(const e of n)this._unboundChildren.remove(e)}setTemplate(t){this.template=new fg(t)}extendTemplate(t){fg.extend(this.template,t)}render(){if(this.isRendered)throw new ba('ui-view-render-already-rendered: This View has already been rendered.');this.template&&(this.element=this.template.render(),this.registerChildren(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map((t)=>t.destroy())}}r(yg,Ep),r(yg,Ws);class wg extends yg{constructor(t){super(t),this.body=this.createCollection()}render(){super.render(),this._renderBodyCollection()}destroy(){return this._bodyCollectionContainer.remove(),super.destroy()}_renderBodyCollection(){const t=this._bodyCollectionContainer=new fg({tag:'div',attributes:{class:['ck-body','ck-rounded-corners','ck-reset_all']},children:this.body}).render();document.body.appendChild(t)}}class vg extends wg{constructor(o){super(o);const e=this.t,n=a();this.top=this.createCollection(),this.main=this.createCollection(),this.setTemplate({tag:'div',attributes:{class:['ck-reset','ck-editor','ck-rounded-corners'],role:'application',dir:'ltr',lang:o.lang,"aria-labelledby":`cke-editor__aria-label_${n}`},children:[{tag:'span',attributes:{id:`cke-editor__aria-label_${n}`,class:'cke-voice-label'},children:[e('\xC9diteur de texte enrichi')]},{tag:'div',attributes:{class:'ck-editor__top ck-reset_all',role:'presentation'},children:this.top},{tag:'div',attributes:{class:'ck-editor__main',role:'presentation'},children:this.main}]})}}class kg extends yg{constructor(o,e){super(o);const t=this.bindTemplate;e&&(this.element=this.editableElement=e),this.setTemplate({tag:'div',attributes:{class:[t.to('isFocused',(t)=>t?'ck-focused':'ck-blurred'),'ck-editor__editable','ck-rounded-corners'],contenteditable:t.to('isReadOnly',(t)=>!t)}}),this.set('isReadOnly',!1),this.set('isFocused',!1),this.externalElement=e}render(){super.render(),this.externalElement?this.template.apply(this.element=this.externalElement):this.editableElement=this.element}destroy(){this.externalElement&&this.template.revert(this.externalElement),super.destroy()}}class xg extends kg{constructor(t,e){super(t,e);const n=this.bindTemplate,o=this.t;this.set('name',null),this.extendTemplate({attributes:{role:'textbox',"aria-label":n.to('name',(t)=>o('\xC9diteur de texte enrichi, %0',[t])),class:'ck-editor__editable_inline'}})}}const Ag=To('px');class Cg extends yg{constructor(n){super(n);const e=this.bindTemplate;this.set('isActive',!1),this.set('isSticky',!1),this.set('limiterElement',null),this.set('limiterBottomOffset',50),this.set('viewportTopOffset',0),this.set('_marginLeft',null),this.set('_isStickyToTheLimiter',!1),this.set('_hasViewportTopOffset',!1),this.content=this.createCollection(),this._contentPanelPlaceholder=new fg({tag:'div',attributes:{class:['ck-sticky-panel__placeholder'],style:{display:e.to('isSticky',(t)=>t?'block':'none'),height:e.to('isSticky',(t)=>t?Ag(this._panelRect.height):null)}}}).render(),this._contentPanel=new fg({tag:'div',attributes:{class:['ck-sticky-panel__content',e.if('isSticky','ck-sticky-panel__content_sticky'),e.if('_isStickyToTheLimiter','ck-sticky-panel__content_sticky_bottom-limit')],style:{width:e.to('isSticky',(t)=>t?Ag(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:e.to('_hasViewportTopOffset',(t)=>t?Ag(this.viewportTopOffset):null),bottom:e.to('_isStickyToTheLimiter',(t)=>t?Ag(this.limiterBottomOffset):null),marginLeft:e.to('_marginLeft')}},children:this.content}).render(),this.setTemplate({tag:'div',attributes:{class:['ck-sticky-panel']},children:[this._contentPanelPlaceholder,this._contentPanel]})}render(){super.render(),this._checkIfShouldBeSticky(),this.listenTo(Lp.window,'scroll',()=>{this._checkIfShouldBeSticky()}),this.listenTo(this,'change:isActive',()=>{this._checkIfShouldBeSticky()})}_checkIfShouldBeSticky(){const n=this._panelRect=this._contentPanel.getBoundingClientRect();let e;this.limiterElement?(e=this._limiterRect=this.limiterElement.getBoundingClientRect(),this.isSticky=this.isActive&&e.top<this.viewportTopOffset&&this._panelRect.height+this.limiterBottomOffset<e.height):this.isSticky=!1,this.isSticky?(this._isStickyToTheLimiter=e.bottom<n.height+this.limiterBottomOffset+this.viewportTopOffset,this._hasViewportTopOffset=!this._isStickyToTheLimiter&&!!this.viewportTopOffset,this._marginLeft=this._isStickyToTheLimiter?null:Ag(-Lp.window.scrollX)):(this._isStickyToTheLimiter=!1,this._hasViewportTopOffset=!1,this._marginLeft=null)}}class Tg{constructor(i){if(Object.assign(this,i),i.actions&&i.keystrokeHandler)for(const o in i.actions){let e=i.actions[o];'string'==typeof e&&(e=[e]);for(const t of e)i.keystrokeHandler.set(t,(t,e)=>{this[o](),e()})}}get first(){return this.focusables.find(Po)||null}get last(){return this.focusables.filter(Po).slice(-1)[0]||null}get next(){return this._getFocusableItem(1)}get previous(){return this._getFocusableItem(-1)}get current(){let i=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find((e,t)=>{const n=e.element===this.focusTracker.focusedElement;return n&&(i=t),n}),i)}focusFirst(){this._focus(this.first)}focusLast(){this._focus(this.last)}focusNext(){this._focus(this.next)}focusPrevious(){this._focus(this.previous)}_focus(t){t&&t.focus()}_getFocusableItem(i){const e=this.current,a=this.focusables.length;if(!a)return null;if(null===e)return this[1===i?'first':'last'];let r=(e+a+i)%a;do{const e=this.focusables.get(r);if(Po(e))return e;r=(r+a+i)%a}while(r!==e);return null}}class Pg extends yg{constructor(t){super(t),this.setTemplate({tag:'span',attributes:{class:['ck-toolbar__separator']}})}}class Eg extends yg{constructor(t){super(t),this.items=this.createCollection(),this.focusTracker=new cg,this.keystrokes=new Vp,this._focusCycler=new Tg({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:['arrowleft','arrowup'],focusNext:['arrowright','arrowdown']}}),this.setTemplate({tag:'div',attributes:{class:['ck-toolbar']},children:this.items,on:{mousedown:Eo(this)}})}render(){super.render();for(const t of this.items)this.focusTracker.add(t.element);this.items.on('add',(n,e)=>{this.focusTracker.add(e.element)}),this.items.on('remove',(n,e)=>{this.focusTracker.remove(e.element)}),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}fillFromConfig(n,o){n.map((t)=>{'|'==t?this.items.add(new Pg):o.has(t)?this.items.add(o.create(t)):ya.warn('toolbarview-item-unavailable: The requested toolbar item is unavailable.',{name:t})})}}class Sg extends vg{constructor(t){super(t),this.stickyPanel=new Cg(t),this.toolbar=new Eg(t),this.toolbar.extendTemplate({attributes:{class:'ck-editor-toolbar'}}),this.editable=new xg(t)}render(){super.render(),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}get editableElement(){return this.editable.element}}class Vg{constructor(){this._replacedElements=[]}replace(n,o){this._replacedElements.push({element:n,newElement:o}),n.style.display='none',o&&n.parentNode.insertBefore(o,n.nextSibling)}restore(){this._replacedElements.forEach(({element:n,newElement:e})=>{n.style.display='',e&&e.remove()}),this._replacedElements=[]}}var Og=t(7),Rg=t.n(Og);class Fg extends ag{constructor(n,e){super(n,e),this.document.createRoot(),this.data.processor=new dg,this.ui=new mg(this,new Sg(this.locale)),this._elementReplacer=new Vg}destroy(){return this.updateEditorElement(),this._elementReplacer.restore(),this.ui.destroy(),super.destroy()}static create(i,e){return new Promise((t)=>{const n=new this(i,e);t(n.initPlugins().then(()=>n.ui.init()).then(()=>{n._elementReplacer.replace(i,n.ui.view.element),n.fire('uiReady')}).then(()=>n.editing.view.attachDomRoot(n.ui.view.editableElement)).then(()=>n.loadDataFromEditorElement()).then(()=>{n.fire('dataReady'),n.fire('ready')}).then(()=>n))})}}class Ig{constructor(t){this.editor=t}destroy(){this.stopListening()}}r(Ig,Ws);class Ng{constructor(t){this.files=So(t),this._native=t}get types(){return this._native.types}getData(t){return this._native.getData(t)}setData(n,e){this._native.setData(n,e)}}class Bg extends Yp{constructor(i){function e(e,a){a.preventDefault();const n=a.dropRange?[a.dropRange]:Array.from(i.selection.getRanges());i.fire('clipboardInput',{dataTransfer:a.dataTransfer,targetRanges:n})}super(i),this.domEventType=['paste','copy','cut','drop','dragover'],this.listenTo(i,'paste',e,{priority:'low'}),this.listenTo(i,'drop',e,{priority:'low'})}onDomEvent(n){const e={dataTransfer:new Ng(n.clipboardData?n.clipboardData:n.dataTransfer)};'drop'==n.type&&(e.dropRange=Vo(this.document,n)),this.fire(n.type,n,e)}}const Mg=['figcaption','li'];class Dg extends Ig{static get pluginName(){return'Clipboard'}init(){function i(n,o){const i=o.dataTransfer,d=s.data.toView(s.data.getSelectedContent(l.selection));o.preventDefault(),t.fire('clipboardOutput',{dataTransfer:i,content:d,method:n.name})}const s=this.editor,l=s.document,t=s.editing.view;this._htmlDataProcessor=new dg,t.addObserver(Bg),this.listenTo(t,'clipboardInput',(o,e)=>{if(s.isReadOnly)return;const n=e.dataTransfer;let i='';n.getData('text/html')?i=Ro(n.getData('text/html')):n.getData('text/plain')&&(i=Oo(n.getData('text/plain'))),i=this._htmlDataProcessor.toView(i),this.fire('inputTransformation',{content:i}),t.scrollToTheSelection()},{priority:'low'}),this.listenTo(this,'inputTransformation',(n,i)=>{if(!i.content.isEmpty){const t=this.editor.data,e=t.toModel(i.content,'$clipboardHolder');if(0==e.childCount)return;l.enqueueChanges(()=>{t.insertContent(e,l.selection)})}},{priority:'low'}),this.listenTo(t,'copy',i,{priority:'low'}),this.listenTo(t,'cut',(e,t)=>{s.isReadOnly?t.preventDefault():i(e,t)},{priority:'low'}),this.listenTo(t,'clipboardOutput',(t,e)=>{e.content.isEmpty||(e.dataTransfer.setData('text/html',this._htmlDataProcessor.toData(e.content)),e.dataTransfer.setData('text/plain',Fo(e.content))),'cut'==e.method&&l.enqueueChanges(()=>{s.data.deleteContent(l.selection,l.batch())})},{priority:'low'})}}class Lg{constructor(n){function i(){this.isEnabled=!1}this.editor=n,this.set('value',void 0),this.set('isEnabled',!1),this.decorate('execute'),this.listenTo(this.editor.document,'changesDone',()=>{this.refresh()}),this.on('execute',(t)=>{this.isEnabled||t.stop()},{priority:'high'}),this.listenTo(n,'change:isReadOnly',(t,e,n)=>{n?(this.on('change:isEnabled',i,{priority:'lowest'}),this.isEnabled=!1):(this.off('change:isEnabled',i),this.refresh())})}refresh(){this.isEnabled=!0}execute(){}destroy(){this.stopListening()}}r(Lg,Ws);class jg extends Lg{execute(){const n=this.editor.document,e=n.batch();n.enqueueChanges(()=>{Io(this.editor.data,e,n.selection,n.schema),this.fire('afterExecute',{batch:e})})}}class qg extends Hp{constructor(o){super(o),o.on('keydown',(e,t)=>{this.isEnabled&&t.keyCode==mc.enter&&o.fire('enter',new Gp(o,t.domEvent))})}observe(){}}class zg extends Ig{static get pluginName(){return'Enter'}init(){const i=this.editor,e=i.editing.view;e.addObserver(qg),i.commands.add('enter',new jg(i)),this.listenTo(e,'enter',(t,n)=>{i.execute('enter'),n.preventDefault(),e.scrollToTheSelection()},{priority:'low'})}}class Hg{constructor(n,e=20){this.document=n,this.size=0,this.limit=e,this.isLocked=!1,this._changeCallback=(i,e,t,n)=>{this._onBatch(n)},this._selectionChangeCallback=()=>{this._reset()},n.on('change',this._changeCallback),n.selection.on('change:range',this._selectionChangeCallback),n.selection.on('change:attribute',this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.document.batch()),this._batch}input(t){this.size+=t,this.size>=this.limit&&this._reset(!0)}lock(){this.isLocked=!0}unlock(){this.isLocked=!1}destroy(){this.document.off('change',this._changeCallback),this.document.selection.off('change:range',this._selectionChangeCallback),this.document.selection.off('change:attribute',this._selectionChangeCallback)}_onBatch(t){'transparent'!=t.type&&t!==this._batch&&1>=cn(t.getOperations())&&this._reset(!0)}_reset(t){(!this.isLocked||t)&&(this._batch=null,this.size=0)}}class Wg extends Lg{constructor(n,e){super(n),this._buffer=new Hg(n.document,e)}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(a={}){const e=this.editor.document,t=a.text||'',n=t.length,o=a.range||e.selection.getFirstRange(),i=a.resultRange;e.enqueueChanges(()=>{const a=o.isCollapsed;this._buffer.lock(),a||this._buffer.batch.remove(o),t&&this._buffer.batch.weakInsert(o.start,t),i?this.editor.data.model.selection.setRanges([i]):a&&this.editor.data.model.selection.setCollapsedAt(o.start.getShiftedBy(n)),this._buffer.unlock(),this._buffer.input(n)})}}class $g extends Ig{static get pluginName(){return'Input'}init(){const o=this.editor,e=o.editing.view,i=new Wg(o,o.config.get('typing.undoStep')||20);o.commands.add('input',i),this.listenTo(e,'keydown',(n,e)=>{this._handleKeydown(e,i)},{priority:'lowest'}),this.listenTo(e,'mutations',(o,e,t)=>{this._handleMutations(e,t)})}_handleKeydown(i,e){const t=this.editor.document,n=e.buffer;!e.isEnabled||Mo(i)||t.selection.isCollapsed||(n.lock(),t.enqueueChanges(()=>{this.editor.data.deleteContent(t.selection,n.batch)}),n.unlock())}_handleMutations(n,e){new Kg(this.editor).handle(n,e)}}class Kg{constructor(t){this.editor=t,this.editing=this.editor.editing}handle(o,e){if(qo(o))this._handleContainerChildrenMutations(o,e);else for(const t of o)this._handleTextMutation(t,e),this._handleTextNodeInsertion(t)}_handleContainerChildrenMutations(y,e){const t=jo(y);if(!t)return;const v=this.editor.editing.view.domConverter,o=v.mapViewToDom(t);if(!o)return;const w=new jp,r=this.editor.data.toModel(w.domToView(o)).getChild(0),a=this.editor.editing.mapper.toModelElement(t),s=Array.from(r.getChildren()),d=Array.from(a.getChildren());if(!zo(s)||!zo(d))return;const l=s.map((t)=>t.data).join('').replace(/\u00A0/g,' '),c=d.map((t)=>t.data).join('');if(c===l)return;const m=bn(c,l),{firstChangeAt:u,insertions:p,deletions:g}=Ho(m);let f=null;e&&(f=this.editing.mapper.toModelRange(e.getFirstRange()));const x=l.substr(u,p),k=Zs.createFromParentsAndOffsets(a,u,a,u+g);this.editor.execute('input',{text:x,range:k,resultRange:f})}_handleTextMutation(p,e){if('text'!=p.type)return;const t=p.newText.replace(/\u00A0/g,' '),n=p.oldText.replace(/\u00A0/g,' '),o=bn(n,t),{firstChangeAt:i,insertions:r,deletions:a}=Ho(o);let s=null;e&&(s=this.editing.mapper.toModelRange(e.getFirstRange()));const g=new Zl(p.node,i),l=this.editing.mapper.toModelPosition(g),c=Zs.createFromPositionAndShift(l,a),h=t.substr(i,r);this.editor.execute('input',{text:h,range:c,resultRange:s})}_handleTextNodeInsertion(a){if('children'==a.type){const e=Lo(a),t=new Zl(a.node,e.index),n=this.editing.mapper.toModelPosition(t),o=e.values[0].data;this.editor.execute('input',{text:o.replace(/\u00A0/g,' '),range:new Zs(n)})}}}const Ug=[Z('arrowUp'),Z('arrowRight'),Z('arrowDown'),Z('arrowLeft'),9,16,17,18,20,27,33,34,35,36,229];for(let n=112;135>=n;n++)Ug.push(n);class Qg extends Lg{constructor(n,e){super(n),this.direction=e,this._buffer=new Hg(n.document,n.config.get('typing.undoStep'))}execute(a={}){const e=this.editor.document,t=this.editor.data;e.enqueueChanges(()=>{this._buffer.lock();const n=hp.createFromSelection(e.selection),o=n.isCollapsed;if(n.isCollapsed&&t.modifySelection(n,{direction:this.direction,unit:a.unit}),this._shouldEntireContentBeReplacedWithParagraph(a.sequence||1))return void this._replaceEntireContentWithParagraph();if(n.isCollapsed)return;let s=0;n.getFirstRange().getMinimalFlatRanges().forEach((t)=>{s+=cn(t.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),t.deleteContent(n,this._buffer.batch,{doNotResetEntireContent:o}),this._buffer.input(s),e.selection.setRanges(n.getRanges(),n.isBackward),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(a){if(1<a)return!1;const e=this.editor.document,t=e.selection,n=e.schema.getLimitElement(t),o=t.isCollapsed&&t.containsEntireContent(n);if(!o)return!1;if(!e.schema.check({name:'paragraph',inside:n.name}))return!1;const s=n.getChild(0);return s&&'paragraph'===s.name?!1:!0}_replaceEntireContentWithParagraph(){const i=this.editor.document,e=i.selection,t=i.schema.getLimitElement(e),n=new Js('paragraph');this._buffer.batch.remove(Zs.createIn(t)),this._buffer.batch.insert(ry.createAt(t),n),e.setCollapsedAt(n)}}class Jg extends Hp{constructor(a){super(a);let r=0;a.on('keyup',(t,e)=>{(e.keyCode==mc.delete||e.keyCode==mc.backspace)&&(r=0)}),a.on('keydown',(e,t)=>{const n={};if(t.keyCode==mc.delete)n.direction='forward',n.unit='character';else if(t.keyCode==mc.backspace)n.direction='backward',n.unit='codePoint';else return;n.unit=t.altKey?'word':n.unit,n.sequence=++r,a.fire('delete',new Gp(a,t.domEvent,n))})}observe(){}}class Gg extends Ig{static get pluginName(){return'Delete'}init(){const i=this.editor,e=i.editing.view;e.addObserver(Jg),i.commands.add('forwardDelete',new Qg(i,'forward')),i.commands.add('delete',new Qg(i,'backward')),this.listenTo(e,'delete',(t,n)=>{i.execute('forward'==n.direction?'forwardDelete':'delete',{unit:n.unit,sequence:n.sequence}),n.preventDefault(),e.scrollToTheSelection()})}}class Yg extends Ig{static get requires(){return[$g,Gg]}static get pluginName(){return'Typing'}}class Xg extends Lg{constructor(t){super(t),this._stack=[],this._createdBatches=new WeakSet,this.refresh()}refresh(){this.isEnabled=0<this._stack.length}addBatch(o){const i=this.editor.document.selection,t={ranges:i.hasOwnRange?Array.from(i.getRanges()):[],isBackward:i.isBackward};this._stack.push({batch:o,selection:t}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(a,e,s){const t=this.editor.document,n=[];for(const o of a){const i=Wo(o,s),e=i.find((n)=>n.start.root!=t.graveyard);e&&n.push(e)}n.length&&t.selection.setRanges(n,e)}_undo(i){const s=this.editor.document,t=s.batch();this._createdBatches.add(t);const e=i.deltas.slice();e.reverse();for(const n of e){const i=n.baseVersion+n.operations.length,e=Array.from(s.history.getDeltas(i)),o=s.transformDeltas([n.getReversed()],e,!0),r=o.deltasA;for(const o of r){o.baseVersion=s.version,t.addDelta(o);for(const e of o.operations)s.applyOperation(e);s.history.setDeltaAsUndone(n,o)}}return t}}class Zg extends Xg{execute(o=null){const e=o?this._stack.findIndex((e)=>e.batch==o):this._stack.length-1,i=this._stack.splice(e,1)[0];this.editor.document.enqueueChanges(()=>{const n=this._undo(i.batch),e=this.editor.document.history.getDeltas(i.batch.baseVersion);this._restoreSelection(i.selection.ranges,i.selection.isBackward,e),this.fire('revert',i.batch,n)}),this.refresh()}}class ef extends Xg{execute(){const i=this._stack.pop();this.editor.document.enqueueChanges(()=>{const e=i.batch.deltas[i.batch.deltas.length-1],t=e.baseVersion+e.operations.length,n=this.editor.document.history.getDeltas(t);this._restoreSelection(i.selection.ranges,i.selection.isBackward,n),this._undo(i.batch)}),this.refresh()}}class tf extends Ig{constructor(t){super(t),this._batchRegistry=new WeakSet}init(){this._undoCommand=new Zg(this.editor),this._redoCommand=new ef(this.editor),this.editor.commands.add('undo',this._undoCommand),this.editor.commands.add('redo',this._redoCommand),this.listenTo(this.editor.document,'change',(i,e,t,n)=>{this._batchRegistry.has(n)||'transparent'==n.type||(this._redoCommand._createdBatches.has(n)?this._undoCommand.addBatch(n):!this._undoCommand._createdBatches.has(n)&&(this._undoCommand.addBatch(n),this._redoCommand.clearStack()),this._batchRegistry.add(n))},{priority:'highest'}),this.listenTo(this._undoCommand,'revert',(o,e,t)=>{this._redoCommand.addBatch(t)})}}class nf extends yg{constructor(){super();const t=this.bindTemplate;this.set('content',''),this.set('viewBox','0 0 20 20'),this.setTemplate({tag:'svg',ns:'http://www.w3.org/2000/svg',attributes:{class:'ck-icon',viewBox:t.to('viewBox')}})}render(){super.render(),this._updateXMLContent(),this.on('change:content',()=>this._updateXMLContent())}_updateXMLContent(){if(this.content){const t=new DOMParser().parseFromString(this.content.trim(),'image/svg+xml').firstChild;for(this.element.innerHTML='';0<t.childNodes.length;)this.element.appendChild(t.childNodes[0])}}}class of extends yg{constructor(n){super(n),this.set('text',''),this.set('position','s');const e=this.bindTemplate;this.setTemplate({tag:'span',attributes:{class:['ck-tooltip',e.to('position',(t)=>'ck-tooltip_'+t),e.if('text','ck-hidden',(t)=>!t.trim())]},children:[{tag:'span',attributes:{class:['ck-tooltip__text']},children:[{text:e.to('text')}]}]})}}class rf extends yg{constructor(n){super(n);const e=this.bindTemplate;this.set('label'),this.set('keystroke'),this.set('tooltip'),this.set('tooltipPosition','s'),this.set('type','button'),this.set('isOn',!1),this.set('isEnabled',!0),this.set('isVisible',!0),this.set('withText',!1),this.set('icon'),this.set('tabindex',-1),this.children=this.createCollection(),this.tooltipView=this._createTooltipView(),this.labelView=this._createLabelView(),this.bind('_tooltipString').to(this,'tooltip',this,'label',this,'keystroke',this._getTooltipString.bind(this)),this.setTemplate({tag:'button',attributes:{class:['ck-button',e.to('isEnabled',(t)=>t?'ck-enabled':'ck-disabled'),e.if('isVisible','ck-hidden',(t)=>!t),e.to('isOn',(t)=>t?'ck-on':'ck-off'),e.if('withText','ck-button_with-text')],type:e.to('type',(t)=>t?t:'button'),tabindex:e.to('tabindex')},children:this.children,on:{mousedown:e.to((t)=>{t.preventDefault()}),click:e.to((t)=>{this.isEnabled?this.fire('execute'):t.preventDefault()})}})}render(){if(super.render(),this.icon){const t=this.iconView=new nf;t.bind('content').to(this,'icon'),this.children.add(t)}this.children.add(this.tooltipView),this.children.add(this.labelView)}focus(){this.element.focus()}_createTooltipView(){const t=new of;return t.bind('text').to(this,'_tooltipString'),t.bind('position').to(this,'tooltipPosition'),t}_createLabelView(){const t=new yg;return t.setTemplate({tag:'span',attributes:{class:['ck-button__label']},children:[{text:this.bindTemplate.to('label')}]}),t}_getTooltipString(o,i,t){return o?'string'==typeof o?o:(t&&(t=te(t)),o instanceof Function?o(i,t):`${i}${t?` (${t})`:''}`):''}}var af=t(8),sf=t.n(af),df=t(9),lf=t.n(df);class cf extends Ig{static get requires(){return[tf]}static get pluginName(){return'Undo'}init(){const t=this.editor,e=t.t;this._addButton('undo',e('Annuler'),'CTRL+Z',sf.a),this._addButton('redo',e('Restaurer'),'CTRL+Y',lf.a),t.keystrokes.set('CTRL+Z','undo'),t.keystrokes.set('CTRL+Y','redo'),t.keystrokes.set('CTRL+SHIFT+Z','redo')}_addButton(a,e,l,d){const s=this.editor,i=s.commands.get(a);s.ui.componentFactory.add(a,(r)=>{const c=new rf(r);return c.set({label:e,icon:d,keystroke:l,tooltip:!0}),c.bind('isEnabled').to(i,'isEnabled'),this.listenTo(c,'execute',()=>s.execute(a)),c})}}class mf extends Ig{static get requires(){return[Dg,zg,Yg,cf]}}class uf{constructor(){const t=new window.FileReader;this._reader=t,this.set('loaded',0),t.onprogress=(t)=>{this.loaded=t.loaded}}get error(){return this._reader.error}read(i){const e=this._reader;return this.total=i.size,new Promise((t,n)=>{e.onload=()=>{t(e.result)},e.onerror=()=>{n('error')},e.onabort=()=>{n('aborted')},this._reader.readAsDataURL(i)})}abort(){this._reader.abort()}}r(uf,Ws);class pf extends Ig{static get pluginName(){return'FileRepository'}init(){this.loaders=new ug,this.set('uploaded',0),this.set('uploadTotal',null),this.bind('uploadedPercent').to(this,'uploaded',this,'uploadTotal',(n,e)=>e?100*(n/e):0)}getLoader(n){for(const e of this.loaders)if(e.file==n)return e;return null}createLoader(n){if(!this.createAdapter)return ya.error('filerepository-no-adapter: Upload adapter is not defined.'),null;const e=new gf(n);return e._adapter=this.createAdapter(e),this.loaders.add(e),e.on('change:uploaded',()=>{let n=0;for(const e of this.loaders)n+=e.uploaded;this.uploaded=n}),e.on('change:uploadTotal',()=>{let n=0;for(const e of this.loaders)e.uploadTotal&&(n+=e.uploadTotal);this.uploadTotal=n}),e}destroyLoader(n){const e=n instanceof gf?n:this.getLoader(n);e._destroy(),this.loaders.remove(e)}}r(pf,Ws);class gf{constructor(n,e){this.id=a(),this.file=n,this._adapter=e,this._reader=new uf,this.set('status','idle'),this.set('uploaded',0),this.set('uploadTotal',null),this.bind('uploadedPercent').to(this,'uploaded',this,'uploadTotal',(n,e)=>e?100*(n/e):0),this.set('uploadResponse',null)}read(){if('idle'!=this.status)throw new ba('filerepository-read-wrong-status: You cannot call read if the status is different than idle.');return this.status='reading',this._reader.read(this.file).then((t)=>(this.status='idle',t)).catch((t)=>{if('aborted'===t)throw this.status='aborted','aborted';throw this.status='error',this._reader.error})}upload(){if('idle'!=this.status)throw new ba('filerepository-upload-wrong-status: You cannot call upload if the status is different than idle.');return this.status='uploading',this._adapter.upload().then((t)=>(this.uploadResponse=t,this.status='idle',t)).catch((t)=>{if('aborted'===this.status)throw'aborted';throw this.status='error',t})}abort(){const t=this.status;this.status='aborted','reading'==t&&this._reader.abort(),'uploading'==t&&this._adapter.abort&&this._adapter.abort(),this._destroy()}_destroy(){this._reader=void 0,this._adapter=void 0,this.data=void 0,this.uploadResponse=void 0,this.file=void 0}}r(gf,Ws);const ff='ckCsrfToken',hf=40,bf='abcdefghijklmnopqrstuvwxyz0123456789';class _f extends Ig{static get requires(){return[pf]}static get pluginName(){return'CKFinderUploadAdapter'}init(){const n=this.editor.config.get('ckfinder.uploadUrl');n&&(this.editor.plugins.get(pf).createAdapter=(e)=>new yf(e,n,this.editor.t))}}class yf{constructor(t,e,n){this.loader=t,this.url=e,this.t=n}upload(){return new Promise((n,e)=>{this._initRequest(),this._initListeners(n,e),this._sendRequest()})}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const t=this.xhr=new XMLHttpRequest;t.open('POST',this.url,!0),t.responseType='json'}_initListeners(a,e){const n=this.xhr,o=this.loader,i=this.t,r=i('Envoi du fichier \xE9chou\xE9 :')+` ${o.file.name}.`;n.addEventListener('error',()=>e(r)),n.addEventListener('abort',()=>e()),n.addEventListener('load',()=>{const t=n.response;return t&&t.uploaded?void a({default:t.url}):e(t&&t.error&&t.error.message?t.error.message:r)}),n.upload&&n.upload.addEventListener('progress',(t)=>{t.lengthComputable&&(o.uploadTotal=t.total,o.uploaded=t.loaded)})}_sendRequest(){const t=new FormData;t.append('upload',this.loader.file),t.append('ckCsrfToken',Ko()),this.xhr.send(t)}}class wf{constructor(p,e,i){let a;a='function'==typeof i?i:(e)=>{const{batch:t}=e;p.execute(i,{batch:t})},p.document.on('change',(t,n,o,i)=>{if('transparent'==i.type)return;if('insert'!=n)return;const r=o.range.getItems().next().value;if(!(r instanceof Us))return;const s=r.textNode,d=s.data;if('paragraph'!==s.parent.name||!d)return;const u=e.exec(d);u&&p.document.enqueueChanges(()=>{const e=p.document.batch(),o=Zs.createFromParentsAndOffsets(s.parent,0,s.parent,u[0].length);e.remove(o),a({fixBatch:e,match:u})})})}}class vf{constructor(g,e,t){let s,o,i,r;e instanceof RegExp?s=e:i=e,'string'==typeof t?o=t:r=t,i=i||((o)=>{let l;const t=[],c=[];for(;null!==(l=s.exec(o))&&!(l&&4>l.length);){let{index:n,1:e,2:o,3:i}=l;n+=l[0].length-(e+o+i).length;const a=[n,n+e.length],r=[n+e.length+o.length,n+e.length+o.length+i.length];t.push(a),t.push(r),c.push([n+e.length,n+e.length+o.length])}return{remove:t,format:c}}),r=r||((i,e)=>{for(const t of e)i.setAttribute(t,o,!0)}),g.document.on('change',(e,t,n,a)=>{if('transparent'==a.type)return;if('insert'!==t)return;const s=g.document.selection;if(!s.isCollapsed||!s.focus||!s.focus.parent)return;const d=s.focus.parent,l=Go(d).slice(0,s.focus.offset),c=i(l),m=[];c.format.forEach((t)=>{void 0===t[0]||void 0===t[1]||m.push(fp.createFromParentsAndOffsets(d,t[0],d,t[1]))});const u=[];c.remove.slice().reverse().forEach((t)=>{void 0===t[0]||void 0===t[1]||u.push(fp.createFromParentsAndOffsets(d,t[0],d,t[1]))}),m.length&&u.length&&g.document.enqueueChanges(()=>{const i=g.document.batch(),e=g.document.schema.getValidRanges(m,o);r(i,e),m.forEach((t)=>t.detach());for(const t of u)i.remove(t),t.detach()})})}}class kf extends Ig{static get pluginName(){return'Autoformat'}afterInit(){this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats()}_addListAutoformats(){const t=this.editor.commands;t.get('bulletedList')&&new wf(this.editor,/^[*-]\s$/,'bulletedList'),t.get('numberedList')&&new wf(this.editor,/^\d+[.|)]?\s$/,'numberedList')}_addBasicStylesAutoformats(){const t=this.editor.commands;t.get('bold')&&(new vf(this.editor,/(\*\*)([^*]+)(\*\*)$/g,'bold'),new vf(this.editor,/(__)([^_]+)(__)$/g,'bold')),t.get('italic')&&(new vf(this.editor,/(?:^|[^*])(\*)([^*_]+)(\*)$/g,'italic'),new vf(this.editor,/(?:^|[^_])(_)([^_]+)(_)$/g,'italic')),t.get('code')&&new vf(this.editor,/(`)([^`]+)(`)$/g,'code')}_addHeadingAutoformats(){Array.from(this.editor.commands.names()).filter((t)=>t.match(/^heading[1-6]$/)).forEach((o)=>{const e=o[7],t=new RegExp(`^(#{${e}})\\s$`);new wf(this.editor,t,(e)=>{const{batch:t}=e;this.editor.execute(o,{batch:t})})})}_addBlockQuoteAutoformats(){this.editor.commands.get('blockQuote')&&new wf(this.editor,/^>\s$/,'blockQuote')}}class xf{constructor(){this._dispatchers=[],this._from=null}for(...t){return this._dispatchers=t,this}fromElement(t){return this._from={type:'element',name:t,priority:null},this}fromAttribute(t){return this._from={type:'attribute',key:t,priority:null},this}fromMarker(t){return this._from={type:'marker',name:t,priority:null},this}withPriority(t){return this._from.priority=t,this}toElement(o){const i=null===this._from.priority?'normal':this._from.priority;for(const a of this._dispatchers)if('element'==this._from.type)o='string'==typeof o?new Gl(o):o,a.on('insert:'+this._from.name,Pe(o),{priority:i});else if('attribute'==this._from.type)o='string'==typeof o?new ac(o):o,a.on('addAttribute:'+this._from.key,Re(o),{priority:i}),a.on('changeAttribute:'+this._from.key,Re(o),{priority:i}),a.on('removeAttribute:'+this._from.key,Fe(o),{priority:i}),a.on('selectionAttribute:'+this._from.key,$n(o),{priority:i});else{const n=null===this._from.priority?'normal':this._from.priority;o='string'==typeof o?new uc(o):o,a.on('addMarker:'+this._from.name,Se(o),{priority:n}),a.on('removeMarker:'+this._from.name,Me(o),{priority:n})}}toHighlight(o){const e=null===this._from.priority?'normal':this._from.priority;if('marker'!=this._from.type)throw new ba('build-model-converter-non-marker-to-highlight: Conversion to a highlight is supported only from model markers.');for(const i of this._dispatchers)i.on('addMarker:'+this._from.name,Ne(o),{priority:e}),i.on('addMarker:'+this._from.name,Be(o),{priority:e}),i.on('removeMarker:'+this._from.name,Ne(o),{priority:e}),i.on('removeMarker:'+this._from.name,Be(o),{priority:e}),i.on('selectionMarker:'+this._from.name,Kn(o),{priority:e})}toAttribute(o,i){if('attribute'!=this._from.type)throw new ba('build-model-converter-non-attribute-to-attribute: To-attribute conversion is supported only from model attributes.');let a=o?'string'==typeof o?i?function(){return{key:o,value:i}}:function(n){return{key:o,value:n}}:o:void 0;for(const t of this._dispatchers){const n={priority:this._from.priority||'normal'};t.on('addAttribute:'+this._from.key,Ve(a),n),t.on('changeAttribute:'+this._from.key,Ve(a),n),t.on('removeAttribute:'+this._from.key,Oe(a),n)}}}class Af{constructor(){this._dispatchers=[],this._from=[]}for(...t){return this._dispatchers=t,this}fromElement(t){return this.from({name:t})}fromAttribute(i,a=/.*/){const t={};'style'===i||'class'===i?t[i]=a:(t.attribute={},t.attribute[i]=a);const n=new Kl(t);return this._from.push({matcher:n,consume:!1,priority:null,attributeKey:i}),this}from(t){return t instanceof Kl||(t=new Kl(t)),this._from.push({matcher:t,consume:!1,priority:null}),this}consuming(n){const e=this._from[this._from.length-1];return e.consume=n,this}withPriority(n){const e=this._from[this._from.length-1];return e.priority=n,this}toElement(c){this._setCallback(function(e){return(t,p,o,i)=>{const r=e.matcher.matchAll(p.input);if(r)for(const t of r){const n=c instanceof Function?c(p.input):new Js(c);if(!n)continue;const r=Array.from(n.getAttributeKeys());if(!i.schema.check({name:n.name,attributes:r,inside:p.context}))continue;if(!o.consume(p.input,e.consume||t.match))continue;p.context.push(n);const u=i.convertChildren(p.input,o,p),d=ry.createAt(n,'end');yc.insert(d,u),p.context.pop(),p.output=n;break}}},'normal')}toAttribute(l,d){this._setCallback(function(t){return(n,c,i,r)=>{const a=t.matcher.matchAll(c.input);if(a)for(const n of a){if(!i.consume(c.input,t.consume||n.match))continue;c.output||(c.output=r.convertChildren(c.input,i,c));let o;if(!(l instanceof Function))o={key:l,value:d?d:c.input.getAttribute(t.attributeKey)};else if(o=l(c.input),!o)return;Xo(c.output,o,c,r);break}}},'low')}toMarker(s){this._setCallback(function(l){return(e,t,n)=>{const o=l.matcher.matchAll(t.input);if(!o)return;let i;if(i=s instanceof Function?s(t.input):new Js('$marker',{"data-name":t.input.getAttribute('data-name')}),'$marker'!=i.name||'string'!=typeof i.getAttribute('data-name'))throw new ba('build-view-converter-invalid-marker: Invalid model element to mark marker range.');for(const a of o)if(n.consume(t.input,l.consume||a.match)){t.output=i;break}}},'normal')}_setCallback(s,e){for(const t of this._from){const n=t.matcher.getElementName(),o=n?'element:'+n:'element',i=s(t),r=null===t.priority?e:t.priority;for(const t of this._dispatchers)t.on(o,i,{priority:r})}}}class Cf extends Lg{constructor(n,e){super(n),this.attributeKey=e}refresh(){const t=this.editor.document;this.value=t.selection.hasAttribute(this.attributeKey),this.isEnabled=t.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(a={}){const e=this.editor.document,t=e.selection,n=void 0===a.forceValue?!this.value:a.forceValue;e.enqueueChanges(()=>{if(t.isCollapsed)n?t.setAttribute(this.attributeKey,!0):t.removeAttribute(this.attributeKey);else{const o=e.schema.getValidRanges(t.getRanges(),this.attributeKey),i=a.batch||e.batch();for(const t of o)n?i.setAttribute(t,this.attributeKey,n):i.removeAttribute(t,this.attributeKey)}})}}const Tf='bold';class Ny extends Ig{init(){const o=this.editor,e=o.data,t=o.editing;o.document.schema.allow({name:'$inline',attributes:Tf,inside:'$block'}),o.document.schema.allow({name:'$inline',attributes:Tf,inside:'$clipboardHolder'}),Yo().for(e.modelToView,t.modelToView).fromAttribute(Tf).toElement('strong'),Zo().for(e.viewToModel).fromElement('strong').fromElement('b').fromAttribute('style',{"font-weight":'bold'}).toAttribute(Tf,!0),o.commands.add(Tf,new Cf(o,Tf))}}var Ef=t(10),Sf=t.n(Ef);class Vf extends Ig{static get requires(){return[Ny]}static get pluginName(){return'Bold'}init(){const i=this.editor,e=i.t,n=i.commands.get('bold'),t='CTRL+B';i.ui.componentFactory.add('bold',(a)=>{const s=new rf(a);return s.set({label:e('Gras'),icon:Sf.a,keystroke:t,tooltip:!0}),s.bind('isOn','isEnabled').to(n,'value','isEnabled'),this.listenTo(s,'execute',()=>i.execute('bold')),s}),i.keystrokes.set(t,'bold')}}const Of='italic';class Ry extends Ig{init(){const o=this.editor,e=o.data,t=o.editing;o.document.schema.allow({name:'$inline',attributes:Of,inside:'$block'}),o.document.schema.allow({name:'$inline',attributes:Of,inside:'$clipboardHolder'}),Yo().for(e.modelToView,t.modelToView).fromAttribute(Of).toElement('i'),Zo().for(e.viewToModel).fromElement('em').fromElement('i').fromAttribute('style',{"font-style":'italic'}).toAttribute(Of,!0),o.commands.add(Of,new Cf(o,Of))}}var Ff=t(11),If=t.n(Ff);class Nf extends Ig{static get requires(){return[Ry]}static get pluginName(){return'Italic'}init(){const i=this.editor,e=i.t,n=i.commands.get('italic'),t='CTRL+I';i.ui.componentFactory.add('italic',(a)=>{const s=new rf(a);return s.set({label:e('Italique'),icon:If.a,keystroke:t,tooltip:!0}),s.bind('isOn','isEnabled').to(n,'value','isEnabled'),this.listenTo(s,'execute',()=>i.execute('italic')),s}),i.keystrokes.set(t,'italic')}}class Bf extends Lg{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(a={}){const e=this.editor.document,t=e.schema,n=a.batch||e.batch(),o=Array.from(e.selection.getSelectedBlocks());e.enqueueChanges(()=>{if(this.value)this._removeQuote(n,o.filter(ti));else{const i=o.filter((n)=>ti(n)||oi(t,n));this._applyQuote(n,i)}})}_getValue(){const t=ei(this.editor.document.selection.getSelectedBlocks());return!!(t&&ti(t))}_checkEnabled(){if(this.value)return!0;const o=this.editor.document.selection,e=this.editor.document.schema,t=ei(o.getSelectedBlocks());return!!t&&oi(e,t)}_removeQuote(o,e){ni(e).reverse().forEach((e)=>{if(e.start.isAtStart&&e.end.isAtEnd)return void o.unwrap(e.start.parent);if(e.start.isAtStart){const t=ry.createBefore(e.start.parent);return void o.move(e,t)}e.end.isAtEnd||o.split(e.end);const t=ry.createAfter(e.end.parent);o.move(e,t)})}_applyQuote(i,e){const a=[];ni(e).reverse().forEach((e)=>{let t=ti(e.start);t||(t=new Js('blockQuote'),i.wrap(e,t)),a.push(t)}),a.reverse().reduce((e,t)=>e.nextSibling==t?(i.merge(ry.createAfter(e)),e):t)}}class Mf extends Ig{init(){const n=this.editor,e=n.document.schema;n.commands.add('blockQuote',new Bf(n)),e.registerItem('blockQuote'),e.allow({name:'blockQuote',inside:'$root'}),e.allow({name:'$block',inside:'blockQuote'}),Zo().for(n.data.viewToModel).fromElement('blockquote').toElement('blockQuote'),Yo().for(n.data.modelToView,n.editing.modelToView).fromElement('blockQuote').toElement('blockquote')}afterInit(){const t=this.editor.document.schema;t.hasItem('listItem')&&t.allow({name:'listItem',inside:'blockQuote',attributes:['type','indent']})}}var Df=t(12),Lf=t.n(Df),jf=t(13),qf=t.n(jf);class zf extends Ig{static get requires(){return[Mf]}static get pluginName(){return'BlockQuote'}init(){const o=this.editor,e=o.t,n=o.commands.get('blockQuote');o.ui.componentFactory.add('blockQuote',(t)=>{const a=new rf(t);return a.set({label:e('Citation'),icon:Lf.a,tooltip:!0}),a.bind('isOn','isEnabled').to(n,'value','isEnabled'),this.listenTo(a,'execute',()=>o.execute('blockQuote')),a})}afterInit(){const n=this.editor,a=n.commands.get('blockQuote');this.listenTo(this.editor.editing.view,'enter',(t,e)=>{const n=this.editor.document,o=n.selection.getLastPosition().parent;n.selection.isCollapsed&&o.isEmpty&&a.value&&(this.editor.execute('blockQuote'),this.editor.editing.view.scrollToTheSelection(),e.preventDefault(),t.stop())})}}const Hf=/^data:(\S*?);base64,/;class Wf{constructor(o,i,a){if(!o)throw new Error('File must be provided');if(!i)throw new Error('Token must be provided');if(!a)throw new Error('Api address must be provided');this.file=ri(o)?ii(o):o,this._token=i,this._apiAddress=a}onProgress(o){return this.on('progress',(e,t)=>o(t)),this}onError(o){return this.once('error',(e,t)=>o(t)),this}abort(){this.xhr.abort()}send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}_prepareRequest(){const t=new XMLHttpRequest;t.open('POST',this._apiAddress),t.setRequestHeader('Authorization',this._token.value),t.responseType='json',this.xhr=t}_attachXHRListeners(){function o(t){return()=>i.fire('error',t)}const i=this,a=this.xhr;a.addEventListener('error',o('Network Error')),a.addEventListener('abort',o('Abort')),a.upload&&a.upload.addEventListener('progress',(t)=>{t.lengthComputable&&this.fire('progress',{total:t.total,uploaded:t.loaded})}),a.addEventListener('load',()=>{const n=a.status,e=a.response;if(200>n||299<n)return this.fire('error',e.message||e.error)})}_sendRequest(){const i=new FormData,a=this.xhr;return i.append('file',this.file),new Promise((t,n)=>{a.addEventListener('load',()=>{const o=a.status,e=a.response;return 200>o||299<o?n(e.message||e.error):t(e)}),a.addEventListener('error',()=>n('Network Error')),a.addEventListener('abort',()=>n('Abort')),a.send(i)})}}r(Wf,Va);const $f={refreshInterval:3.6e6,autoRefresh:!0};class Kf{constructor(n,o=$f){if(!n)throw new Error('`tokenUrl` must be provided');this.set('value',o.initValue),this._tokenUrl=n,this._options=Object.assign({},$f,o)}init(){return new Promise((n,e)=>(this._options.autoRefresh&&this._startRefreshing(),this.value?void n(this):void this._refreshToken().then(n).catch(e)))}_refreshToken(){return new Promise((a,e)=>{const t=new XMLHttpRequest;t.open('GET',this._tokenUrl),t.addEventListener('load',()=>{const n=t.status,o=t.response;return 200>n||299<n?e('Cannot download new token!'):(this.set('value',o),a(this))}),t.addEventListener('error',()=>e('Network Error')),t.addEventListener('abort',()=>e('Abort')),t.send()})}_startRefreshing(){this._refreshInterval=setInterval(this._refreshToken.bind(this),this._options.refreshInterval)}_stopRefreshing(){clearInterval(this._refreshInterval)}static create(o,e=$f){const t=new Kf(o,e);return t.init()}}r(Kf,Ws);class Uf extends Ig{init(){const o=this.editor,e=o.config,t=e.get('cloudServices')||{};for(const n in t)this[n]=t[n];return(this.uploadUrl||(this.uploadUrl='https://files.cke-cs.com/upload/'),!this.tokenUrl)?void(this.token=null):(this.token=new Uf.Token(this.tokenUrl),this.token.init())}}Uf.Token=Kf;class Qf extends Ig{static get requires(){return[pf,Uf]}init(){const i=this.editor,e=i.plugins.get(Uf),t=e.token,n=e.uploadUrl;t&&(this._uploadGateway=new Qf._UploadGateway(t,n),i.plugins.get(pf).createAdapter=(t)=>new Jf(this._uploadGateway,t))}}class Jf{constructor(n,e){this.uploadGateway=n,this.loader=e}upload(){return this.fileUploader=this.uploadGateway.upload(this.loader.file),this.fileUploader.on('progress',(n,e)=>{this.loader.uploadTotal=e.total,this.loader.uploaded=e.uploaded}),this.fileUploader.send()}abort(){this.fileUploader.abort()}}Qf._UploadGateway=class{constructor(n,o){if(!n)throw new Error('Token must be provided');if(!o)throw new Error('Api address must be provided');this._token=n,this._apiAddress=o}upload(t){return new Wf(t,this._token,this._apiAddress)}};const Gf=new WeakSet;class Yf{constructor(){this._stack=[]}add(i){const e=this._stack,t=e[0];this._insertDescriptor(i);const a=e[0];t===a||pi(t,a)||this.fire('change:top',{oldDescriptor:t,newDescriptor:a})}remove(i){const e=this._stack,t=e[0];this._removeDescriptor(i);const a=e[0];t===a||pi(t,a)||this.fire('change:top',{oldDescriptor:t,newDescriptor:a})}_insertDescriptor(i){const e=this._stack,t=e.findIndex((e)=>e.id===i.id);if(!pi(i,e[t])){-1<t&&e.splice(t,1);let n=0;for(;e[n]&&gi(e[n],i);)n++;e.splice(n,0,i)}}_removeDescriptor(o){const e=this._stack,t=e.findIndex((e)=>e.id===o);-1<t&&e.splice(t,1)}}r(Yf,Va);const Xf=Symbol('isWidget'),Zf=Symbol('label'),eh='ck-widget',th='ck-widget_selected',nh=Symbol('isImage');class oh extends Ig{init(){const t=this.editor,e=t.document,n=e.schema,o=t.data,i=t.editing,r=t.t;n.registerItem('image'),n.requireAttributes('image',['src']),n.allow({name:'image',attributes:['alt','src','srcset'],inside:'$root'}),n.objects.add('image'),Yo().for(o.modelToView).fromElement('image').toElement(()=>Pi()),Yo().for(i.modelToView).fromElement('image').toElement(()=>xi(Pi(),r('Objet image'))),si([i.modelToView,o.modelToView],'src'),si([i.modelToView,o.modelToView],'alt'),si([i.modelToView,o.modelToView],'srcset',di),Zo().for(o.viewToModel).from({name:'img',attribute:{src:/./}}).toElement((t)=>new Js('image',{src:t.getAttribute('src')})),o.viewToModel.on('element:img',ci,{priority:'low'}),o.viewToModel.on('element',ui,{priority:'low'}),Zo().for(o.viewToModel).from({name:'img',attribute:{alt:/./}}).consuming({attribute:['alt']}).toAttribute((t)=>({key:'alt',value:t.getAttribute('alt')})),Zo().for(o.viewToModel).from({name:'img',attribute:{srcset:/./}}).consuming({attribute:['srcset']}).toAttribute((n)=>{const e={data:n.getAttribute('srcset')};return n.hasAttribute('width')&&(e.width=n.getAttribute('width')),{key:'srcset',value:e}}),o.viewToModel.on('element:figure',ai())}}class ih extends Yp{constructor(t){super(t),this.domEventType='mousedown'}onDomEvent(t){this.fire(t.type,t)}}var rh=t(14),ah=t.n(rh);const sh=ee('Ctrl+A');class dh extends Ig{static get pluginName(){return'Widget'}init(){const t=this.editor.editing.view;this._previouslySelected=new Set,this.editor.editing.modelToView.on('selection',(a,e,t,n)=>{this._clearPreviouslySelectedWidgets();const o=n.viewSelection,i=o.getSelectedElement();for(const r of o.getRanges())for(const n of r){const e=n.item;e.is('element')&&hi(e)&&(e.addClass(th),this._previouslySelected.add(e),e==i&&o.setFake(!0,{label:wi(i)}))}},{priority:'low'}),t.addObserver(ih),this.listenTo(t,'mousedown',(...t)=>this._onMousedown(...t)),this.listenTo(t,'keydown',(...t)=>this._onKeydown(...t),{priority:'high'})}_onMousedown(a,e){const t=this.editor,n=t.editing.view;let o=e.target;if(Oi(o))return;if(!hi(o)&&(o=o.findAncestor(hi),!o))return;e.preventDefault(),n.isFocused||n.focus();const s=t.editing.mapper.toModelElement(o);t.document.enqueueChanges(()=>{this._setSelectionOverElement(s)})}_onKeydown(a,e){const t=e.keyCode,n=t==mc.delete||t==mc.arrowdown||t==mc.arrowright;let o=!1;Si(t)?o=this._handleDelete(n):Ei(t)?o=this._handleArrowKeys(n):Vi(e)&&(o=this._selectAllNestedEditableContent()||this._selectAllContent()),o&&(e.preventDefault(),a.stop())}_handleDelete(i){if(this.editor.isReadOnly)return;const a=this.editor.document,r=a.selection;if(!r.isCollapsed)return;const t=this._getObjectElementNextToSelection(i);if(t)return a.enqueueChanges(()=>{const o=a.batch();for(let e=r.anchor.parent;e.isEmpty;){const t=e;e=t.parent,o.remove(t)}this._setSelectionOverElement(t)}),!0}_handleArrowKeys(a){const e=this.editor.document,t=e.schema,s=e.selection,n=s.getSelectedElement();if(n&&t.objects.has(n.name)){const t=a?s.getLastPosition():s.getFirstPosition(),n=e.getNearestSelectionRange(t,a?'forward':'backward');return n&&e.enqueueChanges(()=>{s.setRanges([n])}),!0}if(!s.isCollapsed)return;const o=this._getObjectElementNextToSelection(a);if(o instanceof Js&&e.schema.objects.has(o.name))return e.enqueueChanges(()=>{this._setSelectionOverElement(o)}),!0}_selectAllNestedEditableContent(){const i=this.editor.document,e=i.selection,t=i.schema,n=t.getLimitElement(e);return e.getFirstRange().root!=n&&(i.enqueueChanges(()=>{e.setIn(n)}),!0)}_selectAllContent(){const a=this.editor.document,e=a.selection,t=this.editor.editing,n=t.view,o=n.selection,i=o.getSelectedElement();if(i&&hi(i)){const n=t.mapper.toModelElement(i.parent);return a.enqueueChanges(()=>{e.setRanges([Zs.createIn(n)])}),!0}return!1}_setSelectionOverElement(t){this.editor.document.selection.setRanges([Zs.createOn(t)])}_getObjectElementNextToSelection(s){const e=this.editor.document,t=e.schema,n=e.selection,o=this.editor.data,i=hp.createFromSelection(n);o.modifySelection(i,{direction:s?'forward':'backward'});const r=s?i.focus.nodeBefore:i.focus.nodeAfter;return r instanceof Js&&t.objects.has(r.name)?r:null}_clearPreviouslySelectedWidgets(){for(const t of this._previouslySelected)t.removeClass(th);this._previouslySelected.clear()}}class lh extends Lg{refresh(){const t=this.editor.document.selection.getSelectedElement();this.isEnabled=Ti(t),this.value=Ti(t)&&t.hasAttribute('alt')&&t.getAttribute('alt')}execute(i){const e=this.editor.document,t=e.selection.getSelectedElement();e.enqueueChanges(()=>{const n=i.batch||e.batch();n.setAttribute(t,'alt',i.newValue)})}}class ch extends Ig{init(){this.editor.commands.add('imageTextAlternative',new lh(this.editor))}}class mh extends yg{constructor(n){super(n),this.set('text'),this.set('for');const e=this.bindTemplate;this.setTemplate({tag:'label',attributes:{class:['ck-label'],for:e.to('for')},children:[{text:e.to('text')}]})}}class uh extends yg{constructor(i,e){super(i);const t=`ck-input-${a()}`;this.set('label'),this.set('value'),this.set('isReadOnly',!1),this.labelView=this._createLabelView(t),this.inputView=this._createInputView(e,t);const n=this.bindTemplate;this.setTemplate({tag:'div',attributes:{class:[n.if('isReadOnly','ck-disabled')]},children:[this.labelView,this.inputView]})}_createLabelView(n){const e=new mh(this.locale);return e.for=n,e.bind('text').to(this,'label'),e}_createInputView(o,e){const t=new o(this.locale);return t.id=e,t.bind('value').to(this),t.bind('isReadOnly').to(this),t}select(){this.inputView.select()}focus(){this.inputView.focus()}}class ph extends yg{constructor(n){super(n),this.set('value'),this.set('id'),this.set('placeholder'),this.set('isReadOnly',!1);const e=this.bindTemplate;this.setTemplate({tag:'input',attributes:{type:'text',class:['ck-input','ck-input-text'],id:e.to('id'),placeholder:e.to('placeholder'),readonly:e.to('isReadOnly'),value:e.to('value')}})}select(){this.element.select()}focus(){this.element.focus()}}class gh extends yg{constructor(t){super(t);const e=this.locale.t;this.focusTracker=new cg,this.keystrokes=new Vp,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(e('Enregistrer')),this.saveButtonView.type='submit',this.cancelButtonView=this._createButton(e('Annuler'),'cancel'),this._focusables=new pg,this._focusCycler=new Tg({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:'shift + tab',focusNext:'tab'}}),this.saveButtonView.extendTemplate({attributes:{class:['ck-button-action']}}),this.setTemplate({tag:'form',attributes:{class:['cke-text-alternative-form'],tabindex:'-1'},children:[this.labeledInput,{tag:'div',attributes:{class:['cke-text-alternative-form__actions']},children:[this.saveButtonView,this.cancelButtonView]}]})}render(){super.render(),this.keystrokes.listenTo(this.element),Fi({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach((t)=>{this._focusables.add(t),this.focusTracker.add(t.element)})}_createButton(o,e){const t=new rf(this.locale);return t.label=o,t.withText=!0,e&&t.delegate('execute').to(this,e),t}_createLabeledInputView(){const n=this.locale.t,e=new uh(this.locale,ph);return e.label=n('Texte alternatif'),e}}const fh=To('px'),hh=Lp.document.body;class Iy extends yg{constructor(n){super(n);const e=this.bindTemplate;this.set('top',0),this.set('left',0),this.set('position','arrow_nw'),this.set('isVisible',!1),this.set('withArrow',!0),this.set('className'),this.content=this.createCollection(),this.setTemplate({tag:'div',attributes:{class:['ck-balloon-panel',e.to('position',(t)=>`ck-balloon-panel_${t}`),e.if('isVisible','ck-balloon-panel_visible'),e.if('withArrow','ck-balloon-panel_with-arrow'),e.to('className')],style:{top:e.to('top',fh),left:e.to('left',fh)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(a){this.show();const e=Iy.defaultPositions,t=Object.assign({},{element:this.element,positions:[e.southArrowNorthWest,e.southArrowNorthEast,e.northArrowSouthWest,e.northArrowSouthEast],limiter:hh,fitInViewport:!0},a),{top:n,left:s,name:l}=Ni(t);Object.assign(this,{top:n,left:s,position:l})}pin(t){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(t):this._stopPinning()},this._startPinning(t),this.listenTo(this,'change:isVisible',this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,'change:isVisible',this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(l){this.attachTo(l);const e=Li(l.target),d=l.limiter?Li(l.limiter):hh;this.listenTo(Lp.document,'scroll',(c,o)=>{const i=o.target,r=e&&i.contains(e),a=d&&i.contains(d);(r||a||!e||!d)&&this.attachTo(l)},{useCapture:!0}),this.listenTo(Lp.window,'resize',()=>{this.attachTo(l)})}_stopPinning(){this.stopListening(Lp.document,'scroll'),this.stopListening(Lp.window,'resize')}}Iy.arrowHorizontalOffset=30,Iy.arrowVerticalOffset=15,Iy.defaultPositions={northArrowSouth:(n,e)=>({top:ji(n,e),left:n.left+n.width/2-e.width/2,name:'arrow_s'}),northArrowSouthEast:(n,e)=>({top:ji(n,e),left:n.left+n.width/2-e.width+Iy.arrowHorizontalOffset,name:'arrow_se'}),northArrowSouthWest:(n,e)=>({top:ji(n,e),left:n.left+n.width/2-Iy.arrowHorizontalOffset,name:'arrow_sw'}),northWestArrowSouth:(n,e)=>({top:ji(n,e),left:n.left-e.width/2,name:'arrow_s'}),northWestArrowSouthWest:(n,e)=>({top:ji(n,e),left:n.left-Iy.arrowHorizontalOffset,name:'arrow_sw'}),northWestArrowSouthEast:(n,e)=>({top:ji(n,e),left:n.left-e.width+Iy.arrowHorizontalOffset,name:'arrow_se'}),northEastArrowSouth:(n,e)=>({top:ji(n,e),left:n.right-e.width/2,name:'arrow_s'}),northEastArrowSouthEast:(n,e)=>({top:ji(n,e),left:n.right-e.width+Iy.arrowHorizontalOffset,name:'arrow_se'}),northEastArrowSouthWest:(n,e)=>({top:ji(n,e),left:n.right-Iy.arrowHorizontalOffset,name:'arrow_sw'}),southArrowNorth:(n,e)=>({top:qi(n,e),left:n.left+n.width/2-e.width/2,name:'arrow_n'}),southArrowNorthEast:(n,e)=>({top:qi(n,e),left:n.left+n.width/2-e.width+Iy.arrowHorizontalOffset,name:'arrow_ne'}),southArrowNorthWest:(n,e)=>({top:qi(n,e),left:n.left+n.width/2-Iy.arrowHorizontalOffset,name:'arrow_nw'}),southWestArrowNorth:(n,e)=>({top:qi(n,e),left:n.left-e.width/2,name:'arrow_n'}),southWestArrowNorthWest:(n,e)=>({top:qi(n,e),left:n.left-Iy.arrowHorizontalOffset,name:'arrow_nw'}),southWestArrowNorthEast:(n,e)=>({top:qi(n,e),left:n.left-e.width+Iy.arrowHorizontalOffset,name:'arrow_ne'}),southEastArrowNorth:(n,e)=>({top:qi(n,e),left:n.right-e.width/2,name:'arrow_n'}),southEastArrowNorthEast:(n,e)=>({top:qi(n,e),left:n.right-e.width+Iy.arrowHorizontalOffset,name:'arrow_ne'}),southEastArrowNorthWest:(n,e)=>({top:qi(n,e),left:n.right-Iy.arrowHorizontalOffset,name:'arrow_nw'})};class _h extends Ig{static get pluginName(){return'ContextualBalloon'}init(){this.view=new Iy,this.positionLimiter=()=>{const n=this.editor.editing.view,e=n.selection.editableElement;return e?n.domConverter.mapViewToDom(e.root):null},this._stack=new Map,this.editor.ui.view.body.add(this.view),this.editor.ui.focusTracker.add(this.view.element)}get visibleView(){const t=this._stack.get(this.view.content.get(0));return t?t.view:null}hasView(t){return this._stack.has(t)}add(t){if(this.hasView(t.view))throw new ba('contextualballoon-add-view-exist: Cannot add configuration of the same view twice.');this.visibleView&&this.view.content.remove(this.visibleView),this._stack.set(t.view,t),this._show(t)}remove(n){if(!this.hasView(n))throw new ba('contextualballoon-remove-view-not-exist: Cannot remove configuration of not existing view.');if(this.visibleView===n){this.view.content.remove(n),this._stack.delete(n);const e=Array.from(this._stack.values()).pop();e?this._show(e):this.view.hide()}else this._stack.delete(n)}updatePosition(t){t&&(this._stack.get(this.visibleView).position=t),this.view.pin(this._getBalloonPosition())}_show({view:n,balloonClassName:e=''}){this.view.className=e,this.view.content.add(n),this.view.pin(this._getBalloonPosition())}_getBalloonPosition(){let t=ei(this._stack.values()).position;return t&&!t.limiter&&(t=Object.assign({},t,{limiter:this.positionLimiter})),t}}var yh=t(15),wh=t.n(yh),vh=t(16),kh=t.n(vh);class xh extends Ig{static get requires(){return[ch,_h]}static get pluginName(){return'ImageTextAlternative'}init(){this._createButton(),this._createForm()}_createButton(){const t=this.editor,i=t.commands.get('imageTextAlternative'),n=t.t;t.ui.componentFactory.add('imageTextAlternative',(o)=>{const e=new rf(o);return e.set({label:n('Changer le texte alternatif \xE0 l\u2019image'),icon:wh.a,tooltip:!0}),e.bind('isEnabled').to(i,'isEnabled'),this.listenTo(e,'execute',()=>this._showForm()),e})}_createForm(){const n=this.editor,e=n.editing.view;this._balloon=this.editor.plugins.get('ContextualBalloon'),this._form=new gh(n.locale),this._form.render(),this.listenTo(this._form,'submit',()=>{n.execute('imageTextAlternative',{newValue:this._form.labeledInput.inputView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,'cancel',()=>{this._hideForm(!0)}),this._form.keystrokes.set('Esc',(n,e)=>{this._hideForm(!0),e()}),this.listenTo(e,'render',()=>{Ci(e.selection)?this._isVisible&&zi(n):this._hideForm(!0)},{priority:'low'}),Ri({emitter:this._form,activator:()=>this._isVisible,contextElements:[this._form.element],callback:()=>this._hideForm()})}_showForm(){if(!this._isVisible){const o=this.editor,e=o.commands.get('imageTextAlternative'),t=this._form.labeledInput;this._balloon.hasView(this._form)||this._balloon.add({view:this._form,position:Hi(o)}),t.value=t.inputView.element.value=e.value||'',this._form.labeledInput.select()}}_hideForm(t){this._isVisible&&(this._balloon.remove(this._form),t&&this.editor.editing.view.focus())}get _isVisible(){return this._balloon.visibleView==this._form}}var Ah=t(17),Ch=t.n(Ah);class Th extends Ig{static get requires(){return[oh,dh,xh]}static get pluginName(){return'Image'}init(){const n=this.editor,e=n.plugins.get('ContextualToolbar');e&&this.listenTo(e,'show',(e)=>{Ci(n.editing.view.selection)&&e.stop()},{priority:'high'})}}class Ph extends Lg{execute(c){const e=this.editor,t=e.document,n=c.batch||t.batch(),o=c.file,i=t.selection,r=e.plugins.get(pf);t.enqueueChanges(()=>{const a=r.createLoader(o);if(!a)return;const p=new Js('image',{uploadId:a.id});let d;d=c.insertAt?new hp([new Zs(c.insertAt)]):t.selection,e.data.insertContent(p,d,n),p.parent&&i.setRanges([Zs.createOn(p)])})}}class Eh extends Ig{static get pluginName(){return'Notification'}init(){this.on('show:warning',(n,e)=>{window.alert(e.message)},{priority:'lowest'})}showSuccess(n,o={}){this._showNotification({message:n,type:'success',namespace:o.namespace,title:o.title})}showInfo(n,o={}){this._showNotification({message:n,type:'info',namespace:o.namespace,title:o.title})}showWarning(n,o={}){this._showNotification({message:n,type:'warning',namespace:o.namespace,title:o.title})}_showNotification(n){const e=`show:${n.type}`+(n.namespace?`:${n.namespace}`:'');this.fire(e,{message:n.message,type:n.type,title:n.title||''})}}class Sh extends Ig{static get requires(){return[pf,Eh]}init(){const a=this.editor,e=a.document,t=e.schema,r=a.plugins.get(pf);t.allow({name:'image',attributes:['uploadId'],inside:'$root'}),t.allow({name:'image',attributes:['uploadStatus'],inside:'$root'}),t.requireAttributes('image',['uploadId']),a.commands.add('imageUpload',new Ph(a)),a.editing.view.on('clipboardInput',(t,n)=>{if(Ki(n.dataTransfer))return;let s=new hp(n.targetRanges.map((e)=>a.editing.mapper.toModelRange(e)));for(const i of n.dataTransfer.files){const n=$i(s);Wi(i)&&(a.execute('imageUpload',{file:i,insertAt:n}),t.stop()),s=e.selection}}),a.editing.view.on('dragover',(n,e)=>{e.preventDefault()}),e.on('change',(o,a,t)=>{if('insert'===a||'reinsert'===a||'remove'===a)for(const o of t.range)if('elementStart'===o.type&&'image'===o.item.name){const t=o.item,n=t.getAttribute('uploadId');if(n){const o=r.loaders.get(n);o&&('insert'==a&&'idle'==o.status&&this.load(o,t),'remove'==a&&o.abort())}}})}load(l,d){function n(){c.enqueueChanges(()=>{c.batch('transparent').removeAttribute(d,'uploadId'),c.batch('transparent').removeAttribute(d,'uploadStatus')}),t.destroyLoader(l)}const e=this.editor,o=e.locale.t,c=e.document,t=e.plugins.get(pf),a=e.plugins.get(Eh);c.enqueueChanges(()=>{c.batch('transparent').setAttribute(d,'uploadStatus','reading')}),l.read().then((t)=>{const n=e.editing.mapper.toViewElement(d),o=n.getChild(0),i=l.upload();return o.setAttribute('src',t),e.editing.view.render(),c.enqueueChanges(()=>{c.batch('transparent').setAttribute(d,'uploadStatus','uploading')}),i}).then((a)=>{c.enqueueChanges(()=>{c.batch('transparent').setAttribute(d,'uploadStatus','complete'),c.batch('transparent').setAttribute(d,'src',a.default);let n=0;const e=Object.keys(a).filter((o)=>{const e=parseInt(o,10);if(!isNaN(e))return n=oa(n,e),!0}).map((e)=>`${a[e]} ${e}w`).join(', ');''!=e&&c.batch('transparent').setAttribute(d,'srcset',{data:e,width:n})}),n()}).catch((e)=>{'error'==l.status&&a.showWarning(e,{title:o('\xC9chec de l\'envoi'),namespace:'upload'}),n(),c.enqueueChanges(()=>{c.batch('transparent').remove(d)})})}}class Vh extends yg{constructor(t){super(t),this.buttonView=new rf(t),this._fileInputView=new Oh(t),this._fileInputView.bind('acceptedType').to(this),this._fileInputView.bind('allowMultipleFiles').to(this),this._fileInputView.delegate('done').to(this),this.setTemplate({tag:'span',attributes:{class:'ck-file-dialog-button'},children:[this.buttonView,this._fileInputView]}),this.buttonView.on('execute',()=>{this._fileInputView.open()})}focus(){this.buttonView.focus()}}class Oh extends yg{constructor(n){super(n),this.set('acceptedType'),this.set('allowMultipleFiles',!1);const e=this.bindTemplate;this.setTemplate({tag:'input',attributes:{class:['ck-hidden'],type:'file',tabindex:'-1',accept:e.to('acceptedType'),multiple:e.to('allowMultipleFiles')},on:{change:e.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire('done',this.element.files),this.element.value=''})}})}open(){this.element.click()}}var Rh=t(18),Fh=t.n(Rh);class Ih extends Ig{static get requires(){return[Sh]}init(){const a=this.editor,e=a.t;a.ui.componentFactory.add('insertImage',(n)=>{const t=new Vh(n),o=a.commands.get('imageUpload');return t.set({acceptedType:'image/*',allowMultipleFiles:!0}),t.buttonView.set({label:e('Ins\xE9rer une image'),icon:Fh.a,tooltip:!0}),t.bind('isEnabled').to(o),t.on('done',(e,t)=>{for(const n of Array.from(t)){const e=$i(a.document.selection);Wi(n)&&a.execute('imageUpload',{file:n,insertAt:e})}}),t})}}var Nh=t(19),Bh=t.n(Nh),Mh=t(20),Dh=t.n(Mh);class Lh extends Ig{static get requires(){return[Sh]}constructor(t){super(t),this.placeholder='data:image/svg+xml;utf8,'+encodeURIComponent(Bh.a)}init(){const t=this.editor;t.editing.modelToView.on('addAttribute:uploadStatus:image',(...t)=>this.uploadStatusChange(...t)),t.editing.modelToView.on('changeAttribute:uploadStatus:image',(...t)=>this.uploadStatusChange(...t))}uploadStatusChange(a,l,e){const c=this.editor,t=l.item,n=t.getAttribute('uploadId');if(e.consume(l.item,De(a.name))&&n){const o=c.plugins.get(pf),i=this.placeholder,e=l.attributeNewValue,a=c.editing.mapper.toViewElement(t);if('reading'==e){a.addClass('ck-appear','ck-infinite-progress','ck-image-upload-placeholder');const t=a.getChild(0);return void t.setAttribute('src',i)}if('uploading'==e){const i=o.loaders.get(n);if(i){const o=Ui();a.removeClass('ck-infinite-progress','ck-image-upload-placeholder'),a.appendChildren(o),i.on('change:uploadedPercent',(e,t,n)=>{o.setStyle('width',n+'%'),c.editing.view.render()})}return}const r=Qi(a);r?r.remove():a.removeClass('ck-infinite-progress'),a.removeClass('ck-appear','ck-image-upload-placeholder')}}}const jh=Symbol('progress-bar');class qh extends Ig{static get pluginName(){return'ImageUpload'}static get requires(){return[Ih,Lh]}}class zh extends Ig{static get requires(){return[Qf,Th,qh]}static get pluginName(){return'EasyImage'}}class Hh extends Lg{refresh(){const n=this.editor.document,e=ei(n.selection.getSelectedBlocks());this.value=!!e&&e.is('paragraph'),this.isEnabled=!!e&&Ji(e,n.schema)}execute(i={}){const a=this.editor.document;a.enqueueChanges(()=>{const t=i.batch||a.batch(),n=(i.selection||a.selection).getSelectedBlocks();for(const o of n)!o.is('paragraph')&&Ji(o,a.schema)&&t.rename(o,'paragraph')})}}class Wh extends Ig{static get pluginName(){return'Paragraph'}init(){const i=this.editor,a=i.document,e=i.data,t=i.editing;i.commands.add('paragraph',new Hh(i)),a.schema.registerItem('paragraph','$block'),Yo().for(e.modelToView,t.modelToView).fromElement('paragraph').toElement('p'),Zo().for(e.viewToModel).fromElement('p').toElement('paragraph'),e.viewToModel.on('element',Gi,{priority:'low'}),e.viewToModel.on('text',Gi,{priority:'lowest'}),e.viewToModel.on('element',Yi,{priority:'lowest'}),e.viewToModel.on('documentFragment',Yi,{priority:'lowest'}),a.on('change',(t,e,n,o)=>{'transparent'==o.type||Zi(a,o)}),a.on('changesDone',er,{priority:'lowest'}),i.on('dataReady',()=>{Zi(a,a.batch('transparent')),er()},{priority:'lowest'})}}Wh.paragraphLikeElements=new Set(['blockquote','dd','div','dt','h1','h2','h3','h4','h5','h6','li','p','td']);const $h=new Map;class Kh extends Lg{constructor(n,e){super(n),this.modelElement=e}refresh(){const t=ei(this.editor.document.selection.getSelectedBlocks());this.value=!!t&&t.is(this.modelElement),this.isEnabled=!!t&&tr(t,this.modelElement,this.editor.document.schema)}execute(i={}){const e=this.editor,a=e.document;a.enqueueChanges(()=>{const n=i.batch||a.batch(),t=Array.from(a.selection.getSelectedBlocks()).filter((t)=>tr(t,this.modelElement,a.schema));for(const o of t)o.is(this.modelElement)||n.rename(o,this.modelElement)})}}const Uh='paragraph';class Qh extends Ig{constructor(t){super(t),t.config.define('heading',{options:[{modelElement:'paragraph',title:'Paragraph',class:'ck-heading_paragraph'},{modelElement:'heading1',viewElement:'h2',title:'Heading 1',class:'ck-heading_heading1'},{modelElement:'heading2',viewElement:'h3',title:'Heading 2',class:'ck-heading_heading2'},{modelElement:'heading3',viewElement:'h4',title:'Heading 3',class:'ck-heading_heading3'}]})}static get requires(){return[Wh]}init(){const a=this.editor,e=a.data,t=a.editing,n=a.config.get('heading.options');for(const o of n)o.modelElement!==Uh&&(a.document.schema.registerItem(o.modelElement,'$block'),Yo().for(e.modelToView,t.modelToView).fromElement(o.modelElement).toElement(o.viewElement),Zo().for(e.viewToModel).fromElement(o.viewElement).toElement(o.modelElement),a.commands.add(o.modelElement,new Kh(a,o.modelElement)))}afterInit(){const s=this.editor,e=s.commands.get('enter'),l=s.config.get('heading.options');e&&this.listenTo(e,'afterExecute',(e,t)=>{const n=s.document.selection.getFirstPosition().parent,o=t.batch,i=l.some((t)=>n.is(t.modelElement));i&&!n.is(Uh)&&0===n.childCount&&o.rename(n,Uh)})}}class Jh{constructor(n,e){e&&Ls(this,e),n&&this.set(n)}}r(Jh,Ws);class Gh extends yg{constructor(){super(),this.items=this.createCollection(),this.focusTracker=new cg,this.keystrokes=new Vp,this._focusCycler=new Tg({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:'arrowup',focusNext:'arrowdown'}}),this.setTemplate({tag:'ul',attributes:{class:['ck-reset','ck-list']},children:this.items})}render(){super.render();for(const t of this.items)this.focusTracker.add(t.element);this.items.on('add',(n,e)=>{this.focusTracker.add(e.element)}),this.items.on('remove',(n,e)=>{this.focusTracker.remove(e.element)}),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}class Yh extends yg{constructor(){super(),this.set('tabindex',-1),this.keystrokes=new Vp;const t=this.bindTemplate;this.setTemplate({tag:'li',attributes:{class:['ck-list__item',t.to('class'),t.if('isActive','ck-list__item_active')],style:t.to('style'),tabindex:t.to('tabindex')},children:[{text:t.to('label')}],on:{click:t.to('execute')}})}render(){super.render();const t=(n,e)=>{this.fire('execute'),e()};this.keystrokes.listenTo(this.element),this.keystrokes.set('Enter',t),this.keystrokes.set('Space',t)}focus(){this.element.focus()}}class Xh extends yg{constructor(o,e,t){super(o),e.extendTemplate({attributes:{class:['ck-dropdown__button']}}),this.buttonView=e,this.panelView=t,this.set('isOpen',!1),this.focusTracker=new cg,this.keystrokes=new Vp,this.setTemplate({tag:'div',attributes:{class:['ck-dropdown']},children:[e,t]})}render(){super.render(),this.listenTo(this.buttonView,'execute',()=>{this.isOpen=!this.isOpen}),this.panelView.bind('isVisible').to(this,'isOpen'),this.keystrokes.listenTo(this.element),this.focusTracker.add(this.element);const t=(n,e)=>{this.isOpen&&(this.buttonView.focus(),this.isOpen=!1,e())};this.keystrokes.set('arrowdown',(n,e)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,e())}),this.keystrokes.set('arrowright',(n,e)=>{this.isOpen&&e()}),this.keystrokes.set('arrowleft',t),this.keystrokes.set('esc',t)}focus(){this.buttonView.focus()}}class Zh extends yg{constructor(n){super(n);const e=this.bindTemplate;this.set('isVisible',!1),this.children=this.createCollection(),this.setTemplate({tag:'div',attributes:{class:['ck-reset','ck-dropdown__panel',e.if('isVisible','ck-dropdown__panel-visible')]},children:this.children,on:{selectstart:e.to((t)=>t.preventDefault())}})}}var eb=t(21),tb=t.n(eb);class nb extends Ig{static get requires(){return[Wh,Qh]}static get pluginName(){return'Heading'}init(){const l=this.editor,e=new ug,d=this._getLocalizedOptions(),c=[],o=l.t,i=o('Choisir le titre'),t=o('En-t\xEAte');for(const n of d){const t=l.commands.get(n.modelElement),o=new Jh({commandName:n.modelElement,label:n.title,class:n.class});o.bind('isActive').to(t,'value'),e.add(o),c.push(t)}const r=new Jh({withText:!0,items:e,tooltip:t});r.bind('isEnabled').to(...rr(c,'isEnabled'),(...t)=>t.some((t)=>t)),r.bind('label').to(...rr(c,'value'),(...t)=>{const e=t.findIndex((t)=>t);return d[e]?d[e].title:i}),l.ui.componentFactory.add('headings',(e)=>{const t=or(r,e);return t.extendTemplate({attributes:{class:['ck-heading-dropdown']}}),this.listenTo(t,'execute',(e)=>{l.execute(e.source.commandName),l.editing.view.focus()}),t})}_getLocalizedOptions(){const o=this.editor,e=o.t,i={Paragraph:e('Paragraphe'),"Heading 1":e('Titre 1'),"Heading 2":e('Titre 2'),"Heading 3":e('Titre 3')};return o.config.get('heading.options').map((t)=>{const e=i[t.title];return e&&e!=t.title&&(t=Object.assign({},t,{title:e})),t})}}var ob=t(22),ib=t.n(ob);const rb={};Ls(rb,Va);const ab=new WeakMap,sb=Symbol('imageCaption');class db extends Ig{init(){const t=this.editor,e=t.document,n=t.editing.view,o=e.schema,i=t.data,r=t.editing,a=t.t;this._createCaption=cr(n,a('Saisissez la l\xE9gende de l\u2019image')),o.registerItem('caption','$block'),o.allow({name:'$inline',inside:'caption'}),o.allow({name:'caption',inside:'image'}),o.limits.add('caption'),e.on('change',pr),Zo().for(i.viewToModel).from(ur).toElement('caption'),i.modelToView.on('insert:caption',gr(new Gl('figcaption'),!1)),r.modelToView.on('insert:caption',gr(this._createCaption)),r.modelToView.on('insert',(n,e)=>this._fixCaptionVisibility(e.item),{priority:'high'}),r.modelToView.on('remove',(n,e)=>this._fixCaptionVisibility(e.sourcePosition.parent),{priority:'high'}),this.listenTo(n,'render',()=>this._updateCaptionVisibility(),{priority:'high'})}_updateCaptionVisibility(){const a=this.editor.editing.mapper;let e;this._lastSelectedCaption&&!this._lastSelectedCaption.childCount&&this._lastSelectedCaption.addClass('ck-hidden');const t=this.editor.document.selection,s=t.getSelectedElement();if(s&&s.is('image')){const t=mr(s);e=a.toViewElement(t)}const n=t.getFirstPosition(),o=hr(n.parent);o&&(e=a.toViewElement(o)),e&&(e.removeClass('ck-hidden'),this._lastSelectedCaption=e)}_fixCaptionVisibility(o){const i=hr(o),t=this.editor.editing.mapper;if(i){const n=t.toViewElement(i);n&&(i.childCount?n.removeClass('ck-hidden'):n.addClass('ck-hidden'))}}}var lb=t(23),cb=t.n(lb);class mb extends Ig{static get requires(){return[db]}static get pluginName(){return'ImageCaption'}}class ub extends Lg{constructor(n,e){super(n),this.style=e}refresh(){const t=this.editor.document.selection.getSelectedElement();this.isEnabled=Ti(t),this.value=!!t&&(this.style.isDefault?!t.hasAttribute('imageStyle'):t.getAttribute('imageStyle')==this.style.name)}execute(i={}){if(this.value)return;const e=this.editor.document,t=e.selection.getSelectedElement();e.enqueueChanges(()=>{const n=i.batch||e.batch();this.style.isDefault?n.removeAttribute(t,'imageStyle'):n.setAttribute(t,'imageStyle',this.style.name)})}}var pb=t(24),gb=t.n(pb),fb=t(25),hb=t.n(fb),bb=t(26),_b=t.n(bb),yb=t(27),wb=t.n(yb);class vb extends Ig{static get requires(){return[oh]}static get pluginName(){return'ImageStyleEngine'}init(){const s=this.editor,e=s.document,t=e.schema,n=s.data,o=s.editing;s.config.define('image.styles',['imageStyleFull','imageStyleSide']);const i=this.imageStyles;t.allow({name:'image',attributes:'imageStyle',inside:'$root'});const r=br(i);o.modelToView.on('addAttribute:imageStyle:image',r),n.modelToView.on('addAttribute:imageStyle:image',r),o.modelToView.on('changeAttribute:imageStyle:image',r),n.modelToView.on('changeAttribute:imageStyle:image',r),o.modelToView.on('removeAttribute:imageStyle:image',r),n.modelToView.on('removeAttribute:imageStyle:image',r),n.viewToModel.on('element:figure',_r(i),{priority:'low'});for(const e of i)s.commands.add(e.name,new ub(s,e))}get imageStyles(){if(this._cachedImageStyles)return this._cachedImageStyles;const i=[],e=this.editor,a=this.localizedDefaultStylesTitles,n=e.config.get('image.styles');for(let e of n)e=xr(e),a[e.title]&&(e.title=a[e.title]),i.push(e);return this._cachedImageStyles=i}get localizedDefaultStylesTitles(){const t=this.editor.t;return{"Full size image":t('Image taille r\xE9elle'),"Side image":t('Image sur le c\xF4t\xE9'),"Left aligned image":t('Image align\xE9e \xE0 gauche'),"Centered image":t('Image centr\xE9e'),"Right aligned image":t('Image align\xE9e a droite')}}}vb.defaultStyles={imageStyleFull:{name:'imageStyleFull',title:'Full size image',icon:gb.a,isDefault:!0},imageStyleSide:{name:'imageStyleSide',title:'Side image',icon:wb.a,className:'image-style-side'},imageStyleAlignLeft:{name:'imageStyleAlignLeft',title:'Left aligned image',icon:hb.a,className:'image-style-align-left'},imageStyleAlignCenter:{name:'imageStyleAlignCenter',title:'Centered image',icon:_b.a,className:'image-style-align-center'},imageStyleAlignRight:{name:'imageStyleAlignRight',title:'Right aligned image',icon:wb.a,className:'image-style-align-right'}},vb.defaultIcons={full:gb.a,left:hb.a,right:wb.a,center:_b.a};class kb extends Ig{static get requires(){return[vb]}static get pluginName(){return'ImageStyle'}init(){const n=this.editor,o=n.plugins.get(vb).imageStyles;for(const t of o)this._createButton(t)}_createButton(a){const e=this.editor,t=e.commands.get(a.name);e.ui.componentFactory.add(a.name,(n)=>{const o=new rf(n);return o.set({label:a.title,icon:a.icon,tooltip:!0}),o.bind('isEnabled').to(t,'isEnabled'),o.bind('isOn').to(t,'value'),this.listenTo(o,'execute',()=>e.execute(a.name)),o})}}class xb extends Ig{static get requires(){return[_h]}static get pluginName(){return'ImageToolbar'}afterInit(){const n=this.editor,e=n.config.get('image.toolbar');e&&e.length&&(this._balloon=this.editor.plugins.get('ContextualBalloon'),this._toolbar=new Eg,this._toolbar.extendTemplate({attributes:{class:'ck-editor-toolbar'}}),this._toolbar.fillFromConfig(e,n.ui.componentFactory),this.listenTo(n.editing.view,'render',()=>{this._checkIsVisible()},{priority:'low'}),this.listenTo(n.ui.focusTracker,'change:isFocused',()=>{this._checkIsVisible()},{priority:'low'}))}_checkIsVisible(){const t=this.editor;t.ui.focusTracker.isFocused?Ci(t.editing.view.selection)?this._showToolbar():this._hideToolbar():this._hideToolbar()}_showToolbar(){const t=this.editor;this._isVisible?zi(t):!this._balloon.hasView(this._toolbar)&&this._balloon.add({view:this._toolbar,position:Hi(t),balloonClassName:'ck-toolbar-container ck-editor-toolbar-container'})}_hideToolbar(){this._isVisible&&this._balloon.remove(this._toolbar)}get _isVisible(){return this._balloon.visibleView==this._toolbar}}class Ab extends Yp{constructor(t){super(t),this.domEventType='click'}onDomEvent(t){this.fire(t.type,t)}}class Cb extends ac{}class Tb extends Lg{refresh(){const t=this.editor.document;this.value=t.selection.getAttribute('linkHref'),this.isEnabled=t.schema.checkAttributeInSelection(t.selection,'linkHref')}execute(a){const r=this.editor.document,s=r.selection;r.enqueueChanges(()=>{const n=r.batch();if(s.isCollapsed){const o=s.getFirstPosition();if(s.hasAttribute('linkHref')){const e=Ar(s.getFirstPosition(),s.getAttribute('linkHref'));n.setAttribute(e,'linkHref',a),s.setRanges([e])}else{const t=new Ks(a,{linkHref:a});n.insert(o,t),s.setRanges([Zs.createOn(t)])}}else{const e=r.schema.getValidRanges(s.getRanges(),'linkHref');for(const o of e)n.setAttribute(o,'linkHref',a)}})}}class Pb extends Lg{refresh(){this.isEnabled=this.editor.document.selection.hasAttribute('linkHref')}execute(){const i=this.editor.document,e=i.selection;i.enqueueChanges(()=>{const t=e.isCollapsed?[Ar(e.getFirstPosition(),e.getAttribute('linkHref'))]:e.getRanges(),n=i.batch();for(const o of t)n.removeAttribute(o,'linkHref')})}}class Eb extends Ig{init(){const o=this.editor,e=o.data,t=o.editing;o.document.schema.allow({name:'$inline',attributes:'linkHref',inside:'$block'}),o.document.schema.allow({name:'$inline',attributes:'linkHref',inside:'$clipboardHolder'}),Yo().for(e.modelToView,t.modelToView).fromAttribute('linkHref').toElement((n)=>{const o=new Cb('a',{href:n});return o.priority=5,o}),Zo().for(e.viewToModel).from({name:'a',attribute:{href:/.?/}}).toAttribute((t)=>({key:'linkHref',value:t.getAttribute('href')})),o.commands.add('link',new Tb(o)),o.commands.add('unlink',new Pb(o))}}class Sb extends yg{constructor(t){super(t);const e=t.t;this.focusTracker=new cg,this.keystrokes=new Vp,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(e('Enregistrer')),this.saveButtonView.type='submit',this.cancelButtonView=this._createButton(e('Annuler'),'cancel'),this.unlinkButtonView=this._createButton(e('Supprimer le lien'),'unlink'),this._focusables=new pg,this._focusCycler=new Tg({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:'shift + tab',focusNext:'tab'}}),this.saveButtonView.extendTemplate({attributes:{class:['ck-button-action']}}),this.setTemplate({tag:'form',attributes:{class:['ck-link-form'],tabindex:'-1'},children:[this.urlInputView,{tag:'div',attributes:{class:['ck-link-form__actions']},children:[this.saveButtonView,this.cancelButtonView,this.unlinkButtonView]}]})}render(){super.render(),Fi({view:this});const t=[this.urlInputView,this.saveButtonView,this.cancelButtonView,this.unlinkButtonView];t.forEach((t)=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}_createUrlInput(){const n=this.locale.t,e=new uh(this.locale,ph);return e.label=n('URL du lien'),e.inputView.placeholder='https://example.com',e}_createButton(o,e){const t=new rf(this.locale);return t.label=o,t.withText=!0,e&&t.delegate('execute').to(this,e),t}}var Vb=t(28),Ob=t.n(Vb),Rb=t(29),Fb=t.n(Rb);const Ib='Ctrl+K';class Nb extends Ig{static get requires(){return[Eb,_h]}static get pluginName(){return'Link'}init(){const t=this.editor;t.editing.view.addObserver(Ab),this.formView=this._createForm(),this._balloon=t.plugins.get(_h),this._createToolbarLinkButton(),this._attachActions()}_createForm(){const i=this.editor,e=new Sb(i.locale),t=i.commands.get('link'),n=i.commands.get('unlink');return e.urlInputView.bind('value').to(t,'value'),e.urlInputView.bind('isReadOnly').to(t,'isEnabled',(t)=>!t),e.saveButtonView.bind('isEnabled').to(t),e.unlinkButtonView.bind('isEnabled').to(n),this.listenTo(e,'submit',()=>{i.execute('link',e.urlInputView.inputView.element.value),this._hidePanel(!0)}),this.listenTo(e,'unlink',()=>{i.execute('unlink'),this._hidePanel(!0)}),this.listenTo(e,'cancel',()=>this._hidePanel(!0)),e.keystrokes.set('Esc',(n,e)=>{this._hidePanel(!0),e()}),e}_createToolbarLinkButton(){const t=this.editor,i=t.commands.get('link'),n=t.t;t.keystrokes.set(Ib,(n,e)=>{e(),i.isEnabled&&this._showPanel(!0)}),t.ui.componentFactory.add('link',(o)=>{const e=new rf(o);return e.isEnabled=!0,e.label=n('Lien'),e.icon=Ob.a,e.keystroke=Ib,e.tooltip=!0,e.bind('isEnabled').to(i,'isEnabled'),this.listenTo(e,'execute',()=>this._showPanel(!0)),e})}_attachActions(){const t=this.editor.editing.view;this.listenTo(t,'click',()=>{const t=this._getSelectedLinkElement();t&&this._showPanel()}),this.editor.keystrokes.set('Tab',(n,e)=>{this._balloon.visibleView!==this.formView||this.formView.focusTracker.isFocused||(this.formView.focus(),e())},{priority:'high'}),this.editor.keystrokes.set('Esc',(n,e)=>{this._balloon.visibleView===this.formView&&(this._hidePanel(),e())}),Ri({emitter:this.formView,activator:()=>this._balloon.hasView(this.formView),contextElements:[this._balloon.view.element],callback:()=>this._hidePanel()})}_showPanel(l){const e=this.editor,t=e.commands.get('link'),n=e.commands.get('unlink'),o=e.editing,i=o.view,r=i.selection.isCollapsed,a=this._getSelectedLinkElement();this.listenTo(i,'render',()=>{const n=this._getSelectedLinkElement(),e=i.selection.isCollapsed;r&&!e||a!==n?this._hidePanel(!0):this._balloon.updatePosition(this._getBalloonPositionData())}),this._balloon.hasView(this.formView)?l&&this._balloon.visibleView===this.formView&&this.formView.urlInputView.select():(this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),l&&this.formView.urlInputView.select()),this.formView.unlinkButtonView.isVisible=n.isEnabled,this.formView.urlInputView.inputView.element.value=t.value||''}_hidePanel(t){this.stopListening(this.editor.editing.view,'render'),this._balloon.hasView(this.formView)&&(t&&this.editor.editing.view.focus(),this.stopListening(this.editor.editing.view,'render'),this._balloon.remove(this.formView))}_getBalloonPositionData(){const o=this.editor.editing.view,e=this._getSelectedLinkElement(),t=e?o.domConverter.mapViewToDom(e):o.domConverter.viewRangeToDom(o.selection.getFirstRange());return{target:t}}_getSelectedLinkElement(){const i=this.editor.editing.view.selection;if(i.isCollapsed)return Tr(i.getFirstPosition());else{const e=i.getFirstRange().getTrimmed(),t=Tr(e.start),n=Tr(e.end);return t&&t==n?ec.createIn(t).getTrimmed().isEqual(e)?t:null:null}}}class Bb extends Lg{constructor(n,e){super(n),this.type='bulleted'==e?'bulleted':'numbered'}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(a={}){const r=this.editor.document,s=Array.from(r.selection.getSelectedBlocks()).filter((t)=>Er(t,r.schema)),t=!0===this.value;r.enqueueChanges(()=>{const n=a.batch||r.batch();if(t){let a=s[s.length-1].nextSibling,r=ta,t=[];for(;a&&'listItem'==a.name&&0!==a.getAttribute('indent');){const o=a.getAttribute('indent');o<r&&(r=o);const n=o-r;t.push({element:a,indent:n}),a=a.nextSibling}t=t.reverse();for(const o of t)n.setAttribute(o.element,'indent',o.indent)}if(!t){let n=ta;for(const e of s)e.is('listItem')&&e.getAttribute('indent')<n&&(n=e.getAttribute('indent'));n=0===n?1:n,Pr(s,!0,n),Pr(s,!1,n)}for(const o of s.reverse())t&&'listItem'==o.name?n.rename(o,'paragraph'):t||'listItem'==o.name?t||'listItem'!=o.name||o.getAttribute('type')==this.type||n.setAttribute(o,'type',this.type):n.setAttribute(o,'type',this.type).setAttribute(o,'indent',0).rename(o,'listItem')})}_getValue(){const t=ei(this.editor.document.selection.getSelectedBlocks());return!!t&&t.is('listItem')&&t.getAttribute('type')==this.type}_checkEnabled(){if(this.value)return!0;const o=this.editor.document.selection,e=this.editor.document.schema,t=ei(o.getSelectedBlocks());return!!t&&Er(t,e)}}class Mb extends Lg{constructor(n,e){super(n),this._indentBy='forward'==e?1:-1}refresh(){this.isEnabled=this._checkEnabled()}execute(){const o=this.editor.document,i=o.batch();let a=Array.from(o.selection.getSelectedBlocks());o.enqueueChanges(()=>{const n=a[a.length-1];for(let e=n.nextSibling;e&&'listItem'==e.name&&e.getAttribute('indent')>n.getAttribute('indent');)a.push(e),e=e.nextSibling;0>this._indentBy&&(a=a.reverse());for(const t of a){const e=t.getAttribute('indent')+this._indentBy;0>e?i.rename(t,'paragraph'):i.setAttribute(t,'indent',e)}0>this._indentBy&&(a=a.reverse());for(const t of a)Sr(t,i)})}_checkEnabled(){const i=ei(this.editor.document.selection.getSelectedBlocks());if(!i||!i.is('listItem'))return!1;if(0<this._indentBy){const e=i.getAttribute('indent'),t=i.getAttribute('type');for(let n=i.previousSibling;n&&n.is('listItem')&&n.getAttribute('indent')>=e;){if(n.getAttribute('indent')==e)return n.getAttribute('type')==t;n=n.previousSibling}return!1}return!0}}class Db extends Gl{constructor(n,e){super('li',n,e),this.getFillerOffset=Or}}class Lb extends Ig{static get requires(){return[Wh]}init(){const i=this.editor,e=i.document.schema;e.registerItem('listItem','$block'),e.allow({name:'listItem',inside:'$root',attributes:['type','indent']}),e.requireAttributes('listItem',['type','indent']);const t=i.data,a=i.editing;this.editor.document.on('change',Hr(this.editor.document),{priority:'high'}),this.editor.document.on('change',(o,e,t)=>{if('move'==e)for(const n of t.range.getItems())n.is('listItem')&&a.mapper.unbindModelElement(n)},{priority:'high'}),a.mapper.registerViewToModelLength('li',ea),t.mapper.registerViewToModelLength('li',ea),a.mapper.on('modelToViewPosition',qr),a.mapper.on('viewToModelPosition',zr),t.mapper.on('modelToViewPosition',qr),a.modelToView.on('insert',Br,{priority:'high'}),a.modelToView.on('insert:listItem',Rr),t.modelToView.on('insert',Br,{priority:'high'}),t.modelToView.on('insert:listItem',Rr),a.modelToView.on('changeAttribute:type:listItem',Fr),t.modelToView.on('changeAttribute:type:listItem',Fr),a.modelToView.on('remove:listItem',Ir),a.modelToView.on('remove',Mr,{priority:'low'}),t.modelToView.on('remove:listItem',Ir),t.modelToView.on('remove',Mr,{priority:'low'}),a.modelToView.on('changeAttribute:indent:listItem',Nr),t.modelToView.on('changeAttribute:indent:listItem',Nr),t.viewToModel.on('element:ul',Lr,{priority:'high'}),t.viewToModel.on('element:ol',Lr,{priority:'high'}),t.viewToModel.on('element:li',jr,{priority:'high'}),t.viewToModel.on('element:li',Dr),t.on('insertContent',Kr,{priority:'high'}),i.commands.add('numberedList',new Bb(i,'numbered')),i.commands.add('bulletedList',new Bb(i,'bulleted')),i.commands.add('indentList',new Mb(i,'forward')),i.commands.add('outdentList',new Mb(i,'backward'))}}var jb=t(30),qb=t.n(jb),zb=t(31),Hb=t.n(zb);class Wb extends Ig{static get requires(){return[Lb]}static get pluginName(){return'List'}init(){const n=this.editor.t;this._addButton('numberedList',n('Liste num\xE9rot\xE9e'),qb.a),this._addButton('bulletedList',n('Liste \xE0 puces'),Hb.a),this.listenTo(this.editor.editing.view,'enter',(i,e)=>{const t=this.editor.document,n=t.selection.getLastPosition().parent;t.selection.isCollapsed&&'listItem'==n.name&&n.isEmpty&&(this.editor.execute('outdentList'),e.preventDefault(),i.stop())}),this.listenTo(this.editor.editing.view,'delete',(i,e)=>{if('backward'===e.direction){const t=this.editor.document.selection;if(t.isCollapsed){const a=t.getFirstPosition();if(a.isAtStart){const t=a.parent;if('listItem'===t.name){const n=t.previousSibling&&'listItem'===t.previousSibling.name;n||(this.editor.execute('outdentList'),e.preventDefault(),i.stop())}}}}},{priority:'high'});const e=(i)=>(e,t)=>{const n=this.editor.commands.get(i);n.isEnabled&&(this.editor.execute(i),t())};this.editor.keystrokes.set('Tab',e('indentList')),this.editor.keystrokes.set('Shift+Tab',e('outdentList'))}_addButton(a,e,s){const r=this.editor,o=r.commands.get(a);r.ui.componentFactory.add(a,(i)=>{const l=new rf(i);return l.set({label:e,icon:s,tooltip:!0}),l.bind('isOn','isEnabled').to(o,'value','isEnabled'),this.listenTo(l,'execute',()=>r.execute(a)),l})}}class $b extends Fg{}e['default']=$b,$b.build={plugins:[mf,_f,kf,Vf,Nf,zf,zh,nb,Th,mb,kb,xb,Nb,Wb,Wh,qh],config:{toolbar:{items:['headings','bold','italic','link','bulletedList','numberedList','insertimage','blockQuote','undo','redo']},image:{toolbar:['imageStyleFull','imageStyleSide','|','imageTextAlternative']},ckfinder:{uploadUrl:'https://cksource.com/weuy2g4ryt278ywiue/core/connector/php/connector.php?command=QuickUpload&type=Files&responseType=json'}}}},function(n){var e=function(){return this}();try{e=e||Function('return this')()||(1,eval)('this')}catch(t){'object'==typeof window&&(e=window)}n.exports=e},function(n,e){'use strict';e.a=function(t){return t&&t.Object===Object?t:null}},function(o,u,t){'use strict';(function(n){var m=t(6),o=t(0),i={function:!0,object:!0},r=i[typeof p]&&p&&!p.nodeType?p:void 0,a=i[typeof n]&&n&&!n.nodeType?n:void 0,s=a&&a.exports===r?r:void 0,d=s?o.a.Buffer:void 0,l=d?function(t){return t instanceof d}:Object(m.a)(!1);u.a=l}).call(u,t(1)(o))},function(n,e){'use strict';e.a=function(t){return function(){return t}}},function(){},function(t){t.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 10l8 6-1-3.982c3.417 0 8.616.869 10 3.982 0-5.983-6.601-7.96-10-7.96 0-.85 1-3.32 1-4.04l-8 6z" fill="#454545" fill-rule="evenodd"/></svg>'},function(t){t.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 16l1-3.982c-3.417 0-8.616.869-10 3.982 0-5.983 6.601-7.96 10-7.96 0-.85-1-3.32-1-4.04l8 6-8 6z" fill="#454545" fill-rule="evenodd"/></svg>'},function(t){t.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.135 10.409c.361.248.654.56.88.934.225.375.338.816.338 1.324 0 .609-.128 1.123-.385 1.543-.256.42-.624.751-1.103.994a5.908 5.908 0 0 1-1.755.55c-.663.107-1.442.16-2.338.16H4.539v-.66a22.5 22.5 0 0 0 .66-.076c.265-.033.45-.073.558-.118.208-.085.35-.196.427-.334.076-.138.114-.317.114-.537V5.732c0-.203-.031-.372-.093-.507s-.211-.254-.448-.355a3.326 3.326 0 0 0-.61-.182 14.136 14.136 0 0 0-.608-.114v-.66h6.52c1.64 0 2.825.226 3.552.677.727.45 1.09 1.116 1.09 1.995 0 .406-.08.763-.244 1.07a2.388 2.388 0 0 1-.702.8 4.214 4.214 0 0 1-.99.54c-.383.153-.795.28-1.234.381v.16c.44.046.896.143 1.37.292.473.15.885.343 1.234.58zm-2.723-3.611c0-.665-.187-1.184-.562-1.556-.375-.372-.937-.558-1.687-.558-.107 0-.247.004-.419.012l-.444.021v4.449h.44c.913 0 1.587-.213 2.021-.639.434-.425.651-1.002.651-1.73zm.592 5.759c0-.835-.248-1.475-.744-1.92-.496-.445-1.21-.668-2.14-.668a22.977 22.977 0 0 0-.82.034v4.389c.05.208.209.385.474.528.265.144.586.216.964.216.67 0 1.216-.225 1.636-.676.42-.452.63-1.086.63-1.903z" fill="#454545" fill-rule="evenodd"/></svg>'},function(t){t.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M13.825 3.914l-.126.558a5.701 5.701 0 0 0-.685.076c-.282.045-.49.088-.626.127-.237.073-.406.186-.508.338a1.586 1.586 0 0 0-.22.5l-2.03 8.769a1.24 1.24 0 0 0-.034.27c.001.13.03.24.086.33.056.09.157.17.304.237.085.04.27.086.558.14.288.053.502.086.643.097l-.127.558H5.656l.127-.558.677-.05c.293-.023.501-.057.625-.102a1.11 1.11 0 0 0 .5-.326c.112-.138.188-.306.228-.503l2.02-8.778a1.428 1.428 0 0 0 .035-.305.59.59 0 0 0-.072-.295c-.048-.085-.148-.161-.3-.229a3.457 3.457 0 0 0-.622-.19 5.001 5.001 0 0 0-.58-.106l.128-.558h5.403z" fill="#454545" fill-rule="evenodd"/></svg>'},function(t){t.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.061 15.51v-.882c1.395-.847 2.345-1.633 2.85-2.358.37-.533.554-1.162.554-1.887 0-.437-.082-.759-.246-.964-.15-.205-.328-.307-.533-.307-.137 0-.328.048-.574.143-.37.123-.67.185-.902.185-.547 0-1.033-.205-1.456-.615-.424-.41-.636-.923-.636-1.538 0-.698.212-1.238.636-1.62a3.002 3.002 0 0 1 2.05-.78c.93 0 1.757.39 2.482 1.17.724.778 1.087 1.742 1.087 2.89 0 1.614-.602 3.084-1.805 4.41-.807.875-1.976 1.593-3.507 2.153zm-8.386 0v-.882c1.394-.847 2.345-1.633 2.85-2.358.37-.533.554-1.162.554-1.887 0-.437-.082-.759-.246-.964-.15-.205-.328-.307-.533-.307-.137 0-.328.048-.574.143-.37.123-.67.185-.903.185-.547 0-1.032-.205-1.456-.615-.424-.41-.636-.923-.636-1.538 0-.698.212-1.238.636-1.62a3.002 3.002 0 0 1 2.051-.78c.93 0 1.757.39 2.481 1.17.725.778 1.087 1.742 1.087 2.89 0 1.614-.601 3.084-1.804 4.41-.807.875-1.976 1.593-3.507 2.153z" fill="#454545" fill-rule="evenodd"/></svg>'},function(){},function(){},function(t){t.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M5.414 6.749L2.903 4.237a.49.49 0 1 1 .694-.694L6.394 6.34a10.662 10.662 0 0 1 2.127-.53c.366-.051.734-.081 1.103-.095a10.628 10.628 0 0 1 1.524.07c1.109.134 2.204.449 3.243.936a9.65 9.65 0 0 1 2.12 1.331c.276.231.542.484.784.766.18.211.349.439.488.692.169.307.301.664.301 1.039 0 .375-.132.732-.301 1.039a4.143 4.143 0 0 1-.488.691 6.668 6.668 0 0 1-.784.767 9.628 9.628 0 0 1-2.092 1.318l2.196 2.197a.49.49 0 1 1-.694.694l-2.485-2.484-.008.003-.931-.931.009-.003-6.215-6.215a9.887 9.887 0 0 0-.945.444l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.483 8.596a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2 1.497 1.497 0 0 0-.108.241.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226 2.613 2.613 0 0 0 .234.379l3.463 3.594a10.565 10.565 0 0 1-2.125-1 9.096 9.096 0 0 1-1.015-.721 6.672 6.672 0 0 1-.798-.764 4.325 4.325 0 0 1-.502-.69c-.184-.319-.329-.693-.329-1.089 0-.375.131-.732.301-1.039.139-.253.307-.481.488-.692.225-.263.471-.5.728-.719a9.538 9.538 0 0 1 2.096-1.341l.019-.009zm6.674.401a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112 6.86 6.86 0 0 0 .727-.613c.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286a1.966 1.966 0 0 0 .148-.292.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891 10.119 10.119 0 0 0-1.027-.301zm-2.85.21l-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.449 2.449 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>'},function(){},function(){},function(t){t.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 14.994C2 16.102 2.895 17 3.994 17h12.012A2 2 0 0 0 18 14.994V5.006A2.001 2.001 0 0 0 16.006 3H3.994A2 2 0 0 0 2 5.006v9.988zm1-9.992C3 4.45 3.45 4 4.007 4h11.986A1.01 1.01 0 0 1 17 5.002v9.996C17 15.55 16.55 16 15.993 16H4.007A1.01 1.01 0 0 1 3 14.998V5.002zm1.024 10H16v-3.096l-2.89-4.263-3.096 5.257-3.003-2.103L4 13.96l.024 1.043zM6.406 6A1.4 1.4 0 0 0 5 7.393a1.4 1.4 0 0 0 1.406 1.393 1.4 1.4 0 0 0 1.407-1.393A1.4 1.4 0 0 0 6.406 6z" fill="#454545" fill-rule="evenodd"/></svg>'},function(t){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 250"><g fill="none" fill-rule="evenodd"><rect width="700" height="250" fill="#F7F7F7" rx="4"/><text fill="#5F6F77" font-family="Arial,sans-serif" font-size="24"><tspan x="247.9" y="135">Uploading image\u2026</tspan></text></g></svg>\n'},function(){},function(){},function(){},function(){},function(t){t.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h16v1H2v-1zm15-2H3V6h14v8zm-1-7H4v6h12V7zM2 3h16v1H2V3z"/></svg>'},function(t){t.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 15h16v1H2v-1zm11-3h5v1h-5v-1zm-2 1H2V6h9v7zm-1-6H3v5h7V7zm3 2h5v1h-5V9zm0-3h5v1h-5V6zM2 3h16v1H2V3z"/></svg>'},function(t){t.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M2 15h16v1H2v-1zm13-2H5V6h10v7zm-1-6H6v5h8V7zM2 3h16v1H2V3z" fill-rule="nonzero"/></svg>'},function(t){t.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 16H2v-1h16v1zM6.978 13H2v-1h4.978v1zM18 6v7H9V6h9zm-1 6V7h-7v5h7zM6.978 10H2V9h4.978v1zm0-3H2V6h4.978v1zM18 4H2V3h16v1z"/></svg>'},function(t){t.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g fill="#222" fill-rule="evenodd"><path d="M14.2 10.956l1.227-1.227a3.995 3.995 0 0 0-.002-5.654 4 4 0 0 0-5.654-.002L7.698 6.145a3.995 3.995 0 0 0 .003 5.654c.39.39.84.682 1.32.878l-.305-.307.638-.638a2.99 2.99 0 0 1-.946-.64 2.995 2.995 0 0 1-.003-4.24l2.073-2.072a3 3 0 0 1 4.242 4.242l-1.226 1.227.707.707z"/><path d="M10.166 7.405c.41.192.795.457 1.133.796a3.995 3.995 0 0 1 .003 5.654l-2.073 2.072a4 4 0 0 1-5.654-.002 3.995 3.995 0 0 1-.002-5.654l1.362-1.363.707.707-1.362 1.363a3 3 0 0 0 4.243 4.243l2.072-2.073a2.995 2.995 0 0 0-.003-4.24 2.987 2.987 0 0 0-1.196-.733l.77-.77z"/></g></svg>'},function(){},function(t){t.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 17h10v-1H7v1zM6 4v1h13V4H6zm1 6v1h11v-1H7zM2 2.5c0 .277.223.5.5.5H3v3.5a.499.499 0 1 0 1 0v-4c0-.277-.223-.5-.5-.5h-1c-.277 0-.5.223-.5.5zM2.5 8a.499.499 0 1 0 0 1H4v1H2.5c-.277 0-.5.223-.5.5v2c0 .277.223.5.5.5h2a.499.499 0 1 0 0-1H3v-1h1.5a.46.46 0 0 0 .188-.031.45.45 0 0 0 .28-.281A.461.461 0 0 0 5 10.5v-2a.46.46 0 0 0-.031-.187.45.45 0 0 0-.282-.282.463.463 0 0 0-.125-.03H2.5V8zm2.352 10.853a.493.493 0 0 0 .148-.35v-4.005A.493.493 0 0 0 4.505 14h-2.01a.494.494 0 0 0-.495.5c0 .268.222.5.495.5H4v1H2.495a.494.494 0 0 0-.495.5c0 .268.222.5.495.5H4v1H2.495a.494.494 0 0 0-.495.5c0 .268.222.5.495.5h2.01a.49.49 0 0 0 .351-.146z" fill="#454545" fill-rule="evenodd"/></svg>'},function(t){t.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6 16v1h10v-1H6zM6 4v1h12V4H6zm0 6v1h11v-1H6zM1 4.5C1 3.672 1.666 3 2.5 3 3.328 3 4 3.666 4 4.5 4 5.328 3.334 6 2.5 6 1.672 6 1 5.334 1 4.5zm0 6C1 9.672 1.666 9 2.5 9c.828 0 1.5.666 1.5 1.5 0 .828-.666 1.5-1.5 1.5-.828 0-1.5-.666-1.5-1.5zm0 6c0-.828.666-1.5 1.5-1.5.828 0 1.5.666 1.5 1.5 0 .828-.666 1.5-1.5 1.5-.828 0-1.5-.666-1.5-1.5z" fill="#454545" fill-rule="evenodd"/></svg>'}])['default']})},function(e,t,n){'use strict';(function(t){var e=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(e);(function(){function n(n,e){t.ajax({url:'/admin/page/tag/'+t(n.currentTarget).data('id'),method:'POST',data:{value:e.tag},success:function(e){console.log(e)}})}function i(n,e){t.ajax({url:'/admin/page/tag/'+t(n.currentTarget).data('id'),method:'DELETE',data:{value:e.tag},success:function(e){console.log(e)}})}if(t('#page-updatable').length){var e=t('#page-updatable');e.on('change','input.page-name',function(e){e.preventDefault();var n=t(this);t.ajax({url:t(this).closest('form').attr('action'),method:'POST',data:{name:t(this).val()},success:function(e){if(!0===e.success){var o=location.protocol+'//'+location.host+location.pathname;document.location.href=o+'?orderby=updated&direction=desc'}else{var i=t('<div class="red-text text-darken-1 errors mb-1"></div>');t.each(e.errors,function(e,t){i.append(t+'<br>')}),i.insertAfter(n)}}})})}t('.module-adder').length&&t('.module-adder').on('click','.module-item',function(){var e=t(this).closest('.module-adder'),n='<div class="d-f jc-c">'+(0,o.default)()+'</div>',i=t(this).data('page-id'),a=t(this).data('module-id');t(e).css({opacity:0}),t(n).insertAfter(e),t.ajax({url:'/admin/page/ajouter-module',method:'POST',data:{pageId:i,moduleId:a},success:function(n){!0===n.success?document.location.reload():(t(e).next().remove(),t(e).css({opacity:1}),alert(n.message))}})}),t.each(t('.chips-placeholder'),function(e,n){!0===t(n).data('has-tags')?t.ajax({url:'/admin/page/get-tags/'+t(n).data('id'),success:function(e){for(var o=[],a=0;a<e.length;a++)o.push({tag:e[a]});t(n).material_chip({data:o,placeholder:'Ajouter 1 tag'})}}):t(n).material_chip({placeholder:'Ajouter 1 tag'})}),t('.chips-placeholder').on('chip.add',function(t,e){n(t,e)}),t('.chips-placeholder').on('chip.delete',function(t,e){i(t,e)})})()}).call(t,n(0))},function(e,t,n){'use strict';(function(e){(function(){if(e('#property-updatable').length){var t=e('#property-updatable');t.on('change','input.updatable-item',function(t){t.preventDefault();var n=e(this),o=n.data('namespace'),i=n.data('id'),a=n.data('method');e.ajax({url:e(this).closest('form').attr('action'),method:'POST',data:{namespace:o,id:i,method:a,value:e(this).val()},success:function(t){if(!0===t.success)console.log(t),document.location.reload();else{var o=e('<div class="red-text text-darken-1 errors mb-1"></div>');e.each(t.errors,function(e,t){o.append(t+'<br>')}),o.insertAfter(n)}}})})}})()}).call(t,n(0))},function(e,t,n){'use strict';(function(t){var e=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(e),i=n(2);(function(){t(document).on('click','#copy-child',function(n){var e=t(this);n.preventDefault(),t(this).replaceWith('<div>'+(0,o.default)()+'</div>'),t('form#form-update-module').submit(function(n){return n.preventDefault(),t('.textarea-ckeditor.html').length&&(0,i.updateInstances)(),t.post(document.URL,t(this).serialize(),function(n){if(!0===n.success){var o=t(e).data('name'),i=t(e).data('original');t.ajax({url:'/admin/module/clone-child',method:'POST',data:{name:o,original:i},success:function(e){!0===e.success?document.location.reload():console.log(e)}})}},'json'),!1}),t('form#form-update-module').submit()});var e=t('.children-module-container'),n=function(){!0===t(e).data('positionable')&&(d=t(e).find('.sub-module'),l=t(d).length,t(d).find('.sortable-action').remove(),t.each(d,function(e,n){var o='';0!==e&&(o+='<a href="#" class="sortable-action up "><i class="material-icons">arrow_upward</i></a>'),e!==l-1&&(o+='<a href="#" class="sortable-action down"><i class="material-icons ">arrow_downward</i></a>'),t(n).append('<div class="">'+o+'</div>')}))},a=function(){t.each(d,function(e,n){var o=t(n).find('[name]');t.each(o,function(n,o){var i=t(o).attr('name'),a=i.replace(/(\[\d+\])/,'['+e+']');t(o).attr('name',a)})})},r=function(o){var i=t(o).prev('.sub-module');o.insertBefore(i),d=t(e).find('.sub-module'),n(),a()},s=function(o){var i=t(o).next('.sub-module');o.insertAfter(i),d=t(e).find('.sub-module'),n(),a()},l,d;t(e).length&&(n(),t(e).on('click','.sortable-action.up',function(n){n.preventDefault(),r(t(this).closest('.sub-module'))}),t(e).on('click','.sortable-action.down',function(n){n.preventDefault(),s(t(this).closest('.sub-module'))}))})()}).call(t,n(0))},function(){}]);